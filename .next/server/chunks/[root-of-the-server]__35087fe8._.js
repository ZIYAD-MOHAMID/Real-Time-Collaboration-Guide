module.exports=[10863,(e,t,r)=>{"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),r.PrefixingKeyValueCache=void 0;let i=Symbol("prefixesAreUnnecessaryForIsolation");class s{constructor(e,t){this.wrapped=e,s.prefixesAreUnnecessaryForIsolation(e)?(this.prefix="",this[i]=!0):this.prefix=t}get(e){return this.wrapped.get(this.prefix+e)}set(e,t,r){return this.wrapped.set(this.prefix+e,t,r)}delete(e){return this.wrapped.delete(this.prefix+e)}static prefixesAreUnnecessaryForIsolation(e){return i in e}static cacheDangerouslyDoesNotNeedPrefixesForIsolation(e){return new o(e)}}r.PrefixingKeyValueCache=s;class o{constructor(e){this.wrapped=e,this[n]=!0}get(e){return this.wrapped.get(e)}set(e,t,r){return this.wrapped.set(e,t,r)}delete(e){return this.wrapped.delete(e)}}n=i},23679,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LRUCache=void 0;let n="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,i=new Set,s="object"==typeof process&&process?process:{},o=(e,t,r,n)=>{"function"==typeof s.emitWarning?s.emitWarning(e,t,r,n):console.error(`[${r}] ${t}: ${e}`)},a=globalThis.AbortController,l=globalThis.AbortSignal;if(void 0===a){l=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},a=class{constructor(){t()}signal=new l;abort(e){if(!this.signal.aborted){for(let t of(this.signal.reason=e,this.signal.aborted=!0,this.signal._onabort))t(e);this.signal.onabort?.(e)}}};let e=s.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{e&&(e=!1,o("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}Symbol("type");let u=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),c=e=>u(e)?e<=256?Uint8Array:e<=65536?Uint16Array:e<=0x100000000?Uint32Array:e<=Number.MAX_SAFE_INTEGER?d:null:null;class d extends Array{constructor(e){super(e),this.fill(0)}}class p{heap;length;static #e=!1;static create(e){let t=c(e);if(!t)return[];p.#e=!0;let r=new p(e,t);return p.#e=!1,r}constructor(e,t){if(!p.#e)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class f{#t;#r;#n;#i;#s;#o;#a;#l;get perf(){return this.#l}ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#u;#c;#d;#p;#f;#h;#m;#y;#g;#v;#T;#E;#_;#b;#S;#I;#O;#N;#w;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#b,autopurgeTimers:e.#S,sizes:e.#E,keyMap:e.#d,keyList:e.#p,valList:e.#f,next:e.#h,prev:e.#m,get head(){return e.#y},get tail(){return e.#g},free:e.#v,isBackgroundFetch:t=>e.#A(t),backgroundFetch:(t,r,n,i)=>e.#P(t,r,n,i),moveToTail:t=>e.#R(t),indexes:t=>e.#x(t),rindexes:t=>e.#L(t),isStale:t=>e.#D(t)}}get max(){return this.#t}get maxSize(){return this.#r}get calculatedSize(){return this.#c}get size(){return this.#u}get fetchMethod(){return this.#o}get memoMethod(){return this.#a}get dispose(){return this.#n}get onInsert(){return this.#i}get disposeAfter(){return this.#s}constructor(e){const{max:t=0,ttl:r,ttlResolution:s=1,ttlAutopurge:a,updateAgeOnGet:l,updateAgeOnHas:d,allowStale:h,dispose:m,onInsert:y,disposeAfter:g,noDisposeOnSet:v,noUpdateTTL:T,maxSize:E=0,maxEntrySize:_=0,sizeCalculation:b,fetchMethod:S,memoMethod:I,noDeleteOnFetchRejection:O,noDeleteOnStaleGet:N,allowStaleOnFetchRejection:w,allowStaleOnFetchAbort:A,ignoreFetchAbort:P,perf:R}=e;if(void 0!==R&&"function"!=typeof R?.now)throw TypeError("perf option must have a now() method if specified");if(this.#l=R??n,0!==t&&!u(t))throw TypeError("max option must be a nonnegative integer");const x=t?c(t):Array;if(!x)throw Error("invalid max value: "+t);if(this.#t=t,this.#r=E,this.maxEntrySize=_||this.#r,this.sizeCalculation=b,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw TypeError("sizeCalculation set to non-function")}if(void 0!==I&&"function"!=typeof I)throw TypeError("memoMethod must be a function if defined");if(this.#a=I,void 0!==S&&"function"!=typeof S)throw TypeError("fetchMethod must be a function if specified");if(this.#o=S,this.#O=!!S,this.#d=new Map,this.#p=Array(t).fill(void 0),this.#f=Array(t).fill(void 0),this.#h=new x(t),this.#m=new x(t),this.#y=0,this.#g=0,this.#v=p.create(t),this.#u=0,this.#c=0,"function"==typeof m&&(this.#n=m),"function"==typeof y&&(this.#i=y),"function"==typeof g?(this.#s=g,this.#T=[]):(this.#s=void 0,this.#T=void 0),this.#I=!!this.#n,this.#w=!!this.#i,this.#N=!!this.#s,this.noDisposeOnSet=!!v,this.noUpdateTTL=!!T,this.noDeleteOnFetchRejection=!!O,this.allowStaleOnFetchRejection=!!w,this.allowStaleOnFetchAbort=!!A,this.ignoreFetchAbort=!!P,0!==this.maxEntrySize){if(0!==this.#r&&!u(this.#r))throw TypeError("maxSize must be a positive integer if specified");if(!u(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#M()}if(this.allowStale=!!h,this.noDeleteOnStaleGet=!!N,this.updateAgeOnGet=!!l,this.updateAgeOnHas=!!d,this.ttlResolution=u(s)||0===s?s:1,this.ttlAutopurge=!!a,this.ttl=r||0,this.ttl){if(!u(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#k()}if(0===this.#t&&0===this.ttl&&0===this.#r)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#r){const e="LRU_CACHE_UNBOUNDED";i.has(e)||(i.add(e),o("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,f))}}getRemainingTTL(e){return this.#d.has(e)?1/0:0}#k(){let e=new d(this.#t),t=new d(this.#t);this.#b=e,this.#_=t;let r=this.ttlAutopurge?Array(this.#t):void 0;this.#S=r,this.#C=(n,i,s=this.#l.now())=>{if(t[n]=0!==i?s:0,e[n]=i,r?.[n]&&(clearTimeout(r[n]),r[n]=void 0),0!==i&&r){let e=setTimeout(()=>{this.#D(n)&&this.#F(this.#p[n],"expire")},i+1);e.unref&&e.unref(),r[n]=e}},this.#j=r=>{t[r]=0!==e[r]?this.#l.now():0},this.#U=(r,s)=>{if(e[s]){let o=e[s],a=t[s];if(!o||!a)return;r.ttl=o,r.start=a,r.now=n||i();let l=r.now-a;r.remainingTTL=o-l}};let n=0,i=()=>{let e=this.#l.now();if(this.ttlResolution>0){n=e;let t=setTimeout(()=>n=0,this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=r=>{let s=this.#d.get(r);if(void 0===s)return 0;let o=e[s],a=t[s];return o&&a?o-((n||i())-a):1/0},this.#D=r=>{let s=t[r],o=e[r];return!!o&&!!s&&(n||i())-s>o}}#j=()=>{};#U=()=>{};#C=()=>{};#D=()=>!1;#M(){let e=new d(this.#t);this.#c=0,this.#E=e,this.#K=t=>{this.#c-=e[t],e[t]=0},this.#q=(e,t,r,n)=>{if(this.#A(t))return 0;if(!u(r))if(n){if("function"!=typeof n)throw TypeError("sizeCalculation must be a function");if(!u(r=n(t,e)))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return r},this.#B=(t,r,n)=>{if(e[t]=r,this.#r){let r=this.#r-e[t];for(;this.#c>r;)this.#Q(!0)}this.#c+=e[t],n&&(n.entrySize=r,n.totalCalculatedSize=this.#c)}}#K=e=>{};#B=(e,t,r)=>{};#q=(e,t,r,n)=>{if(r||n)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#x({allowStale:e=this.allowStale}={}){if(this.#u)for(let t=this.#g;this.#G(t)&&((e||!this.#D(t))&&(yield t),t!==this.#y);)t=this.#m[t]}*#L({allowStale:e=this.allowStale}={}){if(this.#u)for(let t=this.#y;this.#G(t)&&((e||!this.#D(t))&&(yield t),t!==this.#g);)t=this.#h[t]}#G(e){return void 0!==e&&this.#d.get(this.#p[e])===e}*entries(){for(let e of this.#x())void 0===this.#f[e]||void 0===this.#p[e]||this.#A(this.#f[e])||(yield[this.#p[e],this.#f[e]])}*rentries(){for(let e of this.#L())void 0===this.#f[e]||void 0===this.#p[e]||this.#A(this.#f[e])||(yield[this.#p[e],this.#f[e]])}*keys(){for(let e of this.#x()){let t=this.#p[e];void 0===t||this.#A(this.#f[e])||(yield t)}}*rkeys(){for(let e of this.#L()){let t=this.#p[e];void 0===t||this.#A(this.#f[e])||(yield t)}}*values(){for(let e of this.#x())void 0===this.#f[e]||this.#A(this.#f[e])||(yield this.#f[e])}*rvalues(){for(let e of this.#L())void 0===this.#f[e]||this.#A(this.#f[e])||(yield this.#f[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let r of this.#x()){let n=this.#f[r],i=this.#A(n)?n.__staleWhileFetching:n;if(void 0!==i&&e(i,this.#p[r],this))return this.get(this.#p[r],t)}}forEach(e,t=this){for(let r of this.#x()){let n=this.#f[r],i=this.#A(n)?n.__staleWhileFetching:n;void 0!==i&&e.call(t,i,this.#p[r],this)}}rforEach(e,t=this){for(let r of this.#L()){let n=this.#f[r],i=this.#A(n)?n.__staleWhileFetching:n;void 0!==i&&e.call(t,i,this.#p[r],this)}}purgeStale(){let e=!1;for(let t of this.#L({allowStale:!0}))this.#D(t)&&(this.#F(this.#p[t],"expire"),e=!0);return e}info(e){let t=this.#d.get(e);if(void 0===t)return;let r=this.#f[t],n=this.#A(r)?r.__staleWhileFetching:r;if(void 0===n)return;let i={value:n};if(this.#b&&this.#_){let e=this.#b[t],r=this.#_[t];e&&r&&(i.ttl=e-(this.#l.now()-r),i.start=Date.now())}return this.#E&&(i.size=this.#E[t]),i}dump(){let e=[];for(let t of this.#x({allowStale:!0})){let r=this.#p[t],n=this.#f[t],i=this.#A(n)?n.__staleWhileFetching:n;if(void 0===i||void 0===r)continue;let s={value:i};if(this.#b&&this.#_){s.ttl=this.#b[t];let e=this.#l.now()-this.#_[t];s.start=Math.floor(Date.now()-e)}this.#E&&(s.size=this.#E[t]),e.unshift([r,s])}return e}load(e){for(let[t,r]of(this.clear(),e)){if(r.start){let e=Date.now()-r.start;r.start=this.#l.now()-e}this.set(t,r.value,r)}}set(e,t,r={}){if(void 0===t)return this.delete(e),this;let{ttl:n=this.ttl,start:i,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:a}=r,{noUpdateTTL:l=this.noUpdateTTL}=r,u=this.#q(e,t,r.size||0,o);if(this.maxEntrySize&&u>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.#F(e,"set"),this;let c=0===this.#u?void 0:this.#d.get(e);if(void 0===c)c=0===this.#u?this.#g:0!==this.#v.length?this.#v.pop():this.#u===this.#t?this.#Q(!1):this.#u,this.#p[c]=e,this.#f[c]=t,this.#d.set(e,c),this.#h[this.#g]=c,this.#m[c]=this.#g,this.#g=c,this.#u++,this.#B(c,u,a),a&&(a.set="add"),l=!1,this.#w&&this.#i?.(t,e,"add");else{this.#R(c);let r=this.#f[c];if(t!==r){if(this.#O&&this.#A(r)){r.__abortController.abort(Error("replaced"));let{__staleWhileFetching:t}=r;void 0!==t&&!s&&(this.#I&&this.#n?.(t,e,"set"),this.#N&&this.#T?.push([t,e,"set"]))}else!s&&(this.#I&&this.#n?.(r,e,"set"),this.#N&&this.#T?.push([r,e,"set"]));if(this.#K(c),this.#B(c,u,a),this.#f[c]=t,a){a.set="replace";let e=r&&this.#A(r)?r.__staleWhileFetching:r;void 0!==e&&(a.oldValue=e)}}else a&&(a.set="update");this.#w&&this.onInsert?.(t,e,t===r?"update":"replace")}if(0===n||this.#b||this.#k(),this.#b&&(l||this.#C(c,n,i),a&&this.#U(a,c)),!s&&this.#N&&this.#T){let e,t=this.#T;for(;e=t?.shift();)this.#s?.(...e)}return this}pop(){try{for(;this.#u;){let e=this.#f[this.#y];if(this.#Q(!0),this.#A(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#N&&this.#T){let e,t=this.#T;for(;e=t?.shift();)this.#s?.(...e)}}}#Q(e){let t=this.#y,r=this.#p[t],n=this.#f[t];return this.#O&&this.#A(n)?n.__abortController.abort(Error("evicted")):(this.#I||this.#N)&&(this.#I&&this.#n?.(n,r,"evict"),this.#N&&this.#T?.push([n,r,"evict"])),this.#K(t),this.#S?.[t]&&(clearTimeout(this.#S[t]),this.#S[t]=void 0),e&&(this.#p[t]=void 0,this.#f[t]=void 0,this.#v.push(t)),1===this.#u?(this.#y=this.#g=0,this.#v.length=0):this.#y=this.#h[t],this.#d.delete(r),this.#u--,t}has(e,t={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:n}=t,i=this.#d.get(e);if(void 0!==i){let e=this.#f[i];if(this.#A(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#D(i))return r&&this.#j(i),n&&(n.has="hit",this.#U(n,i)),!0;n&&(n.has="stale",this.#U(n,i))}else n&&(n.has="miss");return!1}peek(e,t={}){let{allowStale:r=this.allowStale}=t,n=this.#d.get(e);if(void 0===n||!r&&this.#D(n))return;let i=this.#f[n];return this.#A(i)?i.__staleWhileFetching:i}#P(e,t,r,n){let i=void 0===t?void 0:this.#f[t];if(this.#A(i))return i;let s=new a,{signal:o}=r;o?.addEventListener("abort",()=>s.abort(o.reason),{signal:s.signal});let l={signal:s.signal,options:r,context:n},u=(n,i=!1)=>{let{aborted:o}=s.signal,a=r.ignoreFetchAbort&&void 0!==n;if(r.status&&(o&&!i?(r.status.fetchAborted=!0,r.status.fetchError=s.signal.reason,a&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),o&&!a&&!i)return c(s.signal.reason);let u=this.#f[t];return(u===p||a&&i&&void 0===u)&&(void 0===n?void 0!==p.__staleWhileFetching?this.#f[t]=p.__staleWhileFetching:this.#F(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,n,l.options))),n},c=n=>{let{aborted:i}=s.signal,o=i&&r.allowStaleOnFetchAbort,a=o||r.allowStaleOnFetchRejection,l=a||r.noDeleteOnFetchRejection;if(this.#f[t]===p&&(l&&void 0!==p.__staleWhileFetching?o||(this.#f[t]=p.__staleWhileFetching):this.#F(e,"fetch")),a)return r.status&&void 0!==p.__staleWhileFetching&&(r.status.returnedStale=!0),p.__staleWhileFetching;if(p.__returned===p)throw n},d=(t,n)=>{let o=this.#o?.(e,i,l);o&&o instanceof Promise&&o.then(e=>t(void 0===e?void 0:e),n),s.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(t(void 0),r.allowStaleOnFetchAbort&&(t=e=>u(e,!0)))})};r.status&&(r.status.fetchDispatched=!0);let p=new Promise(d).then(u,e=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=e),c(e))),f=Object.assign(p,{__abortController:s,__staleWhileFetching:i,__returned:void 0});return void 0===t?(this.set(e,f,{...l.options,status:void 0}),t=this.#d.get(e)):this.#f[t]=f,f}#A(e){return!!this.#O&&!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof a}async fetch(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:f=this.allowStaleOnFetchAbort,context:h,forceRefresh:m=!1,status:y,signal:g}=t;if(!this.#O)return y&&(y.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,status:y});let v={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:s,noDisposeOnSet:o,size:a,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:f,ignoreFetchAbort:p,status:y,signal:g},T=this.#d.get(e);if(void 0===T){y&&(y.fetch="miss");let t=this.#P(e,T,v,h);return t.__returned=t}{let t=this.#f[T];if(this.#A(t)){let e=r&&void 0!==t.__staleWhileFetching;return y&&(y.fetch="inflight",e&&(y.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}let i=this.#D(T);if(!m&&!i)return y&&(y.fetch="hit"),this.#R(T),n&&this.#j(T),y&&this.#U(y,T),t;let s=this.#P(e,T,v,h),o=void 0!==s.__staleWhileFetching&&r;return y&&(y.fetch=i?"stale":"refresh",o&&i&&(y.returnedStale=!0)),o?s.__staleWhileFetching:s.__returned=s}}async forceFetch(e,t={}){let r=await this.fetch(e,t);if(void 0===r)throw Error("fetch() returned undefined");return r}memo(e,t={}){let r=this.#a;if(!r)throw Error("no memoMethod provided to constructor");let{context:n,forceRefresh:i,...s}=t,o=this.get(e,s);if(!i&&void 0!==o)return o;let a=r(e,o,{options:s,context:n});return this.set(e,a,s),a}get(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:s}=t,o=this.#d.get(e);if(void 0!==o){let t=this.#f[o],a=this.#A(t);return(s&&this.#U(s,o),this.#D(o))?(s&&(s.get="stale"),a)?(s&&r&&void 0!==t.__staleWhileFetching&&(s.returnedStale=!0),r?t.__staleWhileFetching:void 0):(i||this.#F(e,"expire"),s&&r&&(s.returnedStale=!0),r?t:void 0):(s&&(s.get="hit"),a)?t.__staleWhileFetching:(this.#R(o),n&&this.#j(o),t)}s&&(s.get="miss")}#$(e,t){this.#m[t]=e,this.#h[e]=t}#R(e){e!==this.#g&&(e===this.#y?this.#y=this.#h[e]:this.#$(this.#m[e],this.#h[e]),this.#$(this.#g,e),this.#g=e)}delete(e){return this.#F(e,"delete")}#F(e,t){let r=!1;if(0!==this.#u){let n=this.#d.get(e);if(void 0!==n)if(this.#S?.[n]&&(clearTimeout(this.#S?.[n]),this.#S[n]=void 0),r=!0,1===this.#u)this.#H(t);else{this.#K(n);let r=this.#f[n];if(this.#A(r)?r.__abortController.abort(Error("deleted")):(this.#I||this.#N)&&(this.#I&&this.#n?.(r,e,t),this.#N&&this.#T?.push([r,e,t])),this.#d.delete(e),this.#p[n]=void 0,this.#f[n]=void 0,n===this.#g)this.#g=this.#m[n];else if(n===this.#y)this.#y=this.#h[n];else{let e=this.#m[n];this.#h[e]=this.#h[n];let t=this.#h[n];this.#m[t]=this.#m[n]}this.#u--,this.#v.push(n)}}if(this.#N&&this.#T?.length){let e,t=this.#T;for(;e=t?.shift();)this.#s?.(...e)}return r}clear(){return this.#H("delete")}#H(e){for(let t of this.#L({allowStale:!0})){let r=this.#f[t];if(this.#A(r))r.__abortController.abort(Error("deleted"));else{let n=this.#p[t];this.#I&&this.#n?.(r,n,e),this.#N&&this.#T?.push([r,n,e])}}if(this.#d.clear(),this.#f.fill(void 0),this.#p.fill(void 0),this.#b&&this.#_){for(let e of(this.#b.fill(0),this.#_.fill(0),this.#S??[]))void 0!==e&&clearTimeout(e);this.#S?.fill(void 0)}if(this.#E&&this.#E.fill(0),this.#y=0,this.#g=0,this.#v.length=0,this.#c=0,this.#u=0,this.#N&&this.#T){let e,t=this.#T;for(;e=t?.shift();)this.#s?.(...e)}}}r.LRUCache=f},98142,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InMemoryLRUCache=void 0;let n=e.r(23679);class i{constructor(e){this.cache=new n.LRUCache({sizeCalculation:i.sizeCalculation,maxSize:0x1e00000,...e})}static sizeCalculation(e){return"string"==typeof e?e.length:"object"==typeof e?Buffer.byteLength(JSON.stringify(e),"utf8"):1}async set(e,t,r){let n=r?{...r,ttl:r.ttl?1e3*r.ttl:0}:void 0;this.cache.set(e,t,n)}async get(e){return this.cache.get(e)}async delete(e){return this.cache.delete(e)}clear(){this.cache.clear()}keys(){return[...this.cache.keys()]}}r.InMemoryLRUCache=i},85258,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorsAreMissesCache=void 0,r.ErrorsAreMissesCache=class{constructor(e,t){this.cache=e,this.logger=t}async get(e){try{return await this.cache.get(e)}catch(e){this.logger&&(e instanceof Error?this.logger.error(e.message):this.logger.error(e));return}}async set(e,t,r){return this.cache.set(e,t,r)}async delete(e){return this.cache.delete(e)}}},64997,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorsAreMissesCache=r.InMemoryLRUCache=r.PrefixingKeyValueCache=void 0;var n=e.r(10863);Object.defineProperty(r,"PrefixingKeyValueCache",{enumerable:!0,get:function(){return n.PrefixingKeyValueCache}});var i=e.r(98142);Object.defineProperty(r,"InMemoryLRUCache",{enumerable:!0,get:function(){return i.InMemoryLRUCache}});var s=e.r(85258);Object.defineProperty(r,"ErrorsAreMissesCache",{enumerable:!0,get:function(){return s.ErrorsAreMissesCache}})},27145,(e,t,r)=>{!function(n,i){"use strict";if("function"==typeof define&&define.amd){let n;void 0!==(n=i(e.r,r,t))&&e.v(n)}else t.exports?t.exports=i():n.log=i()}(e.e,function(){"use strict";var e=function(){},t="undefined",r=["trace","debug","info","warn","error"],n={},i=null;function s(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function o(){for(var n=this.getLevel(),i=0;i<r.length;i++){var s=r[i];this[s]=i<n?e:this.methodFactory(s,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function a(e){return function(){typeof console!==t&&(o.call(this),this[e].apply(this,arguments))}}function l(r,n,i){var o;return"debug"===(o=r)&&(o="log"),typeof console!==t&&(void 0!==console[o]?s(console,o):void 0!==console.log?s(console,"log"):e)||a.apply(this,arguments)}function u(e,t){var s,a,u,c=this;function d(){}function p(e){var t=e;if("string"==typeof t&&void 0!==c.levels[t.toUpperCase()]&&(t=c.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=c.levels.SILENT)return t;throw TypeError("log.setLevel() called with invalid level: "+e)}c.name=e,c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=t||l,c.getLevel=function(){return null!=u?u:null!=a?a:s},c.setLevel=function(e,t){return u=p(e),!1!==t&&(r[u]||"silent").toUpperCase(),o.call(c)},c.setDefaultLevel=function(e){a=p(e),d()||c.setLevel(e,!1)},c.resetLevel=function(){u=null,o.call(c)},c.enableAll=function(e){c.setLevel(c.levels.TRACE,e)},c.disableAll=function(e){c.setLevel(c.levels.SILENT,e)},c.rebuild=function(){if(i!==c&&(s=p(i.getLevel())),o.call(c),i===c)for(var e in n)n[e].rebuild()},s=p(i?i.getLevel():"WARN");var f=d();null!=f&&(u=p(f)),o.call(c)}return(i=new u).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw TypeError("You must supply a name when creating a logger.");var t=n[e];return t||(t=n[e]=new u(e,i.methodFactory)),t},i.noConflict=function(){return i},i.getLoggers=function(){return n},i.default=i,i})},31906,(e,t,r)=>{"use strict";t.exports=i,t.exports.preferredCharsets=i;var n=/^\s*([^\s;]+)\s*(?:;(.*))?$/;function i(e,t){var r=function(e){for(var t=e.split(","),r=0,i=0;r<t.length;r++){var s=function(e,t){var r=n.exec(e);if(!r)return null;var i=r[1],s=1;if(r[2])for(var o=r[2].split(";"),a=0;a<o.length;a++){var l=o[a].trim().split("=");if("q"===l[0]){s=parseFloat(l[1]);break}}return{charset:i,q:s,i:t}}(t[r].trim(),r);s&&(t[i++]=s)}return t.length=i,t}(void 0===e?"*":e||"");if(!t)return r.filter(a).sort(s).map(o);var i=t.map(function(e,t){for(var n={o:-1,q:0,s:0},i=0;i<r.length;i++){var s=function(e,t,r){var n=0;if(t.charset.toLowerCase()===e.toLowerCase())n|=1;else if("*"!==t.charset)return null;return{i:r,o:t.i,q:t.q,s:n}}(e,r[i],t);s&&0>(n.s-s.s||n.q-s.q||n.o-s.o)&&(n=s)}return n});return i.filter(a).sort(s).map(function(e){return t[i.indexOf(e)]})}function s(e,t){return t.q-e.q||t.s-e.s||e.o-t.o||e.i-t.i||0}function o(e){return e.charset}function a(e){return e.q>0}},73906,(e,t,r)=>{"use strict";t.exports=s,t.exports.preferredEncodings=s;var n=/^\s*([^\s;]+)\s*(?:;(.*))?$/;function i(e,t,r){var n=0;if(t.encoding.toLowerCase()===e.toLowerCase())n|=1;else if("*"!==t.encoding)return null;return{encoding:e,i:r,o:t.i,q:t.q,s:n}}function s(e,t,r){var s=function(e){for(var t=e.split(","),r=!1,s=1,o=0,a=0;o<t.length;o++){var l=function(e,t){var r=n.exec(e);if(!r)return null;var i=r[1],s=1;if(r[2])for(var o=r[2].split(";"),a=0;a<o.length;a++){var l=o[a].trim().split("=");if("q"===l[0]){s=parseFloat(l[1]);break}}return{encoding:i,q:s,i:t}}(t[o].trim(),o);l&&(t[a++]=l,r=r||i("identity",l),s=Math.min(s,l.q||1))}return r||(t[a++]={encoding:"identity",q:s,i:o}),t.length=a,t}(e||""),u=r?function(e,t){if(e.q!==t.q)return t.q-e.q;var n=r.indexOf(e.encoding),i=r.indexOf(t.encoding);return -1===n&&-1===i?t.s-e.s||e.o-t.o||e.i-t.i:-1!==n&&-1!==i?n-i:-1===n?1:-1}:o;if(!t)return s.filter(l).sort(u).map(a);var c=t.map(function(e,t){for(var r={encoding:e,o:-1,q:0,s:0},n=0;n<s.length;n++){var o=i(e,s[n],t);o&&0>(r.s-o.s||r.q-o.q||r.o-o.o)&&(r=o)}return r});return c.filter(l).sort(u).map(function(e){return t[c.indexOf(e)]})}function o(e,t){return t.q-e.q||t.s-e.s||e.o-t.o||e.i-t.i}function a(e){return e.encoding}function l(e){return e.q>0}},29471,(e,t,r)=>{"use strict";t.exports=s,t.exports.preferredLanguages=s;var n=/^\s*([^\s\-;]+)(?:-([^\s;]+))?\s*(?:;(.*))?$/;function i(e,t){var r=n.exec(e);if(!r)return null;var i=r[1],s=r[2],o=i;s&&(o+="-"+s);var a=1;if(r[3])for(var l=r[3].split(";"),u=0;u<l.length;u++){var c=l[u].split("=");"q"===c[0]&&(a=parseFloat(c[1]))}return{prefix:i,suffix:s,q:a,i:t,full:o}}function s(e,t){var r=function(e){for(var t=e.split(","),r=0,n=0;r<t.length;r++){var s=i(t[r].trim(),r);s&&(t[n++]=s)}return t.length=n,t}(void 0===e?"*":e||"");if(!t)return r.filter(l).sort(o).map(a);var n=t.map(function(e,t){for(var n={o:-1,q:0,s:0},s=0;s<r.length;s++){var o=function(e,t,r){var n=i(e);if(!n)return null;var s=0;if(t.full.toLowerCase()===n.full.toLowerCase())s|=4;else if(t.prefix.toLowerCase()===n.full.toLowerCase())s|=2;else if(t.full.toLowerCase()===n.prefix.toLowerCase())s|=1;else if("*"!==t.full)return null;return{i:r,o:t.i,q:t.q,s:s}}(e,r[s],t);o&&0>(n.s-o.s||n.q-o.q||n.o-o.o)&&(n=o)}return n});return n.filter(l).sort(o).map(function(e){return t[n.indexOf(e)]})}function o(e,t){return t.q-e.q||t.s-e.s||e.o-t.o||e.i-t.i||0}function a(e){return e.full}function l(e){return e.q>0}},15035,(e,t,r)=>{"use strict";t.exports=s,t.exports.preferredMediaTypes=s;var n=/^\s*([^\s\/;]+)\/([^;\s]+)\s*(?:;(.*))?$/;function i(e,t){var r=n.exec(e);if(!r)return null;var i=Object.create(null),s=1,o=r[2],a=r[1];if(r[3])for(var l=(function(e){for(var t=e.split(";"),r=1,n=0;r<t.length;r++)u(t[n])%2==0?t[++n]=t[r]:t[n]+=";"+t[r];t.length=n+1;for(var r=0;r<t.length;r++)t[r]=t[r].trim();return t})(r[3]).map(c),d=0;d<l.length;d++){var p=l[d],f=p[0].toLowerCase(),h=p[1],m=h&&'"'===h[0]&&'"'===h[h.length-1]?h.slice(1,-1):h;if("q"===f){s=parseFloat(m);break}i[f]=m}return{type:a,subtype:o,params:i,q:s,i:t}}function s(e,t){var r=function(e){for(var t=function(e){for(var t=e.split(","),r=1,n=0;r<t.length;r++)u(t[n])%2==0?t[++n]=t[r]:t[n]+=","+t[r];return t.length=n+1,t}(e),r=0,n=0;r<t.length;r++){var s=i(t[r].trim(),r);s&&(t[n++]=s)}return t.length=n,t}(void 0===e?"*/*":e||"");if(!t)return r.filter(l).sort(o).map(a);var n=t.map(function(e,t){for(var n={o:-1,q:0,s:0},s=0;s<r.length;s++){var o=function(e,t,r){var n=i(e),s=0;if(!n)return null;if(t.type.toLowerCase()==n.type.toLowerCase())s|=4;else if("*"!=t.type)return null;if(t.subtype.toLowerCase()==n.subtype.toLowerCase())s|=2;else if("*"!=t.subtype)return null;var o=Object.keys(t.params);if(o.length>0)if(!o.every(function(e){return"*"==t.params[e]||(t.params[e]||"").toLowerCase()==(n.params[e]||"").toLowerCase()}))return null;else s|=1;return{i:r,o:t.i,q:t.q,s:s}}(e,r[s],t);o&&0>(n.s-o.s||n.q-o.q||n.o-o.o)&&(n=o)}return n});return n.filter(l).sort(o).map(function(e){return t[n.indexOf(e)]})}function o(e,t){return t.q-e.q||t.s-e.s||e.o-t.o||e.i-t.i||0}function a(e){return e.type+"/"+e.subtype}function l(e){return e.q>0}function u(e){for(var t=0,r=0;-1!==(r=e.indexOf('"',r));)t++,r++;return t}function c(e){var t,r,n=e.indexOf("=");return -1===n?t=e:(t=e.slice(0,n),r=e.slice(n+1)),[t,r]}},28069,(e,t,r)=>{"use strict";var n=e.r(31906),i=e.r(73906),s=e.r(29471),o=e.r(15035);function a(e){if(!(this instanceof a))return new a(e);this.request=e}t.exports=a,t.exports.Negotiator=a,a.prototype.charset=function(e){var t=this.charsets(e);return t&&t[0]},a.prototype.charsets=function(e){return n(this.request.headers["accept-charset"],e)},a.prototype.encoding=function(e,t){var r=this.encodings(e,t);return r&&r[0]},a.prototype.encodings=function(e,t){return i(this.request.headers["accept-encoding"],e,(t||{}).preferred)},a.prototype.language=function(e){var t=this.languages(e);return t&&t[0]},a.prototype.languages=function(e){return s(this.request.headers["accept-language"],e)},a.prototype.mediaType=function(e){var t=this.mediaTypes(e);return t&&t[0]},a.prototype.mediaTypes=function(e){return o(this.request.headers.accept,e)},a.prototype.preferredCharset=a.prototype.charset,a.prototype.preferredCharsets=a.prototype.charsets,a.prototype.preferredEncoding=a.prototype.encoding,a.prototype.preferredEncodings=a.prototype.encodings,a.prototype.preferredLanguage=a.prototype.language,a.prototype.preferredLanguages=a.prototype.languages,a.prototype.preferredMediaType=a.prototype.mediaType,a.prototype.preferredMediaTypes=a.prototype.mediaTypes},48697,(e,t,r)=>{"use strict";r.removeLeadingAndTrailingHTTPWhitespace=e=>e.replace(/^[ \t\n\r]+/u,"").replace(/[ \t\n\r]+$/u,""),r.removeTrailingHTTPWhitespace=e=>e.replace(/[ \t\n\r]+$/u,""),r.isHTTPWhitespaceChar=e=>" "===e||"	"===e||"\n"===e||"\r"===e,r.solelyContainsHTTPTokenCodePoints=e=>/^[-!#$%&'*+.^_`|~A-Za-z0-9]*$/u.test(e),r.soleyContainsHTTPQuotedStringTokenCodePoints=e=>/^[\t\u0020-\u007E\u0080-\u00FF]*$/u.test(e),r.asciiLowercase=e=>e.replace(/[A-Z]/ug,e=>e.toLowerCase()),r.collectAnHTTPQuotedString=(e,t)=>{let r="";for(t++;;){for(;t<e.length&&'"'!==e[t]&&"\\"!==e[t];)r+=e[t],++t;if(t>=e.length)break;let n=e[t];if(++t,"\\"===n){if(t>=e.length){r+="\\";break}r+=e[t],++t}else break}return[r,t]}},60248,(e,t,r)=>{"use strict";let{asciiLowercase:n,solelyContainsHTTPTokenCodePoints:i,soleyContainsHTTPQuotedStringTokenCodePoints:s}=e.r(48697);t.exports=class{constructor(e){this._map=e}get size(){return this._map.size}get(e){return e=n(String(e)),this._map.get(e)}has(e){return e=n(String(e)),this._map.has(e)}set(e,t){if(e=n(String(e)),t=String(t),!i(e))throw Error(`Invalid MIME type parameter name "${e}": only HTTP token code points are valid.`);if(!s(t))throw Error(`Invalid MIME type parameter value "${t}": only HTTP quoted-string token code points are valid.`);return this._map.set(e,t)}clear(){this._map.clear()}delete(e){return e=n(String(e)),this._map.delete(e)}forEach(e,t){this._map.forEach(e,t)}keys(){return this._map.keys()}values(){return this._map.values()}entries(){return this._map.entries()}[Symbol.iterator](){return this._map[Symbol.iterator]()}}},53291,(e,t,r)=>{"use strict";let{removeLeadingAndTrailingHTTPWhitespace:n,removeTrailingHTTPWhitespace:i,isHTTPWhitespaceChar:s,solelyContainsHTTPTokenCodePoints:o,soleyContainsHTTPQuotedStringTokenCodePoints:a,asciiLowercase:l,collectAnHTTPQuotedString:u}=e.r(48697);t.exports=e=>{e=n(e);let t=0,r="";for(;t<e.length&&"/"!==e[t];)r+=e[t],++t;if(0===r.length||!o(r)||t>=e.length)return null;++t;let c="";for(;t<e.length&&";"!==e[t];)c+=e[t],++t;if(0===(c=i(c)).length||!o(c))return null;let d={type:l(r),subtype:l(c),parameters:new Map};for(;t<e.length;){for(++t;s(e[t]);)++t;let r="";for(;t<e.length&&";"!==e[t]&&"="!==e[t];)r+=e[t],++t;if(r=l(r),t<e.length){if(";"===e[t])continue;++t}let n=null;if('"'===e[t])for([n,t]=u(e,t);t<e.length&&";"!==e[t];)++t;else{for(n="";t<e.length&&";"!==e[t];)n+=e[t],++t;if(""===(n=i(n)))continue}r.length>0&&o(r)&&a(n)&&!d.parameters.has(r)&&d.parameters.set(r,n)}return d}},57717,(e,t,r)=>{"use strict";let{solelyContainsHTTPTokenCodePoints:n}=e.r(48697);t.exports=e=>{let t=`${e.type}/${e.subtype}`;if(0===e.parameters.size)return t;for(let[r,i]of e.parameters)t+=";",t+=r,t+="=",n(i)&&0!==i.length||(i=i.replace(/(["\\])/ug,"\\$1"),i=`"${i}"`),t+=i;return t}},94392,(e,t,r)=>{"use strict";let n=e.r(60248),i=e.r(53291),s=e.r(57717),{asciiLowercase:o,solelyContainsHTTPTokenCodePoints:a}=e.r(48697);t.exports=class{constructor(e){const t=i(e=String(e));if(null===t)throw Error(`Could not parse MIME type string "${e}"`);this._type=t.type,this._subtype=t.subtype,this._parameters=new n(t.parameters)}static parse(e){try{return new this(e)}catch(e){return null}}get essence(){return`${this.type}/${this.subtype}`}get type(){return this._type}set type(e){if(0===(e=o(String(e))).length)throw Error("Invalid type: must be a non-empty string");if(!a(e))throw Error(`Invalid type ${e}: must contain only HTTP token code points`);this._type=e}get subtype(){return this._subtype}set subtype(e){if(0===(e=o(String(e))).length)throw Error("Invalid subtype: must be a non-empty string");if(!a(e))throw Error(`Invalid subtype ${e}: must contain only HTTP token code points`);this._subtype=e}get parameters(){return this._parameters}toString(){return s(this)}isJavaScript({prohibitParameters:e=!1}={}){switch(this._type){case"text":switch(this._subtype){case"ecmascript":case"javascript":case"javascript1.0":case"javascript1.1":case"javascript1.2":case"javascript1.3":case"javascript1.4":case"javascript1.5":case"jscript":case"livescript":case"x-ecmascript":case"x-javascript":return!e||0===this._parameters.size;default:return!1}case"application":switch(this._subtype){case"ecmascript":case"javascript":case"x-ecmascript":case"x-javascript":return!e||0===this._parameters.size;default:return!1}default:return!1}}isXML(){return"xml"===this._subtype&&("text"===this._type||"application"===this._type)||this._subtype.endsWith("+xml")}isHTML(){return"html"===this._subtype&&"text"===this._type}}},62363,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isNextApiRequest=void 0,r.isNextApiRequest=function(e){return"query"in e}},74595,(e,t,r)=>{"use strict";var n=e.e&&e.e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})},i=e.e&&e.e.__generator||function(e,t){var r,n,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){var u=[a,l];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,n=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){s=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){s.label=u[1];break}if(6===u[0]&&s.label<i[1]){s.label=i[1],i=u;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(u);break}i[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}};Object.defineProperty(r,"__esModule",{value:!0}),r.getBody=void 0;var s=e.r(62363);r.getBody=function(e){return n(void 0,void 0,void 0,function(){return i(this,function(t){return(0,s.isNextApiRequest)(e)?[2,e.body]:[2,"application/json"===e.headers.get("content-type")?e.json():e.text()]})})}},79430,e=>{"use strict";var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)};function r(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function s(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function o(e,t){return function(r,n){t(r,n,e)}}function a(e,t,r,n,i,s){function o(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var a,l=n.kind,u="getter"===l?"get":"setter"===l?"set":"value",c=!t&&e?n.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),p=!1,f=r.length-1;f>=0;f--){var h={};for(var m in n)h[m]="access"===m?{}:n[m];for(var m in n.access)h.access[m]=n.access[m];h.addInitializer=function(e){if(p)throw TypeError("Cannot add initializers after decoration has completed");s.push(o(e||null))};var y=(0,r[f])("accessor"===l?{get:d.get,set:d.set}:d[u],h);if("accessor"===l){if(void 0===y)continue;if(null===y||"object"!=typeof y)throw TypeError("Object expected");(a=o(y.get))&&(d.get=a),(a=o(y.set))&&(d.set=a),(a=o(y.init))&&i.unshift(a)}else(a=o(y))&&("field"===l?i.unshift(a):d[u]=a)}c&&Object.defineProperty(c,n.name,d),p=!0}function l(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function u(e){return"symbol"==typeof e?e:"".concat(e)}function c(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function d(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})}function f(e,t){var r,n,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){var u=[a,l];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,n=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){s=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){s.label=u[1];break}if(6===u[0]&&s.label<i[1]){s.label=i[1],i=u;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(u);break}i[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}var h=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function m(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||h(t,e,r)}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function T(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function E(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),n[Symbol.asyncIterator]=function(){return this},n;function o(e,t){i[e]&&(n[e]=function(t){return new Promise(function(r,n){s.push([e,t,r,n])>1||a(e,t)})},t&&(n[e]=t(n[e])))}function a(e,t){try{var r;(r=i[e](t)).value instanceof _?Promise.resolve(r.value.v).then(l,u):c(s[0][2],r)}catch(e){c(s[0][3],e)}}function l(e){a("next",e)}function u(e){a("throw",e)}function c(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function S(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:_(e[n](t)),done:!1}:i?i(t):t}:i}}function I(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=y(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){var s,o,a;s=n,o=i,a=(t=e[r](t)).done,Promise.resolve(t.value).then(function(e){s({value:e,done:a})},o)})}}}function O(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var N=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},w=function(e){return(w=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)};function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=w(e),n=0;n<r.length;n++)"default"!==r[n]&&h(t,e,r[n]);return N(t,e),t}function P(e){return e&&e.__esModule?e:{default:e}}function R(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function x(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function L(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function D(e,t,r){if(null!=t){var n,i;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if("function"!=typeof n)throw TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var M="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function k(e){function t(t){e.error=e.hasError?new M(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function i(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,function(e){return t(e),i()})}else n|=1}catch(e){t(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function C(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,n,i,s){return r?t?".jsx":".js":!n||i&&s?n+i+"."+s.toLowerCase()+"js":e}):e}let F={__extends:r,__assign:n,__rest:i,__decorate:s,__param:o,__esDecorate:a,__runInitializers:l,__propKey:u,__setFunctionName:c,__metadata:d,__awaiter:p,__generator:f,__createBinding:h,__exportStar:m,__values:y,__read:g,__spread:v,__spreadArrays:T,__spreadArray:E,__await:_,__asyncGenerator:b,__asyncDelegator:S,__asyncValues:I,__makeTemplateObject:O,__importStar:A,__importDefault:P,__classPrivateFieldGet:R,__classPrivateFieldSet:x,__classPrivateFieldIn:L,__addDisposableResource:D,__disposeResources:k,__rewriteRelativeImportExtension:C};e.s(["__addDisposableResource",()=>D,"__assign",()=>n,"__asyncDelegator",()=>S,"__asyncGenerator",()=>b,"__asyncValues",()=>I,"__await",()=>_,"__awaiter",()=>p,"__classPrivateFieldGet",()=>R,"__classPrivateFieldIn",()=>L,"__classPrivateFieldSet",()=>x,"__createBinding",()=>h,"__decorate",()=>s,"__disposeResources",()=>k,"__esDecorate",()=>a,"__exportStar",()=>m,"__extends",()=>r,"__generator",()=>f,"__importDefault",()=>P,"__importStar",()=>A,"__makeTemplateObject",()=>O,"__metadata",()=>d,"__param",()=>o,"__propKey",()=>u,"__read",()=>g,"__rest",()=>i,"__rewriteRelativeImportExtension",()=>C,"__runInitializers",()=>l,"__setFunctionName",()=>c,"__spread",()=>v,"__spreadArray",()=>E,"__spreadArrays",()=>T,"__values",()=>y,"default",0,F])},14750,(e,t,r)=>{},85959,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.asArray=void 0,r.isUrl=s,r.isDocumentString=function(e){if("string"!=typeof e||o.test(e)||s(e))return!1;try{return(0,n.parse)(e),!0}catch(t){if(!t.message.includes("EOF")&&""!==e.replace(/(\#[^*]*)/g,"").trim()&&e.includes(" "))throw Error(`Failed to parse the GraphQL document. ${t.message}
${e}`)}return!1},r.isValidPath=function(e){return"string"==typeof e&&!a.test(e)},r.compareStrings=l,r.nodeToString=u,r.compareNodes=function(e,t,r){let n=u(e),i=u(t);return"function"==typeof r?r(n,i):l(n,i)},r.isSome=function(e){return null!=e},r.assertSome=function(e,t="Value should be something"){if(null==e)throw Error(t)};let n=e.r(86846),i=/^(https?|wss?|file):\/\//;function s(e){if("string"!=typeof e||!i.test(e))return!1;if(URL.canParse)return URL.canParse(e);try{return new URL(e),!0}catch(e){return!1}}r.asArray=e=>Array.isArray(e)?e:e?[e]:[];let o=/\.[a-z0-9]+$/i,a=/[‘“!%^<>`\n]/;function l(e,t){return String(e)<String(t)?-1:+(String(e)>String(t))}function u(e){let t;return"alias"in e&&(t=e.alias?.value),null==t&&"name"in e&&(t=e.name?.value),null==t&&(t=e.kind),t}},66986,(e,t,r)=>{"use strict";function n(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return function(e,t){var r,o;let a;if(null===e)return"null";if(e instanceof Error)return"AggregateError"===e.name?i(e)+"\n"+s(e.errors,t):i(e);if(t.includes(e))return"[Circular]";let l=[...t,e];if("function"==typeof e.toJSON){let t=e.toJSON();if(t!==e)return"string"==typeof t?t:n(t,l)}else if(Array.isArray(e))return s(e,l);return r=e,o=l,0===(a=Object.entries(r)).length?"{}":o.length>3?"["+function(e){let t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){let t=e.constructor.name;if("string"==typeof t&&""!==t)return t}return t}(r)+"]":"{ "+a.map(([e,t])=>e+": "+n(t,o)).join(", ")+" }"}(e,t);default:return String(e)}}function i(e){return e.name="GraphQLError",e.toString()}function s(e,t){if(0===e.length)return"[]";if(t.length>3)return"[Array]";let r=e.length,i=[];for(let s=0;s<r;++s)i.push(n(e[s],t));return"["+i.join(", ")+"]"}Object.defineProperty(r,"__esModule",{value:!0}),r.inspect=void 0,r.inspect=function(e){return n(e,[])}},36428,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isGraphQLErrorLike=s,r.createGraphQLError=o,r.getSchemaCoordinate=function(e){return e.coordinate},r.locatedError=function(e,t,r,i){let s=(0,n.locatedError)(e,t,r);return!s.coordinate&&i&&null==s.coordinate&&Object.defineProperties(s,{coordinate:{value:`${i.parentType.name}.${i.fieldName}`,enumerable:!0,configurable:!0}}),s},r.relocatedError=function(e,t,r){return o(e.message,{nodes:e.nodes,source:e.source,positions:e.positions,path:null==t?e.path:t,originalError:e,extensions:e.extensions,coordinate:r?`${r.parentType.name}.${r.fieldName}`:void 0})};let n=e.r(86846),i=["message","locations","path","nodes","source","positions","originalError","name","stack","extensions","coordinate"];function s(e){return null!=e&&"object"==typeof e&&Object.keys(e).every(e=>i.includes(e))}function o(e,t){t?.originalError&&!(t.originalError instanceof Error)&&s(t.originalError)&&(t.originalError=o(t.originalError.message,t.originalError));let r=n.GraphQLError,i=n.versionInfo.major>=16?new r(e,t):new r(e,t?.nodes,t?.source,t?.positions,t?.path,t?.originalError,t?.extensions);return t?.coordinate&&null==i.coordinate&&Object.defineProperties(i,{coordinate:{value:t.coordinate,enumerable:!0,configurable:!0}}),i}},27668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPromise=i,r.isActualPromise=s,r.handleMaybePromise=o,r.fakePromise=a,r.createDeferredPromise=function(){let e,t;return Promise.withResolvers?Promise.withResolvers():{promise:new Promise(function(r,n){e=r,t=n}),get resolve(){return e},get reject(){return t}}},r.iterateAsync=l,r.iterateAsyncVoid=l,r.fakeRejectPromise=u,r.mapMaybePromise=function(e,t,r){return o(()=>e,t,r)},r.mapAsyncIterator=function(e,t,r,n){let i,s,l,d;if(Symbol.asyncIterator in e&&(e=e[Symbol.asyncIterator]()),n){let e;l=t=>e||=o(n,()=>t,()=>t)}function p(e){return e.done?l?l(e):e:o(()=>e.value,e=>o(()=>t(e),c,s))}if("function"==typeof e.return&&(i=e.return,s=t=>{let r=()=>{throw t};return i.call(e).then(r,r)}),r){let e;d=t=>e||=o(()=>t,e=>o(()=>r(e),c,s))}return{next:()=>e.next().then(p,d),return(){let t=i?i.call(e).then(p,d):a({value:void 0,done:!0});return l?t.then(l):t},throw:t=>"function"==typeof e.throw?e.throw(t).then(p,d):s?s(t):u(t),[Symbol.asyncIterator](){return this}}},r.promiseLikeFinally=d,r.unfakePromise=p;let n=Symbol.for("@whatwg-node/promise-helpers/FakePromise");function i(e){return e?.then!=null}function s(e){return e&&e.then&&e.catch&&e.finally}function o(e,t,r,n){let i=a().then(e).then(t,r);return n&&(i=i.finally(n)),p(i)}function a(e){return e&&s(e)?e:i(e)?{then:(t,r)=>a(e.then(t,r)),catch:t=>a(e.then(e=>e,t)),finally:t=>a(t?d(e,t):e),[Symbol.toStringTag]:"Promise"}:{then(t){if(t)try{return a(t(e))}catch(e){return u(e)}return this},catch(){return this},finally(t){if(t)try{return a(t()).then(()=>e,()=>e)}catch(e){return u(e)}return this},[Symbol.toStringTag]:"Promise",__fakePromiseValue:e,[n]:"resolved"}}function l(e,t,r){if(e?.length===0)return;let n=e[Symbol.iterator](),i=0;return function e(){let{done:s,value:a}=n.next();if(s)return;let l=!1;function u(){l=!0}return o(function(){return t(a,u,i++)},function(t){if(t&&r?.push(t),!l)return e()})}()}function u(e){return{then(t,r){if(r)try{return a(r(e))}catch(e){return u(e)}return this},catch(t){if(t)try{return a(t(e))}catch(e){return u(e)}return this},finally(e){if(e)try{e()}catch(e){return u(e)}return this},__fakeRejectError:e,[Symbol.toStringTag]:"Promise",[n]:"rejected"}}function c(e){return{value:e,done:!1}}function d(e,t){return"finally"in e?e.finally(t):e.then(e=>{let r=t();return i(r)?r.then(()=>e):e},e=>{let r=t();if(i(r))return r.then(()=>{throw e});throw e})}function p(e){if(e?.[n]==="resolved")return e.__fakePromiseValue;if(e?.[n]==="rejected")throw e.__fakeRejectError;return e}},34196,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPromise=void 0,r.isIterableObject=function(e){return null!=e&&"object"==typeof e&&Symbol.iterator in e},r.isObjectLike=function(e){return"object"==typeof e&&null!==e},r.promiseReduce=function(e,t,r){let i=r;for(let r of e)i=(0,n.handleMaybePromise)(()=>i,e=>t(e,r));return i},r.hasOwnProperty=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};let n=e.r(27668);Object.defineProperty(r,"isPromise",{enumerable:!0,get:function(){return n.isPromise}})},5033,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getArgumentValues=function(e,t,r={}){let a={},l=(t.arguments??[]).reduce((e,t)=>({...e,[t.name.value]:t}),{});for(let{name:u,type:c,defaultValue:d}of e.args){let e=l[u];if(!e){if(void 0!==d)a[u]=d;else if((0,i.isNonNullType)(c))throw(0,s.createGraphQLError)(`Argument "${u}" of required type "${(0,n.inspect)(c)}" was not provided.`,{nodes:[t]});continue}let p=e.value,f=p.kind===i.Kind.NULL;if(p.kind===i.Kind.VARIABLE){let e=p.name.value;if(null==r||!(0,o.hasOwnProperty)(r,e)){if(void 0!==d)a[u]=d;else if((0,i.isNonNullType)(c))throw(0,s.createGraphQLError)(`Argument "${u}" of required type "${(0,n.inspect)(c)}" was provided the variable "$${e}" which was not provided a runtime value.`,{nodes:[p]});continue}f=null==r[e]}if(f&&(0,i.isNonNullType)(c))throw(0,s.createGraphQLError)(`Argument "${u}" of non-null type "${(0,n.inspect)(c)}" must not be null.`,{nodes:[p]});let h=(0,i.valueFromAST)(p,c,r);if(void 0===h)throw(0,s.createGraphQLError)(`Argument "${u}" has invalid value ${(0,i.print)(p)}.`,{nodes:[p]});a[u]=h}return a};let n=e.r(66986),i=e.r(86846),s=e.r(36428),o=e.r(34196)},51216,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.memoize1=function(e){let t=new WeakMap;return function(r){let n=t.get(r);if(void 0===n){let n=e(r);return t.set(r,n),n}return n}},r.memoize2=function(e){let t=new WeakMap;return function(r,n){let i=t.get(r);if(!i){i=new WeakMap,t.set(r,i);let s=e(r,n);return i.set(n,s),s}let s=i.get(n);if(void 0===s){let t=e(r,n);return i.set(n,t),t}return s}},r.memoize3=function(e){let t=new WeakMap;return function(r,n,i){let s=t.get(r);if(!s){s=new WeakMap,t.set(r,s);let o=new WeakMap;s.set(n,o);let a=e(r,n,i);return o.set(i,a),a}let o=s.get(n);if(!o){o=new WeakMap,s.set(n,o);let t=e(r,n,i);return o.set(i,t),t}let a=o.get(i);if(void 0===a){let t=e(r,n,i);return o.set(i,t),t}return a}},r.memoize4=function(e){let t=new WeakMap;return function(r,n,i,s){let o=t.get(r);if(!o){o=new WeakMap,t.set(r,o);let a=new WeakMap;o.set(n,a);let l=new WeakMap;a.set(i,l);let u=e(r,n,i,s);return l.set(s,u),u}let a=o.get(n);if(!a){a=new WeakMap,o.set(n,a);let t=new WeakMap;a.set(i,t);let l=e(r,n,i,s);return t.set(s,l),l}let l=a.get(i);if(!l){let t=new WeakMap;a.set(i,t);let o=e(r,n,i,s);return t.set(s,o),o}let u=l.get(s);if(void 0===u){let t=e(r,n,i,s);return l.set(s,t),t}return u}},r.memoize5=function(e){let t=new WeakMap;return function(r,n,i,s,o){let a=t.get(r);if(!a){a=new WeakMap,t.set(r,a);let l=new WeakMap;a.set(n,l);let u=new WeakMap;l.set(i,u);let c=new WeakMap;u.set(s,c);let d=e(r,n,i,s,o);return c.set(o,d),d}let l=a.get(n);if(!l){l=new WeakMap,a.set(n,l);let t=new WeakMap;l.set(i,t);let u=new WeakMap;t.set(s,u);let c=e(r,n,i,s,o);return u.set(o,c),c}let u=l.get(i);if(!u){u=new WeakMap,l.set(i,u);let t=new WeakMap;u.set(s,t);let a=e(r,n,i,s,o);return t.set(o,a),a}let c=u.get(s);if(!c){c=new WeakMap,u.set(s,c);let t=e(r,n,i,s,o);return c.set(o,t),t}let d=c.get(o);if(void 0===d){let t=e(r,n,i,s,o);return c.set(o,t),t}return d}},r.memoize2of4=function(e){let t=new WeakMap;return function(r,n,i,s){let o=t.get(r);if(!o){o=new WeakMap,t.set(r,o);let a=e(r,n,i,s);return o.set(n,a),a}let a=o.get(n);if(void 0===a){let t=e(r,n,i,s);return o.set(n,t),t}return a}},r.memoize2of5=function(e){let t=new WeakMap;return function(r,n,i,s,o){let a=t.get(r);if(!a){a=new WeakMap,t.set(r,a);let l=e(r,n,i,s,o);return a.set(n,l),l}let l=a.get(n);if(void 0===l){let t=e(r,n,i,s,o);return a.set(n,t),t}return l}}},69500,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDirectiveExtensions=function(e,t,r=["directives"]){let o={};if(e.extensions){let t=e.extensions;for(let e of r)t=t?.[e];if(null!=t)for(let e in t){let r=t[e];if(Array.isArray(r))for(let t of r){let r=o[e];r||(r=[],o[e]=r),r.push(t)}else{let t=o[e];t||(t=[],o[e]=t),t.push(r)}}}let a=(0,s.memoize1)(e=>JSON.stringify(e)),l=[];for(let r of(e.astNode&&l.push(e.astNode),e.extensionASTNodes&&l.push(...e.extensionASTNodes),l))if(r.directives?.length)for(let e of r.directives){let r=e.name.value,s=o[r];s||(s=[],o[r]=s);let u=t?.getDirective(r),c={};if(u&&(c=(0,i.getArgumentValues)(u,e)),e.arguments)for(let t of e.arguments){let e=t.name.value;if(null==c[e]){let r=u?.args.find(t=>t.name===e);r&&(c[e]=(0,n.valueFromAST)(t.value,r.type))}null==c[e]&&(c[e]=(0,n.valueFromASTUntyped)(t.value))}if(l.length>0&&s.length>0){let e=a(c);if(s.some(t=>a(t)===e))continue}s.push(c)}return o};let n=e.r(86846),i=e.r(5033),s=e.r(51216)},36312,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDirectivesInExtensions=function(e,t=["directives"]){return Object.entries((0,n.getDirectiveExtensions)(e,void 0,t)).map(([e,t])=>t?.map(t=>({name:e,args:t}))).flat(1/0).filter(Boolean)},r.getDirectiveInExtensions=function(e,t,r=["directives"]){return(0,n.getDirectiveExtensions)(e,void 0,r)[t]},r.getDirectives=function(e,t,r=["directives"]){return Object.entries((0,n.getDirectiveExtensions)(t,e,r)).map(([e,t])=>t?.map(t=>({name:e,args:t}))).flat(1/0).filter(Boolean)},r.getDirective=function(e,t,r,i=["directives"]){return(0,n.getDirectiveExtensions)(t,e,i)[r]};let n=e.r(69500)},27843,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getFieldsWithDirectives=function(e,t={}){let r={},i=["ObjectTypeDefinition","ObjectTypeExtension"];for(let s of(t.includeInputTypes&&(i=[...i,"InputObjectTypeDefinition","InputObjectTypeExtension"]),e.definitions.filter(e=>i.includes(e.kind)))){let e=s.name.value;if(null!=s.fields){for(let t of s.fields)if(t.directives&&t.directives.length>0){let i=t.name.value,s=`${e}.${i}`,o=t.directives.map(e=>({name:e.name.value,args:(e.arguments||[]).reduce((e,t)=>({...e,[t.name.value]:(0,n.valueFromASTUntyped)(t.value)}),{})}));r[s]=o}}}return r};let n=e.r(86846)},47942,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getArgumentsWithDirectives=function(e){let t={};for(let r of e.definitions.filter(i))if(null!=r.fields)for(let e of r.fields){let i=e.arguments?.filter(e=>e.directives?.length);if(!i?.length)continue;let s=t[`${r.name.value}.${e.name.value}`]={};for(let e of i){let t=e.directives.map(e=>({name:e.name.value,args:(e.arguments||[]).reduce((e,t)=>({...e,[t.name.value]:(0,n.valueFromASTUntyped)(t.value)}),{})}));s[e.name.value]=t}}return t};let n=e.r(86846);function i(e){return e.kind===n.Kind.OBJECT_TYPE_DEFINITION||e.kind===n.Kind.OBJECT_TYPE_EXTENSION}},31214,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getImplementingTypes=function(e,t){let r=t.getTypeMap(),n=[];for(let t in r){let i=r[t];"getInterfaces"in i&&i.getInterfaces().find(t=>t.name===e)&&n.push(i.name)}return n}},45057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.astFromType=function e(t){if((0,i.isNonNullType)(t)){let r=e(t.ofType);if(r.kind===i.Kind.NON_NULL_TYPE)throw Error(`Invalid type node ${(0,n.inspect)(t)}. Inner type of non-null type cannot be a non-null type.`);return{kind:i.Kind.NON_NULL_TYPE,type:r}}return(0,i.isListType)(t)?{kind:i.Kind.LIST_TYPE,type:e(t.ofType)}:{kind:i.Kind.NAMED_TYPE,name:{kind:i.Kind.NAME,value:t.name}}};let n=e.r(66986),i=e.r(86846)},14890,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.astFromValueUntyped=function e(t){if(null===t)return{kind:n.Kind.NULL};if(void 0===t)return null;if(Array.isArray(t)){let r=[];for(let n of t){let t=e(n);null!=t&&r.push(t)}return{kind:n.Kind.LIST,values:r}}if("object"==typeof t){if(t?.toJSON)return e(t.toJSON());let r=[];for(let i in t){let s=e(t[i]);s&&r.push({kind:n.Kind.OBJECT_FIELD,name:{kind:n.Kind.NAME,value:i},value:s})}return{kind:n.Kind.OBJECT,fields:r}}if("boolean"==typeof t)return{kind:n.Kind.BOOLEAN,value:t};if("bigint"==typeof t)return{kind:n.Kind.INT,value:String(t)};if("number"==typeof t&&isFinite(t)){let e=String(t);return i.test(e)?{kind:n.Kind.INT,value:e}:{kind:n.Kind.FLOAT,value:e}}if("string"==typeof t)return{kind:n.Kind.STRING,value:t};throw TypeError(`Cannot convert value to AST: ${t}.`)};let n=e.r(86846),i=/^-?(?:0|[1-9][0-9]*)$/},82223,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.astFromValue=function e(t,r){if((0,i.isNonNullType)(r)){let n=e(t,r.ofType);return n?.kind===i.Kind.NULL?null:n}if(null===t)return{kind:i.Kind.NULL};if(void 0===t)return null;if((0,i.isListType)(r)){let n=r.ofType;if((0,o.isIterableObject)(t)){let r=[];for(let i of t){let t=e(i,n);null!=t&&r.push(t)}return{kind:i.Kind.LIST,values:r}}return e(t,n)}if((0,i.isInputObjectType)(r)){if(!(0,o.isObjectLike)(t))return null;let n=[];for(let s of Object.values(r.getFields())){let r=e(t[s.name],s.type);r&&n.push({kind:i.Kind.OBJECT_FIELD,name:{kind:i.Kind.NAME,value:s.name},value:r})}return{kind:i.Kind.OBJECT,fields:n}}if((0,i.isLeafType)(r)){let e=r.serialize(t);return null==e?null:(0,i.isEnumType)(r)?{kind:i.Kind.ENUM,value:e}:"ID"===r.name&&"string"==typeof e&&a.test(e)?{kind:i.Kind.INT,value:e}:(0,s.astFromValueUntyped)(e)}console.assert(!1,"Unexpected input type: "+(0,n.inspect)(r))};let n=e.r(66986),i=e.r(86846),s=e.r(14890),o=e.r(34196),a=/^-?(?:0|[1-9][0-9]*)$/},9487,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDescriptionNode=function(e){return e.astNode?.description?{...e.astNode.description,block:!0}:e.description?{kind:n.Kind.STRING,value:e.description,block:!0}:void 0};let n=e.r(86846)},59402,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRootTypeMap=r.getRootTypes=r.getRootTypeNames=void 0,r.getDefinedRootType=function(e,t,i){let s=(0,r.getRootTypeMap)(e).get(t);if(null==s)throw(0,n.createGraphQLError)(`Schema is not configured to execute ${t} operation.`,{nodes:i});return s};let n=e.r(36428),i=e.r(51216);r.getRootTypeNames=(0,i.memoize1)(function(e){return new Set([...(0,r.getRootTypes)(e)].map(e=>e.name))}),r.getRootTypes=(0,i.memoize1)(function(e){return new Set((0,r.getRootTypeMap)(e).values())}),r.getRootTypeMap=(0,i.memoize1)(function(e){let t=new Map,r=e.getQueryType();r&&t.set("query",r);let n=e.getMutationType();n&&t.set("mutation",n);let i=e.getSubscriptionType();return i&&t.set("subscription",i),t})},42811,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDocumentNodeFromSchema=d,r.printSchemaWithDirectives=function(e,t={}){let r=d(e,t);return(0,n.print)(r)},r.astFromSchema=p,r.astFromDirective=f,r.getDirectiveNodes=h,r.astFromArg=m,r.astFromObjectType=y,r.astFromInterfaceType=g,r.astFromUnionType=v,r.astFromInputObjectType=T,r.astFromEnumType=E,r.astFromScalarType=_,r.astFromField=b,r.astFromInputField=S,r.astFromEnumValue=I,r.makeDeprecatedDirective=O,r.makeDirectiveNode=N,r.makeDirectiveNodes=w;let n=e.r(86846),i=e.r(45057),s=e.r(82223),o=e.r(14890),a=e.r(9487),l=e.r(36312),u=e.r(85959),c=e.r(59402);function d(e,t={}){let r=t.pathToDirectivesInExtensions,i=e.getTypeMap(),s=p(e,r),o=null!=s?[s]:[];for(let t of e.getDirectives())(0,n.isSpecifiedDirective)(t)||o.push(f(t,e,r));for(let t in i){let s=i[t],a=(0,n.isSpecifiedScalarType)(s),l=(0,n.isIntrospectionType)(s);if(!a&&!l)if((0,n.isObjectType)(s))o.push(y(s,e,r));else if((0,n.isInterfaceType)(s))o.push(g(s,e,r));else if((0,n.isUnionType)(s))o.push(v(s,e,r));else if((0,n.isInputObjectType)(s))o.push(T(s,e,r));else if((0,n.isEnumType)(s))o.push(E(s,e,r));else if((0,n.isScalarType)(s))o.push(_(s,e,r));else throw Error(`Unknown type ${s}.`)}return{kind:n.Kind.DOCUMENT,definitions:o}}function p(e,t){let r=new Map([["query",void 0],["mutation",void 0],["subscription",void 0]]),s=[];if(null!=e.astNode&&s.push(e.astNode),null!=e.extensionASTNodes)for(let t of e.extensionASTNodes)s.push(t);for(let e of s)if(e.operationTypes)for(let t of e.operationTypes)r.set(t.operation,t);let o=(0,c.getRootTypeMap)(e);for(let[e,t]of r){let s=o.get(e);if(null!=s){let o=(0,i.astFromType)(s);null!=t?t.type=o:r.set(e,{kind:n.Kind.OPERATION_TYPE_DEFINITION,operation:e,type:o})}}let l=[...r.values()].filter(u.isSome),d=h(e,e,t);if(!l.length&&!d.length)return null;let p={kind:null!=l?n.Kind.SCHEMA_DEFINITION:n.Kind.SCHEMA_EXTENSION,operationTypes:l,directives:d},f=(0,a.getDescriptionNode)(e);return f&&(p.description=f),p}function f(e,t,r){return{kind:n.Kind.DIRECTIVE_DEFINITION,description:(0,a.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},arguments:e.args?.map(e=>m(e,t,r)),repeatable:e.isRepeatable,locations:e.locations?.map(e=>({kind:n.Kind.NAME,value:e}))||[]}}function h(e,t,r){let i,s=[],o=(0,l.getDirectivesInExtensions)(e,r);null!=o&&(i=w(t,o));let a=null,u=null,c=null;return null!=i&&(s=i.filter(e=>n.specifiedDirectives.every(t=>t.name!==e.name.value)),a=i.find(e=>"deprecated"===e.name.value),u=i.find(e=>"specifiedBy"===e.name.value),c=i.find(e=>"oneOf"===e.name.value)),null!=e.deprecationReason&&null==a&&(a=O(e.deprecationReason)),(null!=e.specifiedByUrl||null!=e.specifiedByURL&&null==u)&&(u=N("specifiedBy",{url:e.specifiedByUrl||e.specifiedByURL})),e.isOneOf&&null==c&&(c=N("oneOf")),null!=a&&s.push(a),null!=u&&s.push(u),null!=c&&s.push(c),s}function m(e,t,r){return{kind:n.Kind.INPUT_VALUE_DEFINITION,description:(0,a.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},type:(0,i.astFromType)(e.type),defaultValue:void 0!==e.defaultValue?(0,s.astFromValue)(e.defaultValue,e.type)??void 0:void 0,directives:h(e,t,r)}}function y(e,t,r){return{kind:n.Kind.OBJECT_TYPE_DEFINITION,description:(0,a.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},fields:Object.values(e.getFields()).map(e=>b(e,t,r)),interfaces:Object.values(e.getInterfaces()).map(e=>(0,i.astFromType)(e)),directives:h(e,t,r)}}function g(e,t,r){let s={kind:n.Kind.INTERFACE_TYPE_DEFINITION,description:(0,a.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},fields:Object.values(e.getFields()).map(e=>b(e,t,r)),directives:h(e,t,r)};return"getInterfaces"in e&&(s.interfaces=Object.values(e.getInterfaces()).map(e=>(0,i.astFromType)(e))),s}function v(e,t,r){return{kind:n.Kind.UNION_TYPE_DEFINITION,description:(0,a.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},directives:h(e,t,r),types:e.getTypes().map(e=>(0,i.astFromType)(e))}}function T(e,t,r){return{kind:n.Kind.INPUT_OBJECT_TYPE_DEFINITION,description:(0,a.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},fields:Object.values(e.getFields()).map(e=>S(e,t,r)),directives:h(e,t,r)}}function E(e,t,r){return{kind:n.Kind.ENUM_TYPE_DEFINITION,description:(0,a.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},values:Object.values(e.getValues()).map(e=>I(e,t,r)),directives:h(e,t,r)}}function _(e,t,r){let i=w(t,(0,l.getDirectivesInExtensions)(e,r)),s=e.specifiedByUrl||e.specifiedByURL;return s&&!i.some(e=>"specifiedBy"===e.name.value)&&i.push(N("specifiedBy",{url:s})),{kind:n.Kind.SCALAR_TYPE_DEFINITION,description:(0,a.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},directives:i}}function b(e,t,r){return{kind:n.Kind.FIELD_DEFINITION,description:(0,a.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},arguments:e.args.map(e=>m(e,t,r)),type:(0,i.astFromType)(e.type),directives:h(e,t,r)}}function S(e,t,r){return{kind:n.Kind.INPUT_VALUE_DEFINITION,description:(0,a.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},type:(0,i.astFromType)(e.type),directives:h(e,t,r),defaultValue:(0,s.astFromValue)(e.defaultValue,e.type)??void 0}}function I(e,t,r){return{kind:n.Kind.ENUM_VALUE_DEFINITION,description:(0,a.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},directives:h(e,t,r)}}function O(e){return N("deprecated",{reason:e},n.GraphQLDeprecatedDirective)}function N(e,t,r){let i=[];for(let e in t){let a,l=t[e];if(null!=r){let t=r.args.find(t=>t.name===e);t&&(a=(0,s.astFromValue)(l,t.type))}null==a&&(a=(0,o.astFromValueUntyped)(l)),null!=a&&i.push({kind:n.Kind.ARGUMENT,name:{kind:n.Kind.NAME,value:e},value:a})}return{kind:n.Kind.DIRECTIVE,name:{kind:n.Kind.NAME,value:e},arguments:i}}function w(e,t){let r=[];for(let{name:n,args:i}of t){let t=e?.getDirective(n);r.push(N(n,i,t))}return r}},83227,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateGraphQlDocuments=function(e,t,r=i()){let s=new Set,o=new Map;for(let e of t)for(let t of e.definitions)t.kind===n.Kind.FRAGMENT_DEFINITION?o.set(t.name.value,t):s.add(t);let a={kind:n.Kind.DOCUMENT,definitions:Array.from([...s,...o.values()])},l=(0,n.validate)(e,a,r);for(let e of l)if(e.stack=e.message,e.locations)for(let t of e.locations)e.stack+=`
    at ${e.source?.name}:${t.line}:${t.column}`;return l},r.createDefaultRules=i;let n=e.r(86846);function i(){let e=["NoUnusedFragmentsRule","NoUnusedVariablesRule","KnownDirectivesRule"];return n.versionInfo.major<15&&(e=e.map(e=>e.replace(/Rule$/,""))),n.specifiedRules.filter(t=>!e.includes(t.name))}},42844,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseGraphQLJSON=function(e,t,r){var i;let s=JSON.parse((65279===(i=(i=t).toString()).charCodeAt(0)&&(i=i.slice(1)),i));if(s.data&&(s=s.data),"Document"===s.kind)return{location:e,document:s};if(s.__schema)return{location:e,schema:(0,n.buildClientSchema)(s,r)};if("string"==typeof s)return{location:e,rawSDL:s};throw Error("Not valid JSON content")};let n=e.r(86846)},99481,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.resetComments=function(){i={}},r.collectComment=function(e){let t=e.name?.value;if(null!=t)switch(s(e,t),e.kind){case"EnumTypeDefinition":if(e.values)for(let r of e.values)s(r,t,r.name.value);break;case"ObjectTypeDefinition":case"InputObjectTypeDefinition":case"InterfaceTypeDefinition":if(e.fields){for(let r of e.fields)if(s(r,t,r.name.value),"FieldDefinition"===r.kind&&r.arguments)for(let e of r.arguments)s(e,t,r.name.value,e.name.value)}}},r.pushComment=s,r.printComment=o,r.printWithComments=function(e){return(0,n.visit)(e,f)},r.getDescription=function(e,t){return null!=e.description?e.description.value:t?.commentDescriptions?h(e):void 0},r.getComment=h,r.getLeadingCommentBlock=m,r.dedentBlockStringValue=y,r.getBlockStringIndentation=g;let n=e.r(86846),i={};function s(e,t,r,n){let s=h(e);if("string"!=typeof s||0===s.length)return;let o=[t];r&&(o.push(r),n&&o.push(n));let a=o.join(".");i[a]||(i[a]=[]),i[a].push(s)}function o(e){return"\n# "+e.replace(/\n/g,"\n# ")}function a(e,t){return e?e.filter(e=>e).join(t||""):""}function l(e){return e?.some(e=>e.includes("\n"))??!1}function u(e){return e&&`  ${e.replace(/\n/g,"\n  ")}`}function c(e){return e&&0!==e.length?`{
${u(a(e,"\n"))}
}`:""}function d(e,t,r){return t?e+t+(r||""):""}let p={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>a(e.definitions,"\n\n")},OperationDefinition:{leave:e=>{let t=d("(",a(e.variableDefinitions,", "),")");return a([e.operation,a([e.name,t]),a(e.directives," ")]," ")+" "+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:r,directives:n})=>e+": "+t+d(" = ",r)+d(" ",a(n," "))},SelectionSet:{leave:({selections:e})=>c(e)},Field:{leave({alias:e,name:t,arguments:r,directives:n,selectionSet:i}){let s=d("",e,": ")+t,o=s+d("(",a(r,", "),")");return o.length>80&&(o=s+d("(\n",u(a(r,"\n")),"\n)")),a([o,a(n," "),i]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+d(" ",a(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:r})=>a(["...",d("on ",e),a(t," "),r]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:r,directives:n,selectionSet:i})=>`fragment ${e}${d("(",a(r,", "),")")} on ${t} ${d("",a(n," ")," ")}`+i},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?function(e,t=!1){let r=e.replace(/\\/g,"\\\\").replace(/"""/g,'\\"""');return(" "===e[0]||"	"===e[0])&&-1===e.indexOf("\n")?`"""${r.replace(/"$/,'"\n')}"""`:`"""
${t?r:u(r)}
"""`}(e):JSON.stringify(e)},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+a(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+a(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+d("(",a(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({directives:e,operationTypes:t})=>a(["schema",a(e," "),c(t)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({name:e,directives:t})=>a(["scalar",e,a(t," ")]," ")},ObjectTypeDefinition:{leave:({name:e,interfaces:t,directives:r,fields:n})=>a(["type",e,d("implements ",a(t," & ")),a(r," "),c(n)]," ")},FieldDefinition:{leave:({name:e,arguments:t,type:r,directives:n})=>e+(l(t)?d("(\n",u(a(t,"\n")),"\n)"):d("(",a(t,", "),")"))+": "+r+d(" ",a(n," "))},InputValueDefinition:{leave:({name:e,type:t,defaultValue:r,directives:n})=>a([e+": "+t,d("= ",r),a(n," ")]," ")},InterfaceTypeDefinition:{leave:({name:e,interfaces:t,directives:r,fields:n})=>a(["interface",e,d("implements ",a(t," & ")),a(r," "),c(n)]," ")},UnionTypeDefinition:{leave:({name:e,directives:t,types:r})=>a(["union",e,a(t," "),d("= ",a(r," | "))]," ")},EnumTypeDefinition:{leave:({name:e,directives:t,values:r})=>a(["enum",e,a(t," "),c(r)]," ")},EnumValueDefinition:{leave:({name:e,directives:t})=>a([e,a(t," ")]," ")},InputObjectTypeDefinition:{leave:({name:e,directives:t,fields:r})=>a(["input",e,a(t," "),c(r)]," ")},DirectiveDefinition:{leave:({name:e,arguments:t,repeatable:r,locations:n})=>"directive @"+e+(l(t)?d("(\n",u(a(t,"\n")),"\n)"):d("(",a(t,", "),")"))+(r?" repeatable":"")+" on "+a(n," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>a(["extend schema",a(e," "),c(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>a(["extend scalar",e,a(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:r,fields:n})=>a(["extend type",e,d("implements ",a(t," & ")),a(r," "),c(n)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:r,fields:n})=>a(["extend interface",e,d("implements ",a(t," & ")),a(r," "),c(n)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:r})=>a(["extend union",e,a(t," "),d("= ",a(r," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:r})=>a(["extend enum",e,a(t," "),c(r)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:r})=>a(["extend input",e,a(t," "),c(r)]," ")}},f=Object.keys(p).reduce((e,t)=>{var r;return{...e,[t]:{leave:(r=p[t].leave,(e,t,n,s,l)=>{let u=[],c=s.reduce((e,t)=>(["fields","arguments","values"].includes(t)&&e.name&&u.push(e.name.value),e[t]),l[0]),d=[...u,c?.name?.value].filter(Boolean).join("."),p=[];return e.kind.includes("Definition")&&i[d]&&p.push(...i[d]),a([...p.map(o),e.description,r(e,t,n,s,l)],"\n")})}}},{});function h(e){let t=m(e);if(void 0!==t)return y(`
${t}`)}function m(e){let t=e.loc;if(!t)return;let r=[],i=t.startToken.prev;for(;null!=i&&i.kind===n.TokenKind.COMMENT&&null!=i.next&&null!=i.prev&&i.line+1===i.next.line&&i.line!==i.prev.line;){let e=String(i.value);r.push(e),i=i.prev}return r.length>0?r.reverse().join("\n"):void 0}function y(e){let t=e.split(/\r\n|[\n\r]/g),r=g(t);if(0!==r)for(let e=1;e<t.length;e++)t[e]=t[e].slice(r);for(;t.length>0&&T(t[0]);)t.shift();for(;t.length>0&&T(t[t.length-1]);)t.pop();return t.join("\n")}function g(e){let t=null;for(let r=1;r<e.length;r++){let n=e[r],i=v(n);if(i!==n.length&&(null===t||i<t)&&0===(t=i))break}return null===t?0:t}function v(e){let t=0;for(;t<e.length&&(" "===e[t]||"	"===e[t]);)t++;return t}function T(e){return v(e)===e.length}},5649,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseGraphQLSDL=function(e,t,r={}){let i;try{r.commentDescriptions&&t.includes("#")?(i=s(t,r),r.noLocation&&(i=(0,n.parse)((0,n.print)(i),r))):i=(0,n.parse)(new n.Source(t,e),r)}catch(e){if(e.message.includes("EOF")&&""===t.replace(/(\#[^*]*)/g,"").trim())i={kind:n.Kind.DOCUMENT,definitions:[]};else throw e}return{location:e,document:i}},r.transformCommentsToDescriptions=s,r.isDescribable=o;let n=e.r(86846),i=e.r(99481);function s(e,t={}){let r=(0,n.parse)(e,{...t,noLocation:!1});return(0,n.visit)(r,{leave:e=>{if(o(e)){let t=(0,i.getLeadingCommentBlock)(e);if(void 0!==t){let r=(0,i.dedentBlockStringValue)("\n"+t),s=r.includes("\n");return e.description?{...e,description:{...e.description,value:e.description.value+"\n"+r,block:!0}}:{...e,description:{kind:n.Kind.STRING,value:r,block:s}}}}}})}function o(e){return(0,n.isTypeSystemDefinitionNode)(e)||e.kind===n.Kind.FIELD_DEFINITION||e.kind===n.Kind.INPUT_VALUE_DEFINITION||e.kind===n.Kind.ENUM_VALUE_DEFINITION}},11629,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.buildOperationNodeForField=function({schema:e,kind:t,field:r,models:i,ignore:p=[],depthLimit:f,circularReferenceDepth:h,argNames:m,selectedFields:y=!0}){o=[],l();let g=(0,s.getRootTypeNames)(e),v=function({schema:e,fieldName:t,kind:r,models:i,ignore:l,depthLimit:p,circularReferenceDepth:f,argNames:h,selectedFields:m,rootTypeNames:y}){let g=(0,s.getDefinedRootType)(e,r),v=g.getFields()[t],T=`${t}_${r}`;if(v.args)for(let e of v.args){var E;let t=e.name;(!h||h.includes(t))&&(E=u(e,t),o.push(E))}return{kind:n.Kind.OPERATION_DEFINITION,operation:r,name:{kind:n.Kind.NAME,value:T},variableDefinitions:[],selectionSet:{kind:n.Kind.SELECTION_SET,selections:[function e({type:t,field:r,models:i,firstCall:s,path:l,ancestors:p,ignore:f,depthLimit:h,circularReferenceDepth:m,schema:y,depth:g,argNames:v,selectedFields:T,rootTypeNames:E}){let _=(0,n.getNamedType)(r.type),b=[],S=!1;if(r.args&&r.args.length&&(b=r.args.map(e=>{var t;let r=c(e.name,l);return v&&!v.includes(r)?((0,n.isNonNullType)(e.type)&&(S=!0),null):(s||(t=u(e,r),o.push(t)),{kind:n.Kind.ARGUMENT,name:{kind:n.Kind.NAME,value:e.name},value:{kind:n.Kind.VARIABLE,name:{kind:n.Kind.NAME,value:c(e.name,l)}}})}).filter(Boolean)),S)return null;let I=[...l,r.name],O=I.join("."),N=r.name;return(a.has(O)&&a.get(O)!==r.type.toString()&&(N+=r.type.toString().replace(/!/g,"NonNull").replace(/\[/g,"List").replace(/\]/g,"")),a.set(O,r.type.toString()),(0,n.isScalarType)(_)||(0,n.isEnumType)(_))?{kind:n.Kind.FIELD,name:{kind:n.Kind.NAME,value:r.name},...N!==r.name&&{alias:{kind:n.Kind.NAME,value:N}},arguments:b}:{kind:n.Kind.FIELD,name:{kind:n.Kind.NAME,value:r.name},...N!==r.name&&{alias:{kind:n.Kind.NAME,value:N}},selectionSet:function t({parent:r,type:i,models:s,firstCall:o,path:a,ancestors:l,ignore:u,depthLimit:c,circularReferenceDepth:p,schema:f,depth:h,argNames:m,selectedFields:y,rootTypeNames:g}){if("boolean"!=typeof y||!(h>c)){if((0,n.isUnionType)(i)){let e=i.getTypes();return{kind:n.Kind.SELECTION_SET,selections:e.filter(e=>!d([...l,e],{depth:p})).map(e=>({kind:n.Kind.INLINE_FRAGMENT,typeCondition:{kind:n.Kind.NAMED_TYPE,name:{kind:n.Kind.NAME,value:e.name}},selectionSet:t({parent:i,type:e,models:s,path:a,ancestors:l,ignore:u,depthLimit:c,circularReferenceDepth:p,schema:f,depth:h,argNames:m,selectedFields:y,rootTypeNames:g})})).filter(e=>e?.selectionSet?.selections?.length>0)}}if((0,n.isInterfaceType)(i)){let e=Object.values(f.getTypeMap()).filter(e=>(0,n.isObjectType)(e)&&e.getInterfaces().includes(i));return{kind:n.Kind.SELECTION_SET,selections:e.filter(e=>!d([...l,e],{depth:p})).map(e=>({kind:n.Kind.INLINE_FRAGMENT,typeCondition:{kind:n.Kind.NAMED_TYPE,name:{kind:n.Kind.NAME,value:e.name}},selectionSet:t({parent:i,type:e,models:s,path:a,ancestors:l,ignore:u,depthLimit:c,circularReferenceDepth:p,schema:f,depth:h,argNames:m,selectedFields:y,rootTypeNames:g})})).filter(e=>e?.selectionSet?.selections?.length>0)}}if((0,n.isObjectType)(i)&&!g.has(i.name)){let t=u.includes(i.name)||u.includes(`${r.name}.${a[a.length-1]}`),v=s.includes(i.name);if(!o&&v&&!t)return{kind:n.Kind.SELECTION_SET,selections:[{kind:n.Kind.FIELD,name:{kind:n.Kind.NAME,value:"id"}}]};let T=i.getFields();return{kind:n.Kind.SELECTION_SET,selections:Object.keys(T).filter(e=>!d([...l,(0,n.getNamedType)(T[e].type)],{depth:p})).map(t=>{let r="object"!=typeof y||y[t];return r?e({type:i,field:T[t],models:s,path:[...a,t],ancestors:l,ignore:u,depthLimit:c,circularReferenceDepth:p,schema:f,depth:h,argNames:m,selectedFields:r,rootTypeNames:g}):null}).filter(e=>null!=e&&(!("selectionSet"in e)||!!e.selectionSet?.selections?.length))}}}}({parent:t,type:_,models:i,firstCall:s,path:I,ancestors:[...p,t],ignore:f,depthLimit:h,circularReferenceDepth:m,schema:y,depth:g+1,argNames:v,selectedFields:T,rootTypeNames:E})||void 0,arguments:b}}({type:g,field:v,models:i,firstCall:!0,path:[],ancestors:[],ignore:l,depthLimit:p,circularReferenceDepth:f,schema:e,depth:0,argNames:h,selectedFields:m,rootTypeNames:y})]}}}({schema:e,fieldName:r,kind:t,models:i||[],ignore:p,depthLimit:f||1/0,circularReferenceDepth:h||1,argNames:m,selectedFields:y,rootTypeNames:g});return v.variableDefinitions=[...o],o=[],l(),v};let n=e.r(86846),i=e.r(14890),s=e.r(59402),o=[],a=new Map;function l(){a=new Map}function u(e,t){let r;try{let t=(0,n.astFromValue)(e.defaultValue,e.type);r=null==t?void 0:t}catch(n){let t=(0,i.astFromValueUntyped)(e.defaultValue);r=null==t?void 0:t}return{kind:n.Kind.VARIABLE_DEFINITION,variable:{kind:n.Kind.VARIABLE,name:{kind:n.Kind.NAME,value:t||e.name}},type:function e(t){return(0,n.isListType)(t)?{kind:n.Kind.LIST_TYPE,type:e(t.ofType)}:(0,n.isNonNullType)(t)?{kind:n.Kind.NON_NULL_TYPE,type:e(t.ofType)}:{kind:n.Kind.NAMED_TYPE,name:{kind:n.Kind.NAME,value:t.name}}}(e.type),defaultValue:r}}function c(e,t){return[...t,e].join("_")}function d(e,t={depth:1}){let r=e[e.length-1];return!(0,n.isScalarType)(r)&&e.filter(e=>e.name===r.name).length>t.depth}},76559,(e,t,r)=>{"use strict";var n,i;Object.defineProperty(r,"__esModule",{value:!0}),r.DirectiveLocation=void 0,(i=n||(r.DirectiveLocation=n={})).QUERY="QUERY",i.MUTATION="MUTATION",i.SUBSCRIPTION="SUBSCRIPTION",i.FIELD="FIELD",i.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",i.FRAGMENT_SPREAD="FRAGMENT_SPREAD",i.INLINE_FRAGMENT="INLINE_FRAGMENT",i.VARIABLE_DEFINITION="VARIABLE_DEFINITION",i.SCHEMA="SCHEMA",i.SCALAR="SCALAR",i.OBJECT="OBJECT",i.FIELD_DEFINITION="FIELD_DEFINITION",i.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",i.INTERFACE="INTERFACE",i.UNION="UNION",i.ENUM="ENUM",i.ENUM_VALUE="ENUM_VALUE",i.INPUT_OBJECT="INPUT_OBJECT",i.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"},94520,(e,t,r)=>{"use strict";var n,i;Object.defineProperty(r,"__esModule",{value:!0}),r.MapperKind=void 0,(i=n||(r.MapperKind=n={})).TYPE="MapperKind.TYPE",i.SCALAR_TYPE="MapperKind.SCALAR_TYPE",i.ENUM_TYPE="MapperKind.ENUM_TYPE",i.COMPOSITE_TYPE="MapperKind.COMPOSITE_TYPE",i.OBJECT_TYPE="MapperKind.OBJECT_TYPE",i.INPUT_OBJECT_TYPE="MapperKind.INPUT_OBJECT_TYPE",i.ABSTRACT_TYPE="MapperKind.ABSTRACT_TYPE",i.UNION_TYPE="MapperKind.UNION_TYPE",i.INTERFACE_TYPE="MapperKind.INTERFACE_TYPE",i.ROOT_OBJECT="MapperKind.ROOT_OBJECT",i.QUERY="MapperKind.QUERY",i.MUTATION="MapperKind.MUTATION",i.SUBSCRIPTION="MapperKind.SUBSCRIPTION",i.DIRECTIVE="MapperKind.DIRECTIVE",i.FIELD="MapperKind.FIELD",i.COMPOSITE_FIELD="MapperKind.COMPOSITE_FIELD",i.OBJECT_FIELD="MapperKind.OBJECT_FIELD",i.ROOT_FIELD="MapperKind.ROOT_FIELD",i.QUERY_ROOT_FIELD="MapperKind.QUERY_ROOT_FIELD",i.MUTATION_ROOT_FIELD="MapperKind.MUTATION_ROOT_FIELD",i.SUBSCRIPTION_ROOT_FIELD="MapperKind.SUBSCRIPTION_ROOT_FIELD",i.INTERFACE_FIELD="MapperKind.INTERFACE_FIELD",i.INPUT_OBJECT_FIELD="MapperKind.INPUT_OBJECT_FIELD",i.ARGUMENT="MapperKind.ARGUMENT",i.ENUM_VALUE="MapperKind.ENUM_VALUE"},5891,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getObjectTypeFromTypeMap=function(e,t){if(t){let r=e[t.name];if((0,n.isObjectType)(r))return r}};let n=e.r(86846)},32186,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createNamedStub=i,r.createStub=function e(t,r){switch(t.kind){case n.Kind.LIST_TYPE:return new n.GraphQLList(e(t.type,r));case n.Kind.NON_NULL_TYPE:return new n.GraphQLNonNull(e(t.type,r));default:if("output"===r)return i(t.name.value,"object");return i(t.name.value,"input")}},r.isNamedStub=function(e){if("getFields"in e){let t=e.getFields();for(let e in t)return"_fake"===t[e].name}return!1},r.getBuiltInForStub=function(e){switch(e.name){case n.GraphQLInt.name:return n.GraphQLInt;case n.GraphQLFloat.name:return n.GraphQLFloat;case n.GraphQLString.name:return n.GraphQLString;case n.GraphQLBoolean.name:return n.GraphQLBoolean;case n.GraphQLID.name:return n.GraphQLID;default:return e}};let n=e.r(86846);function i(e,t){return new("object"===t?n.GraphQLObjectType:"interface"===t?n.GraphQLInterfaceType:n.GraphQLInputObjectType)({name:e,fields:{_fake:{type:n.GraphQLString}}})}},31769,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.rewireTypes=function(e,t){let r=Object.create(null);for(let t in e)r[t]=e[t];let s=Object.create(null);for(let e in r){let t=r[e];if(null==t||e.startsWith("__"))continue;let n=t.name;if(!n.startsWith("__")){if(null!=s[n]){console.warn(`Duplicate schema type name ${n} found; keeping the existing one found in the schema`);continue}s[n]=t}}for(let e in s)s[e]=a(s[e]);return{typeMap:s,directives:t.map(e=>(function(e){if((0,n.isSpecifiedDirective)(e))return e;let t=e.toConfig();return t.args=o(t.args),new n.GraphQLDirective(t)})(e))};function o(e){let t={};for(let r in e){let n=e[r],i=c(n.type);null!=i&&(n.type=i,t[r]=n)}return t}function a(e){if((0,n.isObjectType)(e)){let t=e.toConfig(),r={...t,fields:()=>l(t.fields),interfaces:()=>u(t.interfaces)};return new n.GraphQLObjectType(r)}if((0,n.isInterfaceType)(e)){let t=e.toConfig(),r={...t,fields:()=>l(t.fields)};return"interfaces"in r&&(r.interfaces=()=>u(t.interfaces)),new n.GraphQLInterfaceType(r)}if((0,n.isUnionType)(e)){let t=e.toConfig(),r={...t,types:()=>u(t.types)};return new n.GraphQLUnionType(r)}if((0,n.isInputObjectType)(e)){let t=e.toConfig(),r={...t,fields:()=>(function(e){let t={};for(let r in e){let n=e[r],i=c(n.type);null!=i&&(n.type=i,t[r]=n)}return t})(t.fields)};return new n.GraphQLInputObjectType(r)}if((0,n.isEnumType)(e)){let t=e.toConfig();return new n.GraphQLEnumType(t)}else if((0,n.isScalarType)(e)){if((0,n.isSpecifiedScalarType)(e))return e;let t=e.toConfig();return new n.GraphQLScalarType(t)}throw Error(`Unexpected schema type: ${e}`)}function l(e){let t={};for(let r in e){let n=e[r],i=c(n.type);null!=i&&n.args&&(n.type=i,n.args=o(n.args),t[r]=n)}return t}function u(e){let t=[];for(let r of e){let e=c(r);null!=e&&t.push(e)}return t}function c(e){if((0,n.isListType)(e)){let t=c(e.ofType);return null!=t?new n.GraphQLList(t):null}if((0,n.isNonNullType)(e)){let t=c(e.ofType);return null!=t?new n.GraphQLNonNull(t):null}if((0,n.isNamedType)(e)){let t=r[e.name];return void 0===t&&(s[(t=(0,i.isNamedStub)(e)?(0,i.getBuiltInForStub)(e):a(e)).name]=r[e.name]=t),null!=t?s[t.name]:null}return null}};let n=e.r(86846),i=e.r(32186)},49282,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.transformInputValue=s,r.serializeInputValue=function(e,t){return s(e,t,(e,t)=>{try{return e.serialize(t)}catch{return t}})},r.parseInputValue=function(e,t){return s(e,t,(e,t)=>{try{return e.parseValue(t)}catch{return t}})},r.parseInputValueLiteral=function(e,t){return s(e,t,(e,t)=>e.parseLiteral(t,{}))};let n=e.r(86846),i=e.r(85959);function s(e,t,r=null,o=null){if(null==t)return t;let a=(0,n.getNullableType)(e);if((0,n.isLeafType)(a))return null!=r?r(a,t):t;if((0,n.isListType)(a))return(0,i.asArray)(t).map(e=>s(a.ofType,e,r,o));if((0,n.isInputObjectType)(a)){let e=a.getFields(),n={};for(let i in t){let a=e[i];null!=a&&(n[i]=s(a.type,t[i],r,o))}return null!=o?o(a,n):n}}},26441,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mapSchema=function(e,t={}){var r,l;let d,m,y=f(p(u(c((r=u(c(e.getTypeMap(),e,a.serializeInputValue),e,t,e=>(0,n.isLeafType)(e)),l=e,(m=null!=(d=t[s.MapperKind.ENUM_VALUE])?d:null)?u(r,l,{[s.MapperKind.ENUM_TYPE]:e=>{let t=e.toConfig(),r=t.values,i={};for(let t in r){let n=r[t],s=m(n,e.name,l,t);if(void 0===s)i[t]=n;else if(Array.isArray(s)){let[e,t]=s;i[e]=void 0===t?n:t}else null!==s&&(i[t]=s)}return h(new n.GraphQLEnumType({...t,values:i}))}},e=>(0,n.isEnumType)(e)):r),e,a.parseInputValue),e,t,e=>!(0,n.isLeafType)(e)),e,t),e,t),g=function(e,t,r){let n,i=null!=(n=r[s.MapperKind.DIRECTIVE])?n:null;if(null==i)return e.slice();let o=[];for(let r of e){let e=i(r,t);void 0===e?o.push(r):null!==e&&o.push(e)}return o}(e.getDirectives(),e,t),{typeMap:v,directives:T}=(0,o.rewireTypes)(y,g);return new n.GraphQLSchema({...e.toConfig(),query:(0,i.getObjectTypeFromTypeMap)(v,(0,i.getObjectTypeFromTypeMap)(y,e.getQueryType())),mutation:(0,i.getObjectTypeFromTypeMap)(v,(0,i.getObjectTypeFromTypeMap)(y,e.getMutationType())),subscription:(0,i.getObjectTypeFromTypeMap)(v,(0,i.getObjectTypeFromTypeMap)(y,e.getSubscriptionType())),types:Object.values(v),directives:T})},r.correctASTNodes=h;let n=e.r(86846),i=e.r(5891),s=e.r(94520),o=e.r(31769),a=e.r(49282),l=["String","ID","Int","Float","Boolean"];function u(e,t,r,i=()=>!0){let o={};for(let a in e)if(!a.startsWith("__")&&!l.includes(a)){let l=e[a];if(null==l||!i(l)){o[a]=l;continue}let u=function(e,t,r){let i,o,a,l=[...(o=e.getType(r),a=[s.MapperKind.TYPE],(0,n.isObjectType)(o)?(a.push(s.MapperKind.COMPOSITE_TYPE,s.MapperKind.OBJECT_TYPE),r===e.getQueryType()?.name?a.push(s.MapperKind.ROOT_OBJECT,s.MapperKind.QUERY):r===e.getMutationType()?.name?a.push(s.MapperKind.ROOT_OBJECT,s.MapperKind.MUTATION):r===e.getSubscriptionType()?.name&&a.push(s.MapperKind.ROOT_OBJECT,s.MapperKind.SUBSCRIPTION)):(0,n.isInputObjectType)(o)?a.push(s.MapperKind.INPUT_OBJECT_TYPE):(0,n.isInterfaceType)(o)?a.push(s.MapperKind.COMPOSITE_TYPE,s.MapperKind.ABSTRACT_TYPE,s.MapperKind.INTERFACE_TYPE):(0,n.isUnionType)(o)?a.push(s.MapperKind.COMPOSITE_TYPE,s.MapperKind.ABSTRACT_TYPE,s.MapperKind.UNION_TYPE):(0,n.isEnumType)(o)?a.push(s.MapperKind.ENUM_TYPE):(0,n.isScalarType)(o)&&a.push(s.MapperKind.SCALAR_TYPE),a)];for(;!i&&l.length>0;)i=t[l.pop()];return null!=i?i:null}(t,r,a);if(null==u){o[a]=l;continue}let c=u(l,t);if(void 0===c){o[a]=l;continue}o[a]=c}return o}function c(e,t,r){let n=f(e,t,{[s.MapperKind.ARGUMENT]:t=>{if(void 0===t.defaultValue)return t;let n=d(e,t.type);if(null!=n)return{...t,defaultValue:r(n,t.defaultValue)}}});return p(n,t,{[s.MapperKind.INPUT_OBJECT_FIELD]:e=>{if(void 0===e.defaultValue)return e;let t=d(n,e.type);if(null!=t)return{...e,defaultValue:r(t,e.defaultValue)}}})}function d(e,t){if((0,n.isListType)(t)){let r=d(e,t.ofType);return null!=r?new n.GraphQLList(r):null}if((0,n.isNonNullType)(t)){let r=d(e,t.ofType);return null!=r?new n.GraphQLNonNull(r):null}if((0,n.isNamedType)(t)){let r=e[t.name];return null!=r?r:null}return null}function p(e,t,r){let i={};for(let o in e)if(!o.startsWith("__")){let a=e[o];if(!(0,n.isObjectType)(a)&&!(0,n.isInterfaceType)(a)&&!(0,n.isInputObjectType)(a)){i[o]=a;continue}let l=function(e,t,r){let i,o,a,l=[...(o=e.getType(r),a=[s.MapperKind.FIELD],(0,n.isObjectType)(o)?(a.push(s.MapperKind.COMPOSITE_FIELD,s.MapperKind.OBJECT_FIELD),r===e.getQueryType()?.name?a.push(s.MapperKind.ROOT_FIELD,s.MapperKind.QUERY_ROOT_FIELD):r===e.getMutationType()?.name?a.push(s.MapperKind.ROOT_FIELD,s.MapperKind.MUTATION_ROOT_FIELD):r===e.getSubscriptionType()?.name&&a.push(s.MapperKind.ROOT_FIELD,s.MapperKind.SUBSCRIPTION_ROOT_FIELD)):(0,n.isInterfaceType)(o)?a.push(s.MapperKind.COMPOSITE_FIELD,s.MapperKind.INTERFACE_FIELD):(0,n.isInputObjectType)(o)&&a.push(s.MapperKind.INPUT_OBJECT_FIELD),a)];for(;!i&&l.length>0;)i=t[l.pop()];return i??null}(t,r,o);if(null==l){i[o]=a;continue}let u=a.toConfig(),c=u.fields,d={};for(let e in c){let r=c[e],n=l(r,e,o,t);if(void 0===n)d[e]=r;else if(Array.isArray(n)){let[e,t]=n;null!=t.astNode&&(t.astNode={...t.astNode,name:{...t.astNode.name,value:e}}),d[e]=void 0===t?r:t}else null!==n&&(d[e]=n)}(0,n.isObjectType)(a)?i[o]=h(new n.GraphQLObjectType({...u,fields:d})):(0,n.isInterfaceType)(a)?i[o]=h(new n.GraphQLInterfaceType({...u,fields:d})):i[o]=h(new n.GraphQLInputObjectType({...u,fields:d}))}return i}function f(e,t,r){let i={};for(let o in e)if(!o.startsWith("__")){let a=e[o];if(!(0,n.isObjectType)(a)&&!(0,n.isInterfaceType)(a)){i[o]=a;continue}let l=function(e){let t=e[s.MapperKind.ARGUMENT];return null!=t?t:null}(r);if(null==l){i[o]=a;continue}let u=a.toConfig(),c=u.fields,d={};for(let e in c){let r=c[e],n=r.args;if(null==n){d[e]=r;continue}let i=Object.keys(n);if(!i.length){d[e]=r;continue}let s={};for(let r of i){let i=n[r],a=l(i,e,o,t);if(void 0===a)s[r]=i;else if(Array.isArray(a)){let[e,t]=a;s[e]=t}else null!==a&&(s[r]=a)}d[e]={...r,args:s}}(0,n.isObjectType)(a)?i[o]=new n.GraphQLObjectType({...u,fields:d}):(0,n.isInterfaceType)(a)?i[o]=new n.GraphQLInterfaceType({...u,fields:d}):i[o]=new n.GraphQLInputObjectType({...u,fields:d})}return i}function h(e){if((0,n.isObjectType)(e)){let t=e.toConfig();if(null!=t.astNode){let e=[];for(let r in t.fields){let n=t.fields[r];null!=n.astNode&&e.push(n.astNode)}t.astNode={...t.astNode,kind:n.Kind.OBJECT_TYPE_DEFINITION,fields:e}}return null!=t.extensionASTNodes&&(t.extensionASTNodes=t.extensionASTNodes.map(e=>({...e,kind:n.Kind.OBJECT_TYPE_EXTENSION,fields:void 0}))),new n.GraphQLObjectType(t)}if((0,n.isInterfaceType)(e)){let t=e.toConfig();if(null!=t.astNode){let e=[];for(let r in t.fields){let n=t.fields[r];null!=n.astNode&&e.push(n.astNode)}t.astNode={...t.astNode,kind:n.Kind.INTERFACE_TYPE_DEFINITION,fields:e}}return null!=t.extensionASTNodes&&(t.extensionASTNodes=t.extensionASTNodes.map(e=>({...e,kind:n.Kind.INTERFACE_TYPE_EXTENSION,fields:void 0}))),new n.GraphQLInterfaceType(t)}if((0,n.isInputObjectType)(e)){let t=e.toConfig();if(null!=t.astNode){let e=[];for(let r in t.fields){let n=t.fields[r];null!=n.astNode&&e.push(n.astNode)}t.astNode={...t.astNode,kind:n.Kind.INPUT_OBJECT_TYPE_DEFINITION,fields:e}}return null!=t.extensionASTNodes&&(t.extensionASTNodes=t.extensionASTNodes.map(e=>({...e,kind:n.Kind.INPUT_OBJECT_TYPE_EXTENSION,fields:void 0}))),new n.GraphQLInputObjectType(t)}{if(!(0,n.isEnumType)(e))return e;let t=e.toConfig();if(null!=t.astNode){let e=[];for(let r in t.values){let n=t.values[r];null!=n.astNode&&e.push(n.astNode)}t.astNode={...t.astNode,values:e}}return null!=t.extensionASTNodes&&(t.extensionASTNodes=t.extensionASTNodes.map(e=>({...e,values:void 0}))),new n.GraphQLEnumType(t)}}},80336,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.filterSchema=function({schema:e,typeFilter:t=()=>!0,fieldFilter:r,rootFieldFilter:l,objectFieldFilter:u,interfaceFieldFilter:c,inputObjectFieldFilter:d,argumentFilter:p,directiveFilter:f,enumValueFilter:h}){return(0,s.mapSchema)(e,{[i.MapperKind.QUERY]:e=>o(e,"Query",l,p),[i.MapperKind.MUTATION]:e=>o(e,"Mutation",l,p),[i.MapperKind.SUBSCRIPTION]:e=>o(e,"Subscription",l,p),[i.MapperKind.OBJECT_TYPE]:e=>t(e.name,e)?a(n.GraphQLObjectType,e,u||r,p):null,[i.MapperKind.INTERFACE_TYPE]:e=>t(e.name,e)?a(n.GraphQLInterfaceType,e,c||r,p):null,[i.MapperKind.INPUT_OBJECT_TYPE]:e=>t(e.name,e)?a(n.GraphQLInputObjectType,e,d||r):null,[i.MapperKind.UNION_TYPE]:e=>t(e.name,e)?void 0:null,[i.MapperKind.ENUM_TYPE]:e=>t(e.name,e)?void 0:null,[i.MapperKind.SCALAR_TYPE]:e=>t(e.name,e)?void 0:null,[i.MapperKind.DIRECTIVE]:e=>f&&!f(e.name,e)?null:void 0,[i.MapperKind.ENUM_VALUE]:(e,t,r,n)=>h&&!h(t,n,e)?null:void 0})};let n=e.r(86846),i=e.r(94520),s=e.r(26441);function o(e,t,r,i){if(r||i){let s=e.toConfig();for(let n in s.fields){let o=s.fields[n];if(r&&!r(t,n,s.fields[n]))delete s.fields[n];else if(i&&o.args)for(let t in o.args)i(e.name,n,t,o.args[t])||delete o.args[t]}return new n.GraphQLObjectType(s)}return e}function a(e,t,r,n){if(r||n){let i=t.toConfig();for(let e in i.fields){let s=i.fields[e];if(r&&!r(t.name,e,i.fields[e]))delete i.fields[e];else if(n&&"args"in s)for(let r in s.args)n(t.name,e,r,s.args[r])||delete s.args[r]}return new e(i)}}},88822,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.healSchema=function(e){return i(e.getTypeMap(),e.getDirectives()),e},r.healTypes=i;let n=e.r(86846);function i(e,t){let r=Object.create(null);for(let t in e){let n=e[t];if(null==n||t.startsWith("__"))continue;let i=n.name;if(!i.startsWith("__")){if(null!=r[i]){console.warn(`Duplicate schema type name ${i} found; keeping the existing one found in the schema`);continue}r[i]=n}}for(let t in r){let n=r[t];e[t]=n}for(let e of t)e.args=e.args.filter(e=>(e.type=o(e.type),null!==e.type));for(let t in e){let a=e[t];!t.startsWith("__")&&t in r&&null!=a&&function(e){if((0,n.isObjectType)(e)){i(e),s(e);return}if((0,n.isInterfaceType)(e)){i(e),"getInterfaces"in e&&s(e);return}if((0,n.isUnionType)(e))return function(e){let t=e.getTypes();t.push(...t.splice(0).map(e=>o(e)).filter(Boolean))}(e);if((0,n.isInputObjectType)(e))return function(e){let t=e.getFields();for(let[e,r]of Object.entries(t))r.type=o(r.type),null===r.type&&delete t[e]}(e);if(!(0,n.isLeafType)(e))throw Error(`Unexpected schema type: ${e}`)}(a)}for(let t in e)t.startsWith("__")||t in r||delete e[t];function i(e){let t=e.getFields();for(let[e,r]of Object.entries(t))r.args.map(e=>(e.type=o(e.type),null===e.type?null:e)).filter(Boolean),r.type=o(r.type),null===r.type&&delete t[e]}function s(e){if("getInterfaces"in e){let t=e.getInterfaces();t.push(...t.splice(0).map(e=>o(e)).filter(Boolean))}}function o(t){if((0,n.isListType)(t)){let e=o(t.ofType);return null!=e?new n.GraphQLList(e):null}if((0,n.isNonNullType)(t)){let e=o(t.ofType);return null!=e?new n.GraphQLNonNull(e):null}if((0,n.isNamedType)(t)){let r=e[t.name];if(r&&t!==r)return r}return t}}},38321,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getResolversFromSchema=function(e,t){let r=Object.create(null),i=e.getTypeMap();for(let e in i)if(!e.startsWith("__")){let s=i[e];if((0,n.isScalarType)(s)){if(!(0,n.isSpecifiedScalarType)(s)){let t=s.toConfig();delete t.astNode,r[e]=new n.GraphQLScalarType(t)}}else if((0,n.isEnumType)(s))for(let t of(r[e]={},s.getValues()))r[e][t.name]=t.value;else if((0,n.isInterfaceType)(s))null!=s.resolveType&&(r[e]={__resolveType:s.resolveType});else if((0,n.isUnionType)(s))null!=s.resolveType&&(r[e]={__resolveType:s.resolveType});else if((0,n.isObjectType)(s)){r[e]={},null!=s.isTypeOf&&(r[e].__isTypeOf=s.isTypeOf);let n=s.getFields();for(let i in n){let s=n[i];if(null!=s.subscribe&&(r[e][i]=r[e][i]||{},r[e][i].subscribe=s.subscribe),null!=s.resolve&&s.resolve?.name!=="defaultFieldResolver"){switch(s.resolve?.name){case"defaultMergedResolver":if(!t)continue;break;case"defaultFieldResolver":continue}r[e][i]=r[e][i]||{},r[e][i].resolve=s.resolve}}}}return r};let n=e.r(86846)},38397,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.forEachField=function(e,t){let r=e.getTypeMap();for(let e in r){let i=r[e];if(!(0,n.getNamedType)(i).name.startsWith("__")&&(0,n.isObjectType)(i)){let r=i.getFields();for(let n in r)t(r[n],e,n)}}};let n=e.r(86846)},13669,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.forEachDefaultValue=function(e,t){let r=e.getTypeMap();for(let e in r){let i=r[e];if(!(0,n.getNamedType)(i).name.startsWith("__")){if((0,n.isObjectType)(i)){let e=i.getFields();for(let r in e)for(let n of e[r].args)n.defaultValue=t(n.type,n.defaultValue)}else if((0,n.isInputObjectType)(i)){let e=i.getFields();for(let r in e){let n=e[r];n.defaultValue=t(n.type,n.defaultValue)}}}}};let n=e.r(86846)},83750,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addTypes=function(e,t){let r=e.toConfig(),o={};for(let e of r.types)o[e.name]=e;let a={};for(let e of r.directives)a[e.name]=e;for(let e of t)(0,n.isNamedType)(e)?o[e.name]=e:(0,n.isDirective)(e)&&(a[e.name]=e);let{typeMap:l,directives:u}=(0,s.rewireTypes)(o,Object.values(a));return new n.GraphQLSchema({...r,query:(0,i.getObjectTypeFromTypeMap)(l,e.getQueryType()),mutation:(0,i.getObjectTypeFromTypeMap)(l,e.getMutationType()),subscription:(0,i.getObjectTypeFromTypeMap)(l,e.getSubscriptionType()),types:Object.values(l),directives:u})};let n=e.r(86846),i=e.r(5891),s=e.r(31769)},17448,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pruneSchema=function(e,t={}){let{skipEmptyCompositeTypePruning:r,skipEmptyUnionPruning:i,skipPruning:u,skipUnimplementedInterfacesPruning:c,skipUnusedTypesPruning:d}=t,p=[],f=e;do{let e=function(e){let t=[];for(let r of(0,a.getRootTypes)(e))t.push(r.name);return l(t,e)}(f);if(u){let t=[];for(let e in f.getTypeMap()){if(e.startsWith("__"))continue;let r=f.getType(e);r&&u(r)&&t.push(e)}e=l(t,f,e)}p=[],f=(0,o.mapSchema)(f,{[s.MapperKind.TYPE]:t=>{if(!e.has(t.name)&&!(0,n.isSpecifiedScalarType)(t))return((0,n.isUnionType)(t)||(0,n.isInputObjectType)(t)||(0,n.isInterfaceType)(t)||(0,n.isObjectType)(t)||(0,n.isScalarType)(t))&&(d||(0,n.isUnionType)(t)&&i&&!Object.keys(t.getTypes()).length||((0,n.isInputObjectType)(t)||(0,n.isInterfaceType)(t)||(0,n.isObjectType)(t))&&r&&!Object.keys(t.getFields()).length||(0,n.isInterfaceType)(t)&&c)?t:(p.push(t.name),e.delete(t.name),null);return t}})}while(p.length)return f};let n=e.r(86846),i=e.r(31214),s=e.r(94520),o=e.r(26441),a=e.r(59402);function l(e,t,r=new Set){let s=new Map;for(;e.length;){let o=e.pop();if(r.has(o)&&!0!==s[o])continue;let a=t.getType(o);if(a){if((0,n.isUnionType)(a)&&e.push(...a.getTypes().map(e=>e.name)),(0,n.isInterfaceType)(a)&&!0===s[o]&&(e.push(...(0,i.getImplementingTypes)(a.name,t)),s[o]=!1),(0,n.isEnumType)(a)&&e.push(...a.getValues().flatMap(e=>u(t,e))),"getInterfaces"in a&&e.push(...a.getInterfaces().map(e=>e.name)),"getFields"in a){let r=Object.entries(a.getFields());if(!r.length)continue;for(let[,i]of r){(0,n.isObjectType)(a)&&e.push(...i.args.flatMap(e=>{let r=[(0,n.getNamedType)(e.type).name];return r.push(...u(t,e)),r}));let r=(0,n.getNamedType)(i.type);e.push(r.name),e.push(...u(t,i)),!(0,n.isInterfaceType)(r)||r.name in s||(s[r.name]=!0)}}e.push(...u(t,a)),r.add(o)}}return r}function u(e,t){let r=new Set;if(t.astNode?.directives)for(let i of t.astNode.directives){let t=e.getDirective(i.name.value);if(t?.args)for(let e of t.args){let t=(0,n.getNamedType)(e.type);r.add(t.name)}}if(t.extensions?.directives)for(let i in t.extensions.directives){let t=e.getDirective(i);if(t?.args)for(let e of t.args){let t=(0,n.getNamedType)(e.type);r.add(t.name)}}return[...r]}},30284,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeDeep=function e(t,r=!1,s=!1,o=!1){let a,l,u;if(0===t.length)return;if(1===t.length)return t[0];let c=!0,d=t.every(e=>{if(Array.isArray(e)){if(void 0===a)return a=e.length,!0;else if(a===e.length)return!0}else c=!1;return!1});if(o&&d)return Array(a).fill(null).map((n,i)=>e(t.map(e=>e[i]),r,s,o));if(c)return t.flat(1);for(let a of(r&&(u=t.find(e=>i(e)))&&(null==l&&(l={}),Object.setPrototypeOf(l,Object.create(Object.getPrototypeOf(u)))),t))if(null!=a)if(i(a)){if(u){let e=Object.getPrototypeOf(l),t=Object.getPrototypeOf(a);if(t)for(let r of Object.getOwnPropertyNames(t)){let i=Object.getOwnPropertyDescriptor(t,r);(0,n.isSome)(i)&&Object.defineProperty(e,r,i)}}for(let t in a)null==l&&(l={}),t in l?l[t]=e([l[t],a[t]],r,s,o):l[t]=a[t]}else l=Array.isArray(a)&&Array.isArray(l)?e([l,a],r,s,o):a;return l};let n=e.r(85959);function i(e){return e&&"object"==typeof e&&!Array.isArray(e)}},8659,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseSelectionSet=function(e,t){return(0,n.parse)(e,t).definitions[0].selectionSet};let n=e.r(86846)},29712,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getResponseKeyFromInfo=function(e){return null!=e.fieldNodes[0].alias?e.fieldNodes[0].alias.value:e.fieldName}},75419,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.appendObjectFields=function(e,t,r){return null==e.getType(t)?(0,i.addTypes)(e,[new n.GraphQLObjectType({name:t,fields:r})]):(0,o.mapSchema)(e,{[s.MapperKind.OBJECT_TYPE]:e=>{if(e.name===t){let t=e.toConfig(),i=t.fields,s={};for(let e in i)s[e]=i[e];for(let e in r)s[e]=r[e];return(0,o.correctASTNodes)(new n.GraphQLObjectType({...t,fields:s}))}}})},r.removeObjectFields=function(e,t,r){let i={};return[(0,o.mapSchema)(e,{[s.MapperKind.OBJECT_TYPE]:e=>{if(e.name===t){let t=e.toConfig(),s=t.fields,a={};for(let e in s){let t=s[e];r(e,t)?i[e]=t:a[e]=t}return(0,o.correctASTNodes)(new n.GraphQLObjectType({...t,fields:a}))}}}),i]},r.selectObjectFields=function(e,t,r){let n={};return(0,o.mapSchema)(e,{[s.MapperKind.OBJECT_TYPE]:e=>{if(e.name===t){let t=e.toConfig().fields;for(let e in t){let i=t[e];r(e,i)&&(n[e]=i)}}}}),n},r.modifyObjectFields=function(e,t,r,i){let a={};return[(0,o.mapSchema)(e,{[s.MapperKind.OBJECT_TYPE]:e=>{if(e.name===t){let t=e.toConfig(),s=t.fields,l={};for(let e in s){let t=s[e];r(e,t)?a[e]=t:l[e]=t}for(let e in i){let t=i[e];l[e]=t}return(0,o.correctASTNodes)(new n.GraphQLObjectType({...t,fields:l}))}}}),a]};let n=e.r(86846),i=e.r(83750),s=e.r(94520),o=e.r(26441)},63935,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.renameType=function(e,t){if((0,n.isObjectType)(e))return new n.GraphQLObjectType({...e.toConfig(),name:t,astNode:null==e.astNode?e.astNode:{...e.astNode,name:{...e.astNode.name,value:t}},extensionASTNodes:null==e.extensionASTNodes?e.extensionASTNodes:e.extensionASTNodes.map(e=>({...e,name:{...e.name,value:t}}))});if((0,n.isInterfaceType)(e))return new n.GraphQLInterfaceType({...e.toConfig(),name:t,astNode:null==e.astNode?e.astNode:{...e.astNode,name:{...e.astNode.name,value:t}},extensionASTNodes:null==e.extensionASTNodes?e.extensionASTNodes:e.extensionASTNodes.map(e=>({...e,name:{...e.name,value:t}}))});if((0,n.isUnionType)(e))return new n.GraphQLUnionType({...e.toConfig(),name:t,astNode:null==e.astNode?e.astNode:{...e.astNode,name:{...e.astNode.name,value:t}},extensionASTNodes:null==e.extensionASTNodes?e.extensionASTNodes:e.extensionASTNodes.map(e=>({...e,name:{...e.name,value:t}}))});if((0,n.isInputObjectType)(e))return new n.GraphQLInputObjectType({...e.toConfig(),name:t,astNode:null==e.astNode?e.astNode:{...e.astNode,name:{...e.astNode.name,value:t}},extensionASTNodes:null==e.extensionASTNodes?e.extensionASTNodes:e.extensionASTNodes.map(e=>({...e,name:{...e.name,value:t}}))});if((0,n.isEnumType)(e))return new n.GraphQLEnumType({...e.toConfig(),name:t,astNode:null==e.astNode?e.astNode:{...e.astNode,name:{...e.astNode.name,value:t}},extensionASTNodes:null==e.extensionASTNodes?e.extensionASTNodes:e.extensionASTNodes.map(e=>({...e,name:{...e.name,value:t}}))});else if((0,n.isScalarType)(e))return new n.GraphQLScalarType({...e.toConfig(),name:t,astNode:null==e.astNode?e.astNode:{...e.astNode,name:{...e.astNode.name,value:t}},extensionASTNodes:null==e.extensionASTNodes?e.extensionASTNodes:e.extensionASTNodes.map(e=>({...e,name:{...e.name,value:t}}))});throw Error(`Unknown type ${e}.`)};let n=e.r(86846)},70694,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.updateArgument=function(e,t,r,s,o,a,l){if(e[s]={kind:n.Kind.ARGUMENT,name:{kind:n.Kind.NAME,value:s},value:{kind:n.Kind.VARIABLE,name:{kind:n.Kind.NAME,value:o}}},t[o]={kind:n.Kind.VARIABLE_DEFINITION,variable:{kind:n.Kind.VARIABLE,name:{kind:n.Kind.NAME,value:o}},type:(0,i.astFromType)(a)},void 0!==l){r[o]=l;return}o in r&&delete r[o]},r.createVariableNameGenerator=function(e){let t=0;return r=>{let n;do n=0===t?r:`_v${t.toString()}_${r}`,t++;while(n in e)return n}};let n=e.r(86846),i=e.r(45057)},18361,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.implementsAbstractType=function(e,t,r){if(null==r||null==t);else if(t===r)return!0;else if((0,n.isCompositeType)(t)&&(0,n.isCompositeType)(r))return(0,n.doTypesOverlap)(e,t,r);return!1};let n=e.r(86846)},6289,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.observableToAsyncIterable=function(e){let t=[],r=[],i=!0,s=e.subscribe({next:e=>{0!==t.length?t.shift()({value:e,done:!1}):r.push({value:e,done:!1})},error:e=>{0!==t.length?t.shift()({value:{errors:[e]},done:!1}):r.push({value:{errors:[e]},done:!1})},complete:()=>void(0!==t.length?t.shift()({done:!0}):r.push({done:!0}))}),o=()=>{if(i){for(let e of(i=!1,s.unsubscribe(),t))e({value:void 0,done:!0});t.length=0,r.length=0}};return{next(){return i?new Promise(e=>{0!==r.length?e(r.shift()):t.push(e)}):this.return()},return:()=>(o(),(0,n.fakePromise)({value:void 0,done:!0})),throw:e=>(o(),(0,n.fakeRejectPromise)(e)),[Symbol.asyncIterator](){return this}}};let n=e.r(27668)},72937,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AccumulatorMap=void 0;class n extends Map{get[Symbol.toStringTag](){return"AccumulatorMap"}add(e,t){let r=this.get(e);void 0===r?this.set(e,[t]):r.push(t)}}r.AccumulatorMap=n},37615,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GraphQLStreamDirective=r.GraphQLDeferDirective=void 0;let n=e.r(86846);r.GraphQLDeferDirective=new n.GraphQLDirective({name:"defer",description:"Directs the executor to defer this fragment when the `if` argument is true or undefined.",locations:[n.DirectiveLocation.FRAGMENT_SPREAD,n.DirectiveLocation.INLINE_FRAGMENT],args:{if:{type:new n.GraphQLNonNull(n.GraphQLBoolean),description:"Deferred when true or undefined.",defaultValue:!0},label:{type:n.GraphQLString,description:"Unique name"}}}),r.GraphQLStreamDirective=new n.GraphQLDirective({name:"stream",description:"Directs the executor to stream plural fields when the `if` argument is true or undefined.",locations:[n.DirectiveLocation.FIELD],args:{if:{type:new n.GraphQLNonNull(n.GraphQLBoolean),description:"Stream when true or undefined.",defaultValue:!0},label:{type:n.GraphQLString,description:"Unique name"},initialCount:{defaultValue:0,type:n.GraphQLInt,description:"Number of items to return immediately"}}})},20160,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.collectSubFields=void 0,r.collectFields=function(e,t,r,n,s){let a=new i.AccumulatorMap,l=[];return o(e,t,r,n,s,a,l,new Set),{fields:a,patches:l}},r.shouldIncludeNode=a,r.doesFragmentConditionMatch=l,r.getFieldEntryKey=u,r.getDeferValues=c;let n=e.r(86846),i=e.r(72937),s=e.r(37615);function o(e,t,r,s,d,p,f,h){for(let m of d.selections)switch(m.kind){case n.Kind.FIELD:if(!a(r,m))continue;p.add(u(m),m);break;case n.Kind.INLINE_FRAGMENT:{if(!a(r,m)||!l(e,m,s))continue;let n=c(r,m);if(n){let a=new i.AccumulatorMap;o(e,t,r,s,m.selectionSet,a,f,h),f.push({label:n.label,fields:a})}else o(e,t,r,s,m.selectionSet,p,f,h);break}case n.Kind.FRAGMENT_SPREAD:{let n=m.name.value;if(!a(r,m))continue;let u=c(r,m);if(h.has(n)&&!u)continue;let d=t[n];if(!d||!l(e,d,s))continue;if(u||h.add(n),u){let n=new i.AccumulatorMap;o(e,t,r,s,d.selectionSet,n,f,h),f.push({label:u.label,fields:n})}else o(e,t,r,s,d.selectionSet,p,f,h)}}}function a(e,t){let r=(0,n.getDirectiveValues)(n.GraphQLSkipDirective,t,e);if(r?.if===!0)return!1;let i=(0,n.getDirectiveValues)(n.GraphQLIncludeDirective,t,e);return i?.if!==!1}function l(e,t,r){let i=t.typeCondition;if(!i)return!0;let s=(0,n.typeFromAST)(e,i);return s===r||!!(0,n.isAbstractType)(s)&&e.getPossibleTypes(s).includes(r)}function u(e){return e.alias?e.alias.value:e.name.value}function c(e,t){let r=(0,n.getDirectiveValues)(s.GraphQLDeferDirective,t,e);if(r&&!1!==r.if)return{label:"string"==typeof r.label?r.label:void 0}}r.collectSubFields=(0,e.r(51216).memoize5)(function(e,t,r,n,s){let a=new i.AccumulatorMap,l=new Set,u=[];for(let i of s)i.selectionSet&&o(e,t,r,n,i.selectionSet,a,u,l);return{fields:a,patches:u}})},29282,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getOperationASTFromRequest=void 0,r.getOperationASTFromDocument=i;let n=e.r(86846);function i(e,t){let r=(0,n.getOperationAST)(e,t);if(!r)throw Error(`Cannot infer operation ${t||""}`);return r}r.getOperationASTFromRequest=(0,e.r(51216).memoize1)(function(e){return i(e.document,e.operationName)})},6227,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.visitData=function e(t,r,n){if(Array.isArray(t))return t.map(t=>e(t,r,n));if("object"==typeof t){let i=null!=r?r(t):t;if(null!=i)for(let t in i){let s=i[t];Object.defineProperty(i,t,{value:e(s,r,n)})}return null!=n?n(i):i}return t},r.visitErrors=function(e,t){return e.map(e=>t(e))},r.visitResult=function(e,t,r,a,l){var u,c,d;let p,f,h,m=t.document.definitions.reduce((e,t)=>(t.kind===n.Kind.FRAGMENT_DEFINITION&&(e[t.name.value]=t),e),{}),y=t.variables||{},g={segmentInfoMap:new Map,unpathedErrors:new Set},v=e.data,T=e.errors,E=null!=T&&null!=l,_=(0,s.getOperationASTFromRequest)(t);return null!=v&&null!=_&&(e.data=function(e,t,r,n,s,a,l,u){let c=function(e,t){switch(t.operation){case"query":return e.getQueryType();case"mutation":return e.getMutationType();case"subscription":return e.getSubscriptionType()}}(r,t),{fields:d}=(0,i.collectFields)(r,n,s,c,t.selectionSet);return o(e,c,d,r,n,s,a,0,l,u)}(v,_,r,m,y,a,E?T:void 0,g)),null!=T&&l&&(u=T,c=l,p=(d=g).segmentInfoMap,f=d.unpathedErrors,h=c.__unpathed,e.errors=u.map(e=>{let t=p.get(e),r=null==t?e:t.reduceRight((e,t)=>{let r=c[t.type.name];if(null==r)return e;let n=r[t.fieldName];return null==n?e:n(e,t.pathIndex)},e);return h&&f.has(e)?h(r):r})),e};let n=e.r(86846),i=e.r(20160),s=e.r(29282);function o(e,t,r,s,l,u,c,d,p,f){let h,m=t.getFields(),y=c?.[t.name],g=y?.__enter,v=null!=g?g(e):e,T=null;if(null!=p)for(let e of(T=(h=function(e,t){let r=Object.create(null),n=new Set;for(let i of e){let e=i.path?.[t];if(null==e){n.add(i);continue}e in r?r[e].push(i):r[e]=[i]}return{errorMap:r,unpathedErrors:n}}(p,d)).errorMap,h.unpathedErrors))f.unpathedErrors.add(e);for(let[p,h]of r){let r,g=h[0].name.value,E=m[g]?.type;if(null==E)switch(g){case"__typename":E=n.TypeNameMetaFieldDef.type;break;case"__schema":E=n.SchemaMetaFieldDef.type;break;case"__type":E=n.TypeMetaFieldDef.type}let _=d+1;T&&(null!=(r=T[p])&&delete T[p],function(e,t,r,n=[],i){for(let s of n){let n={type:e,fieldName:t,pathIndex:r},o=i.segmentInfoMap.get(s);null==o?i.segmentInfoMap.set(s,[n]):o.push(n)}}(t,g,_,r,f));let b=function e(t,r,s,a,l,u,c,d,p=[],f){if(null==t)return t;let h=(0,n.getNullableType)(r);if((0,n.isListType)(h)){var m;return m=h.ofType,t.map(t=>e(t,m,s,a,l,u,c,d+1,p,f))}if((0,n.isAbstractType)(h)){let e=a.getType(t.__typename),{fields:r,patches:n}=(0,i.collectSubFields)(a,l,u,e,s);if(n.length)for(let e of(r=new Map(r),n))for(let[t,n]of e.fields){let e=r.get(t);e?e.push(...n):r.set(t,n)}return o(t,e,r,a,l,u,c,d,p,f)}if((0,n.isObjectType)(h)){let{fields:e,patches:r}=(0,i.collectSubFields)(a,l,u,h,s);if(r.length)for(let t of(e=new Map(e),r))for(let[r,n]of t.fields){let t=e.get(r);t?t.push(...n):e.set(r,n)}return o(t,h,e,a,l,u,c,d,p,f)}let y=c?.[h.name];if(null==y)return t;let g=y(t);return void 0===g?t:g}(e[p],E,h,s,l,u,c,_,r,f);a(v,p,b,y,g)}let E=v.__typename;if(null!=E&&a(v,"__typename",E,y,"__typename"),T)for(let e in T)for(let t of T[e])f.unpathedErrors.add(t);let _=y?.__leave;return null!=_?_(v):v}function a(e,t,r,n,i){if(null==n){e[t]=r;return}let s=n[i];if(null==s){e[t]=r;return}let o=s(r);void 0===o?delete e[t]:e[t]=o}},53526,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.valueMatchesCriteria=function e(t,r){if(null==t);else if(Array.isArray(t))return Array.isArray(r)&&t.every((t,n)=>e(t,r[n]));else if("object"==typeof t)return"object"==typeof r&&r&&Object.keys(r).every(n=>e(t[n],r[n]));else if(r instanceof RegExp)return r.test(t);return t===r}},77824,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isAsyncIterable=function(e){return e?.[Symbol.asyncIterator]!=null}},90552,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isDocumentNode=function(e){return e&&"object"==typeof e&&"kind"in e&&e.kind===n.Kind.DOCUMENT};let n=e.r(86846)},85722,(e,t,r)=>{},97015,(e,t,r)=>{"use strict";async function n(e){return{value:e,done:!0}}Object.defineProperty(r,"__esModule",{value:!0}),r.getAsyncIteratorWithCancel=s,r.getAsyncIterableWithCancel=o,r.withCancel=o;let i=(0,e.r(51216).memoize2)(function(e,t){return function(...r){return Reflect.apply(t,e,r)}});function s(e,t){return new Proxy(e,{has:(e,t)=>"return"===t||Reflect.has(e,t),get(e,r,s){let o=Reflect.get(e,r,s);if("return"===r){let r=o||n;return async function(n){return Reflect.apply(r,e,[await t(n)])}}return"function"==typeof o?i(e,o):o}})}function o(e,t){return new Proxy(e,{get(e,r,n){let o=Reflect.get(e,r,n);return Symbol.asyncIterator===r?function(){return s(Reflect.apply(o,e,[]),t)}:"function"==typeof o?i(e,o):o}})}},25804,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fixSchemaAst=function(e,t){let r,s;return e.astNode&&e.extensionASTNodes||(s=(0,i.getDocumentNodeFromSchema)(e),r=(0,n.buildASTSchema)(s,{...t||{}})),!e.astNode&&r?.astNode&&(e.astNode=r.astNode),!e.extensionASTNodes&&r?.astNode&&(e.extensionASTNodes=r.extensionASTNodes),e};let n=e.r(86846),i=e.r(42811)},54418,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.extractExtensionsFromSchema=function(e,t=!1){let r={schemaExtensions:o(e.extensions,t),types:{}};return(0,s.mapSchema)(e,{[i.MapperKind.OBJECT_TYPE]:e=>(r.types[e.name]={fields:{},type:"object",extensions:o(e.extensions,t)},e),[i.MapperKind.INTERFACE_TYPE]:e=>(r.types[e.name]={fields:{},type:"interface",extensions:o(e.extensions,t)},e),[i.MapperKind.FIELD]:(e,n,i)=>{r.types[i].fields[n]={arguments:{},extensions:o(e.extensions,t)};let s=e.args;if(null!=s)for(let e in s)r.types[i].fields[n].arguments[e]=o(s[e].extensions,t);return e},[i.MapperKind.ENUM_TYPE]:e=>(r.types[e.name]={values:{},type:"enum",extensions:o(e.extensions,t)},e),[i.MapperKind.ENUM_VALUE]:(e,n,i,s)=>(r.types[n].values[s]=o(e.extensions,t),e),[i.MapperKind.SCALAR_TYPE]:e=>(r.types[e.name]={type:"scalar",extensions:o(e.extensions,t)},e),[i.MapperKind.UNION_TYPE]:e=>(r.types[e.name]={type:"union",extensions:o(e.extensions,t)},e),[i.MapperKind.INPUT_OBJECT_TYPE]:e=>(r.types[e.name]={fields:{},type:"input",extensions:o(e.extensions,t)},e),[i.MapperKind.INPUT_OBJECT_FIELD]:(e,n,i)=>(r.types[i].fields[n]={extensions:o(e.extensions,t)},e)}),r};let n=e.r(85959),i=e.r(94520),s=e.r(26441);function o(e,t){let{directives:r,...i}=e=e||{},s={...i};if(!t&&null!=r){let e={};for(let t in r)e[t]=[...(0,n.asArray)(r[t])];s.directives=e}return s}},96879,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addPath=function(e,t,r){return{prev:e,key:t,typename:r}},r.pathToArray=function(e){let t=[],r=e;for(;r;)t.push(r.key),r=r.prev;return t.reverse()},r.printPathArray=function(e){return e.map(e=>"number"==typeof e?"["+e.toString()+"]":"."+e).join("")}},3900,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeIncrementalResult=function e({incrementalResult:t,executionResult:r}){let n=["data",...t.path??[]];if(t.items)for(let e of t.items)i(r,n,e),n[n.length-1]++;t.data&&i(r,n,t.data),t.errors&&(r.errors=r.errors||[],r.errors.push(...t.errors)),t.extensions&&i(r,["extensions"],t.extensions),t.incremental&&t.incremental.forEach(t=>{e({incrementalResult:t,executionResult:r})})};let n=e.r(30284);function i(e,t,r){let i,s=e;for(i=0;i<t.length-1;i++){let e=t[i];if("__proto__"===e||"constructor"===e||"prototype"===e)return;null==s[e]&&(s[e]="number"==typeof t[i+1]?[]:{}),s=s[e]}let o=t[i];if("__proto__"===o||"constructor"===o||"prototype"===o)return;let a=s[o];s[o]=null!=a?(0,n.mergeDeep)([a,r]):r}},13726,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.debugTimerStart=function(e){let t=globalThis.process?.env?.DEBUG||globalThis.DEBUG;("1"===t||t?.includes(e))&&(n.add(e),console.time(e))},r.debugTimerEnd=function(e){n.has(e)&&console.timeEnd(e)};let n=new Set},52085,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getAbortPromise=void 0,r.registerAbortSignalListener=o;let n=e.r(27668),i=e.r(51216),s=(0,i.memoize1)(function(e){let t=new Set;return e.addEventListener("abort",e=>{for(let r of t)r(e)},{once:!0}),t});function o(e,t){e.aborted?t():s(e).add(t)}r.getAbortPromise=(0,i.memoize1)(function(e){return e.aborted?(0,n.fakeRejectPromise)(e.reason):new Promise((t,r)=>{e.aborted?r(e.reason):o(e,()=>{r(e.reason)})})})},1316,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferred=r.fakePromise=r.mapMaybePromise=r.mapAsyncIterator=r.inspect=void 0;let n=e.r(79430);n.__exportStar(e.r(14750),r),n.__exportStar(e.r(85959),r),n.__exportStar(e.r(36312),r),n.__exportStar(e.r(27843),r),n.__exportStar(e.r(47942),r),n.__exportStar(e.r(31214),r),n.__exportStar(e.r(42811),r),n.__exportStar(e.r(27843),r),n.__exportStar(e.r(83227),r),n.__exportStar(e.r(42844),r),n.__exportStar(e.r(5649),r),n.__exportStar(e.r(11629),r),n.__exportStar(e.r(76559),r),n.__exportStar(e.r(80336),r),n.__exportStar(e.r(88822),r),n.__exportStar(e.r(38321),r),n.__exportStar(e.r(38397),r),n.__exportStar(e.r(13669),r),n.__exportStar(e.r(26441),r),n.__exportStar(e.r(83750),r),n.__exportStar(e.r(31769),r),n.__exportStar(e.r(17448),r),n.__exportStar(e.r(30284),r),n.__exportStar(e.r(94520),r),n.__exportStar(e.r(32186),r),n.__exportStar(e.r(8659),r),n.__exportStar(e.r(29712),r),n.__exportStar(e.r(75419),r),n.__exportStar(e.r(63935),r),n.__exportStar(e.r(49282),r),n.__exportStar(e.r(70694),r),n.__exportStar(e.r(45057),r),n.__exportStar(e.r(18361),r),n.__exportStar(e.r(36428),r),n.__exportStar(e.r(6289),r),n.__exportStar(e.r(6227),r),n.__exportStar(e.r(5033),r),n.__exportStar(e.r(53526),r),n.__exportStar(e.r(77824),r),n.__exportStar(e.r(90552),r),n.__exportStar(e.r(14890),r),n.__exportStar(e.r(85722),r),n.__exportStar(e.r(97015),r),n.__exportStar(e.r(59402),r),n.__exportStar(e.r(99481),r),n.__exportStar(e.r(20160),r);var i=e.r(66986);Object.defineProperty(r,"inspect",{enumerable:!0,get:function(){return i.inspect}}),n.__exportStar(e.r(51216),r),n.__exportStar(e.r(25804),r),n.__exportStar(e.r(29282),r),n.__exportStar(e.r(54418),r),n.__exportStar(e.r(96879),r),n.__exportStar(e.r(34196),r),n.__exportStar(e.r(37615),r),n.__exportStar(e.r(3900),r),n.__exportStar(e.r(13726),r),n.__exportStar(e.r(69500),r);var s=e.r(27668);Object.defineProperty(r,"mapAsyncIterator",{enumerable:!0,get:function(){return s.mapAsyncIterator}}),Object.defineProperty(r,"mapMaybePromise",{enumerable:!0,get:function(){return s.mapMaybePromise}}),Object.defineProperty(r,"fakePromise",{enumerable:!0,get:function(){return s.fakePromise}}),Object.defineProperty(r,"createDeferred",{enumerable:!0,get:function(){return s.createDeferredPromise}}),n.__exportStar(e.r(52085),r)},2628,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.assertResolversPresent=function(e,t={}){let{requireResolversForArgs:r,requireResolversForNonScalar:o,requireResolversForAllFields:a}=t;if(a&&(r||o))throw TypeError("requireResolversForAllFields takes precedence over the more specific assertions. Please configure either requireResolversForAllFields or requireResolversForArgs / requireResolversForNonScalar, but not a combination of them.");(0,i.forEachField)(e,(e,t,i)=>{a&&s("requireResolversForAllFields",a,e,t,i),r&&e.args.length>0&&s("requireResolversForArgs",r,e,t,i),"ignore"===o||(0,n.isScalarType)((0,n.getNamedType)(e.type))||s("requireResolversForNonScalar",o,e,t,i)})};let n=e.r(86846),i=e.r(1316);function s(e,t,r,n,i){if(!r.resolve){let r=`Resolver missing for "${n}.${i}".
To disable this validator, use:
  resolverValidationOptions: {
    ${e}: 'ignore'
  }`;if("error"===t)throw Error(r);"warn"===t&&console.warn(r);return}if("function"!=typeof r.resolve)throw Error(`Resolver "${n}.${i}" must be a function`)}},94260,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.chainResolvers=function(e){return(t,r,i,s)=>e.reduce((e,t)=>null!=t?t(e,r,i,s):(0,n.defaultFieldResolver)(e,r,i,s),t)};let n=e.r(86846)},77076,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.checkForResolveTypeResolver=function(e,t){(0,n.mapSchema)(e,{[n.MapperKind.ABSTRACT_TYPE]:e=>{if(!e.resolveType){let r=`Type "${e.name}" is missing a "__resolveType" resolver. Pass 'ignore' into "resolverValidationOptions.requireResolversForResolveType" to disable this error.`;if("error"===t)throw Error(r);"warn"===t&&console.warn(r)}}})};let n=e.r(1316)},4869,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.extendResolversFromInterfaces=function(e,t){let r={},n=e.getTypeMap();for(let e in n){let i=n[e];if("getInterfaces"in i){for(let n of(r[e]={},i.getInterfaces()))if(t[n.name])for(let i in t[n.name])"__isTypeOf"!==i&&i.startsWith("__")||(r[e][i]=t[n.name][i]);let n=t[e];r[e]={...r[e],...n}}else{let n=t[e];null!=n&&(r[e]=n)}}return r}},16609,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addResolversToSchema=function({schema:e,resolvers:t,defaultFieldResolver:r,resolverValidationOptions:l={},inheritResolversFromInterfaces:u=!1,updateResolversInPlace:c=!1}){var d,p,f;let{requireResolversToMatchSchema:h="error",requireResolversForResolveType:m}=l,y=u?(0,o.extendResolversFromInterfaces)(e,t):t;for(let t in y){let r=y[t];if("object"!=typeof r)throw Error(`"${t}" defined in resolvers, but has invalid value "${r}". The resolver's value must be of type object.`);let i=e.getType(t);if(null==i){let e=`"${t}" defined in resolvers, but not in schema`;if(h&&"error"!==h){"warn"===h&&console.warn(e);continue}throw Error(e)}if((0,n.isSpecifiedScalarType)(i))for(let e in r)e.startsWith("__")?i[e.substring(2)]=r[e]:i[e]=r[e];else if((0,n.isEnumType)(i)){let e=i.getValues();for(let t in r)if(!t.startsWith("__")&&!e.some(e=>e.name===t)&&h&&"ignore"!==h){let e=`${i.name}.${t} was defined in resolvers, but not present within ${i.name}`;if("error"===h)throw Error(e);console.warn(e)}}else if((0,n.isUnionType)(i)){for(let e in r)if(!e.startsWith("__")&&h&&"ignore"!==h){let t=`${i.name}.${e} was defined in resolvers, but ${i.name} is not an object or interface type`;if("error"===h)throw Error(t);console.warn(t)}}else if((0,n.isObjectType)(i)||(0,n.isInterfaceType)(i)){for(let e in r)if(!e.startsWith("__"))if(null==i.getFields()[e]){if(h&&"ignore"!==h){let r=`${t}.${e} defined in resolvers, but not in schema`;if("error"===h)throw Error(r);console.error(r)}}else{let n=r[e];if("function"!=typeof n&&"object"!=typeof n)throw Error(`Resolver ${t}.${e} must be object or function`)}}}return e=c?function(e,t,r){let s=e.getTypeMap();for(let r in t){let i=e.getType(r),o=t[r];if((0,n.isScalarType)(i))for(let e in o)e.startsWith("__")?i[e.substring(2)]=o[e]:"astNode"===e&&null!=i.astNode?i.astNode={...i.astNode,description:o?.astNode?.description??i.astNode.description,directives:(i.astNode.directives??[]).concat(o?.astNode?.directives??[])}:"extensionASTNodes"===e&&null!=i.extensionASTNodes?i.extensionASTNodes=i.extensionASTNodes.concat(o?.extensionASTNodes??[]):"extensions"===e&&null!=i.extensions&&null!=o.extensions?i.extensions=Object.assign(Object.create(null),i.extensions,o.extensions):i[e]=o[e];else if((0,n.isEnumType)(i)){let e=i.toConfig(),t=e.values;for(let r in o)r.startsWith("__")?e[r.substring(2)]=o[r]:"astNode"===r&&null!=e.astNode?e.astNode={...e.astNode,description:o?.astNode?.description??e.astNode.description,directives:(e.astNode.directives??[]).concat(o?.astNode?.directives??[])}:"extensionASTNodes"===r&&null!=e.extensionASTNodes?e.extensionASTNodes=e.extensionASTNodes.concat(o?.extensionASTNodes??[]):"extensions"===r&&null!=i.extensions&&null!=o.extensions?i.extensions=Object.assign(Object.create(null),i.extensions,o.extensions):t[r]&&(t[r].value=o[r]);s[r]=new n.GraphQLEnumType(e)}else if((0,n.isUnionType)(i))for(let e in o)e.startsWith("__")&&(i[e.substring(2)]=o[e]);else if((0,n.isObjectType)(i)||(0,n.isInterfaceType)(i))for(let e in o){if(e.startsWith("__")){i[e.substring(2)]=o[e];continue}let t=i.getFields()[e];if(null!=t){let r=o[e];"function"==typeof r?t.resolve=r.bind(o):a(t,r)}}}return(0,i.forEachDefaultValue)(e,i.serializeInputValue),(0,i.healSchema)(e),(0,i.forEachDefaultValue)(e,i.parseInputValue),null!=r&&(0,i.forEachField)(e,e=>{e.resolve||(e.resolve=r)}),e}(e,y,r):(d=e,p=y,f=r,d=(0,i.mapSchema)(d,{[i.MapperKind.SCALAR_TYPE]:e=>{let t=e.toConfig(),r=p[e.name];if(!(0,n.isSpecifiedScalarType)(e)&&null!=r){for(let n in r)n.startsWith("__")?t[n.substring(2)]=r[n]:"astNode"===n&&null!=t.astNode?t.astNode={...t.astNode,description:r?.astNode?.description??t.astNode.description,directives:(t.astNode.directives??[]).concat(r?.astNode?.directives??[])}:"extensionASTNodes"===n&&null!=t.extensionASTNodes?t.extensionASTNodes=t.extensionASTNodes.concat(r?.extensionASTNodes??[]):"extensions"===n&&null!=t.extensions&&null!=r.extensions?t.extensions=Object.assign(Object.create(null),e.extensions,r.extensions):t[n]=r[n];return new n.GraphQLScalarType(t)}},[i.MapperKind.ENUM_TYPE]:e=>{let t=p[e.name],r=e.toConfig(),i=r.values;if(null!=t){for(let n in t)n.startsWith("__")?r[n.substring(2)]=t[n]:"astNode"===n&&null!=r.astNode?r.astNode={...r.astNode,description:t?.astNode?.description??r.astNode.description,directives:(r.astNode.directives??[]).concat(t?.astNode?.directives??[])}:"extensionASTNodes"===n&&null!=r.extensionASTNodes?r.extensionASTNodes=r.extensionASTNodes.concat(t?.extensionASTNodes??[]):"extensions"===n&&null!=r.extensions&&null!=t.extensions?r.extensions=Object.assign(Object.create(null),e.extensions,t.extensions):i[n]&&(i[n].value=t[n]);return new n.GraphQLEnumType(r)}},[i.MapperKind.UNION_TYPE]:e=>{let t=p[e.name];if(null!=t){let r=e.toConfig();return t.__resolveType&&(r.resolveType=t.__resolveType),new n.GraphQLUnionType(r)}},[i.MapperKind.OBJECT_TYPE]:e=>{let t=p[e.name];if(null!=t){let r=e.toConfig();return t.__isTypeOf&&(r.isTypeOf=t.__isTypeOf),new n.GraphQLObjectType(r)}},[i.MapperKind.INTERFACE_TYPE]:e=>{let t=p[e.name];if(null!=t){let r=e.toConfig();return t.__resolveType&&(r.resolveType=t.__resolveType),new n.GraphQLInterfaceType(r)}},[i.MapperKind.COMPOSITE_FIELD]:(e,t,r)=>{let n=p[r];if(null!=n){let r=n[t];if(null!=r){let t={...e};return"function"==typeof r?t.resolve=r.bind(n):a(t,r),t}}}}),null!=f&&(d=(0,i.mapSchema)(d,{[i.MapperKind.OBJECT_FIELD]:e=>({...e,resolve:null!=e.resolve?e.resolve:f})})),d),m&&"ignore"!==m&&(0,s.checkForResolveTypeResolver)(e,m),e};let n=e.r(86846),i=e.r(1316),s=e.r(77076),o=e.r(4869);function a(e,t){for(let r in t)e[r]=t[r]}},92663,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeResolvers=function e(t,r){if(!t||Array.isArray(t)&&0===t.length)return{};if(!Array.isArray(t))return t;if(1===t.length)return t[0]||{};let i=[];for(let r of t)Array.isArray(r)&&(r=e(r)),"object"==typeof r&&r&&i.push(r);let s=(0,n.mergeDeep)(i,!0);if(r?.exclusions)for(let e of r.exclusions){let[t,r]=e.split(".");!(["__proto__","constructor","prototype"].includes(t)||["__proto__","constructor","prototype"].includes(r))&&(r&&"*"!==r?s[t]&&delete s[t][r]:delete s[t])}return s};let n=e.r(1316)},8894,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeArguments=function(e,t,r){var i,s;let o=(i=[...t,...e].filter(n.isSome),s=r,i.reduce((e,t)=>{let r=e.findIndex(e=>e.name.value===t.name.value);return -1===r?e.concat([t]):(s?.reverseArguments||(e[r]=t),e)},[]));return r&&r.sort&&o.sort(n.compareNodes),o};let n=e.r(1316)},36220,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeDirectives=function(e=[],t=[],r,n){let i=r&&r.reverseDirectives,s=[];for(let d of[...i?e:t,...i?t:e]){var c;if(c=r?.repeatableLinkImports,n?.[d.name.value]?.repeatable??c?.has(d.name.value))s.find(e=>l(d,e))||s.push(d);else{let e=s.findIndex(e=>e.name.value===d.name.value);if(-1===e)s.push(d);else{if(o(d)&&o(s[e])){let t=a(d),r=a(s[e]);if(t&&r&&t!==r){s.push(d);continue}}let t=function(e,t){let r=[];for(let n of[...t,...e]){let e=r.findIndex(e=>e.name.value===n.name.value);if(-1===e)r.push(n);else{let t=r[e];if("ListValue"===t.value.kind){let e=t.value.values,r=n.value.values;t.value={...t.value,values:u(e,r,(e,t)=>{let r=e.value;return!r||!t.some(e=>e.value===r)})}}else t.value=n.value}}return r}(d.arguments??[],s[e].arguments??[]);s[e]={...s[e],arguments:0===t.length?void 0:t}}}}return s},r.mergeDirective=function(e,t){return t?{...e,arguments:u(t.arguments||[],e.arguments||[],(e,t)=>!i(e.name,t.map(e=>e.name))),locations:[...t.locations,...e.locations.filter(e=>!i(e,t.locations))]}:e};let n=e.r(86846);function i(e,t){return t.some(({value:t})=>t===e.value)}let s=(e,t)=>{if(e.kind===t.kind)switch(e.kind){case n.Kind.LIST:return e.values.length===t.values.length&&e.values.every(e=>t.values.find(t=>s(e,t)));case n.Kind.VARIABLE:case n.Kind.NULL:return!0;case n.Kind.OBJECT:return e.fields.length===t.fields.length&&e.fields.every(e=>t.fields.find(t=>e.name.value===t.name.value&&s(e.value,t.value)));default:return e.value===t.value}return!1},o=e=>"link"===e.name.value,a=e=>{let t=o(e)?e.arguments?.find(e=>"url"===e.name.value)?.value:void 0;return t?.kind==="StringValue"?t.value:void 0},l=(e,t)=>!!(e.name.value===t.name.value&&(e.arguments===t.arguments||e.arguments?.length===t.arguments?.length&&e.arguments?.every(e=>t.arguments?.find(t=>e.name.value===t.name.value&&e.value.kind===t.value.kind&&s(e.value,t.value)))));function u(e,t,r){return e.concat(t.filter(t=>r(t,e)))}},72574,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeEnumValues=function(e,t,r,s){if(r?.consistentEnumMerge){let r=[];e&&r.push(...e),e=t,t=r}let o=new Map;if(e)for(let t of e)o.set(t.name.value,t);if(t)for(let e of t){let t=e.name.value;if(o.has(t)){let r=o.get(t);r.description=e.description||r.description,r.directives=(0,i.mergeDirectives)(e.directives,r.directives,s)}else o.set(t,e)}let a=[...o.values()];return r&&r.sort&&a.sort(n.compareNodes),a};let n=e.r(1316),i=e.r(36220)},21099,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeEnum=function(e,t,r,o){return t?{name:e.name,description:e.description||t.description,kind:r?.convertExtensions||"EnumTypeDefinition"===e.kind||"EnumTypeDefinition"===t.kind?"EnumTypeDefinition":"EnumTypeExtension",loc:e.loc,directives:(0,i.mergeDirectives)(e.directives,t.directives,r,o),values:(0,s.mergeEnumValues)(e.values,t.values,r)}:r?.convertExtensions?{...e,kind:n.Kind.ENUM_TYPE_DEFINITION}:e};let n=e.r(86846),i=e.r(36220),s=e.r(72574)},71865,(e,t,r)=>{"use strict";var n,i;Object.defineProperty(r,"__esModule",{value:!0}),r.CompareVal=void 0,r.isStringTypes=function(e){return"string"==typeof e},r.isSourceTypes=function(e){return e instanceof s.Source},r.extractType=function(e){let t=e;for(;t.kind===s.Kind.LIST_TYPE||"NonNullType"===t.kind;)t=t.type;return t},r.isWrappingTypeNode=function(e){return e.kind!==s.Kind.NAMED_TYPE},r.isListTypeNode=o,r.isNonNullTypeNode=a,r.printTypeNode=function e(t){return o(t)?`[${e(t.type)}]`:a(t)?`${e(t.type)}!`:t.name.value},r.defaultStringComparator=function(e,t){return null==e&&null==t?n.A_EQUALS_B:null==e?n.A_SMALLER_THAN_B:null==t?n.A_GREATER_THAN_B:e<t?n.A_SMALLER_THAN_B:e>t?n.A_GREATER_THAN_B:n.A_EQUALS_B};let s=e.r(86846);function o(e){return e.kind===s.Kind.LIST_TYPE}function a(e){return e.kind===s.Kind.NON_NULL_TYPE}(i=n||(r.CompareVal=n={}))[i.A_SMALLER_THAN_B=-1]="A_SMALLER_THAN_B",i[i.A_EQUALS_B=0]="A_EQUALS_B",i[i.A_GREATER_THAN_B=1]="A_GREATER_THAN_B"},58270,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeFields=function(e,t,r,a,l){let u=[];if(null!=r&&u.push(...r),null!=t)for(let r of t){let[t,n]=function(e,t){let r=e.findIndex(e=>e.name.value===t.name.value);return[r>-1?e[r]:null,r]}(u,r);if(t&&!a?.ignoreFieldConflicts){let c=a?.onFieldTypeConflict&&a.onFieldTypeConflict(t,r,e,a?.throwOnConflict)||function(e,t,r,n=!1){let i=(0,o.printTypeNode)(t.type),s=(0,o.printTypeNode)(r.type);if(i!==s){let a=(0,o.extractType)(t.type),l=(0,o.extractType)(r.type);if(a.name.value!==l.name.value)throw Error(`Field "${r.name.value}" already defined with a different type. Declared as "${a.name.value}", but you tried to override with "${l.name.value}"`);if(!function e(t,r,n=!1){return(0,o.isWrappingTypeNode)(t)||(0,o.isWrappingTypeNode)(r)?(0,o.isNonNullTypeNode)(r)?e((0,o.isNonNullTypeNode)(t)?t.type:t,r.type):(0,o.isNonNullTypeNode)(t)?e(r,t,n):!!(0,o.isListTypeNode)(t)&&((0,o.isListTypeNode)(r)&&e(t.type,r.type)||(0,o.isNonNullTypeNode)(r)&&e(t,r.type)):t.toString()===r.toString()}(t.type,r.type,!n))throw Error(`Field '${e.name.value}.${t.name.value}' changed type from '${i}' to '${s}'`)}return(0,o.isNonNullTypeNode)(r.type)&&!(0,o.isNonNullTypeNode)(t.type)&&(t.type=r.type),t}(e,t,r,a?.throwOnConflict);c.arguments=(0,i.mergeArguments)(r.arguments||[],t.arguments||[],a),c.directives=(0,s.mergeDirectives)(r.directives,t.directives,a,l),c.description=r.description||t.description,u[n]=c}else u.push(r)}if(a&&a.sort&&u.sort(n.compareNodes),a&&a.exclusions){let t=a.exclusions;return u.filter(r=>!t.includes(`${e.name.value}.${r.name.value}`))}return u};let n=e.r(1316),i=e.r(8894),s=e.r(36220),o=e.r(71865)},46894,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeInputType=function(e,t,r,o){if(t)try{return{name:e.name,description:e.description||t.description,kind:r?.convertExtensions||"InputObjectTypeDefinition"===e.kind||"InputObjectTypeDefinition"===t.kind?"InputObjectTypeDefinition":"InputObjectTypeExtension",loc:e.loc,fields:(0,s.mergeFields)(e,e.fields,t.fields,r),directives:(0,i.mergeDirectives)(e.directives,t.directives,r,o)}}catch(t){throw Error(`Unable to merge GraphQL input type "${e.name.value}": ${t.message}`)}return r?.convertExtensions?{...e,kind:n.Kind.INPUT_OBJECT_TYPE_DEFINITION}:e};let n=e.r(86846),i=e.r(36220),s=e.r(58270)},530,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeNamedTypeArray=function(e=[],t=[],r={}){let i=[...t,...e.filter(e=>!t.find(t=>t.name.value===e.name.value))];return r&&r.sort&&i.sort(n.compareNodes),i};let n=e.r(1316)},60673,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeInterface=function(e,t,r,a){if(t)try{return{name:e.name,description:e.description||t.description,kind:r?.convertExtensions||"InterfaceTypeDefinition"===e.kind||"InterfaceTypeDefinition"===t.kind?"InterfaceTypeDefinition":"InterfaceTypeExtension",loc:e.loc,fields:(0,s.mergeFields)(e,e.fields,t.fields,r,a),directives:(0,i.mergeDirectives)(e.directives,t.directives,r,a),interfaces:e.interfaces?(0,o.mergeNamedTypeArray)(e.interfaces,t.interfaces,r):void 0}}catch(t){throw Error(`Unable to merge GraphQL interface "${e.name.value}": ${t.message}`)}return r?.convertExtensions?{...e,kind:n.Kind.INTERFACE_TYPE_DEFINITION}:e};let n=e.r(86846),i=e.r(36220),s=e.r(58270),o=e.r(530)},79033,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeScalar=function(e,t,r,s){return t?{name:e.name,description:e.description||t.description,kind:r?.convertExtensions||"ScalarTypeDefinition"===e.kind||"ScalarTypeDefinition"===t.kind?"ScalarTypeDefinition":"ScalarTypeExtension",loc:e.loc,directives:(0,i.mergeDirectives)(e.directives,t.directives,r,s)}:r?.convertExtensions?{...e,kind:n.Kind.SCALAR_TYPE_DEFINITION}:e};let n=e.r(86846),i=e.r(36220)},92927,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_OPERATION_TYPE_NAME_MAP=void 0,r.mergeSchemaDefs=function(e,t,s,o){return t?{kind:e.kind===n.Kind.SCHEMA_DEFINITION||t.kind===n.Kind.SCHEMA_DEFINITION?n.Kind.SCHEMA_DEFINITION:n.Kind.SCHEMA_EXTENSION,description:e.description||t.description,directives:(0,i.mergeDirectives)(e.directives,t.directives,s,o),operationTypes:function(e=[],t=[]){let n=[];for(let i in r.DEFAULT_OPERATION_TYPE_NAME_MAP){let r=e.find(e=>e.operation===i)||t.find(e=>e.operation===i);r&&n.push(r)}return n}(e.operationTypes,t.operationTypes)}:s?.convertExtensions?{...e,kind:n.Kind.SCHEMA_DEFINITION}:e};let n=e.r(86846),i=e.r(36220);r.DEFAULT_OPERATION_TYPE_NAME_MAP={query:"Query",mutation:"Mutation",subscription:"Subscription"}},54443,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeType=function(e,t,r,a){if(t)try{return{name:e.name,description:e.description||t.description,kind:r?.convertExtensions||"ObjectTypeDefinition"===e.kind||"ObjectTypeDefinition"===t.kind?"ObjectTypeDefinition":"ObjectTypeExtension",loc:e.loc,fields:(0,s.mergeFields)(e,e.fields,t.fields,r,a),directives:(0,i.mergeDirectives)(e.directives,t.directives,r,a),interfaces:(0,o.mergeNamedTypeArray)(e.interfaces,t.interfaces,r)}}catch(t){throw Error(`Unable to merge GraphQL type "${e.name.value}": ${t.message}`)}return r?.convertExtensions?{...e,kind:n.Kind.OBJECT_TYPE_DEFINITION}:e};let n=e.r(86846),i=e.r(36220),s=e.r(58270),o=e.r(530)},92116,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeUnion=function(e,t,r,o){return t?{name:e.name,description:e.description||t.description,directives:(0,i.mergeDirectives)(e.directives,t.directives,r,o),kind:r?.convertExtensions||"UnionTypeDefinition"===e.kind||"UnionTypeDefinition"===t.kind?n.Kind.UNION_TYPE_DEFINITION:n.Kind.UNION_TYPE_EXTENSION,loc:e.loc,types:(0,s.mergeNamedTypeArray)(e.types,t.types,r)}:r?.convertExtensions?{...e,kind:n.Kind.UNION_TYPE_DEFINITION}:e};let n=e.r(86846),i=e.r(36220),s=e.r(530)},13042,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.schemaDefSymbol=void 0,r.isNamedDefinitionNode=f,r.mergeGraphQLNodes=function(e,t,h={}){for(let y of e)if(f(y)){let e=y.name?.value;if(t?.commentDescriptions&&(0,i.collectComment)(y),null==e)continue;if(t?.exclusions?.includes(e+".*")||t?.exclusions?.includes(e))delete h[e];else switch(y.kind){case n.Kind.OBJECT_TYPE_DEFINITION:case n.Kind.OBJECT_TYPE_EXTENSION:h[e]=(0,d.mergeType)(y,h[e],t,h);break;case n.Kind.ENUM_TYPE_DEFINITION:case n.Kind.ENUM_TYPE_EXTENSION:h[e]=(0,o.mergeEnum)(y,h[e],t,h);break;case n.Kind.UNION_TYPE_DEFINITION:case n.Kind.UNION_TYPE_EXTENSION:h[e]=(0,p.mergeUnion)(y,h[e],t,h);break;case n.Kind.SCALAR_TYPE_DEFINITION:case n.Kind.SCALAR_TYPE_EXTENSION:h[e]=(0,u.mergeScalar)(y,h[e],t,h);break;case n.Kind.INPUT_OBJECT_TYPE_DEFINITION:case n.Kind.INPUT_OBJECT_TYPE_EXTENSION:h[e]=(0,a.mergeInputType)(y,h[e],t,h);break;case n.Kind.INTERFACE_TYPE_DEFINITION:case n.Kind.INTERFACE_TYPE_EXTENSION:h[e]=(0,l.mergeInterface)(y,h[e],t,h);break;case n.Kind.DIRECTIVE_DEFINITION:var m;h[e]&&e in{}&&!(null!=(m=h[e])&&"object"==typeof m&&"kind"in m&&"string"==typeof m.kind)&&(h[e]=void 0),h[e]=(0,s.mergeDirective)(y,h[e])}}else(y.kind===n.Kind.SCHEMA_DEFINITION||y.kind===n.Kind.SCHEMA_EXTENSION)&&(h[r.schemaDefSymbol]=(0,c.mergeSchemaDefs)(y,h[r.schemaDefSymbol],t));return h};let n=e.r(86846),i=e.r(1316),s=e.r(36220),o=e.r(21099),a=e.r(46894),l=e.r(60673),u=e.r(79033),c=e.r(92927),d=e.r(54443),p=e.r(92116);function f(e){return"name"in e}r.schemaDefSymbol="SCHEMA_DEF_SYMBOL"},44639,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.resolveImportName=function(e,t){var r,n;if(e.url.name&&t===`@${e.url.name}`){let t;return((t=i(e))&&`@${t}`).substring(1)}let s=e.imports.find(e=>e.name===t),o=s?.as??s?.name??(r=i(e),n=t,r?.length?n.startsWith("@")?`@${r}__${n.substring(1)}`:`${r}__${n}`:n);return o.startsWith("@")?o.substring(1):o},r.extractLinks=function(e){let t=[];for(let r of e.definitions)if(r.kind===n.Kind.SCHEMA_EXTENSION||r.kind===n.Kind.SCHEMA_DEFINITION){let e=r.directives?.filter(e=>"link"===e.name.value),i=e?.map(e=>(function(e){let t,r,i=[];for(let a of e)switch(a.name.value){case"url":a.value.kind===n.Kind.STRING&&(t=o(a.value.value));break;case"import":var s;i=(s=a.value).kind===n.Kind.LIST?s.values.map(e=>{let t;if(e.kind===n.Kind.STRING)t={name:e.value};else if(e.kind===n.Kind.OBJECT){let r,i="";for(let t of e.fields)"name"===t.name.value?t.value.kind===n.Kind.STRING&&(i=t.value.value):"as"===t.name.value&&t.value.kind===n.Kind.STRING&&(r=t.value.value);t={name:i,as:r}}return t}).filter(e=>void 0!==e):[];break;case"as":a.value.kind===n.Kind.STRING&&(r=a.value.value??void 0)}if(void 0!==t)return{url:t,as:r,imports:i}})(e.arguments??[])).filter(e=>void 0!==e)??[];t=t.concat(i);let s=r.directives?.filter(({name:e})=>"core"===e.value),a=s?.map(e=>(function(e){let t=e.find(({name:e,value:t})=>"feature"===e.value&&t.kind===n.Kind.STRING);if(t)return{url:o(t.value.value),imports:[]}})(e.arguments??[])).filter(e=>void 0!==e);a&&(t=t.concat(...a))}return t};let n=e.r(86846);function i(e){return e.as??e.url.name}let s=/v(\d{1,3})\.(\d{1,4})/i;function o(e){let t=new URL(e),r=t.pathname.split("/").filter(Boolean),n=r[r.length-1];if(n){if(s.test(n)){let e=r[r.length-2];return{identity:t.origin+(e?`/${r.slice(0,r.length-1).join("/")}`:""),name:e??null,version:n}}return{identity:`${t.origin}/${r.join("/")}`,name:n,version:null}}return{identity:t.origin,name:null,version:null}}},42753,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeTypeDefs=function(e,t){let r;(0,i.resetComments)();let s={kind:n.Kind.DOCUMENT,definitions:u(e,{useSchemaDefinition:!0,forceSchemaDefinition:!1,throwOnConflict:!1,commentDescriptions:!1,...t})};return r=t?.commentDescriptions?(0,i.printWithComments)(s):s,(0,i.resetComments)(),r},r.mergeGraphQLTypes=u;let n=e.r(86846),i=e.r(1316),s=e.r(44639),o=e.r(13042),a=e.r(92927),l=e.r(71865);function u(e,t){(0,i.resetComments)();let{allDirectives:r,allNodes:u,repeatableLinkImports:c}=function e(t,r,o=[],a=[],u=new Set,c=new Set){let d=e=>{c.add(e)};if(t&&!u.has(t))if(u.add(t),"function"==typeof t)e(t(),r,o,a,u,c);else if(Array.isArray(t))for(let n of t)e(n,r,o,a,u,c);else if((0,n.isSchema)(t))e((0,i.getDocumentNodeFromSchema)(t,r).definitions,r,o,a,u,c);else if((0,l.isStringTypes)(t)||(0,l.isSourceTypes)(t))e((0,n.parse)(t,r).definitions,r,o,a,u,c);else if("object"==typeof t&&(0,n.isDefinitionNode)(t)){let e=(0,s.extractLinks)({definitions:[t],kind:n.Kind.DOCUMENT}),r=e.find(e=>"https://specs.apollo.dev/federation"===e.url.identity);r&&(d((0,s.resolveImportName)(r,"@composeDirective")),d((0,s.resolveImportName)(r,"@key")));let i=e.find(e=>"https://specs.apollo.dev/link"===e.url.identity);i&&d((0,s.resolveImportName)(i,"@link")),t.kind===n.Kind.DIRECTIVE_DEFINITION?o.push(t):a.push(t)}else if((0,i.isDocumentNode)(t))e(t.definitions,r,o,a,u,c);else throw Error(`typeDefs must contain only strings, documents, schemas, or functions, got ${typeof t}`);return{allDirectives:o,allNodes:a,repeatableLinkImports:c}}(e,t),d=(0,o.mergeGraphQLNodes)(r,t);t.repeatableLinkImports=c;let p=(0,o.mergeGraphQLNodes)(u,t,d);if(t?.useSchemaDefinition){let e=p[o.schemaDefSymbol]||{kind:n.Kind.SCHEMA_DEFINITION,operationTypes:[]},t=e.operationTypes;for(let e in a.DEFAULT_OPERATION_TYPE_NAME_MAP)if(!t.find(t=>t.operation===e)){let r=p[a.DEFAULT_OPERATION_TYPE_NAME_MAP[e]];null!=r&&null!=r.name&&t.push({kind:n.Kind.OPERATION_TYPE_DEFINITION,type:{kind:n.Kind.NAMED_TYPE,name:r.name},operation:e})}e?.operationTypes?.length!=null&&e.operationTypes.length>0&&(p[o.schemaDefSymbol]=e)}t?.forceSchemaDefinition&&!p[o.schemaDefSymbol]?.operationTypes?.length&&(p[o.schemaDefSymbol]={kind:n.Kind.SCHEMA_DEFINITION,operationTypes:[{kind:n.Kind.OPERATION_TYPE_DEFINITION,operation:"query",type:{kind:n.Kind.NAMED_TYPE,name:{kind:n.Kind.NAME,value:"Query"}}}]});let f=Object.values(p);if(t?.sort){let e="function"==typeof t.sort?t.sort:l.defaultStringComparator;f.sort((t,r)=>e(t.name?.value,r.name?.value))}return f}},96182,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(79430);n.__exportStar(e.r(8894),r),n.__exportStar(e.r(36220),r),n.__exportStar(e.r(72574),r),n.__exportStar(e.r(21099),r),n.__exportStar(e.r(58270),r),n.__exportStar(e.r(46894),r),n.__exportStar(e.r(60673),r),n.__exportStar(e.r(530),r),n.__exportStar(e.r(13042),r),n.__exportStar(e.r(42753),r),n.__exportStar(e.r(79033),r),n.__exportStar(e.r(54443),r),n.__exportStar(e.r(92116),r),n.__exportStar(e.r(71865),r)},26825,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.extractExtensionsFromSchema=void 0,r.mergeExtensions=function(e){return(0,n.mergeDeep)(e,!1,!0)},r.applyExtensions=function(e,t){for(let[r,n]of(s(e,t.schemaExtensions),Object.entries(t.types||{}))){let t=e.getType(r);if(t){if(s(t,n.extensions),"object"===n.type||"interface"===n.type)for(let[e,r]of Object.entries(n.fields)){let n=t.getFields()[e];if(n)for(let[e,t]of(s(n,r.extensions),Object.entries(r.arguments)))s(n.args.find(t=>t.name===e),t)}else if("input"===n.type)for(let[e,r]of Object.entries(n.fields))s(t.getFields()[e],r.extensions);else if("enum"===n.type)for(let[e,r]of Object.entries(n.values))s(t.getValue(e),r)}}return e};let n=e.r(1316);var i=e.r(1316);function s(e,t){if(e&&t&&t!==e.extensions){if(!e.extensions){e.extensions=t;return}e.extensions=(0,n.mergeDeep)([e.extensions,t],!1,!0)}}Object.defineProperty(r,"extractExtensionsFromSchema",{enumerable:!0,get:function(){return i.extractExtensionsFromSchema}})},80095,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(79430);n.__exportStar(e.r(92663),r),n.__exportStar(e.r(96182),r),n.__exportStar(e.r(26825),r)},16182,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeExecutableSchema=function({typeDefs:e,resolvers:t={},resolverValidationOptions:r={},inheritResolversFromInterfaces:l=!1,updateResolversInPlace:u=!1,schemaExtensions:c,defaultFieldResolver:d,...p}){let f;if("object"!=typeof r)throw Error("Expected `resolverValidationOptions` to be an object");if(!e)throw Error("Must provide typeDefs");if((0,n.isSchema)(e))f=e;else if(p?.commentDescriptions){let t=(0,i.mergeTypeDefs)(e,{...p,commentDescriptions:!0});f=(0,n.buildSchema)(t,p)}else{let t=(0,i.mergeTypeDefs)(e,p);f=(0,n.buildASTSchema)(t,p)}if(f=(0,o.addResolversToSchema)({schema:f,resolvers:(0,i.mergeResolvers)(t),resolverValidationOptions:r,inheritResolversFromInterfaces:l,updateResolversInPlace:u,defaultFieldResolver:d}),Object.keys(r).length>0&&(0,a.assertResolversPresent)(f,r),c)for(let e of(0,s.asArray)(c))(0,i.applyExtensions)(f,e);return f};let n=e.r(86846),i=e.r(80095),s=e.r(1316),o=e.r(16609),a=e.r(2628)},3349,(e,t,r)=>{},92322,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeSchemas=function(e){let t=[],r=[],s=[];if(null!=e.schemas)for(let i of e.schemas)t.push((0,n.getDocumentNodeFromSchema)(i)),r.push((0,n.getResolversFromSchema)(i)),s.push((0,n.extractExtensionsFromSchema)(i));if(null!=e.typeDefs&&t.push(e.typeDefs),null!=e.resolvers){let t=(0,n.asArray)(e.resolvers);r.push(...t)}if(null!=e.schemaExtensions){let t=(0,n.asArray)(e.schemaExtensions);s.push(...t)}return(0,i.makeExecutableSchema)({...e,typeDefs:t,resolvers:r,schemaExtensions:s})};let n=e.r(1316),i=e.r(16182)},23922,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.extractExtensionsFromSchema=r.extendResolversFromInterfaces=r.checkForResolveTypeResolver=r.addResolversToSchema=r.chainResolvers=r.assertResolversPresent=void 0;let n=e.r(79430);var i=e.r(2628);Object.defineProperty(r,"assertResolversPresent",{enumerable:!0,get:function(){return i.assertResolversPresent}});var s=e.r(94260);Object.defineProperty(r,"chainResolvers",{enumerable:!0,get:function(){return s.chainResolvers}});var o=e.r(16609);Object.defineProperty(r,"addResolversToSchema",{enumerable:!0,get:function(){return o.addResolversToSchema}});var a=e.r(77076);Object.defineProperty(r,"checkForResolveTypeResolver",{enumerable:!0,get:function(){return a.checkForResolveTypeResolver}});var l=e.r(4869);Object.defineProperty(r,"extendResolversFromInterfaces",{enumerable:!0,get:function(){return l.extendResolversFromInterfaces}}),n.__exportStar(e.r(16182),r),n.__exportStar(e.r(3349),r),n.__exportStar(e.r(92322),r);var u=e.r(1316);Object.defineProperty(r,"extractExtensionsFromSchema",{enumerable:!0,get:function(){return u.extractExtensionsFromSchema}})},78741,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=()=>{let e,t,r=new Promise((r,n)=>{e=r,t=n});return r.resolve=e,r.reject=t,r}},13587,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.newCachePolicy=function(){return{maxAge:void 0,scope:void 0,restrict(e){void 0!==e.maxAge&&(void 0===this.maxAge||e.maxAge<this.maxAge)&&(this.maxAge=e.maxAge),void 0!==e.scope&&"PRIVATE"!==this.scope&&(this.scope=e.scope)},replace(e){void 0!==e.maxAge&&(this.maxAge=e.maxAge),void 0!==e.scope&&(this.scope=e.scope)},policyIfCacheable(){return void 0===this.maxAge||0===this.maxAge?null:{maxAge:this.maxAge,scope:this.scope??"PUBLIC"}}}}},47820,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.determineApolloConfig=function(e,t){let r={},{APOLLO_KEY:i,APOLLO_GRAPH_REF:s,APOLLO_GRAPH_ID:o,APOLLO_GRAPH_VARIANT:a}=process.env;e?.key?r.key=e.key.trim():i&&(r.key=i.trim()),(e?.key??i)!==r.key&&t.warn("The provided API key has unexpected leading or trailing whitespace. Apollo Server will trim the key value before use."),r.key&&function(e){let t=/[^\t\x20-\x7e\x80-\xff]/g;if(t.test(e)){let r=e.match(t);throw Error(`The API key provided to Apollo Server contains characters which are invalid as HTTP header values. The following characters found in the key are invalid: ${r.join(", ")}. Valid header values may only contain ASCII visible characters. If you think there is an issue with your key, please contact Apollo support.`)}}(r.key),r.key&&(r.keyHash=(0,n.createHash)("sha512").update(r.key).digest("hex")),e?.graphRef?r.graphRef=e.graphRef:s&&(r.graphRef=s);let l=e?.graphId??o,u=e?.graphVariant??a;if(r.graphRef){if(l)throw Error("Cannot specify both graph ref and graph ID. Please use `apollo.graphRef` or `APOLLO_GRAPH_REF` without also setting the graph ID.");if(u)throw Error("Cannot specify both graph ref and graph variant. Please use `apollo.graphRef` or `APOLLO_GRAPH_REF` without also setting the graph variant.")}else l&&(r.graphRef=u?`${l}@${u}`:l);return r};let n=e.r(94555)},73922,(e,t,r)=>{"use strict";var n,i,s,o;Object.defineProperty(r,"__esModule",{value:!0}),r.ApolloServerValidationErrorCode=r.ApolloServerErrorCode=void 0,r.unwrapResolverError=function(e){return e instanceof a.GraphQLError&&e.path&&e.originalError?e.originalError:e};let a=e.r(86846);(s=n||(r.ApolloServerErrorCode=n={})).INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",s.GRAPHQL_PARSE_FAILED="GRAPHQL_PARSE_FAILED",s.GRAPHQL_VALIDATION_FAILED="GRAPHQL_VALIDATION_FAILED",s.PERSISTED_QUERY_NOT_FOUND="PERSISTED_QUERY_NOT_FOUND",s.PERSISTED_QUERY_NOT_SUPPORTED="PERSISTED_QUERY_NOT_SUPPORTED",s.BAD_USER_INPUT="BAD_USER_INPUT",s.OPERATION_RESOLUTION_FAILURE="OPERATION_RESOLUTION_FAILURE",s.BAD_REQUEST="BAD_REQUEST",(o=i||(r.ApolloServerValidationErrorCode=i={})).INTROSPECTION_DISABLED="INTROSPECTION_DISABLED",o.MAX_RECURSIVE_SELECTIONS_EXCEEDED="MAX_RECURSIVE_SELECTIONS_EXCEEDED"},15966,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HeaderMap=void 0;class n extends Map{__identity=Symbol("HeaderMap");set(e,t){return super.set(e.toLowerCase(),t)}get(e){return super.get(e.toLowerCase())}delete(e){return super.delete(e.toLowerCase())}has(e){return super.has(e.toLowerCase())}}r.HeaderMap=n},99493,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BadRequestError=r.OperationResolutionError=r.UserInputError=r.PersistedQueryNotSupportedError=r.PersistedQueryNotFoundError=r.ValidationError=r.SyntaxError=void 0;let n=e.r(86846),i=e.r(73922),s=e.r(50640),o=e.r(15966);class a extends n.GraphQLError{constructor(e,t,r){super(e,{...r,extensions:{...r?.extensions,code:t}}),this.name=this.constructor.name}}r.SyntaxError=class extends a{constructor(e){super(e.message,i.ApolloServerErrorCode.GRAPHQL_PARSE_FAILED,{source:e.source,positions:e.positions,extensions:{http:(0,s.newHTTPGraphQLHead)(400),...e.extensions},originalError:e})}},r.ValidationError=class extends a{constructor(e){super(e.message,i.ApolloServerErrorCode.GRAPHQL_VALIDATION_FAILED,{nodes:e.nodes,extensions:{http:(0,s.newHTTPGraphQLHead)(400),...e.extensions},originalError:e.originalError??e})}};let l=()=>({status:200,headers:new o.HeaderMap([["cache-control","private, no-cache, must-revalidate"]])});r.PersistedQueryNotFoundError=class extends a{constructor(){super("PersistedQueryNotFound",i.ApolloServerErrorCode.PERSISTED_QUERY_NOT_FOUND,{extensions:{http:l()}})}},r.PersistedQueryNotSupportedError=class extends a{constructor(){super("PersistedQueryNotSupported",i.ApolloServerErrorCode.PERSISTED_QUERY_NOT_SUPPORTED,{extensions:{http:l()}})}},r.UserInputError=class extends a{constructor(e){super(e.message,i.ApolloServerErrorCode.BAD_USER_INPUT,{nodes:e.nodes,originalError:e.originalError??e,extensions:e.extensions})}},r.OperationResolutionError=class extends a{constructor(e){super(e.message,i.ApolloServerErrorCode.OPERATION_RESOLUTION_FAILURE,{nodes:e.nodes,originalError:e.originalError??e,extensions:{http:(0,s.newHTTPGraphQLHead)(400),...e.extensions}})}},r.BadRequestError=class extends a{constructor(e,t){super(e,i.ApolloServerErrorCode.BAD_REQUEST,{...t,extensions:{http:(0,s.newHTTPGraphQLHead)(400),...t?.extensions}})}}},50640,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.runHttpQuery=h,r.prettyJSONStringify=function(e){return JSON.stringify(e)+"\n"},r.newHTTPGraphQLHead=function(e){return{status:e,headers:new l.HeaderMap}},r.mergeHTTPGraphQLHead=function(e,t){if(t.status&&(e.status=t.status),t.headers)for(let[r,n]of t.headers)e.headers.set(r,n)};let i=e.r(42549),s=e.r(86846),o=e.r(99493),a=n(e.r(28069)),l=e.r(15966);function u(e,t){let r=e[t];if("string"==typeof r)return r}function c(e,t){let r=e.getAll(t);switch(r.length){case 0:return;case 1:return r[0];default:throw new o.BadRequestError(`The '${t}' search parameter may only be specified once.`)}}function d(e,t){let r,n=c(e,t);if(void 0!==n){try{r=JSON.parse(n)}catch{throw new o.BadRequestError(`The ${t} search parameter contains invalid JSON.`)}if(!f(r))throw new o.BadRequestError(`The ${t} search parameter should contain a JSON-encoded object.`);return r}}function p(e,t){let r=e[t];if(f(r))return r}function f(e){return!!e&&"object"==typeof e&&!Buffer.isBuffer(e)&&!Array.isArray(e)}async function h({server:e,httpRequest:t,contextValue:r,schemaDerivedData:n,internals:h,sharedResponseHTTPGraphQLHead:y}){let g;switch(t.method){case"POST":if(!(f(T=t.body)&&Object.keys(T).length>0))throw new o.BadRequestError("POST body missing, invalid Content-Type, or JSON object has no keys.");var v,T,E=t.body.query;if(E&&"string"!=typeof E)if(E.kind===s.Kind.DOCUMENT)throw new o.BadRequestError("GraphQL queries must be strings. It looks like you're sending the internal graphql-js representation of a parsed query in your request instead of a request in the GraphQL query language. You can convert an AST to a string using the `print` function from `graphql`, or use a client like `apollo-client` which converts the internal representation to a string for you.");else throw new o.BadRequestError("GraphQL queries must be strings.");if("string"==typeof t.body.variables)throw new o.BadRequestError("`variables` in a POST body should be provided as an object, not a recursively JSON-encoded string.");if("string"==typeof t.body.extensions)throw new o.BadRequestError("`extensions` in a POST body should be provided as an object, not a recursively JSON-encoded string.");if("extensions"in t.body&&null!==t.body.extensions&&!f(t.body.extensions))throw new o.BadRequestError("`extensions` in a POST body must be an object if provided.");if("variables"in t.body&&null!==t.body.variables&&!f(t.body.variables))throw new o.BadRequestError("`variables` in a POST body must be an object if provided.");if("operationName"in t.body&&null!==t.body.operationName&&"string"!=typeof t.body.operationName)throw new o.BadRequestError("`operationName` in a POST body must be a string if provided.");g={query:u(t.body,"query"),operationName:u(t.body,"operationName"),variables:p(t.body,"variables"),extensions:p(t.body,"extensions"),http:t};break;case"GET":{let e=new URLSearchParams(t.search);g={query:c(e,"query"),operationName:c(e,"operationName"),variables:d(e,"variables"),extensions:d(e,"extensions"),http:t};break}default:throw new o.BadRequestError("Apollo Server supports only GET/POST requests.",{extensions:{http:{status:405,headers:new l.HeaderMap([["allow","GET, POST"]])}}})}let _=await (0,i.internalExecuteOperation)({server:e,graphQLRequest:g,internals:h,schemaDerivedData:n,sharedResponseHTTPGraphQLHead:y},{contextValue:r});if("single"===_.body.kind){if(!_.http.headers.get("content-type")){let e=(0,i.chooseContentTypeForSingleResultResponse)(t);if(null===e)throw new o.BadRequestError(`An 'accept' header was provided for this request which does not accept ${i.MEDIA_TYPES.APPLICATION_JSON} or ${i.MEDIA_TYPES.APPLICATION_GRAPHQL_RESPONSE_JSON}`,{extensions:{http:{status:406}}});_.http.headers.set("content-type",e)}return{..._.http,body:{kind:"complete",string:await h.stringifyResult({errors:(v=_.body.singleResult).errors,data:v.data,extensions:v.extensions})}}}let b=t.headers.get("accept"),S=new a.default({headers:{accept:b}}).mediaType([i.MEDIA_TYPES.MULTIPART_MIXED_NO_DEFER_SPEC,i.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_9,i.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_2]);if(!b||S!==i.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_2&&S!==i.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_9)throw new o.BadRequestError(`Apollo server received an operation that uses incremental delivery (@defer or @stream), but the client does not accept multipart/mixed HTTP responses. To enable incremental delivery support, add the HTTP header 'Accept: ${i.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_9}' if your client supports the current incremental format or 'Accept: ${i.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_2}' if your client supports the legacy incremental format`,{extensions:{http:{status:406}}});return _.http.headers.set("content-type",`multipart/mixed; boundary="-"; ${S.replace("multipart/mixed; ","")}`),{..._.http,body:{kind:"chunked",asyncIterator:m(_.body.initialResult,_.body.subsequentResults)}}}async function*m(e,t){for await(let r of(yield`\r
---\r
content-type: application/json; charset=utf-8\r
\r
${JSON.stringify(e)}\r
---${e.hasNext?"":"--"}\r
`,t))yield`content-type: application/json; charset=utf-8\r
\r
${JSON.stringify(r)}\r
---${r.hasNext?"":"--"}\r
`}},18083,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.normalizeAndFormatErrors=function(e,t={}){let r=t.formatError??(e=>e),n=(0,s.newHTTPGraphQLHead)();return{httpFromErrors:n,formattedErrors:e.map(e=>{try{return r(a(e),e)}catch(e){if(t.includeStacktraceInErrorResponses)return a(e);return{message:"Internal server error",extensions:{code:i.ApolloServerErrorCode.INTERNAL_SERVER_ERROR}}}})};function a(e){var r;let a=l(e),u={...a.extensions,code:a.extensions.code??i.ApolloServerErrorCode.INTERNAL_SERVER_ERROR};return(r=u.http)&&"object"==typeof r&&(!("status"in r)||"number"==typeof r.status)&&(!("headers"in r)||r.headers instanceof Map)&&((0,s.mergeHTTPGraphQLHead)(n,{headers:new o.HeaderMap,...u.http}),delete u.http),t.includeStacktraceInErrorResponses&&(u.stacktrace=a.stack?.split("\n")),{...a.toJSON(),extensions:u}}},r.ensureError=a,r.ensureGraphQLError=l;let n=e.r(86846),i=e.r(73922),s=e.r(50640),o=e.r(15966);function a(e){return e instanceof Error?e:new n.GraphQLError("Unexpected error value: "+String(e))}function l(e,t=""){let r=a(e);return r instanceof n.GraphQLError?r:new n.GraphQLError(t+r.message,{originalError:r})}},20177,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.runPotentiallyBatchedHttpQuery=o;let n=e.r(50640),i=e.r(99493);async function s({server:e,batchRequest:t,body:r,contextValue:s,schemaDerivedData:o,internals:a}){if(0===r.length)throw new i.BadRequestError("No operations found in request.");let l=(0,n.newHTTPGraphQLHead)(),u=await Promise.all(r.map(async r=>{let i={...t,body:r},u=await (0,n.runHttpQuery)({server:e,httpRequest:i,contextValue:s,schemaDerivedData:o,internals:a,sharedResponseHTTPGraphQLHead:l});if("chunked"===u.body.kind)throw Error("Incremental delivery is not implemented for batch requests");return u.body.string}));return{...l,body:{kind:"complete",string:`[${u.join(",")}]`}}}async function o(e,t,r,o,a){if(!("POST"===t.method&&Array.isArray(t.body)))return await (0,n.runHttpQuery)({server:e,httpRequest:t,contextValue:r,schemaDerivedData:o,internals:a,sharedResponseHTTPGraphQLHead:null});if(a.allowBatchedHttpRequests)return await s({server:e,batchRequest:t,body:t.body,contextValue:r,schemaDerivedData:o,internals:a});throw new i.BadRequestError("Operation batching disabled.")}},37766,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.internalPlugin=function(e){return e},r.pluginIsInternal=function(e){return"__internal_plugin_id__"in e}},34966,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.recommendedCsrfPreventionRequestHeaders=void 0,r.preventCsrf=function(e,t){let r=e.get("content-type");if(void 0!==r){let e=i.default.parse(r);if(null===e||!o.includes(e.essence))return}if(!t.some(t=>{let r=e.get(t);return void 0!==r&&r.length>0}))throw new s.BadRequestError(`This operation has been blocked as a potential Cross-Site Request Forgery (CSRF). Please either specify a 'content-type' header (with a type that is not one of ${o.join(", ")}) or provide a non-empty value for one of the following headers: ${t.join(", ")}
`)};let i=n(e.r(94392)),s=e.r(99493);r.recommendedCsrfPreventionRequestHeaders=["x-apollo-operation-name","apollo-require-preflight"];let o=["application/x-www-form-urlencoded","multipart/form-data","text/plain"]},58808,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.symbolUserFieldResolver=r.symbolExecutionDispatcherWillResolveField=void 0,r.enablePluginsForSchemaResolvers=function(e){return s(e)||(Object.defineProperty(e,i,{value:!0}),Object.values(e.getTypeMap()).forEach(e=>{!(0,n.getNamedType)(e).name.startsWith("__")&&e instanceof n.GraphQLObjectType&&Object.values(e.getFields()).forEach(e=>{var t;let i;i=(t=e).resolve,t.resolve=(e,t,s,o)=>{let l=s?.[r.symbolExecutionDispatcherWillResolveField],u=s?.[r.symbolUserFieldResolver],c="function"==typeof l&&l({source:e,args:t,contextValue:s,info:o}),d=i||u||n.defaultFieldResolver;try{let r=d(e,t,s,o);return"function"==typeof c&&a(r,c),r}catch(e){throw"function"==typeof c&&c(e),e}}})})),e},r.pluginsEnabledForSchemaResolvers=s,r.whenResultIsFinished=a;let n=e.r(86846);r.symbolExecutionDispatcherWillResolveField=Symbol("apolloServerExecutionDispatcherWillResolveField"),r.symbolUserFieldResolver=Symbol("apolloServerUserFieldResolver");let i=Symbol("apolloServerPluginsEnabled");function s(e){return!!e[i]}function o(e){return e&&"function"==typeof e.then}function a(e,t){o(e)?e.then(e=>a(e,t),e=>t(e)):Array.isArray(e)&&e.some(o)?Promise.all(e).then(e=>t(null,e),e=>t(e)):t(null,e)}},77658,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isDefined=function(e){return null!=e}},78959,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.invokeDidStartHook=i,r.invokeSyncDidStartHook=function(e,t){let r=e.map(e=>t(e)).filter(n.isDefined);return r.reverse(),(...e)=>{for(let t of r)t(...e)}},r.invokeHooksUntilDefinedAndNonNull=s;let n=e.r(77658);async function i(e,t){let r=(await Promise.all(e.map(e=>t(e)))).filter(n.isDefined);return r.reverse(),async(...e)=>{for(let t of r)t(...e)}}async function s(e,t){for(let r of e){let e=await t(r);if(null!=e)return e}return null}},82882,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeGatewayGraphQLRequestContext=function(e,t,r){let i={};if("query"in e.request&&(i.query=e.request.query),"operationName"in e.request&&(i.operationName=e.request.operationName),"variables"in e.request&&(i.variables=e.request.variables),"extensions"in e.request&&(i.extensions=e.request.extensions),e.request.http){let t=e.request.http,r=""!==t.search&&!t.search.startsWith("?");i.http={method:t.method,url:`https://unknown-url.invalid/${r?"?":""}${t.search}`,headers:new n(t.headers)}}return{request:i,response:{http:{headers:new n(e.response.http.headers),get status(){return e.response.http.status},set status(newStatus){e.response.http.status=newStatus}}},logger:t.logger,schema:e.schema,schemaHash:"schemaHash no longer exists since Apollo Server 4",context:e.contextValue,cache:t.cache,queryHash:e.queryHash,document:e.document,source:e.source,operationName:e.operationName,operation:e.operation,errors:e.errors,metrics:e.metrics,debug:r.includeStacktraceInErrorResponses,overallCachePolicy:e.overallCachePolicy,requestIsBatched:e.requestIsBatched}};class n{map;constructor(e){this.map=e}append(e,t){this.map.has(e)?this.map.set(e,this.map.get(e)+", "+t):this.map.set(e,t)}delete(e){this.map.delete(e)}get(e){return this.map.get(e)??null}has(e){return this.map.has(e)}set(e,t){this.map.set(e,t)}entries(){return this.map.entries()}keys(){return this.map.keys()}values(){return this.map.values()}[Symbol.iterator](){return this.map.entries()}}},35303,(e,t,r)=>{"use strict";let n;var i,s=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),n=0;n<r.length;n++)"default"!==r[n]&&s(t,e,r[n]);return o(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.executeIncrementally=p;let l=e.r(86846),u=e.r(99493),c=e.r(42549);async function d(){if(void 0!==n)return;let t=await Promise.resolve().then(()=>a(e.r(86846)));n="17.0.0-alpha.9"===t.version&&"experimentalExecuteIncrementally"in t?t.experimentalExecuteIncrementally:null}async function p({useLegacyIncremental:e,legacyExperimentalExecuteIncrementally:t,...r}){if(await d(),e){if(t)return t(r);if(n)throw new u.BadRequestError(`Apollo Server received an operation that uses incremental delivery (@defer or @stream) with the legacy incremental format, but the server does not support the legacy incremental delivery format. Add the HTTP header: 'Accept: ${c.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_9}' to use the current incremental delivery format`,{extensions:{http:{status:406}}})}return n?n(r):(0,l.execute)(r)}},18288,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.APQ_CACHE_PREFIX=void 0,r.processGraphQLRequest=v;let i=e.r(94555),s=e.r(86846),o=e.r(58808),a=e.r(99493),l=e.r(18083),u=e.r(78959),c=e.r(82882),d=e.r(50640),p=e.r(42549),f=e.r(77658),h=e.r(35303),m=e.r(15966),y=n(e.r(28069));function g(e){return(0,i.createHash)("sha256").update(e).digest("hex")}async function v(e,t,r,n){let i,v=(await Promise.all(r.plugins.map(e=>e.requestDidStart?.(n)))).filter(f.isDefined),E=n.request,{query:_,extensions:b}=E;if(n.metrics.persistedQueryHit=!1,n.metrics.persistedQueryRegister=!1,b?.persistedQuery){if(!r.persistedQueries)return await R([new a.PersistedQueryNotSupportedError]);if(1!==b.persistedQuery.version)return await R([new s.GraphQLError("Unsupported persisted query version",{extensions:{http:(0,d.newHTTPGraphQLHead)(400)}})]);if(i=b.persistedQuery.sha256Hash,void 0===_){if(!(_=await r.persistedQueries.cache.get(i)))return await R([new a.PersistedQueryNotFoundError]);n.metrics.persistedQueryHit=!0}else{if(i!==g(_))return await R([new s.GraphQLError("provided sha does not match query",{extensions:{http:(0,d.newHTTPGraphQLHead)(400)}})]);n.metrics.persistedQueryRegister=!0}}else{if(!_)return await R([new a.BadRequestError("GraphQL operations must contain a non-empty `query` or a `persistedQuery` extension.")]);i=g(_)}if(n.queryHash=i,n.source=_,await Promise.all(v.map(e=>e.didResolveSource?.(n))),e.documentStore)try{n.document=await e.documentStore.get(e.documentStoreKeyPrefix+i)}catch(e){t.logger.warn("An error occurred while attempting to read from the documentStore. "+(0,l.ensureError)(e).message)}if(!n.document){let o=await (0,u.invokeDidStartHook)(v,async e=>e.parsingDidStart?.(n));try{n.document=(0,s.parse)(_,r.parseOptions)}catch(t){let e=(0,l.ensureError)(t);return await o(e),await R([new a.SyntaxError((0,l.ensureGraphQLError)(e))])}if(await o(),!0!==r.dangerouslyDisableValidation){let t=await (0,u.invokeDidStartHook)(v,async e=>e.validationDidStart?.(n)),i=(0,s.validate)(e.schema,n.document,[...s.specifiedRules,...r.validationRules]);if(0===i.length&&r.laterValidationRules&&(i=(0,s.validate)(e.schema,n.document,r.laterValidationRules)),0!==i.length)return await t(i),await R(i.map(e=>new a.ValidationError(e)));await t()}e.documentStore&&Promise.resolve(e.documentStore.set(e.documentStoreKeyPrefix+i,n.document)).catch(e=>t.logger.warn("Could not store validated document. "+e?.message))}let S=(0,s.getOperationAST)(n.document,E.operationName);if(n.operation=S||void 0,n.operationName=S?.name?.value||null,E.http?.method==="GET"&&S?.operation&&"query"!==S.operation)return await R([new a.BadRequestError(`GET requests only support query operations, not ${S.operation} operations`,{extensions:{http:{status:405,headers:new m.HeaderMap([["allow","POST"]])}}})]);try{await Promise.all(v.map(e=>e.didResolveOperation?.(n)))}catch(e){return await R([(0,l.ensureGraphQLError)(e)])}if(n.metrics.persistedQueryRegister&&r.persistedQueries){let e=r.persistedQueries?.ttl;Promise.resolve(r.persistedQueries.cache.set(i,_,void 0!==e?{ttl:r.persistedQueries?.ttl}:void 0)).catch(t.logger.warn.bind(t.logger))}let I=await (0,u.invokeHooksUntilDefinedAndNonNull)(v,async e=>await e.responseForOperation?.(n));if(null!==I)n.response.body=I.body,(0,d.mergeHTTPGraphQLHead)(n.response.http,I.http);else{let t=(await Promise.all(v.map(e=>e.executionDidStart?.(n)))).filter(f.isDefined);t.reverse(),t.some(e=>e.willResolveField)&&(Object.defineProperty(n.contextValue,o.symbolExecutionDispatcherWillResolveField,{value:(...e)=>(0,u.invokeSyncDidStartHook)(t,t=>t.willResolveField?.(...e))}),r.fieldResolver&&Object.defineProperty(n.contextValue,o.symbolUserFieldResolver,{value:r.fieldResolver}),(0,o.enablePluginsForSchemaResolvers)(e.schema));try{let e=await O({...n,useLegacyIncremental:new y.default({headers:{accept:E.http?.headers.get("accept")}}).mediaType([p.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_9,p.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_2])===p.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_2}),t="singleResult"in e?e.singleResult:e.initialResult;if(!n.operation){if(!t.errors?.length)throw Error("Unexpected error: Apollo Server did not resolve an operation but execute did not return errors");throw new a.OperationResolutionError(t.errors[0])}let i=t.errors?.map(e=>e.nodes?.length===1&&e.nodes[0].kind===s.Kind.VARIABLE_DEFINITION&&(e.message.startsWith(`Variable "$${e.nodes[0].variable.name.value}" has invalid value`)||e.message.startsWith(`Variable "$${e.nodes[0].variable.name.value}" got invalid value `)||e.message.startsWith(`Variable "$${e.nodes[0].variable.name.value}" of required type `)||e.message.startsWith(`Variable "$${e.nodes[0].variable.name.value}" of non-null type `))&&e.extensions?.code==null?new a.UserInputError(e):e);i&&await P(i);let{formattedErrors:o,httpFromErrors:l}=i?x(i):{formattedErrors:void 0,httpFromErrors:(0,d.newHTTPGraphQLHead)()};r.status400ForVariableCoercionErrors&&i?.length&&void 0===t.data&&!l.status&&(l.status=400),(0,d.mergeHTTPGraphQLHead)(n.response.http,l),"singleResult"in e?n.response.body={kind:"single",singleResult:{...t,errors:o}}:n.response.body={kind:"incremental",initialResult:{...e.initialResult,errors:o},subsequentResults:e.subsequentResults}}catch(r){let e=(0,l.ensureError)(r);return await Promise.all(t.map(t=>t.executionDidEnd?.(e))),await R([(0,l.ensureGraphQLError)(e)])}await Promise.all(t.map(e=>e.executionDidEnd?.()))}if(await A(),!n.response.body)throw Error("got to end of processGraphQLRequest without setting body?");return n.response;async function O({useLegacyIncremental:n,...i}){let{request:s,document:o}=i;if(r.__testing_incrementalExecutionResults)return r.__testing_incrementalExecutionResults;if(r.gatewayExecutor)return{singleResult:await r.gatewayExecutor((0,c.makeGatewayGraphQLRequestContext)(i,t,r))};{let t=await (0,h.executeIncrementally)({schema:e.schema,document:o,rootValue:"function"==typeof r.rootValue?r.rootValue(o):r.rootValue,contextValue:i.contextValue,variableValues:s.variables,operationName:s.operationName,fieldResolver:r.fieldResolver,useLegacyIncremental:n,legacyExperimentalExecuteIncrementally:r.legacyExperimentalExecuteIncrementally});return"initialResult"in t?{initialResult:t.initialResult,subsequentResults:"pending"in t.initialResult?w(t.subsequentResults):N(t.subsequentResults)}:{singleResult:t}}}async function*N(e){for await(let t of e){let e=t.incremental?{...t,incremental:await T(t.incremental,async e=>{let{errors:t}=e;return t?(await Promise.all(v.map(e=>e.didEncounterSubsequentErrors?.(n,t))),{...e,errors:x(t).formattedErrors}):e})}:t;await Promise.all(v.map(t=>t.willSendSubsequentPayload?.(n,e))),yield e}}async function*w(e){for await(let t of e){let e=t.incremental?{...t,incremental:await T(t.incremental,async e=>{let{errors:t}=e;return t?(await Promise.all(v.map(e=>e.didEncounterSubsequentErrors?.(n,t))),{...e,errors:x(t).formattedErrors}):e})}:t;t.completed&&(e.completed=await T(t.completed,async e=>{let{errors:t}=e;return t?(await Promise.all(v.map(e=>e.didEncounterSubsequentErrors?.(n,t))),{...e,errors:x(t).formattedErrors}):e})),await Promise.all(v.map(t=>t.willSendSubsequentPayload?.(n,e))),yield e}}async function A(){await Promise.all(v.map(e=>e.willSendResponse?.(n)))}async function P(e){return n.errors=e,await Promise.all(v.map(e=>e.didEncounterErrors?.(n)))}async function R(e){await P(e);let{formattedErrors:t,httpFromErrors:r}=x(e);return n.response.body={kind:"single",singleResult:{errors:t}},(0,d.mergeHTTPGraphQLHead)(n.response.http,r),n.response.http.status||(n.response.http.status=500),await A(),n.response}function x(e){return(0,l.normalizeAndFormatErrors)(e,{formatError:r.formatError,includeStacktraceInErrorResponses:r.includeStacktraceInErrorResponses})}}async function T(e,t){let r=[];for(let n of e){let e=await t(n);r.push(e)}return r}r.APQ_CACHE_PREFIX="apq:"},44449,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UnreachableCaseError=void 0,r.UnreachableCaseError=class extends Error{constructor(e){super(`Unreachable case: ${e}`)}}},74110,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.computeCoreSchemaHash=function(e){return(0,n.createHash)("sha256").update(e).digest("hex")};let n=e.r(94555)},28354,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SchemaManager=void 0;class n{logger;schemaDerivedDataProvider;onSchemaLoadOrUpdateListeners=new Set;isStopped=!1;schemaDerivedData;schemaContext;modeSpecificState;constructor(e){this.logger=e.logger,this.schemaDerivedDataProvider=e.schemaDerivedDataProvider,"gateway"in e?this.modeSpecificState={mode:"gateway",gateway:e.gateway,apolloConfig:e.apolloConfig}:this.modeSpecificState={mode:"schema",apiSchema:e.apiSchema,schemaDerivedData:e.schemaDerivedDataProvider(e.apiSchema)}}async start(){if("gateway"!==this.modeSpecificState.mode)return this.processSchemaLoadOrUpdateEvent({apiSchema:this.modeSpecificState.apiSchema},this.modeSpecificState.schemaDerivedData),null;{let e=this.modeSpecificState.gateway;if(e.onSchemaLoadOrUpdate)this.modeSpecificState.unsubscribeFromGateway=e.onSchemaLoadOrUpdate(e=>{this.processSchemaLoadOrUpdateEvent(e)});else throw Error("Unexpectedly couldn't find onSchemaLoadOrUpdate on gateway");return(await this.modeSpecificState.gateway.load({apollo:this.modeSpecificState.apolloConfig})).executor}}onSchemaLoadOrUpdate(e){if(!this.schemaContext)throw Error("You must call start() before onSchemaLoadOrUpdate()");if(!this.isStopped)try{e(this.schemaContext)}catch(e){throw Error(`An error was thrown from an 'onSchemaLoadOrUpdate' listener: ${e.message}`)}return this.onSchemaLoadOrUpdateListeners.add(e),()=>{this.onSchemaLoadOrUpdateListeners.delete(e)}}getSchemaDerivedData(){if(!this.schemaDerivedData)throw Error("You must call start() before getSchemaDerivedData()");return this.schemaDerivedData}async stop(){this.isStopped=!0,"gateway"===this.modeSpecificState.mode&&(this.modeSpecificState.unsubscribeFromGateway?.(),await this.modeSpecificState.gateway.stop?.())}processSchemaLoadOrUpdateEvent(e,t){this.isStopped||(this.schemaDerivedData=t??this.schemaDerivedDataProvider(e.apiSchema),this.schemaContext=e,this.onSchemaLoadOrUpdateListeners.forEach(t=>{try{t(e)}catch(e){this.logger.error("An error was thrown from an 'onSchemaLoadOrUpdate' listener"),this.logger.error(e)}}))}}r.SchemaManager=n},21640,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NoIntrospection=void 0;let n=e.r(86846),i=e.r(73922);r.NoIntrospection=e=>({Field(t){("__schema"===t.name.value||"__type"===t.name.value)&&e.reportError(new n.GraphQLError("GraphQL introspection is not allowed by Apollo Server, but the query contained __schema or __type. To enable introspection, pass introspection: true to ApolloServer in production",{nodes:[t],extensions:{validationErrorCode:i.ApolloServerValidationErrorCode.INTROSPECTION_DISABLED}}))}})},80224,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_MAX_RECURSIVE_SELECTIONS=void 0,r.createMaxRecursiveSelectionsRule=function(e){return t=>{let r=new s(e,t);return{Field(){r.processSelection()},InlineFragment(){r.processSelection()},FragmentSpread(e){r.processSelection(e.name.value)},FragmentDefinition:{enter(e){r.enterFragment(e.name.value)},leave(){r.leaveFragment()}},OperationDefinition:{enter(e){r.enterOperation(e.name?.value??null)},leave(){r.leaveOperation()}},Document:{leave(){r.checkLimitExceeded()}}}}};let n=e.r(86846),i=e.r(73922);r.DEFAULT_MAX_RECURSIVE_SELECTIONS=1e7;class s{selectionCountLimit;context;fragmentInfo=new Map;operationInfo=new Map;currentFragment;currentOperation;fragmentRecursiveSelectionCount=new Map;constructor(e,t){this.selectionCountLimit=e,this.context=t}getExecutionDefinitionInfo(){if(void 0!==this.currentFragment){let e=this.fragmentInfo.get(this.currentFragment);return e||(e={selectionCount:0,fragmentSpreads:new Map},this.fragmentInfo.set(this.currentFragment,e)),e}if(void 0!==this.currentOperation){let e=this.operationInfo.get(this.currentOperation);return e||(e={selectionCount:0,fragmentSpreads:new Map},this.operationInfo.set(this.currentOperation,e)),e}}processSelection(e){let t=this.getExecutionDefinitionInfo();if(t&&(t.selectionCount++,void 0!==e)){let r=(t.fragmentSpreads.get(e)??0)+1;t.fragmentSpreads.set(e,r)}}enterFragment(e){this.currentFragment=e}leaveFragment(){this.currentFragment=void 0}enterOperation(e){this.currentOperation=e}leaveOperation(){this.currentOperation=void 0}computeFragmentRecursiveSelectionsCount(e){let t=this.fragmentRecursiveSelectionCount.get(e);if(null===t)return 0;if(void 0!==t)return t;this.fragmentRecursiveSelectionCount.set(e,null);let r=this.fragmentInfo.get(e),n=0;if(r)for(let[e,t]of(n=r.selectionCount,r.fragmentSpreads))n+=t*this.computeFragmentRecursiveSelectionsCount(e);return this.fragmentRecursiveSelectionCount.set(e,n),n}reportError(e){let t=e?`Operation "${e}"`:"Anonymous operation";this.context.reportError(new n.GraphQLError(`${t} recursively requests too many selections.`,{nodes:[],extensions:{validationErrorCode:i.ApolloServerValidationErrorCode.MAX_RECURSIVE_SELECTIONS_EXCEEDED}}))}checkLimitExceeded(){for(let[e,t]of this.operationInfo){let r=t.selectionCount;for(let[e,n]of t.fragmentSpreads)r+=n*this.computeFragmentRecursiveSelectionsCount(e);r>this.selectionCountLimit&&this.reportError(e)}}}},99111,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createMaxRecursiveSelectionsRule=r.DEFAULT_MAX_RECURSIVE_SELECTIONS=r.NoIntrospection=void 0;var n=e.r(21640);Object.defineProperty(r,"NoIntrospection",{enumerable:!0,get:function(){return n.NoIntrospection}});var i=e.r(80224);Object.defineProperty(r,"DEFAULT_MAX_RECURSIVE_SELECTIONS",{enumerable:!0,get:function(){return i.DEFAULT_MAX_RECURSIVE_SELECTIONS}}),Object.defineProperty(r,"createMaxRecursiveSelectionsRule",{enumerable:!0,get:function(){return i.createMaxRecursiveSelectionsRule}})},28854,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LRUCache=void 0;let n="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,i=new Set,s="object"==typeof process&&process?process:{},o=(e,t,r,n)=>{"function"==typeof s.emitWarning?s.emitWarning(e,t,r,n):console.error(`[${r}] ${t}: ${e}`)},a=globalThis.AbortController,l=globalThis.AbortSignal;if(void 0===a){l=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},a=class{constructor(){t()}signal=new l;abort(e){if(!this.signal.aborted){for(let t of(this.signal.reason=e,this.signal.aborted=!0,this.signal._onabort))t(e);this.signal.onabort?.(e)}}};let e=s.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{e&&(e=!1,o("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}Symbol("type");let u=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),c=e=>u(e)?e<=256?Uint8Array:e<=65536?Uint16Array:e<=0x100000000?Uint32Array:e<=Number.MAX_SAFE_INTEGER?d:null:null;class d extends Array{constructor(e){super(e),this.fill(0)}}class p{heap;length;static #e=!1;static create(e){let t=c(e);if(!t)return[];p.#e=!0;let r=new p(e,t);return p.#e=!1,r}constructor(e,t){if(!p.#e)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class f{#t;#r;#n;#i;#s;#o;#a;#l;get perf(){return this.#l}ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#u;#c;#d;#p;#f;#h;#m;#y;#g;#v;#T;#E;#_;#b;#S;#I;#O;#N;#w;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#b,autopurgeTimers:e.#S,sizes:e.#E,keyMap:e.#d,keyList:e.#p,valList:e.#f,next:e.#h,prev:e.#m,get head(){return e.#y},get tail(){return e.#g},free:e.#v,isBackgroundFetch:t=>e.#A(t),backgroundFetch:(t,r,n,i)=>e.#P(t,r,n,i),moveToTail:t=>e.#R(t),indexes:t=>e.#x(t),rindexes:t=>e.#L(t),isStale:t=>e.#D(t)}}get max(){return this.#t}get maxSize(){return this.#r}get calculatedSize(){return this.#c}get size(){return this.#u}get fetchMethod(){return this.#o}get memoMethod(){return this.#a}get dispose(){return this.#n}get onInsert(){return this.#i}get disposeAfter(){return this.#s}constructor(e){const{max:t=0,ttl:r,ttlResolution:s=1,ttlAutopurge:a,updateAgeOnGet:l,updateAgeOnHas:d,allowStale:h,dispose:m,onInsert:y,disposeAfter:g,noDisposeOnSet:v,noUpdateTTL:T,maxSize:E=0,maxEntrySize:_=0,sizeCalculation:b,fetchMethod:S,memoMethod:I,noDeleteOnFetchRejection:O,noDeleteOnStaleGet:N,allowStaleOnFetchRejection:w,allowStaleOnFetchAbort:A,ignoreFetchAbort:P,perf:R}=e;if(void 0!==R&&"function"!=typeof R?.now)throw TypeError("perf option must have a now() method if specified");if(this.#l=R??n,0!==t&&!u(t))throw TypeError("max option must be a nonnegative integer");const x=t?c(t):Array;if(!x)throw Error("invalid max value: "+t);if(this.#t=t,this.#r=E,this.maxEntrySize=_||this.#r,this.sizeCalculation=b,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw TypeError("sizeCalculation set to non-function")}if(void 0!==I&&"function"!=typeof I)throw TypeError("memoMethod must be a function if defined");if(this.#a=I,void 0!==S&&"function"!=typeof S)throw TypeError("fetchMethod must be a function if specified");if(this.#o=S,this.#O=!!S,this.#d=new Map,this.#p=Array(t).fill(void 0),this.#f=Array(t).fill(void 0),this.#h=new x(t),this.#m=new x(t),this.#y=0,this.#g=0,this.#v=p.create(t),this.#u=0,this.#c=0,"function"==typeof m&&(this.#n=m),"function"==typeof y&&(this.#i=y),"function"==typeof g?(this.#s=g,this.#T=[]):(this.#s=void 0,this.#T=void 0),this.#I=!!this.#n,this.#w=!!this.#i,this.#N=!!this.#s,this.noDisposeOnSet=!!v,this.noUpdateTTL=!!T,this.noDeleteOnFetchRejection=!!O,this.allowStaleOnFetchRejection=!!w,this.allowStaleOnFetchAbort=!!A,this.ignoreFetchAbort=!!P,0!==this.maxEntrySize){if(0!==this.#r&&!u(this.#r))throw TypeError("maxSize must be a positive integer if specified");if(!u(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#M()}if(this.allowStale=!!h,this.noDeleteOnStaleGet=!!N,this.updateAgeOnGet=!!l,this.updateAgeOnHas=!!d,this.ttlResolution=u(s)||0===s?s:1,this.ttlAutopurge=!!a,this.ttl=r||0,this.ttl){if(!u(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#k()}if(0===this.#t&&0===this.ttl&&0===this.#r)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#r){const e="LRU_CACHE_UNBOUNDED";i.has(e)||(i.add(e),o("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,f))}}getRemainingTTL(e){return this.#d.has(e)?1/0:0}#k(){let e=new d(this.#t),t=new d(this.#t);this.#b=e,this.#_=t;let r=this.ttlAutopurge?Array(this.#t):void 0;this.#S=r,this.#C=(n,i,s=this.#l.now())=>{if(t[n]=0!==i?s:0,e[n]=i,r?.[n]&&(clearTimeout(r[n]),r[n]=void 0),0!==i&&r){let e=setTimeout(()=>{this.#D(n)&&this.#F(this.#p[n],"expire")},i+1);e.unref&&e.unref(),r[n]=e}},this.#j=r=>{t[r]=0!==e[r]?this.#l.now():0},this.#U=(r,s)=>{if(e[s]){let o=e[s],a=t[s];if(!o||!a)return;r.ttl=o,r.start=a,r.now=n||i();let l=r.now-a;r.remainingTTL=o-l}};let n=0,i=()=>{let e=this.#l.now();if(this.ttlResolution>0){n=e;let t=setTimeout(()=>n=0,this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=r=>{let s=this.#d.get(r);if(void 0===s)return 0;let o=e[s],a=t[s];return o&&a?o-((n||i())-a):1/0},this.#D=r=>{let s=t[r],o=e[r];return!!o&&!!s&&(n||i())-s>o}}#j=()=>{};#U=()=>{};#C=()=>{};#D=()=>!1;#M(){let e=new d(this.#t);this.#c=0,this.#E=e,this.#K=t=>{this.#c-=e[t],e[t]=0},this.#q=(e,t,r,n)=>{if(this.#A(t))return 0;if(!u(r))if(n){if("function"!=typeof n)throw TypeError("sizeCalculation must be a function");if(!u(r=n(t,e)))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return r},this.#B=(t,r,n)=>{if(e[t]=r,this.#r){let r=this.#r-e[t];for(;this.#c>r;)this.#Q(!0)}this.#c+=e[t],n&&(n.entrySize=r,n.totalCalculatedSize=this.#c)}}#K=e=>{};#B=(e,t,r)=>{};#q=(e,t,r,n)=>{if(r||n)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#x({allowStale:e=this.allowStale}={}){if(this.#u)for(let t=this.#g;this.#G(t)&&((e||!this.#D(t))&&(yield t),t!==this.#y);)t=this.#m[t]}*#L({allowStale:e=this.allowStale}={}){if(this.#u)for(let t=this.#y;this.#G(t)&&((e||!this.#D(t))&&(yield t),t!==this.#g);)t=this.#h[t]}#G(e){return void 0!==e&&this.#d.get(this.#p[e])===e}*entries(){for(let e of this.#x())void 0===this.#f[e]||void 0===this.#p[e]||this.#A(this.#f[e])||(yield[this.#p[e],this.#f[e]])}*rentries(){for(let e of this.#L())void 0===this.#f[e]||void 0===this.#p[e]||this.#A(this.#f[e])||(yield[this.#p[e],this.#f[e]])}*keys(){for(let e of this.#x()){let t=this.#p[e];void 0===t||this.#A(this.#f[e])||(yield t)}}*rkeys(){for(let e of this.#L()){let t=this.#p[e];void 0===t||this.#A(this.#f[e])||(yield t)}}*values(){for(let e of this.#x())void 0===this.#f[e]||this.#A(this.#f[e])||(yield this.#f[e])}*rvalues(){for(let e of this.#L())void 0===this.#f[e]||this.#A(this.#f[e])||(yield this.#f[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let r of this.#x()){let n=this.#f[r],i=this.#A(n)?n.__staleWhileFetching:n;if(void 0!==i&&e(i,this.#p[r],this))return this.get(this.#p[r],t)}}forEach(e,t=this){for(let r of this.#x()){let n=this.#f[r],i=this.#A(n)?n.__staleWhileFetching:n;void 0!==i&&e.call(t,i,this.#p[r],this)}}rforEach(e,t=this){for(let r of this.#L()){let n=this.#f[r],i=this.#A(n)?n.__staleWhileFetching:n;void 0!==i&&e.call(t,i,this.#p[r],this)}}purgeStale(){let e=!1;for(let t of this.#L({allowStale:!0}))this.#D(t)&&(this.#F(this.#p[t],"expire"),e=!0);return e}info(e){let t=this.#d.get(e);if(void 0===t)return;let r=this.#f[t],n=this.#A(r)?r.__staleWhileFetching:r;if(void 0===n)return;let i={value:n};if(this.#b&&this.#_){let e=this.#b[t],r=this.#_[t];e&&r&&(i.ttl=e-(this.#l.now()-r),i.start=Date.now())}return this.#E&&(i.size=this.#E[t]),i}dump(){let e=[];for(let t of this.#x({allowStale:!0})){let r=this.#p[t],n=this.#f[t],i=this.#A(n)?n.__staleWhileFetching:n;if(void 0===i||void 0===r)continue;let s={value:i};if(this.#b&&this.#_){s.ttl=this.#b[t];let e=this.#l.now()-this.#_[t];s.start=Math.floor(Date.now()-e)}this.#E&&(s.size=this.#E[t]),e.unshift([r,s])}return e}load(e){for(let[t,r]of(this.clear(),e)){if(r.start){let e=Date.now()-r.start;r.start=this.#l.now()-e}this.set(t,r.value,r)}}set(e,t,r={}){if(void 0===t)return this.delete(e),this;let{ttl:n=this.ttl,start:i,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:a}=r,{noUpdateTTL:l=this.noUpdateTTL}=r,u=this.#q(e,t,r.size||0,o);if(this.maxEntrySize&&u>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.#F(e,"set"),this;let c=0===this.#u?void 0:this.#d.get(e);if(void 0===c)c=0===this.#u?this.#g:0!==this.#v.length?this.#v.pop():this.#u===this.#t?this.#Q(!1):this.#u,this.#p[c]=e,this.#f[c]=t,this.#d.set(e,c),this.#h[this.#g]=c,this.#m[c]=this.#g,this.#g=c,this.#u++,this.#B(c,u,a),a&&(a.set="add"),l=!1,this.#w&&this.#i?.(t,e,"add");else{this.#R(c);let r=this.#f[c];if(t!==r){if(this.#O&&this.#A(r)){r.__abortController.abort(Error("replaced"));let{__staleWhileFetching:t}=r;void 0!==t&&!s&&(this.#I&&this.#n?.(t,e,"set"),this.#N&&this.#T?.push([t,e,"set"]))}else!s&&(this.#I&&this.#n?.(r,e,"set"),this.#N&&this.#T?.push([r,e,"set"]));if(this.#K(c),this.#B(c,u,a),this.#f[c]=t,a){a.set="replace";let e=r&&this.#A(r)?r.__staleWhileFetching:r;void 0!==e&&(a.oldValue=e)}}else a&&(a.set="update");this.#w&&this.onInsert?.(t,e,t===r?"update":"replace")}if(0===n||this.#b||this.#k(),this.#b&&(l||this.#C(c,n,i),a&&this.#U(a,c)),!s&&this.#N&&this.#T){let e,t=this.#T;for(;e=t?.shift();)this.#s?.(...e)}return this}pop(){try{for(;this.#u;){let e=this.#f[this.#y];if(this.#Q(!0),this.#A(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#N&&this.#T){let e,t=this.#T;for(;e=t?.shift();)this.#s?.(...e)}}}#Q(e){let t=this.#y,r=this.#p[t],n=this.#f[t];return this.#O&&this.#A(n)?n.__abortController.abort(Error("evicted")):(this.#I||this.#N)&&(this.#I&&this.#n?.(n,r,"evict"),this.#N&&this.#T?.push([n,r,"evict"])),this.#K(t),this.#S?.[t]&&(clearTimeout(this.#S[t]),this.#S[t]=void 0),e&&(this.#p[t]=void 0,this.#f[t]=void 0,this.#v.push(t)),1===this.#u?(this.#y=this.#g=0,this.#v.length=0):this.#y=this.#h[t],this.#d.delete(r),this.#u--,t}has(e,t={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:n}=t,i=this.#d.get(e);if(void 0!==i){let e=this.#f[i];if(this.#A(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#D(i))return r&&this.#j(i),n&&(n.has="hit",this.#U(n,i)),!0;n&&(n.has="stale",this.#U(n,i))}else n&&(n.has="miss");return!1}peek(e,t={}){let{allowStale:r=this.allowStale}=t,n=this.#d.get(e);if(void 0===n||!r&&this.#D(n))return;let i=this.#f[n];return this.#A(i)?i.__staleWhileFetching:i}#P(e,t,r,n){let i=void 0===t?void 0:this.#f[t];if(this.#A(i))return i;let s=new a,{signal:o}=r;o?.addEventListener("abort",()=>s.abort(o.reason),{signal:s.signal});let l={signal:s.signal,options:r,context:n},u=(n,i=!1)=>{let{aborted:o}=s.signal,a=r.ignoreFetchAbort&&void 0!==n;if(r.status&&(o&&!i?(r.status.fetchAborted=!0,r.status.fetchError=s.signal.reason,a&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),o&&!a&&!i)return c(s.signal.reason);let u=this.#f[t];return(u===p||a&&i&&void 0===u)&&(void 0===n?void 0!==p.__staleWhileFetching?this.#f[t]=p.__staleWhileFetching:this.#F(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,n,l.options))),n},c=n=>{let{aborted:i}=s.signal,o=i&&r.allowStaleOnFetchAbort,a=o||r.allowStaleOnFetchRejection,l=a||r.noDeleteOnFetchRejection;if(this.#f[t]===p&&(l&&void 0!==p.__staleWhileFetching?o||(this.#f[t]=p.__staleWhileFetching):this.#F(e,"fetch")),a)return r.status&&void 0!==p.__staleWhileFetching&&(r.status.returnedStale=!0),p.__staleWhileFetching;if(p.__returned===p)throw n},d=(t,n)=>{let o=this.#o?.(e,i,l);o&&o instanceof Promise&&o.then(e=>t(void 0===e?void 0:e),n),s.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(t(void 0),r.allowStaleOnFetchAbort&&(t=e=>u(e,!0)))})};r.status&&(r.status.fetchDispatched=!0);let p=new Promise(d).then(u,e=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=e),c(e))),f=Object.assign(p,{__abortController:s,__staleWhileFetching:i,__returned:void 0});return void 0===t?(this.set(e,f,{...l.options,status:void 0}),t=this.#d.get(e)):this.#f[t]=f,f}#A(e){return!!this.#O&&!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof a}async fetch(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:f=this.allowStaleOnFetchAbort,context:h,forceRefresh:m=!1,status:y,signal:g}=t;if(!this.#O)return y&&(y.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,status:y});let v={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:s,noDisposeOnSet:o,size:a,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:f,ignoreFetchAbort:p,status:y,signal:g},T=this.#d.get(e);if(void 0===T){y&&(y.fetch="miss");let t=this.#P(e,T,v,h);return t.__returned=t}{let t=this.#f[T];if(this.#A(t)){let e=r&&void 0!==t.__staleWhileFetching;return y&&(y.fetch="inflight",e&&(y.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}let i=this.#D(T);if(!m&&!i)return y&&(y.fetch="hit"),this.#R(T),n&&this.#j(T),y&&this.#U(y,T),t;let s=this.#P(e,T,v,h),o=void 0!==s.__staleWhileFetching&&r;return y&&(y.fetch=i?"stale":"refresh",o&&i&&(y.returnedStale=!0)),o?s.__staleWhileFetching:s.__returned=s}}async forceFetch(e,t={}){let r=await this.fetch(e,t);if(void 0===r)throw Error("fetch() returned undefined");return r}memo(e,t={}){let r=this.#a;if(!r)throw Error("no memoMethod provided to constructor");let{context:n,forceRefresh:i,...s}=t,o=this.get(e,s);if(!i&&void 0!==o)return o;let a=r(e,o,{options:s,context:n});return this.set(e,a,s),a}get(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:s}=t,o=this.#d.get(e);if(void 0!==o){let t=this.#f[o],a=this.#A(t);return(s&&this.#U(s,o),this.#D(o))?(s&&(s.get="stale"),a)?(s&&r&&void 0!==t.__staleWhileFetching&&(s.returnedStale=!0),r?t.__staleWhileFetching:void 0):(i||this.#F(e,"expire"),s&&r&&(s.returnedStale=!0),r?t:void 0):(s&&(s.get="hit"),a)?t.__staleWhileFetching:(this.#R(o),n&&this.#j(o),t)}s&&(s.get="miss")}#$(e,t){this.#m[t]=e,this.#h[e]=t}#R(e){e!==this.#g&&(e===this.#y?this.#y=this.#h[e]:this.#$(this.#m[e],this.#h[e]),this.#$(this.#g,e),this.#g=e)}delete(e){return this.#F(e,"delete")}#F(e,t){let r=!1;if(0!==this.#u){let n=this.#d.get(e);if(void 0!==n)if(this.#S?.[n]&&(clearTimeout(this.#S?.[n]),this.#S[n]=void 0),r=!0,1===this.#u)this.#H(t);else{this.#K(n);let r=this.#f[n];if(this.#A(r)?r.__abortController.abort(Error("deleted")):(this.#I||this.#N)&&(this.#I&&this.#n?.(r,e,t),this.#N&&this.#T?.push([r,e,t])),this.#d.delete(e),this.#p[n]=void 0,this.#f[n]=void 0,n===this.#g)this.#g=this.#m[n];else if(n===this.#y)this.#y=this.#h[n];else{let e=this.#m[n];this.#h[e]=this.#h[n];let t=this.#h[n];this.#m[t]=this.#m[n]}this.#u--,this.#v.push(n)}}if(this.#N&&this.#T?.length){let e,t=this.#T;for(;e=t?.shift();)this.#s?.(...e)}return r}clear(){return this.#H("delete")}#H(e){for(let t of this.#L({allowStale:!0})){let r=this.#f[t];if(this.#A(r))r.__abortController.abort(Error("deleted"));else{let n=this.#p[t];this.#I&&this.#n?.(r,n,e),this.#N&&this.#T?.push([r,n,e])}}if(this.#d.clear(),this.#f.fill(void 0),this.#p.fill(void 0),this.#b&&this.#_){for(let e of(this.#b.fill(0),this.#_.fill(0),this.#S??[]))void 0!==e&&clearTimeout(e);this.#S?.fill(void 0)}if(this.#E&&this.#E.fill(0),this.#y=0,this.#g=0,this.#v.length=0,this.#c=0,this.#u=0,this.#N&&this.#T){let e,t=this.#T;for(;e=t?.shift();)this.#s?.(...e)}}}r.LRUCache=f},43095,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ApolloServerPluginCacheControl=function(e=Object.create(null)){let t,r;return(0,s.internalPlugin)({__internal_plugin_id__:"CacheControl",__is_disabled_plugin__:!1,async serverWillStart({schema:e}){t=new o.LRUCache({max:Object.values(e.getTypeMap()).filter(n.isCompositeType).length}),r=new o.LRUCache({max:Object.values(e.getTypeMap()).filter(n.isObjectType).flatMap(e=>Object.values(e.getFields())).length+Object.values(e.getTypeMap()).filter(n.isInterfaceType).flatMap(e=>Object.values(e.getFields())).length})},async requestDidStart(s){function o(e){let r=t.get(e);if(r)return r;let n=function(e){if(e.astNode){let t=u(e.astNode.directives);if(t)return t}if(e.extensionASTNodes)for(let t of e.extensionASTNodes){let e=u(t.directives);if(e)return e}return{}}(e);return t.set(e,n),n}let d=e.defaultMaxAge??0,p=e.calculateHttpHeaders??!0,{__testing__cacheHints:f}=e;return{async executionDidStart(){if(c(s.overallCachePolicy)){let e=(0,i.newCachePolicy)();return{willResolveField({info:t}){t.cacheControl={setCacheHint:t=>{e.replace(t)},cacheHint:e,cacheHintFromType:o}}}}return{willResolveField({info:e}){let t=(0,i.newCachePolicy)(),a=!1,l=(0,n.getNamedType)(e.returnType);if((0,n.isCompositeType)(l)){let e=o(l);t.replace(e),a=!!e.inheritMaxAge}let p=function(e){let t=r.get(e);if(t)return t;let n=function(e){if(e.astNode){let t=u(e.astNode.directives);if(t)return t}return{}}(e);return r.set(e,n),n}(e.parentType.getFields()[e.fieldName]);return p.inheritMaxAge&&void 0===t.maxAge?(a=!0,p.scope&&t.replace({scope:p.scope})):t.replace(p),e.cacheControl={setCacheHint:e=>{t.replace(e)},cacheHint:t,cacheHintFromType:o},()=>{if(void 0===t.maxAge&&((0,n.isCompositeType)(l)&&!a||!e.path.prev)&&t.restrict({maxAge:d}),f&&c(t)){let r=(0,n.responsePathAsArray)(e.path).join(".");if(f.has(r))throw Error("shouldn't happen: addHint should only be called once per path");f.set(r,{maxAge:t.maxAge,scope:t.scope})}s.overallCachePolicy.restrict(t)}}}},async willSendResponse(e){if(!p)return;let{response:t,overallCachePolicy:r}=e,n=function(e){if(!e)return{kind:"no-header"};if(e===l)return{kind:"uncacheable"};let t=a.exec(e);return t?{kind:"parsable-and-cacheable",hint:{maxAge:+t[1],scope:"public"===t[2]?"PUBLIC":"PRIVATE"}}:{kind:"unparsable"}}(t.http.headers.get("cache-control"));if("unparsable"===n.kind)return;let s=(0,i.newCachePolicy)();s.replace(r),"parsable-and-cacheable"===n.kind&&s.restrict(n.hint);let o=s.policyIfCacheable();o&&"uncacheable"!==n.kind&&"single"===t.body.kind&&!t.body.singleResult.errors?t.http.headers.set("cache-control",`max-age=${o.maxAge}, ${o.scope.toLowerCase()}`):"if-cacheable"!==p&&t.http.headers.set("cache-control",l)}}}})};let n=e.r(86846),i=e.r(13587),s=e.r(37766),o=e.r(28854),a=/^max-age=(\d+), (public|private)$/,l="no-store";function u(e){if(!e)return;let t=e.find(e=>"cacheControl"===e.name.value);if(!t||!t.arguments)return;let r=t.arguments.find(e=>"maxAge"===e.name.value),n=t.arguments.find(e=>"scope"===e.name.value),i=t.arguments.find(e=>"inheritMaxAge"===e.name.value),s=n?.value?.kind==="EnumValue"?n.value.value:void 0,o="PUBLIC"===s||"PRIVATE"===s?s:void 0;return i?.value?.kind==="BooleanValue"&&i.value.value?{inheritMaxAge:!0,scope:o}:{maxAge:r?.value?.kind==="IntValue"?parseInt(r.value.value):void 0,scope:o}}function c(e){return void 0!==e.maxAge||void 0!==e.scope}},98963,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TraceTreeBuilder=void 0,r.dateToProtoTimestamp=c;let n=e.r(86846),i=e.r(11059),s=e.r(44449);function o(e){return Error(`[internal apollo-server error] ${e}`)}class a{rootNode=new i.Trace.Node;trace=new i.Trace({root:this.rootNode,fieldExecutionWeight:1});startHrTime;stopped=!1;nodes=new Map([[u(),this.rootNode]]);transformError;constructor(e){const{sendErrors:t,maskedBy:r}=e;if(!t||"masked"in t)this.transformError=()=>new n.GraphQLError("<masked>",{extensions:{maskedBy:r}});else if("transform"in t)this.transformError=t.transform;else if("unmodified"in t)this.transformError=null;else throw new s.UnreachableCaseError(t)}startTiming(){if(this.startHrTime)throw o("startTiming called twice!");if(this.stopped)throw o("startTiming called after stopTiming!");this.trace.startTime=c(new Date),this.startHrTime=process.hrtime()}stopTiming(){if(!this.startHrTime)throw o("stopTiming called before startTiming!");if(this.stopped)throw o("stopTiming called twice!");this.trace.durationNs=l(process.hrtime(this.startHrTime)),this.trace.endTime=c(new Date),this.stopped=!0}willResolveField(e){if(!this.startHrTime)throw o("willResolveField called before startTiming!");if(this.stopped)return()=>{};let t=e.path,r=this.newNode(t);return r.type=e.returnType.toString(),r.parentType=e.parentType.toString(),r.startTime=l(process.hrtime(this.startHrTime)),"string"==typeof t.key&&t.key!==e.fieldName&&(r.originalFieldName=e.fieldName),()=>{r.endTime=l(process.hrtime(this.startHrTime))}}didEncounterErrors(e){e.forEach(e=>{var t;if(e.extensions?.serviceName)return;let r=this.transformAndNormalizeError(e);null!==r&&this.addProtobufError(r.path,(t=r,new i.Trace.Error({message:t.message,location:(t.locations||[]).map(({line:e,column:t})=>new i.Trace.Location({line:e,column:t})),json:JSON.stringify(t)})))})}addProtobufError(e,t){if(!this.startHrTime)throw o("addProtobufError called before startTiming!");if(this.stopped)throw o("addProtobufError called after stopTiming!");let r=this.rootNode;if(Array.isArray(e)){let t=this.nodes.get(e.join("."));if(t)r=t;else{let t=function(e,t){let r,n=t;for(let t of e)n=n?.child?.find(e=>e.responseName===t),r={key:t,prev:r,typename:n?.type??void 0};return r}(e,this.rootNode);if(!t)throw o("addProtobufError called with invalid path!");r=this.newNode(t)}}r.error.push(t)}newNode(e){let t=new i.Trace.Node,r=e.key;return"number"==typeof r?t.index=r:t.responseName=r,this.nodes.set(u(e),t),this.ensureParentNode(e).child.push(t),t}ensureParentNode(e){let t=u(e.prev),r=this.nodes.get(t);return r||this.newNode(e.prev)}transformAndNormalizeError(e){if(this.transformError){let t=Object.assign(Object.create(Object.getPrototypeOf(e)),e),r=this.transformError(t);return null===r?null:r instanceof n.GraphQLError?new n.GraphQLError(r.message,{nodes:e.nodes,source:e.source,positions:e.positions,path:e.path,originalError:e.originalError,extensions:r.extensions||e.extensions}):e}return e}}function l(e){return 1e9*e[0]+e[1]}function u(e){if(void 0===e)return"";let t=String(e.key);for(;void 0!==(e=e.prev);)t=`${e.key}.${t}`;return t}function c(e){let t=+e,r=t%1e3;return new i.google.protobuf.Timestamp({seconds:(t-r)/1e3,nanos:1e6*r})}r.TraceTreeBuilder=a},16759,(e,t,r)=>{"use strict";function n(e,t,r){return!!r(e,t)||(e.child?.some(e=>{let i=e.responseName?t.child(e.responseName):t;return n(e,i,r)})??!1)}Object.defineProperty(r,"__esModule",{value:!0}),r.iterateOverTrace=function(e,t,r){let o=r?new s:i;if(!(e.root&&n(e.root,o,t))&&e.queryPlan&&function e(t,r,i){return!!t&&(t.fetch?.trace?.root&&t.fetch.serviceName?n(t.fetch.trace.root,r.child(`service:${t.fetch.serviceName}`),i):t.flatten?.node?e(t.flatten.node,r,i):t.parallel?.nodes?t.parallel.nodes.some(t=>e(t,r,i)):!!t.sequence?.nodes&&t.sequence.nodes.some(t=>e(t,r,i)))}(e.queryPlan,o,t))return};let i={toArray(){throw Error("not collecting paths!")},child(){return this}};class s{toArray(){return[]}child(e){return new o(e,this)}}class o{responseName;prev;constructor(e,t){this.responseName=e,this.prev=t}toArray(){let e=[],t=this;for(;t instanceof o;)e.push(t.responseName),t=t.prev;return e.reverse()}child(e){return new o(e,this)}}},6283,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DurationHistogram=void 0;class n{buckets;static BUCKET_COUNT=384;static EXPONENT_LOG=Math.log(1.1);toArray(){let e=0,t=[];for(let r of this.buckets)0===r?e++:(1===e?t.push(0):0!==e&&t.push(-e),t.push(Math.floor(r)),e=0);return t}static durationToBucket(e){let t=Math.ceil(Math.log(e/1e3)/n.EXPONENT_LOG);return t<=0||Number.isNaN(t)?0:t>=n.BUCKET_COUNT?n.BUCKET_COUNT-1:t}incrementDuration(e,t=1){return this.incrementBucket(n.durationToBucket(e),t),this}incrementBucket(e,t=1){if(e>=n.BUCKET_COUNT)throw Error("Bucket is out of bounds of the buckets array");if(e>=this.buckets.length){let t=this.buckets.length;this.buckets.length=e+1,this.buckets.fill(0,t)}this.buckets[e]+=t}combine(e){for(let t=0;t<e.buckets.length;t++)this.incrementBucket(t,e.buckets[t])}constructor(e){const t=e?.initSize||74,r=e?.buckets,n=Math.max(r?.length||0,t);this.buckets=Array(n).fill(0),r&&r.forEach((e,t)=>this.buckets[t]=e)}}r.DurationHistogram=n},22154,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultSendOperationsAsTrace=function(){let e=new n.LRUCache({maxSize:1048576,sizeCalculation:(e,t)=>t&&Buffer.byteLength(t)||0});return(t,r)=>{var n;let o,a=t.endTime?.seconds;if(null==a)throw Error("programming error: endTime not set on trace");let l=(n=t,o=!1,(0,i.iterateOverTrace)(n,function(e){return(e.error?.length??0)>0&&(o=!0),o},!1),o),u=JSON.stringify([r,s.DurationHistogram.durationToBucket(t.durationNs),Math.floor(a/60),l?Math.floor(a/5):""]);return!e.get(u)&&(e.set(u,!0),!0)}};let n=e.r(28854),i=e.r(16759),s=e.r(6283)},79898,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createOperationDerivedDataCache=function({logger:e}){let t,r=0;return new n.LRUCache({sizeCalculation:e=>Buffer.byteLength(JSON.stringify(e),"utf8"),maxSize:0xa00000,dispose(){r++,(!t||new Date().getTime()-t.getTime()>6e4)&&(t=new Date,e.warn(`This server is processing a high number of unique operations.  A total of ${r} records have been ejected from the ApolloServerPluginUsageReporting signature cache in the past interval.  If you see this warning frequently, please open an issue on the Apollo Server repository.`),r=0)}})},r.operationDerivedDataCacheKey=function(e,t){return`${e}${t&&":"+t}`};let n=e.r(28854)},32483,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OurContextualizedStats=r.OurReport=r.SizeEstimator=void 0;let n=e.r(11059),i=e.r(6283),s=e.r(16759);class o{bytes=0}r.SizeEstimator=o;class a{header;tracesPreAggregated=!1;constructor(e){this.header=e}tracesPerQuery=Object.create(null);endTime=null;operationCount=0;sizeEstimator=new o;ensureCountsAreIntegers(){for(let e of Object.values(this.tracesPerQuery))e.ensureCountsAreIntegers()}addTrace({statsReportKey:e,trace:t,asTrace:r,referencedFieldsByType:i,maxTraceBytes:s=0xa00000,nonFtv1ErrorPaths:o}){let a=this.getTracesAndStats({statsReportKey:e,referencedFieldsByType:i});if(r){let e=n.Trace.encode(t).finish();!isNaN(s)&&e.length>s?a.statsWithContext.addTrace(t,this.sizeEstimator,o):(a.trace.push(e),this.sizeEstimator.bytes+=2+e.length)}else a.statsWithContext.addTrace(t,this.sizeEstimator,o)}getTracesAndStats({statsReportKey:e,referencedFieldsByType:t}){let r=this.tracesPerQuery[e];if(r)return r;for(let[r,n]of(this.sizeEstimator.bytes+=m(e),Object.entries(t)))for(let e of(this.sizeEstimator.bytes+=4,n.isInterface&&(this.sizeEstimator.bytes+=2),this.sizeEstimator.bytes+=m(r),n.fieldNames))this.sizeEstimator.bytes+=m(e);return this.tracesPerQuery[e]=new l(t)}}r.OurReport=a;class l{referencedFieldsByType;constructor(e){this.referencedFieldsByType=e}trace=[];statsWithContext=new u;internalTracesContributingToStats=[];ensureCountsAreIntegers(){this.statsWithContext.ensureCountsAreIntegers()}}class u{map=Object.create(null);toArray(){return Object.values(this.map)}ensureCountsAreIntegers(){for(let e of Object.values(this.map))e.ensureCountsAreIntegers()}addTrace(e,t,r){this.getContextualizedStats(e,t).addTrace(e,t,r)}getContextualizedStats(e,t){let r={clientName:e.clientName,clientVersion:e.clientVersion},n=JSON.stringify(r),i=this.map[n];if(i)return i;t.bytes+=20+m(e.clientName)+m(e.clientVersion);let s=new c(r);return this.map[n]=s,s}}class c{context;queryLatencyStats=new d;perTypeStat=Object.create(null);constructor(e){this.context=e}ensureCountsAreIntegers(){for(let e of Object.values(this.perTypeStat))e.ensureCountsAreIntegers()}addTrace(e,t,r=[]){let{fieldExecutionWeight:i}=e;if(!i&&this.queryLatencyStats.requestsWithoutFieldInstrumentation++,this.queryLatencyStats.requestCount++,e.fullQueryCacheHit?(this.queryLatencyStats.cacheLatencyCount.incrementDuration(e.durationNs),this.queryLatencyStats.cacheHits++):this.queryLatencyStats.latencyCount.incrementDuration(e.durationNs),!e.fullQueryCacheHit&&e.cachePolicy?.maxAgeNs!=null)switch(e.cachePolicy.scope){case n.Trace.CachePolicy.Scope.PRIVATE:this.queryLatencyStats.privateCacheTtlCount.incrementDuration(e.cachePolicy.maxAgeNs);break;case n.Trace.CachePolicy.Scope.PUBLIC:this.queryLatencyStats.publicCacheTtlCount.incrementDuration(e.cachePolicy.maxAgeNs)}e.persistedQueryHit&&this.queryLatencyStats.persistedQueryHits++,e.persistedQueryRegister&&this.queryLatencyStats.persistedQueryMisses++,e.forbiddenOperation&&this.queryLatencyStats.forbiddenOperationCount++,e.registeredOperation&&this.queryLatencyStats.registeredOperationCount++;let o=!1,a=new Set,l=(e,r)=>{if(e.error?.length){o=!0;let n=this.queryLatencyStats.rootErrorStats;r.toArray().forEach(e=>{n=n.getChild(e,t)}),a.add(n),n.errorsCount+=e.error.length}if(i){let r=e.originalFieldName||e.responseName;if(e.parentType&&r&&e.type&&null!=e.endTime&&null!=e.startTime&&e.endTime>=e.startTime){let n=this.getTypeStat(e.parentType,t).getFieldStat(r,e.type,t);n.errorsCount+=e.error?.length??0,n.observedExecutionCount++,n.estimatedExecutionCount+=i,n.requestsWithErrorsCount+=+((e.error?.length??0)>0),n.latencyCount.incrementDuration(e.endTime-e.startTime,i)}}return!1};for(let{subgraph:n,path:i}of((0,s.iterateOverTrace)(e,l,!0),r))if(o=!0,i){let e=this.queryLatencyStats.rootErrorStats.getChild(`service:${n}`,t);i.forEach(r=>{"string"==typeof r&&(e=e.getChild(r,t))}),a.add(e),e.errorsCount+=1}for(let e of a)e.requestsWithErrorsCount+=1;o&&this.queryLatencyStats.requestsWithErrorsCount++}getTypeStat(e,t){let r=this.perTypeStat[e];if(r)return r;t.bytes+=m(e);let n=new f;return this.perTypeStat[e]=n,n}}r.OurContextualizedStats=c;class d{latencyCount=new i.DurationHistogram;requestCount=0;requestsWithoutFieldInstrumentation=0;cacheHits=0;persistedQueryHits=0;persistedQueryMisses=0;cacheLatencyCount=new i.DurationHistogram;rootErrorStats=new p;requestsWithErrorsCount=0;publicCacheTtlCount=new i.DurationHistogram;privateCacheTtlCount=new i.DurationHistogram;registeredOperationCount=0;forbiddenOperationCount=0}class p{children=Object.create(null);errorsCount=0;requestsWithErrorsCount=0;getChild(e,t){let r=this.children[e];if(r)return r;let n=new p;return this.children[e]=n,t.bytes+=m(e)+4,n}}class f{perFieldStat=Object.create(null);getFieldStat(e,t,r){let n=this.perFieldStat[e];if(n)return n;r.bytes+=m(e)+m(t)+10;let i=new h(t);return this.perFieldStat[e]=i,i}ensureCountsAreIntegers(){for(let e of Object.values(this.perFieldStat))e.ensureCountsAreIntegers()}}class h{returnType;errorsCount=0;observedExecutionCount=0;estimatedExecutionCount=0;requestsWithErrorsCount=0;latencyCount=new i.DurationHistogram;constructor(e){this.returnType=e}ensureCountsAreIntegers(){this.estimatedExecutionCount=Math.floor(this.estimatedExecutionCount)}}function m(e){return 2+Buffer.byteLength(e)}},96170,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeTraceDetails=function(e,t,r){let i=new n.Trace.Details,s=(()=>{if(!t||!("transform"in t))return e;{var n,i,s;let o=Object.keys(e);try{let s,a=t.transform({variables:e,operationString:r});return n=o,i=a,s=Object.create(null),n.forEach(e=>{s[e]=i[e]}),s}catch(t){let e;return s=o,e=Object.create(null),s.forEach(t=>{e[t]="[PREDICATE_FUNCTION_ERROR]"}),e}}})();return Object.keys(s).forEach(e=>{if(!t||"none"in t&&t.none||"all"in t&&!t.all||"exceptNames"in t&&t.exceptNames.includes(e)||"onlyNames"in t&&!t.onlyNames.includes(e))i.variablesJson[e]="";else try{i.variablesJson[e]=void 0===s[e]?"":JSON.stringify(s[e])}catch(t){i.variablesJson[e]=JSON.stringify("[Unable to convert value to JSON]")}}),i};let n=e.r(11059)},316,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.packageVersion=void 0,r.packageVersion="5.2.0"},89120,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.schemaIsSubgraph=function(e){let t=e.getType("_Service");if(!(0,n.isObjectType)(t))return!1;let r=t.getFields().sdl;if(!r)return!1;let i=r.type;return(0,n.isNonNullType)(i)&&(i=i.ofType),!!(0,n.isScalarType)(i)&&"String"==i.name};let n=e.r(86846)},78922,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ApolloServerPluginUsageReporting=function(e=Object.create(null)){let t=e.fieldLevelInstrumentation,r="number"==typeof t?async()=>Math.random()<t?1/t:0:t||(async()=>!0),n=null;return(0,c.internalPlugin)({__internal_plugin_id__:"UsageReporting",__is_disabled_plugin__:!1,requestDidStart:async e=>n?n(e):{},async serverWillStart({logger:t,apollo:l,startedInBackground:c,schema:y}){let _,b,S=e.logger??t,{key:I,graphRef:O}=l;if(!(I&&O))throw Error("You've enabled usage reporting via ApolloServerPluginUsageReporting, but you also need to provide your Apollo API key and graph ref, via the APOLLO_KEY/APOLLO_GRAPH_REF environment variables or via `new ApolloServer({apollo: {key, graphRef})`.");if((0,v.schemaIsSubgraph)(y))if(e.__onlyIfSchemaIsNotSubgraph)return S.warn("You have specified an Apollo API key and graph ref but this server appears to be a subgraph. Typically usage reports are sent to Apollo by your Router or Gateway, not directly from your subgraph; usage reporting is disabled. To enable usage reporting anyway, explicitly install `ApolloServerPluginUsageReporting`. To disable this warning, install `ApolloServerPluginUsageReportingDisabled`."),{};else S.warn("You have installed `ApolloServerPluginUsageReporting` but this server appears to be a subgraph. Typically usage reports are sent to Apollo by your Router or Gateway, not directly from your subgraph. If this was unintentional, remove `ApolloServerPluginUsageReporting` from your server's `plugins` array.");S.info(`Apollo usage reporting starting! See your graph at https://studio.apollographql.com/graph/${encodeURI(O)}/`);let N=e.sendReportsImmediately??c,w=null,A=new Map,P=e=>{let t=A.get(e);if(t)return t;let r=new h.OurReport(new i.ReportHeader({...T,executableSchemaId:e,graphRef:O}));return A.set(e,r),r},R=e.overrideReportedSchema?(0,g.computeCoreSchemaHash)(e.overrideReportedSchema):void 0;N||(b=setInterval(()=>k(),e.reportIntervalMs||1e4));let x=e.sendTraces??!0,L=e.experimental_sendOperationAsTrace??(0,p.defaultSendOperationsAsTrace)(),D=!1;function M(e){if(_?.executableSchema===e)return _.executableSchemaId;let t=(0,g.computeCoreSchemaHash)((0,a.printSchema)(e));return _={executableSchema:e,executableSchemaId:t},t}async function k(){await Promise.all([...A.keys()].map(e=>C(e)))}async function C(t){return F(t).catch(t=>{e.reportErrorFunction?e.reportErrorFunction(t):S.error(t.message)})}let F=async t=>{let r,n=(r=A.get(t))?(A.delete(t),r):null;if(!n||0===Object.keys(n.tracesPerQuery).length&&0===n.operationCount)return;n.endTime=(0,d.dateToProtoTimestamp)(new Date),n.ensureCountsAreIntegers();let s=i.Report.verify(n);if(s)throw Error(`Error verifying report: ${s}`);let a=i.Report.encode(n).finish();if(n=null,e.debugPrintReports){let e=i.Report.decode(a);S.info(`Apollo usage report: ${JSON.stringify(e.toJSON())}`)}let l=await new Promise((e,t)=>{(0,u.gzip)(a,(r,n)=>{r?t(r):e(n)})});a=null;let c=e.fetcher??fetch,p=await (0,o.default)(async()=>{let t=await c((e.endpointUrl||"https://usage-reporting.api.apollographql.com")+"/api/ingress/traces",{method:"POST",headers:{"user-agent":"ApolloServerPluginUsageReporting","x-api-key":I,"content-encoding":"gzip",accept:"application/json"},body:l,signal:AbortSignal.timeout(e.requestTimeoutMs??3e4)});if(!(t.status>=500)||!(t.status<600))return t;throw Error(`HTTP status ${t.status}, ${await t.text()||"(no body)"}`)},{retries:(e.maxAttempts||5)-1,minTimeout:e.minimumRetryDelayMs||100,factor:2}).catch(e=>{throw Error(`Error sending report to Apollo servers: ${e.message}`)});if(p.status<200||p.status>=300)throw Error(`Error sending report to Apollo servers: HTTP status ${p.status}, ${await p.text()||"(no body)"}`);if(x&&200===p.status&&p.headers.get("content-type")?.match(/^\s*application\/json\s*(?:;|$)/i)){let e,t=await p.text();try{e=JSON.parse(t)}catch(e){throw Error(`Error parsing response from Apollo servers: ${e}`)}!0===e.tracesIgnored&&(S.debug("This graph's organization does not have access to traces; sending all subsequent operations as stats."),x=!1)}e.debugPrintReports&&S.info(`Apollo usage report: status ${p.status}`)};return n=({metrics:t,schema:n,request:{http:o,variables:a}})=>{let l=new d.TraceTreeBuilder({maskedBy:"ApolloServerPluginUsageReporting",sendErrors:e.sendErrors});l.startTiming(),t.startHrTime=l.startHrTime;let u=!1,c=!1,p=null;async function h(t){if(null===p){if("function"!=typeof e.includeRequest){p=!0;return}"boolean"!=typeof(p=await e.includeRequest(t))&&(S.warn("The 'includeRequest' async predicate function must return a boolean value."),p=!0)}}o&&(l.trace.http=new i.Trace.HTTP({method:i.Trace.HTTP.Method[o.method]||i.Trace.HTTP.Method.UNKNOWN}),e.sendHeaders&&E(l.trace.http,o.headers,e.sendHeaders));let y=!1;return{async didResolveSource(r){y=!0,t.persistedQueryHit&&(l.trace.persistedQueryHit=!0),t.persistedQueryRegister&&(l.trace.persistedQueryRegister=!0),a&&(l.trace.details=(0,m.makeTraceDetails)(a,e.sendVariableValues,r.source));let n=(e.generateClientInfo||function({request:e}){let t="apollographql-client-name",r="apollographql-client-version";return e.http?.headers?.get(t)||e.http?.headers?.get(r)?{clientName:e.http?.headers?.get(t),clientVersion:e.http?.headers?.get(r)}:e.extensions?.clientInfo?e.extensions.clientInfo:{}})(r);if(n){let{clientName:e,clientVersion:t}=n;l.trace.clientVersion=t||"",l.trace.clientName=e||""}},validationDidStart:async()=>async e=>{u=!!e&&0!==e.length},async didResolveOperation(e){if(c=void 0===e.operation,await h(e),p&&!c&&void 0===t.captureTraces){let n=await r(e);l.trace.fieldExecutionWeight="number"==typeof n?n:+!!n,t.captureTraces=!!l.trace.fieldExecutionWeight}},async executionDidStart(){if(t.captureTraces)return{willResolveField:({info:e})=>l.willResolveField(e)}},async didEncounterSubsequentErrors(e,t){l.didEncounterErrors(t)},async willSendSubsequentPayload(e,t){t.hasNext||await g(e)},async willSendResponse(e){y&&(e.errors&&l.didEncounterErrors(e.errors),"single"===e.response.body.kind&&await g(e))}};async function g(r){let o=!!r.operation;await h(r),l.stopTiming();let a=R??M(n);if(!1===p){o&&P(a).operationCount++;return}l.trace.fullQueryCacheHit=!!t.responseCacheHit,l.trace.forbiddenOperation=!!t.forbiddenOperation,l.trace.registeredOperation=!!t.registeredOperation;let d=r.overallCachePolicy.policyIfCacheable();async function m(){let a,d;if(D)return;await new Promise(e=>setImmediate(e));let p=R??M(n),{trace:h}=l;r.document?u?d=`## GraphQLValidationFailure
`:c&&(d=`## GraphQLUnknownOperationName
`):d=`## GraphQLParseFailure
`;let m=void 0===d;if(d)e.sendUnexecutableOperationDocuments&&(h.unexecutedOperationBody=r.source,h.unexecutedOperationName=r.request.operationName||""),a=Object.create(null);else{let t=function(){if(!r.document)throw Error("No document?");let t=(0,f.operationDerivedDataCacheKey)(r.queryHash,r.operationName||"");w&&w.forSchema===n||(w={forSchema:n,cache:(0,f.createOperationDerivedDataCache)({logger:S})});let i=w.cache.get(t);if(i)return i;let o={signature:(e.calculateSignature||s.usageReportingSignature)(r.document,r.operationName||""),referencedFieldsByType:(0,s.calculateReferencedFieldsByType)({document:r.document,schema:n,resolvedOperationName:r.operationName??null})};return w.cache.set(t,o),o}();d=`# ${r.operationName||"-"}
${t.signature}`,a=t.referencedFieldsByType}let y=i.Trace.verify(h);if(y)throw Error(`Error encoding trace: ${y}`);o&&P(p).operationCount++,P(p).addTrace({statsReportKey:d,trace:h,asTrace:x&&(!m||!!t.captureTraces)&&!t.nonFtv1ErrorPaths?.length&&L(h,d),referencedFieldsByType:a,nonFtv1ErrorPaths:t.nonFtv1ErrorPaths??[]}),(N||P(p).sizeEstimator.bytes>=(e.maxUncompressedReportSize||4194304))&&await C(p)}d&&(l.trace.cachePolicy=new i.Trace.CachePolicy({scope:"PRIVATE"===d.scope?i.Trace.CachePolicy.Scope.PRIVATE:"PUBLIC"===d.scope?i.Trace.CachePolicy.Scope.PUBLIC:i.Trace.CachePolicy.Scope.UNKNOWN,maxAgeNs:1e9*d.maxAge})),t.queryPlanTrace&&(l.trace.queryPlan=t.queryPlanTrace),m().catch(S.error.bind(S))}},{async serverWillStop(){b&&(clearInterval(b),b=void 0),D=!0,await k()}}}})},r.makeHTTPRequestHeaders=E;let i=e.r(11059),s=e.r(88869),o=n(e.r(52534)),a=e.r(86846),l=n(e.r(46786)),u=e.r(6461),c=e.r(37766),d=e.r(98963),p=e.r(22154),f=e.r(79898),h=e.r(32483),m=e.r(96170),y=e.r(316),g=e.r(74110),v=e.r(89120),T={hostname:l.default.hostname(),agentVersion:`@apollo/server@${y.packageVersion}`,runtimeVersion:`node ${process.version}`,uname:`${l.default.platform()}, ${l.default.type()}, ${l.default.release()}, ${l.default.arch()})`};function E(e,t,r){if(r&&(!("none"in r)||!r.none)&&(!("all"in r)||r.all)){for(let[n,s]of t)if(!("exceptNames"in r&&r.exceptNames.some(e=>e.toLowerCase()===n))&&(!("onlyNames"in r)||r.onlyNames.some(e=>e.toLowerCase()===n)))switch(n){case"authorization":case"cookie":case"set-cookie":break;default:e.requestHeaders[n]=new i.Trace.HTTP.Values({value:[s]})}}}},64971,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ApolloServerPluginUsageReporting=void 0;var n=e.r(78922);Object.defineProperty(r,"ApolloServerPluginUsageReporting",{enumerable:!0,get:function(){return n.ApolloServerPluginUsageReporting}})},21721,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},12826,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default="00000000-0000-0000-0000-000000000000"},66605,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},45966,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(66605);r.default=function(e){return"string"==typeof e&&n.default.test(e)}},74232,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(45966);r.default=function(e){let t;if(!(0,n.default)(e))throw TypeError("Invalid UUID");return Uint8Array.of((t=parseInt(e.slice(0,8),16))>>>24,t>>>16&255,t>>>8&255,255&t,(t=parseInt(e.slice(9,13),16))>>>8,255&t,(t=parseInt(e.slice(14,18),16))>>>8,255&t,(t=parseInt(e.slice(19,23),16))>>>8,255&t,(t=parseInt(e.slice(24,36),16))/0x10000000000&255,t/0x100000000&255,t>>>24&255,t>>>16&255,t>>>8&255,255&t)}},932,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unsafeStringify=void 0;let n=e.r(45966),i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function s(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}r.unsafeStringify=s,r.default=function(e,t=0){let r=s(e,t);if(!(0,n.default)(r))throw TypeError("Stringified UUID is invalid");return r}},95423,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(54799),i=new Uint8Array(256),s=i.length;r.default=function(){return s>i.length-16&&((0,n.randomFillSync)(i),s=0),i.slice(s,s+=16)}},15631,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.updateV1State=void 0;let n=e.r(95423),i=e.r(932),s={};function o(e,t,r){return e.msecs??=-1/0,e.nsecs??=0,t===e.msecs?(e.nsecs++,e.nsecs>=1e4&&(e.node=void 0,e.nsecs=0)):t>e.msecs?e.nsecs=0:t<e.msecs&&(e.node=void 0),e.node||(e.node=r.slice(10,16),e.node[0]|=1,e.clockseq=(r[8]<<8|r[9])&16383),e.msecs=t,e}function a(e,t,r,n,i,s,o=0){if(e.length<16)throw Error("Random bytes length must be >= 16");if(s){if(o<0||o+16>s.length)throw RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`)}else s=new Uint8Array(16),o=0;t??=Date.now(),r??=0,n??=(e[8]<<8|e[9])&16383,i??=e.slice(10,16);let l=((0xfffffff&(t+=122192928e5))*1e4+r)%0x100000000;s[o++]=l>>>24&255,s[o++]=l>>>16&255,s[o++]=l>>>8&255,s[o++]=255&l;let u=t/0x100000000*1e4&0xfffffff;s[o++]=u>>>8&255,s[o++]=255&u,s[o++]=u>>>24&15|16,s[o++]=u>>>16&255,s[o++]=n>>>8|128,s[o++]=255&n;for(let e=0;e<6;++e)s[o++]=i[e];return s}r.updateV1State=o,r.default=function(e,t,r){let l,u=e?._v6??!1;if(e){let t=Object.keys(e);1===t.length&&"_v6"===t[0]&&(e=void 0)}if(e)l=a(e.random??e.rng?.()??(0,n.default)(),e.msecs,e.nsecs,e.clockseq,e.node,t,r);else{let e=Date.now(),i=(0,n.default)();o(s,e,i),l=a(i,s.msecs,s.nsecs,u?void 0:s.clockseq,u?void 0:s.node,t,r)}return t??(0,i.unsafeStringify)(l)}},95207,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(74232),i=e.r(932);r.default=function(e){var t;let r=(t="string"==typeof e?(0,n.default)(e):e,Uint8Array.of((15&t[6])<<4|t[7]>>4&15,(15&t[7])<<4|(240&t[4])>>4,(15&t[4])<<4|(240&t[5])>>4,(15&t[5])<<4|(240&t[0])>>4,(15&t[0])<<4|(240&t[1])>>4,(15&t[1])<<4|(240&t[2])>>4,96|15&t[2],t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]));return"string"==typeof e?(0,i.unsafeStringify)(r):r}},6418,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(54799);r.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),(0,n.createHash)("md5").update(e).digest()}},9788,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=r.stringToBytes=void 0;let n=e.r(74232),i=e.r(932);function s(e){let t=new Uint8Array((e=unescape(encodeURIComponent(e))).length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r);return t}r.stringToBytes=s,r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r.default=function(e,t,r,o,a,l){let u="string"==typeof r?s(r):r,c="string"==typeof o?(0,n.default)(o):o;if("string"==typeof o&&(o=(0,n.default)(o)),o?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let d=new Uint8Array(16+u.length);if(d.set(c),d.set(u,c.length),(d=t(d))[6]=15&d[6]|e,d[8]=63&d[8]|128,a){l=l||0;for(let e=0;e<16;++e)a[l+e]=d[e];return a}return(0,i.unsafeStringify)(d)}},54682,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0;let n=e.r(6418),i=e.r(9788);var s=e.r(9788);function o(e,t,r,s){return(0,i.default)(48,n.default,e,t,r,s)}Object.defineProperty(r,"DNS",{enumerable:!0,get:function(){return s.DNS}}),Object.defineProperty(r,"URL",{enumerable:!0,get:function(){return s.URL}}),o.DNS=i.DNS,o.URL=i.URL,r.default=o},78763,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={randomUUID:e.r(54799).randomUUID}},75720,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(78763),i=e.r(95423),s=e.r(932);r.default=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();let o=(e=e||{}).random??e.rng?.()??(0,i.default)();if(o.length<16)throw Error("Random bytes length must be >= 16");if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=o[e];return t}return(0,s.unsafeStringify)(o)}},43334,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(54799);r.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),(0,n.createHash)("sha1").update(e).digest()}},25722,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0;let n=e.r(43334),i=e.r(9788);var s=e.r(9788);function o(e,t,r,s){return(0,i.default)(80,n.default,e,t,r,s)}Object.defineProperty(r,"DNS",{enumerable:!0,get:function(){return s.DNS}}),Object.defineProperty(r,"URL",{enumerable:!0,get:function(){return s.URL}}),o.DNS=i.DNS,o.URL=i.URL,r.default=o},85213,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(932),i=e.r(15631),s=e.r(95207);r.default=function(e,t,r){e??={},r??=0;let o=(0,i.default)({...e,_v6:!0},new Uint8Array(16));if(o=(0,s.default)(o),t){for(let e=0;e<16;e++)t[r+e]=o[e];return t}return(0,n.unsafeStringify)(o)}},13601,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(74232),i=e.r(932);r.default=function(e){var t;let r=(t="string"==typeof e?(0,n.default)(e):e,Uint8Array.of((15&t[3])<<4|t[4]>>4&15,(15&t[4])<<4|(240&t[5])>>4,(15&t[5])<<4|15&t[6],t[7],(15&t[1])<<4|(240&t[2])>>4,(15&t[2])<<4|(240&t[3])>>4,16|(240&t[0])>>4,(15&t[0])<<4|(240&t[1])>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]));return"string"==typeof e?(0,i.unsafeStringify)(r):r}},73627,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.updateV7State=void 0;let n=e.r(95423),i=e.r(932),s={};function o(e,t,r){return e.msecs??=-1/0,e.seq??=0,t>e.msecs?(e.seq=r[6]<<23|r[7]<<16|r[8]<<8|r[9],e.msecs=t):(e.seq=e.seq+1|0,0===e.seq&&e.msecs++),e}function a(e,t,r,n,i=0){if(e.length<16)throw Error("Random bytes length must be >= 16");if(n){if(i<0||i+16>n.length)throw RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`)}else n=new Uint8Array(16),i=0;return t??=Date.now(),r??=127*e[6]<<24|e[7]<<16|e[8]<<8|e[9],n[i++]=t/0x10000000000&255,n[i++]=t/0x100000000&255,n[i++]=t/0x1000000&255,n[i++]=t/65536&255,n[i++]=t/256&255,n[i++]=255&t,n[i++]=112|r>>>28&15,n[i++]=r>>>20&255,n[i++]=128|r>>>14&63,n[i++]=r>>>6&255,n[i++]=r<<2&255|3&e[10],n[i++]=e[11],n[i++]=e[12],n[i++]=e[13],n[i++]=e[14],n[i++]=e[15],n}r.updateV7State=o,r.default=function(e,t,r){let l;if(e)l=a(e.random??e.rng?.()??(0,n.default)(),e.msecs,e.seq,t,r);else{let e=Date.now(),i=(0,n.default)();o(s,e,i),l=a(i,s.msecs,s.seq,t,r)}return t??(0,i.unsafeStringify)(l)}},25149,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(45966);r.default=function(e){if(!(0,n.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},31039,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.version=r.validate=r.v7=r.v6ToV1=r.v6=r.v5=r.v4=r.v3=r.v1ToV6=r.v1=r.stringify=r.parse=r.NIL=r.MAX=void 0;var n=e.r(21721);Object.defineProperty(r,"MAX",{enumerable:!0,get:function(){return n.default}});var i=e.r(12826);Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return i.default}});var s=e.r(74232);Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return s.default}});var o=e.r(932);Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return o.default}});var a=e.r(15631);Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return a.default}});var l=e.r(95207);Object.defineProperty(r,"v1ToV6",{enumerable:!0,get:function(){return l.default}});var u=e.r(54682);Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return u.default}});var c=e.r(75720);Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return c.default}});var d=e.r(25722);Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return d.default}});var p=e.r(85213);Object.defineProperty(r,"v6",{enumerable:!0,get:function(){return p.default}});var f=e.r(13601);Object.defineProperty(r,"v6ToV1",{enumerable:!0,get:function(){return f.default}});var h=e.r(73627);Object.defineProperty(r,"v7",{enumerable:!0,get:function(){return h.default}});var m=e.r(45966);Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return m.default}});var y=e.r(25149);Object.defineProperty(r,"version",{enumerable:!0,get:function(){return y.default}})},3625,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SchemaReporter=r.schemaReportGql=void 0;let n=e.r(316);r.schemaReportGql=`#graphql
  mutation SchemaReport($report: SchemaReport!, $coreSchema: String) {
    reportSchema(report: $report, coreSchema: $coreSchema) {
      __typename
      ... on ReportSchemaError {
        message
        code
      }
      ... on ReportSchemaResponse {
        inSeconds
        withCoreSchema
      }
    }
  }
`,r.SchemaReporter=class{schemaReport;coreSchema;endpointUrl;logger;initialReportingDelayInMs;fallbackReportingDelayInMs;fetcher;isStopped;pollTimer;headers;constructor(e){this.headers={"Content-Type":"application/json","x-api-key":e.apiKey,"apollographql-client-name":"ApolloServerPluginSchemaReporting","apollographql-client-version":n.packageVersion},this.endpointUrl=e.endpointUrl||"https://schema-reporting.api.apollographql.com/api/graphql",this.schemaReport=e.schemaReport,this.coreSchema=e.coreSchema,this.isStopped=!1,this.logger=e.logger,this.initialReportingDelayInMs=e.initialReportingDelayInMs,this.fallbackReportingDelayInMs=e.fallbackReportingDelayInMs,this.fetcher=e.fetcher??fetch}stopped(){return this.isStopped}start(){this.pollTimer=setTimeout(()=>this.sendOneReportAndScheduleNext(!1),this.initialReportingDelayInMs)}stop(){this.isStopped=!0,this.pollTimer&&(clearTimeout(this.pollTimer),this.pollTimer=void 0)}async sendOneReportAndScheduleNext(e){if(this.pollTimer=void 0,!this.stopped())try{let t=await this.reportSchema(e);if(!t)return;this.stopped()||(this.pollTimer=setTimeout(()=>this.sendOneReportAndScheduleNext(t.withCoreSchema),1e3*t.inSeconds));return}catch(e){this.logger.error(`Error reporting server info to Apollo during schema reporting: ${e}`),this.stopped()||(this.pollTimer=setTimeout(()=>this.sendOneReportAndScheduleNext(!1),this.fallbackReportingDelayInMs))}}async reportSchema(e){let{data:t,errors:r}=await this.apolloQuery({report:this.schemaReport,coreSchema:e?this.coreSchema:null});if(r)throw Error(r.map(e=>e.message).join("\n"));function n(e){return["Unexpected response shape from Apollo when reporting schema. If this continues, please reach out to support@apollographql.com. Received response:",JSON.stringify(e)].join(" ")}if(!t||!t.reportSchema)throw Error(n(t));if("ReportSchemaResponse"===t.reportSchema.__typename)return t.reportSchema;if("ReportSchemaError"===t.reportSchema.__typename)return this.logger.error(["Received input validation error from Apollo:",t.reportSchema.message,"Stopping reporting. Please fix the input errors."].join(" ")),this.stop(),null;throw Error(n(t))}async apolloQuery(e){let t={query:r.schemaReportGql,variables:e},n=await this.fetcher(this.endpointUrl,{method:"POST",headers:this.headers,body:JSON.stringify(t)});if(!n.ok)throw Error(`An unexpected HTTP status code (${n.status}) was encountered during schema reporting.`);try{return await n.json()}catch(e){throw Error(["Couldn't report schema to Apollo. Parsing response as JSON failed. If this continues please reach out to support@apollographql.com",e].join(" "))}}}},44161,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ApolloServerPluginSchemaReporting=function({initialDelayMaxMs:e,overrideReportedSchema:t,endpointUrl:r,fetcher:n}=Object.create(null)){let p=(0,o.v4)();return(0,s.internalPlugin)({__internal_plugin_id__:"SchemaReporting",__is_disabled_plugin__:!1,async serverWillStart({apollo:s,schema:o,logger:f}){let h,{key:m,graphRef:y}=s;if(!m)throw Error("To use ApolloServerPluginSchemaReporting, you must provide an Apollo API key, via the APOLLO_KEY environment variable or via `new ApolloServer({apollo: {key})`");if(!y)throw Error("To use ApolloServerPluginSchemaReporting, you must provide your graph ref (eg, 'my-graph-id@my-graph-variant'). Try setting the APOLLO_GRAPH_REF environment variable or passing `new ApolloServer({apollo: {graphRef}})`.");if(t)try{let e=(0,a.validateSchema)((0,a.buildSchema)(t,{noLocation:!0}));if(e.length)throw Error(e.map(e=>e.message).join("\n"))}catch(e){throw Error(`The schema provided to overrideReportedSchema failed to parse or validate: ${e.message}`)}if((0,u.schemaIsSubgraph)(o))throw Error("Schema reporting is not yet compatible with Apollo Federation subgraphs. If you're interested in using schema reporting with subgraphs, please contact Apollo support. To set up managed federation, see https://go.apollo.dev/s/managed-federation");void 0!==r&&f.info(`Apollo schema reporting: schema reporting URL override: ${r}`);let g={bootId:p,graphRef:y,platform:process.env.APOLLO_SERVER_PLATFORM||"local",runtimeVersion:`node ${process.version}`,userVersion:process.env.APOLLO_SERVER_USER_VERSION,serverId:process.env.APOLLO_SERVER_ID||process.env.HOSTNAME||i.default.hostname(),libraryVersion:`@apollo/server@${c.packageVersion}`};return{schemaDidLoadOrUpdate({apiSchema:i,coreSupergraphSdl:s}){if(void 0!==t)if(h)return;else f.info("Apollo schema reporting: schema to report has been overridden");let o=t??s??(0,a.printSchema)(i),u=(0,d.computeCoreSchemaHash)(o),c={...g,coreSchemaHash:u};h?.stop(),(h=new l.SchemaReporter({schemaReport:c,coreSchema:o,apiKey:m,endpointUrl:r,logger:f,initialReportingDelayInMs:Math.floor(Math.random()*(e??1e4)),fallbackReportingDelayInMs:2e4,fetcher:n})).start(),f.info(`Apollo schema reporting: reporting a new schema to Studio! See your graph at https://studio.apollographql.com/graph/${encodeURI(y)}/ with server info ${JSON.stringify(c)}`)},async serverWillStop(){h?.stop()}}}})};let i=n(e.r(46786)),s=e.r(37766),o=e.r(31039),a=e.r(86846),l=e.r(3625),u=e.r(89120),c=e.r(316),d=e.r(74110)},24196,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ApolloServerPluginInlineTrace=function(e=Object.create(null)){let t=!e.__onlyIfSchemaIsSubgraph||null;return(0,s.internalPlugin)({__internal_plugin_id__:"InlineTrace",__is_disabled_plugin__:!1,async serverWillStart({schema:e,logger:r}){null===t&&(t=(0,o.schemaIsSubgraph)(e))&&r.info("Enabling inline tracing for this subgraph. To disable, use ApolloServerPluginInlineTraceDisabled.")},async requestDidStart({request:{http:r},metrics:s}){if(!t)return;let o=new i.TraceTreeBuilder({maskedBy:"ApolloServerPluginInlineTrace",sendErrors:e.includeErrors});if(r?.headers.get("apollo-federation-include-trace")==="ftv1"&&!1!==s.captureTraces)return s.captureTraces=!0,o.startTiming(),{executionDidStart:async()=>({willResolveField:({info:e})=>o.willResolveField(e)}),async didEncounterErrors({errors:e}){o.didEncounterErrors(e)},async willSendResponse({response:e}){if(o.stopTiming(),"incremental"===e.body.kind)return;s.queryPlanTrace&&(o.trace.queryPlan=s.queryPlanTrace);let t=n.Trace.encode(o.trace).finish(),r=Buffer.from(t,t.byteOffset,t.byteLength),i=e.body.singleResult.extensions||(e.body.singleResult.extensions=Object.create(null));if(void 0!==i.ftv1)throw Error("The `ftv1` extension was already present.");i.ftv1=r.toString("base64")}}}})};let n=e.r(11059),i=e.r(98963),s=e.r(37766),o=e.r(89120)},32051,(e,t,r)=>{"use strict";function n(e){return JSON.stringify(e).replace("<","\\u003c").replace(">","\\u003e").replace("&","\\u0026").replace("'","\\u0027")}Object.defineProperty(r,"__esModule",{value:!0}),r.getEmbeddedSandboxHTML=r.getEmbeddedExplorerHTML=void 0,r.getEmbeddedExplorerHTML=(e,t,r,i)=>{let s={displayOptions:{},persistExplorerState:!1,runTelemetry:!0,..."boolean"==typeof t.embed?{}:t.embed},o={graphRef:t.graphRef,target:"#embeddableExplorer",initialState:{..."document"in t||"headers"in t||"variables"in t?{document:t.document,headers:t.headers,variables:t.variables}:{},..."collectionId"in t?{collectionId:t.collectionId,operationId:t.operationId}:{},displayOptions:{...s.displayOptions}},persistExplorerState:s.persistExplorerState,includeCookies:t.includeCookies,runtime:r,runTelemetry:s.runTelemetry,allowDynamicStyles:!1};return`
<div class="fallback">
  <h1>Welcome to Apollo Server</h1>
  <p>Apollo Explorer cannot be loaded; it appears that you might be offline.</p>
</div>
<style nonce=${i}>
  iframe {
    background-color: white;
    height: 100%;
    width: 100%;
    border: none;
  }
  #embeddableExplorer {
    width: 100vw;
    height: 100vh;
    position: absolute;
    top: 0;
  }
</style>
<div id="embeddableExplorer"></div>
<script nonce="${i}" src="https://embeddable-explorer.cdn.apollographql.com/${encodeURIComponent(e)}/embeddable-explorer.umd.production.min.js?runtime=${encodeURIComponent(r)}"></script>
<script nonce="${i}">
  var endpointUrl = window.location.href;
  var embeddedExplorerConfig = ${n(o)};
  new window.EmbeddedExplorer({
    ...embeddedExplorerConfig,
    endpointUrl,
  });
</script>
`},r.getEmbeddedSandboxHTML=(e,t,r,i)=>{let s={runTelemetry:!0,endpointIsEditable:!1,initialState:{},..."boolean"==typeof t.embed?{}:t.embed??{}},o={target:"#embeddableSandbox",initialState:{..."document"in t||"headers"in t||"variables"in t?{document:t.document,variables:t.variables,headers:t.headers}:{},..."collectionId"in t?{collectionId:t.collectionId,operationId:t.operationId}:{},includeCookies:t.includeCookies,...s.initialState},hideCookieToggle:!1,endpointIsEditable:s.endpointIsEditable,runtime:r,runTelemetry:s.runTelemetry,allowDynamicStyles:!1};return`
<div class="fallback">
  <h1>Welcome to Apollo Server</h1>
  <p>Apollo Sandbox cannot be loaded; it appears that you might be offline.</p>
</div>
<style nonce=${i}>
  iframe {
    background-color: white;
    height: 100%;
    width: 100%;
    border: none;
  }
  #embeddableSandbox {
    width: 100vw;
    height: 100vh;
    position: absolute;
    top: 0;
  }
</style>
<div id="embeddableSandbox"></div>
<script nonce="${i}" src="https://embeddable-sandbox.cdn.apollographql.com/${encodeURIComponent(e)}/embeddable-sandbox.umd.production.min.js?runtime=${encodeURIComponent(r)}"></script>
<script nonce="${i}">
  var initialEndpoint = window.location.href;
  var embeddedSandboxConfig = ${n(o)};
  new window.EmbeddedSandbox(
    {
      ...embeddedSandboxConfig,
      initialEndpoint,
    }
  );
</script>
`}},55700,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_APOLLO_SERVER_LANDING_PAGE_VERSION=r.DEFAULT_EMBEDDED_SANDBOX_VERSION=r.DEFAULT_EMBEDDED_EXPLORER_VERSION=void 0,r.ApolloServerPluginLandingPageLocalDefault=function(e={}){let{version:t,__internal_apolloStudioEnv__:r,...n}={embed:!0,...e};return l(t,{isProd:!1,apolloStudioEnv:r,...n})},r.ApolloServerPluginLandingPageProductionDefault=function(e={}){let{version:t,__internal_apolloStudioEnv__:r,...n}=e;return l(t,{isProd:!0,apolloStudioEnv:r,...n})};let n=e.r(32051),i=e.r(316),s=e.r(94555),o=e.r(31039),a=(e,t,r,n)=>{let i=JSON.stringify(encodeURIComponent(JSON.stringify(t)));return`
 <div class="fallback">
  <h1>Welcome to Apollo Server</h1>
  <p>The full landing page cannot be loaded; it appears that you might be offline.</p>
</div>
<script nonce="${n}">window.landingPage = ${i};</script>
<script nonce="${n}" src="https://apollo-server-landing-page.cdn.apollographql.com/${encodeURIComponent(e)}/static/js/main.js?runtime=${r}"></script>`};function l(e,t){let l=e??r.DEFAULT_EMBEDDED_EXPLORER_VERSION,u=e??r.DEFAULT_EMBEDDED_SANDBOX_VERSION,c=e??r.DEFAULT_APOLLO_SERVER_LANDING_PAGE_VERSION,d=`@apollo/server@${i.packageVersion}`;return{__internal_installed_implicitly__:!1,serverWillStart:async()=>({async renderLandingPage(){let e=encodeURIComponent(c);return{html:async function(){let r=(0,s.createHash)("sha256").update((0,o.v4)()).digest("hex"),i=`script-src 'self' 'nonce-${r}' https://apollo-server-landing-page.cdn.apollographql.com https://embeddable-sandbox.cdn.apollographql.com https://embeddable-explorer.cdn.apollographql.com`,p=`style-src 'nonce-${r}' https://apollo-server-landing-page.cdn.apollographql.com https://embeddable-sandbox.cdn.apollographql.com https://embeddable-explorer.cdn.apollographql.com https://fonts.googleapis.com`;return`
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Security-Policy" content="${i}; ${p}; img-src https://apollo-server-landing-page.cdn.apollographql.com; manifest-src https://apollo-server-landing-page.cdn.apollographql.com; frame-src https://explorer.embed.apollographql.com https://sandbox.embed.apollographql.com https://embed.apollo.local:3000" />
    <link
      rel="icon"
      href="https://apollo-server-landing-page.cdn.apollographql.com/${e}/assets/favicon.png"
    />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap"
      rel="stylesheet"
    />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Apollo server landing page" />
    <link
      rel="apple-touch-icon"
      href="https://apollo-server-landing-page.cdn.apollographql.com/${e}/assets/favicon.png"
    />
    <link
      rel="manifest"
      href="https://apollo-server-landing-page.cdn.apollographql.com/${e}/manifest.json"
    />
    <title>Apollo Server</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="react-root">
      <style nonce=${r}>
        body {
          margin: 0;
          overflow-x: hidden;
          overflow-y: hidden;
        }
        .fallback {
          opacity: 0;
          animation: fadeIn 1s 1s;
          animation-iteration-count: 1;
          animation-fill-mode: forwards;
          padding: 1em;
        }
        @keyframes fadeIn {
          0% {opacity:0;}
          100% {opacity:1; }
        }
      </style>
    ${t.embed?"graphRef"in t&&t.graphRef?(0,n.getEmbeddedExplorerHTML)(l,t,d,r):!("graphRef"in t)?(0,n.getEmbeddedSandboxHTML)(u,t,d,r):a(c,t,d,r):a(c,t,d,r)}
    </div>
  </body>
</html>
          `}}}})}}r.DEFAULT_EMBEDDED_EXPLORER_VERSION="v3",r.DEFAULT_EMBEDDED_SANDBOX_VERSION="v2",r.DEFAULT_APOLLO_SERVER_LANDING_PAGE_VERSION="_latest"},13240,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ApolloServerPluginDisableSuggestions=function(){return(0,n.internalPlugin)({__internal_plugin_id__:"DisableSuggestions",__is_disabled_plugin__:!1,requestDidStart:async()=>({validationDidStart:async()=>async e=>{e?.forEach(e=>{e.message=e.message.replace(/ ?Did you mean(.+?)\?$/,"")})}})})};let n=e.r(37766)},42549,(e,t,r)=>{"use strict";var n,i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(n=function(e){return(n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),o=0;o<r.length;o++)"default"!==r[o]&&i(t,e,r[o]);return s(t,e),t}),a=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.MEDIA_TYPES=r.ApolloServer=void 0,r.internalExecuteOperation=x,r.isImplicitlyInstallablePlugin=L,r.chooseContentTypeForSingleResultResponse=D;let l=e.r(22816),u=e.r(64997),c=e.r(23922),d=a(e.r(78741)),p=e.r(86846),f=a(e.r(27145)),h=a(e.r(28069)),m=e.r(13587),y=e.r(47820),g=e.r(18083),v=e.r(73922),T=e.r(20177),E=e.r(37766),_=e.r(34966),b=e.r(18288),S=e.r(50640),I=e.r(15966),O=e.r(44449),N=e.r(74110),w=e.r(77658),A=e.r(28354),P=e.r(99111);class R{internals;cache;logger;constructor(e){let t;const r=e.nodeEnv??"production"??"";this.logger=e.logger??function(){let e=f.default.getLogger("apollo-server");return e.setLevel(f.default.levels.INFO),e}();const n=(0,y.determineApolloConfig)(e.apollo,this.logger);if(e.cache&&"bounded"!==e.cache&&u.PrefixingKeyValueCache.prefixesAreUnnecessaryForIsolation(e.cache))throw Error("You cannot pass a cache returned from `PrefixingKeyValueCache.cacheDangerouslyDoesNotNeedPrefixesForIsolation`to `new ApolloServer({ cache })`, because Apollo Server may use it for multiple features whose cache keys must be distinct from each other.");const i=e.gateway?{phase:"initialized",schemaManager:new A.SchemaManager({gateway:e.gateway,apolloConfig:n,schemaDerivedDataProvider:t=>R.generateSchemaDerivedData(t,e.documentStore),logger:this.logger})}:{phase:"initialized",schemaManager:new A.SchemaManager({apiSchema:R.constructSchema(e),schemaDerivedDataProvider:t=>R.generateSchemaDerivedData(t,e.documentStore),logger:this.logger})},s=e.introspection??"production"!==r,o=e.hideSchemaDetailsFromClientErrors??!1;this.cache=void 0===e.cache||"bounded"===e.cache?new u.InMemoryLRUCache:e.cache;const a=!0===e.maxRecursiveSelections?[(0,P.createMaxRecursiveSelectionsRule)(P.DEFAULT_MAX_RECURSIVE_SELECTIONS)]:"number"==typeof e.maxRecursiveSelections?[(0,P.createMaxRecursiveSelectionsRule)(e.maxRecursiveSelections)]:[],l=[...s?[]:[P.NoIntrospection],...a];a.length>0?t=e.validationRules:l.push(...e.validationRules??[]),this.internals={formatError:e.formatError,rootValue:e.rootValue,validationRules:l,laterValidationRules:t,hideSchemaDetailsFromClientErrors:o,dangerouslyDisableValidation:e.dangerouslyDisableValidation??!1,fieldResolver:e.fieldResolver,includeStacktraceInErrorResponses:e.includeStacktraceInErrorResponses??("production"!==r&&"test"!==r),persistedQueries:!1===e.persistedQueries?void 0:{...e.persistedQueries,cache:new u.PrefixingKeyValueCache(e.persistedQueries?.cache??this.cache,b.APQ_CACHE_PREFIX)},nodeEnv:r,allowBatchedHttpRequests:e.allowBatchedHttpRequests??!1,apolloConfig:n,plugins:e.plugins??[],parseOptions:e.parseOptions??{},state:i,stopOnTerminationSignals:e.stopOnTerminationSignals,gatewayExecutor:null,csrfPreventionRequestHeaders:!0===e.csrfPrevention||void 0===e.csrfPrevention?_.recommendedCsrfPreventionRequestHeaders:!1===e.csrfPrevention?null:e.csrfPrevention.requestHeaders??_.recommendedCsrfPreventionRequestHeaders,status400ForVariableCoercionErrors:e.status400ForVariableCoercionErrors??!0,__testing_incrementalExecutionResults:e.__testing_incrementalExecutionResults,stringifyResult:e.stringifyResult??S.prettyJSONStringify,legacyExperimentalExecuteIncrementally:e.legacyExperimentalExecuteIncrementally},this.warnAgainstDeprecatedConfigOptions(e)}warnAgainstDeprecatedConfigOptions(e){"status400ForVariableCoercionErrors"in e&&(!0===e.status400ForVariableCoercionErrors?this.logger.warn("The `status400ForVariableCoercionErrors: true` configuration option is now the default behavior and has no effect in Apollo Server v5. You can safely remove this option from your configuration."):this.logger.warn("The `status400ForVariableCoercionErrors: false` configuration option is deprecated and will be removed in Apollo Server v6. Apollo recommends removing any dependency on this behavior."))}async start(){return await this._start(!1)}startInBackgroundHandlingStartupErrorsByLoggingAndFailingAllRequests(){this._start(!0).catch(e=>this.logStartupError(e))}async _start(e){if("initialized"!==this.internals.state.phase)throw Error("You should only call 'start()' or 'startInBackgroundHandlingStartupErrorsByLoggingAndFailingAllRequests()' once on your ApolloServer.");let t=this.internals.state.schemaManager,r=(0,d.default)();this.internals.state={phase:"starting",barrier:r,schemaManager:t,startedInBackground:e};try{await this.addDefaultPlugins();let r=[],n=await t.start();n&&(this.internals.gatewayExecutor=n),r.push(async()=>{await t.stop()});let i=t.getSchemaDerivedData(),s={logger:this.logger,cache:this.cache,schema:i.schema,apollo:this.internals.apolloConfig,startedInBackground:e},o=(await Promise.all(this.internals.plugins.map(async e=>({serverListener:e.serverWillStart&&await e.serverWillStart(s),installedImplicitly:L(e)&&e.__internal_installed_implicitly__})))).filter(e=>"object"==typeof e.serverListener);o.forEach(({serverListener:{schemaDidLoadOrUpdate:e}})=>{e&&t.onSchemaLoadOrUpdate(e)});let a=o.map(e=>e.serverListener.serverWillStop).filter(w.isDefined);a.length&&r.push(async()=>{await Promise.all(a.map(e=>e()))});let l=o.map(e=>e.serverListener.drainServer).filter(w.isDefined),u=l.length?async()=>{await Promise.all(l.map(e=>e()))}:null,c=o.filter(e=>e.serverListener.renderLandingPage);c.length>1&&(c=c.filter(e=>!e.installedImplicitly));let d=null;if(c.length>1)throw Error("Only one plugin can implement renderLandingPage.");c.length&&(d=await c[0].serverListener.renderLandingPage());let p=this.maybeRegisterTerminationSignalHandlers(["SIGINT","SIGTERM"],e);this.internals.state={phase:"started",schemaManager:t,drainServers:u,landingPage:d,toDispose:r,toDisposeLast:p}}catch(t){let e=(0,g.ensureError)(t);try{await Promise.all(this.internals.plugins.map(async t=>t.startupDidFail?.({error:e})))}catch(e){this.logger.error(`startupDidFail hook threw: ${e}`)}throw this.internals.state={phase:"failed to start",error:e},e}finally{r.resolve()}}maybeRegisterTerminationSignalHandlers(e,t){let r=[];if(!1===this.internals.stopOnTerminationSignals||void 0===this.internals.stopOnTerminationSignals&&!(l.isNodeLike&&"test"!==this.internals.nodeEnv&&!t))return r;let n=!1,i=async e=>{if(!n){n=!0;try{await this.stop()}catch(t){this.logger.error(`stop() threw during ${e} shutdown`),this.logger.error(t),process.exit(1)}process.kill(process.pid,e)}};return e.forEach(e=>{process.on(e,i),r.push(async()=>{process.removeListener(e,i)})}),r}async _ensureStarted(){for(;;)switch(this.internals.state.phase){case"initialized":throw Error("You need to call `server.start()` before using your Apollo Server.");case"starting":await this.internals.state.barrier;break;case"failed to start":throw this.logStartupError(this.internals.state.error),Error("This data graph is missing a valid configuration. More details may be available in the server logs.");case"started":case"draining":return this.internals.state;case"stopping":case"stopped":throw this.logger.warn("A GraphQL operation was received during server shutdown. The operation will fail. Consider draining the HTTP server on shutdown; see https://go.apollo.dev/s/drain for details."),Error(`Cannot execute GraphQL operations ${"stopping"===this.internals.state.phase?"while the server is stopping":"after the server has stopped"}.'`);default:throw new O.UnreachableCaseError(this.internals.state)}}assertStarted(e){if("started"!==this.internals.state.phase&&"draining"!==this.internals.state.phase&&!("starting"===this.internals.state.phase&&this.internals.state.startedInBackground))throw Error("You must `await server.start()` before calling `"+e+"`")}logStartupError(e){this.logger.error("An error occurred during Apollo Server startup. All GraphQL requests will now fail. The startup error was: "+(e?.message||e))}static constructSchema(e){if(e.schema)return e.schema;let{typeDefs:t,resolvers:r}=e,n=Array.isArray(t)?t:[t];return(0,c.makeExecutableSchema)({typeDefs:n,resolvers:r})}static generateSchemaDerivedData(e,t){return(0,p.assertValidSchema)(e),{schema:e,documentStore:void 0===t?new u.InMemoryLRUCache:t,documentStoreKeyPrefix:t?`${(0,N.computeCoreSchemaHash)((0,p.printSchema)(e))}:`:""}}async stop(){switch(this.internals.state.phase){case"initialized":case"starting":case"failed to start":throw Error("apolloServer.stop() should only be called after `await apolloServer.start()` has succeeded");case"stopped":if(this.internals.state.stopError)throw this.internals.state.stopError;return;case"stopping":case"draining":{await this.internals.state.barrier;let e=this.internals.state;if("stopped"!==e.phase)throw Error(`Surprising post-stopping state ${e.phase}`);if(e.stopError)throw e.stopError;return}case"started":break;default:throw new O.UnreachableCaseError(this.internals.state)}let e=(0,d.default)(),{schemaManager:t,drainServers:r,landingPage:n,toDispose:i,toDisposeLast:s}=this.internals.state;this.internals.state={phase:"draining",barrier:e,schemaManager:t,landingPage:n};try{await r?.(),this.internals.state={phase:"stopping",barrier:e},await Promise.all([...i].map(e=>e())),await Promise.all([...s].map(e=>e()))}catch(t){throw this.internals.state={phase:"stopped",stopError:t},e.resolve(),t}this.internals.state={phase:"stopped",stopError:null}}async addDefaultPlugins(){let{plugins:t,apolloConfig:r,nodeEnv:n,hideSchemaDetailsFromClientErrors:i}=this.internals,s=e=>t.some(t=>(0,E.pluginIsInternal)(t)&&t.__internal_plugin_id__===e),a=new Map;for(let e of t)if((0,E.pluginIsInternal)(e)){let t=e.__internal_plugin_id__;a.has(t)||a.set(t,{sawDisabled:!1,sawNonDisabled:!1});let r=a.get(t);if(e.__is_disabled_plugin__?r.sawDisabled=!0:r.sawNonDisabled=!0,r.sawDisabled&&r.sawNonDisabled)throw Error(`You have tried to install both ApolloServerPlugin${t} and ApolloServerPlugin${t}Disabled in your server. Please choose whether or not you want to disable the feature and install the appropriate plugin for your use case.`)}if(!s("CacheControl")){let{ApolloServerPluginCacheControl:r}=await Promise.resolve().then(()=>o(e.r(43095)));t.push(r())}if(!s("UsageReporting")&&r.key)if(r.graphRef){let{ApolloServerPluginUsageReporting:r}=await Promise.resolve().then(()=>o(e.r(64971)));t.unshift(r({__onlyIfSchemaIsNotSubgraph:!0}))}else this.logger.warn("You have specified an Apollo key but have not specified a graph ref; usage reporting is disabled. To enable usage reporting, set the `APOLLO_GRAPH_REF` environment variable to `your-graph-id@your-graph-variant`. To disable this warning, install `ApolloServerPluginUsageReportingDisabled`.");{let n=s("SchemaReporting"),i="true"===process.env.APOLLO_SCHEMA_REPORTING;if(!n&&i)if(r.key){let{ApolloServerPluginSchemaReporting:r}=await Promise.resolve().then(()=>o(e.r(44161)));t.push(r())}else throw Error("You've enabled schema reporting by setting the APOLLO_SCHEMA_REPORTING environment variable to true, but you also need to provide your Apollo API key, via the APOLLO_KEY environment variable or via `new ApolloServer({apollo: {key})")}if(!s("InlineTrace")){let{ApolloServerPluginInlineTrace:r}=await Promise.resolve().then(()=>o(e.r(24196)));t.push(r({__onlyIfSchemaIsSubgraph:!0}))}if(!s("LandingPageDisabled")){let{ApolloServerPluginLandingPageLocalDefault:r,ApolloServerPluginLandingPageProductionDefault:i}=await Promise.resolve().then(()=>o(e.r(55700))),s="production"!==n?r():i();if(!L(s))throw Error("default landing page plugin should be implicitly installable?");s.__internal_installed_implicitly__=!0,t.push(s)}{let r=s("DisableSuggestions");if(i&&!r){let{ApolloServerPluginDisableSuggestions:r}=await Promise.resolve().then(()=>o(e.r(13240)));t.push(r())}}}addPlugin(e){if("initialized"!==this.internals.state.phase)throw Error("Can't add plugins after the server has started");this.internals.plugins.push(e)}async executeHTTPGraphQLRequest({httpGraphQLRequest:e,context:t}){try{let r,n;try{r=await this._ensureStarted()}catch(t){return await this.errorResponse(t,e)}if(r.landingPage&&this.prefersHTML(e)){let t;if("string"==typeof r.landingPage.html)t=r.landingPage.html;else try{t=await r.landingPage.html()}catch(r){let t=(0,g.ensureError)(r);return this.logger.error(`Landing page \`html\` function threw: ${t}`),await this.errorResponse(t,e)}return{headers:new I.HeaderMap([["content-type","text/html"]]),body:{kind:"complete",string:t}}}this.internals.csrfPreventionRequestHeaders&&(0,_.preventCsrf)(e.headers,this.internals.csrfPreventionRequestHeaders);try{n=await t()}catch(r){let t=(0,g.ensureError)(r);try{await Promise.all(this.internals.plugins.map(async e=>e.contextCreationDidFail?.({error:t})))}catch(e){this.logger.error(`contextCreationDidFail hook threw: ${e}`)}return await this.errorResponse((0,g.ensureGraphQLError)(t,"Context creation failed: "),e)}return await (0,T.runPotentiallyBatchedHttpQuery)(this,e,n,r.schemaManager.getSchemaDerivedData(),this.internals)}catch(t){if(t instanceof p.GraphQLError&&t.extensions.code===v.ApolloServerErrorCode.BAD_REQUEST)try{await Promise.all(this.internals.plugins.map(async e=>e.invalidRequestWasReceived?.({error:t})))}catch(e){this.logger.error(`invalidRequestWasReceived hook threw: ${e}`)}return await this.errorResponse(t,e)}}async errorResponse(e,t){let{formattedErrors:n,httpFromErrors:i}=(0,g.normalizeAndFormatErrors)([e],{includeStacktraceInErrorResponses:this.internals.includeStacktraceInErrorResponses,formatError:this.internals.formatError});return{status:i.status??500,headers:new I.HeaderMap([...i.headers,["content-type",D(t)??r.MEDIA_TYPES.APPLICATION_JSON]]),body:{kind:"complete",string:await this.internals.stringifyResult({errors:n})}}}prefersHTML(e){let t=e.headers.get("accept");return"GET"===e.method&&!!t&&new h.default({headers:{accept:t}}).mediaType([r.MEDIA_TYPES.APPLICATION_JSON,r.MEDIA_TYPES.APPLICATION_GRAPHQL_RESPONSE_JSON,r.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_2,r.MEDIA_TYPES.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_9,r.MEDIA_TYPES.MULTIPART_MIXED_NO_DEFER_SPEC,r.MEDIA_TYPES.TEXT_HTML])===r.MEDIA_TYPES.TEXT_HTML}async executeOperation(e,t={}){"initialized"===this.internals.state.phase&&await this.start();let r=(await this._ensureStarted()).schemaManager.getSchemaDerivedData(),n={...e,query:e.query&&"string"!=typeof e.query?(0,p.print)(e.query):e.query};return await x({server:this,graphQLRequest:n,internals:this.internals,schemaDerivedData:r,sharedResponseHTTPGraphQLHead:null},t)}}async function x({server:e,graphQLRequest:t,internals:r,schemaDerivedData:n,sharedResponseHTTPGraphQLHead:i},s){var o;let a={logger:e.logger,cache:e.cache,schema:n.schema,request:t,response:{http:i??(0,S.newHTTPGraphQLHead)()},contextValue:Object.assign(Object.create(Object.getPrototypeOf(o=s?.contextValue??{})),o),metrics:{},overallCachePolicy:(0,m.newCachePolicy)(),requestIsBatched:null!==i};try{return await (0,b.processGraphQLRequest)(n,e,r,a)}catch(n){let t=(0,g.ensureError)(n);throw await Promise.all(r.plugins.map(async e=>e.unexpectedErrorProcessingRequest?.({requestContext:a,error:t}))),e.logger.error(`Unexpected error processing request: ${t}`),Error("Internal server error")}}function L(e){return"__internal_installed_implicitly__"in e}function D(e){if(!e.headers.get("accept"))return r.MEDIA_TYPES.APPLICATION_JSON;{let t=new h.default({headers:{accept:e.headers.get("accept")}}).mediaType([r.MEDIA_TYPES.APPLICATION_JSON,r.MEDIA_TYPES.APPLICATION_GRAPHQL_RESPONSE_JSON,r.MEDIA_TYPES.APPLICATION_JSON_GRAPHQL_CALLBACK]);return t||null}}r.ApolloServer=R,r.MEDIA_TYPES={APPLICATION_JSON:"application/json; charset=utf-8",APPLICATION_JSON_GRAPHQL_CALLBACK:"application/json; callbackSpec=1.0; charset=utf-8",APPLICATION_GRAPHQL_RESPONSE_JSON:"application/graphql-response+json; charset=utf-8",MULTIPART_MIXED_NO_DEFER_SPEC:"multipart/mixed",MULTIPART_MIXED_EXPERIMENTAL_ALPHA_2:"multipart/mixed; deferSpec=20220824",MULTIPART_MIXED_EXPERIMENTAL_ALPHA_9:"multipart/mixed; incrementalSpec=v0.2",TEXT_HTML:"text/html"}},55395,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},8636,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.HeaderMap=r.ApolloServer=void 0;var s=e.r(42549);Object.defineProperty(r,"ApolloServer",{enumerable:!0,get:function(){return s.ApolloServer}});var o=e.r(15966);Object.defineProperty(r,"HeaderMap",{enumerable:!0,get:function(){return o.HeaderMap}}),i(e.r(55395),r)},40744,(e,t,r)=>{"use strict";var n=e.e&&e.e.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=e.e&&e.e.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o};Object.defineProperty(r,"__esModule",{value:!0}),r.getHeaders=void 0;var s=e.r(62363),o=e.r(8636);r.getHeaders=function(e){var t,r,a=new o.HeaderMap;if((0,s.isNextApiRequest)(e))try{for(var l=n(Object.entries(e.headers)),u=l.next();!u.done;u=l.next()){var c=i(u.value,2),d=c[0],p=c[1];"string"==typeof p&&a.set(d,p)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}else e.headers.forEach(function(e,t){a.set(t,e)});return a}},88947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},75531,(e,t,r)=>{"use strict";var n=e.e&&e.e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})},i=e.e&&e.e.__generator||function(e,t){var r,n,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){var u=[a,l];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,n=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){s=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){s.label=u[1];break}if(6===u[0]&&s.label<i[1]){s.label=i[1],i=u;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(u);break}i[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},s=e.e&&e.e.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=e.e&&e.e.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o};Object.defineProperty(r,"__esModule",{value:!0}),r.startServerAndCreateNextHandler=function(e,t){e.startInBackgroundHandlingStartupErrorsByLoggingAndFailingAllRequests();var r=(null==t?void 0:t.context)||p;return function(t,p){return n(this,void 0,void 0,function(){var f,h,m,y,g,v,T,E,_,b,S,I,O,N,w,A,P,R;return i(this,function(x){switch(x.label){case 0:return m=(h=e).executeHTTPGraphQLRequest,O={context:function(){return r(t,p)}},N={},[4,(0,a.getBody)(t)];case 1:return[4,m.apply(h,[(O.httpGraphQLRequest=(N.body=x.sent(),N.headers=(0,l.getHeaders)(t),N.method=t.method||"POST",N.search=t.url&&(0,d.parse)(t.url).search||"",N),O)])];case 2:if(f=x.sent(),(0,u.isNextApiRequest)(t)){if(!p)throw Error("API Routes require you to pass both the req and res object.");try{for(g=(y=s(f.headers)).next();!g.done;g=y.next())T=(v=o(g.value,2))[0],E=v[1],p.setHeader(T,E)}catch(e){w={error:e}}finally{try{g&&!g.done&&(A=y.return)&&A.call(y)}finally{if(w)throw w.error}}return p.statusCode=f.status||200,"complete"===f.body.kind?(p.send(f.body.string),p.end()):p.send(c.Readable.from(f.body.asyncIterator)),[2]}_={};try{for(S=(b=s(f.headers)).next();!S.done;S=b.next())T=(I=o(S.value,2))[0],E=I[1],_[T]=E}catch(e){P={error:e}}finally{try{S&&!S.done&&(R=b.return)&&R.call(b)}finally{if(P)throw P.error}}return[2,new Response("complete"===f.body.kind?f.body.string:new ReadableStream({pull:function(e){return n(this,void 0,void 0,function(){var t,r;return i(this,function(n){switch(n.label){case 0:if("chunked"!==f.body.kind)return[3,2];return[4,f.body.asyncIterator.next()];case 1:r=(t=n.sent()).value,t.done?e.close():e.enqueue(r),n.label=2;case 2:return[2]}})})}}),{headers:_,status:f.status||200})]}})})}};var a=e.r(74595),l=e.r(40744),u=e.r(62363),c=e.r(88947),d=e.r(92509),p=function(){return n(void 0,void 0,void 0,function(){return i(this,function(e){return[2,{}]})})}},58660,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e.r(75531),r)},94158,(e,t,r)=>{"use strict";var n=e.e&&e.e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})},i=e.e&&e.e.__generator||function(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){var u=[a,l];if(r)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}};Object.defineProperty(r,"__esModule",{value:!0}),r.PubSubAsyncIterableIterator=void 0,r.PubSubAsyncIterableIterator=function(){function e(e,t){this.pubsub=e,this.pullQueue=[],this.pushQueue=[],this.running=!0,this.allSubscribed=null,this.eventsArray="string"==typeof t?[t]:t}return e.prototype.next=function(){return n(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:if(this.allSubscribed)return[3,2];return[4,this.allSubscribed=this.subscribeAll()];case 1:e.sent(),e.label=2;case 2:return[2,this.pullValue()]}})})},e.prototype.return=function(){return n(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.emptyQueue()];case 1:return e.sent(),[2,{value:void 0,done:!0}]}})})},e.prototype.throw=function(e){return n(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.emptyQueue()];case 1:return t.sent(),[2,Promise.reject(e)]}})})},e.prototype[Symbol.asyncIterator]=function(){return this},e.prototype.pushValue=function(e){return n(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.allSubscribed];case 1:return t.sent(),0!==this.pullQueue.length?this.pullQueue.shift()(this.running?{value:e,done:!1}:{value:void 0,done:!0}):this.pushQueue.push(e),[2]}})})},e.prototype.pullValue=function(){var e=this;return new Promise(function(t){0!==e.pushQueue.length?t(e.running?{value:e.pushQueue.shift(),done:!1}:{value:void 0,done:!0}):e.pullQueue.push(t)})},e.prototype.emptyQueue=function(){return n(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:if(!this.running)return[3,2];return this.running=!1,this.pullQueue.forEach(function(e){return e({value:void 0,done:!0})}),this.pullQueue.length=0,this.pushQueue.length=0,[4,this.allSubscribed];case 1:(e=t.sent())&&this.unsubscribeAll(e),t.label=2;case 2:return[2]}})})},e.prototype.subscribeAll=function(){var e=this;return Promise.all(this.eventsArray.map(function(t){return e.pubsub.subscribe(t,e.pushValue.bind(e),{})}))},e.prototype.unsubscribeAll=function(e){for(var t=0;t<e.length;t++){var r=e[t];this.pubsub.unsubscribe(r)}},e}()},68326,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PubSubEngine=void 0;var n=e.r(94158);r.PubSubEngine=function(){function e(){}return e.prototype.asyncIterableIterator=function(e){return new n.PubSubAsyncIterableIterator(this,e)},e}()},40556,(e,t,r)=>{"use strict";var n,i=e.e&&e.e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.PubSub=void 0;var s=e.r(27699);r.PubSub=function(e){function t(t){void 0===t&&(t={});var r=e.call(this)||this;return r.ee=t.eventEmitter||new s.EventEmitter,r.subscriptions={},r.subIdCounter=0,r}return i(t,e),t.prototype.publish=function(e,t){return this.ee.emit(e,t),Promise.resolve()},t.prototype.subscribe=function(e,t){return this.ee.addListener(e,t),this.subIdCounter=this.subIdCounter+1,this.subscriptions[this.subIdCounter]=[e,t],Promise.resolve(this.subIdCounter)},t.prototype.unsubscribe=function(e){var t=this.subscriptions[e],r=t[0],n=t[1];delete this.subscriptions[e],this.ee.removeListener(r,n)},t}(e.r(68326).PubSubEngine)},62680,(e,t,r)=>{"use strict";var n=e.e&&e.e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})},i=e.e&&e.e.__generator||function(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){var u=[a,l];if(r)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}};Object.defineProperty(r,"__esModule",{value:!0}),r.withFilter=void 0,r.withFilter=function(e,t){var r=this;return function(s,o,a,l){return n(r,void 0,void 0,function(){var r,n;return i(this,function(i){switch(i.label){case 0:return[4,e(s,o,a,l)];case 1:return r=i.sent(),(n={next:function(){return new Promise(function(e,n){var i=function(){r.next().then(function(r){!0===r.done?e(r):Promise.resolve(t(r.value,o,a,l)).catch(function(){return!1}).then(function(t){!0===t?e(r):i()})}).catch(function(e){n(e)})};i()})},return:function(){return r.return()},throw:function(e){return r.throw(e)}})[Symbol.asyncIterator]=function(){return this},[2,n]}})})}}},16840,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.withFilter=r.PubSub=r.PubSubEngine=void 0;var n=e.r(68326);Object.defineProperty(r,"PubSubEngine",{enumerable:!0,get:function(){return n.PubSubEngine}});var i=e.r(40556);Object.defineProperty(r,"PubSub",{enumerable:!0,get:function(){return i.PubSub}});var s=e.r(62680);Object.defineProperty(r,"withFilter",{enumerable:!0,get:function(){return s.withFilter}})},39943,e=>{"use strict";let t;var r,n,i,s,o,a,l,u,c=e.i(47909),d=e.i(74017),p=e.i(96250),f=e.i(59756),h=e.i(61916),m=e.i(74677),y=e.i(69741),g=e.i(16795),v=e.i(87718),T=e.i(95169),E=e.i(47587),_=e.i(66012),b=e.i(70101),S=e.i(26937),I=e.i(10372),O=e.i(93695);e.i(52474);var N=e.i(220),w=e.i(22816),A=e.i(64997),P=e.i(28153),R=e.i(94744);let x=e=>Array.isArray(e)?e:e?[e]:[];function L(e){let t;return"alias"in e&&(t=e.alias?.value),null==t&&"name"in e&&(t=e.name?.value),null==t&&(t=e.kind),t}function D(e,t,r){let n=L(e),i=L(t);return"function"==typeof r?r(n,i):String(n)<String(i)?-1:+(String(n)>String(i))}function M(e){return null!=e}function k(e,t=!1,r=!1,n=!1){let i,s,o;if(0===e.length)return;if(1===e.length)return e[0];let a=!0,l=e.every(e=>{if(Array.isArray(e)){if(void 0===i)return i=e.length,!0;else if(i===e.length)return!0}else a=!1;return!1});if(n&&l)return Array(i).fill(null).map((i,s)=>k(e.map(e=>e[s]),t,r,n));if(a)return e.flat(1);for(let i of(t&&(o=e.find(e=>C(e)))&&(null==s&&(s={}),Object.setPrototypeOf(s,Object.create(Object.getPrototypeOf(o)))),e))if(null!=i)if(C(i)){if(o){let e=Object.getPrototypeOf(s),t=Object.getPrototypeOf(i);if(t)for(let r of Object.getOwnPropertyNames(t)){let n=Object.getOwnPropertyDescriptor(t,r);M(n)&&Object.defineProperty(e,r,n)}}for(let e in i)null==s&&(s={}),e in s?s[e]=k([s[e],i[e]],t,r,n):s[e]=i[e]}else s=Array.isArray(i)&&Array.isArray(s)?k([s,i],t,r,n):i;return s}function C(e){return e&&"object"==typeof e&&!Array.isArray(e)}function F(e,t){if(e&&t&&t!==e.extensions){if(!e.extensions){e.extensions=t;return}e.extensions=k([e.extensions,t],!1,!0)}}var j=e.i(12283),U=e.i(95702),K=e.i(51112),q=e.i(98453),B=e.i(54509),Q=e.i(94541),G=e.i(64255);function $(e){return H(e,[])}function H(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return function(e,t){var r,n;let i;if(null===e)return"null";if(e instanceof Error)return"AggregateError"===e.name?V(e)+"\n"+z(e.errors,t):V(e);if(t.includes(e))return"[Circular]";let s=[...t,e];if("function"==typeof e.toJSON){let t=e.toJSON();if(t!==e)return"string"==typeof t?t:H(t,s)}else if(Array.isArray(e))return z(e,s);return r=e,n=s,0===(i=Object.entries(r)).length?"{}":n.length>3?"["+function(e){let t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){let t=e.constructor.name;if("string"==typeof t&&""!==t)return t}return t}(r)+"]":"{ "+i.map(([e,t])=>e+": "+H(t,n)).join(", ")+" }"}(e,t);default:return String(e)}}function V(e){return e.name="GraphQLError",e.toString()}function z(e,t){if(0===e.length)return"[]";if(t.length>3)return"[Array]";let r=e.length,n=[];for(let i=0;i<r;++i)n.push(H(e[i],t));return"["+n.join(", ")+"]"}function Y(e){if((0,B.isNonNullType)(e)){let t=Y(e.ofType);if(t.kind===U.Kind.NON_NULL_TYPE)throw Error(`Invalid type node ${$(e)}. Inner type of non-null type cannot be a non-null type.`);return{kind:U.Kind.NON_NULL_TYPE,type:t}}return(0,B.isListType)(e)?{kind:U.Kind.LIST_TYPE,type:Y(e.ofType)}:{kind:U.Kind.NAMED_TYPE,name:{kind:U.Kind.NAME,value:e.name}}}function W(e){if(null===e)return{kind:U.Kind.NULL};if(void 0===e)return null;if(Array.isArray(e)){let t=[];for(let r of e){let e=W(r);null!=e&&t.push(e)}return{kind:U.Kind.LIST,values:t}}if("object"==typeof e){if(e?.toJSON)return W(e.toJSON());let t=[];for(let r in e){let n=W(e[r]);n&&t.push({kind:U.Kind.OBJECT_FIELD,name:{kind:U.Kind.NAME,value:r},value:n})}return{kind:U.Kind.OBJECT,fields:t}}if("boolean"==typeof e)return{kind:U.Kind.BOOLEAN,value:e};if("bigint"==typeof e)return{kind:U.Kind.INT,value:String(e)};if("number"==typeof e&&isFinite(e)){let t=String(e);return J.test(t)?{kind:U.Kind.INT,value:t}:{kind:U.Kind.FLOAT,value:t}}if("string"==typeof e)return{kind:U.Kind.STRING,value:e};throw TypeError(`Cannot convert value to AST: ${e}.`)}let J=/^-?(?:0|[1-9][0-9]*)$/;function X(e,t){if((0,B.isNonNullType)(t)){let r=X(e,t.ofType);return r?.kind===U.Kind.NULL?null:r}if(null===e)return{kind:U.Kind.NULL};if(void 0===e)return null;if((0,B.isListType)(t)){let r=t.ofType;if(null!=e&&"object"==typeof e&&Symbol.iterator in e){let t=[];for(let n of e){let e=X(n,r);null!=e&&t.push(e)}return{kind:U.Kind.LIST,values:t}}return X(e,r)}if((0,B.isInputObjectType)(t)){if("object"!=typeof e||null===e)return null;let r=[];for(let n of Object.values(t.getFields())){let t=X(e[n.name],n.type);t&&r.push({kind:U.Kind.OBJECT_FIELD,name:{kind:U.Kind.NAME,value:n.name},value:t})}return{kind:U.Kind.OBJECT,fields:r}}if((0,B.isLeafType)(t)){let r=t.serialize(e);return null==r?null:(0,B.isEnumType)(t)?{kind:U.Kind.ENUM,value:r}:"ID"===t.name&&"string"==typeof r&&Z.test(r)?{kind:U.Kind.INT,value:r}:W(r)}console.assert(!1,"Unexpected input type: "+$(t))}Symbol.for("@whatwg-node/promise-helpers/FakePromise");let Z=/^-?(?:0|[1-9][0-9]*)$/;function ee(e){return e.astNode?.description?{...e.astNode.description,block:!0}:e.description?{kind:U.Kind.STRING,value:e.description,block:!0}:void 0}var et=e.i(11231),er=e.i(61412),en=e.i(12851),ei=e.i(81088),es=e.i(64885);let eo=["message","locations","path","nodes","source","positions","originalError","name","stack","extensions","coordinate"];function ea(e,t){var r;t?.originalError&&!(t.originalError instanceof Error)&&null!=(r=t.originalError)&&"object"==typeof r&&Object.keys(r).every(e=>eo.includes(e))&&(t.originalError=ea(t.originalError.message,t.originalError));let n=ei.GraphQLError,i=es.versionInfo.major>=16?new n(e,t):new n(e,t?.nodes,t?.source,t?.positions,t?.path,t?.originalError,t?.extensions);return t?.coordinate&&null==i.coordinate&&Object.defineProperties(i,{coordinate:{value:t.coordinate,enumerable:!0,configurable:!0}}),i}function el(e){let t=new WeakMap;return function(r){let n=t.get(r);if(void 0===n){let n=e(r);return t.set(r,n),n}return n}}function eu(e,t=["directives"]){return Object.entries(function(e,t,r=["directives"]){let n={};if(e.extensions){let t=e.extensions;for(let e of r)t=t?.[e];if(null!=t)for(let e in t){let r=t[e];if(Array.isArray(r))for(let t of r){let r=n[e];r||(r=[],n[e]=r),r.push(t)}else{let t=n[e];t||(t=[],n[e]=t),t.push(r)}}}let i=el(e=>JSON.stringify(e)),s=[];for(let r of(e.astNode&&s.push(e.astNode),e.extensionASTNodes&&s.push(...e.extensionASTNodes),s))if(r.directives?.length)for(let e of r.directives){let r=e.name.value,o=n[r];o||(o=[],n[r]=o);let a=t?.getDirective(r),l={};if(a&&(l=function(e,t,r={}){let n={},i=(t.arguments??[]).reduce((e,t)=>({...e,[t.name.value]:t}),{});for(let{name:s,type:o,defaultValue:a}of e.args){let e=i[s];if(!e){if(void 0!==a)n[s]=a;else if((0,B.isNonNullType)(o))throw ea(`Argument "${s}" of required type "${$(o)}" was not provided.`,{nodes:[t]});continue}let l=e.value,u=l.kind===U.Kind.NULL;if(l.kind===U.Kind.VARIABLE){let e=l.name.value;if(null==r||!Object.prototype.hasOwnProperty.call(r,e)){if(void 0!==a)n[s]=a;else if((0,B.isNonNullType)(o))throw ea(`Argument "${s}" of required type "${$(o)}" was provided the variable "$${e}" which was not provided a runtime value.`,{nodes:[l]});continue}u=null==r[e]}if(u&&(0,B.isNonNullType)(o))throw ea(`Argument "${s}" of non-null type "${$(o)}" must not be null.`,{nodes:[l]});let c=(0,et.valueFromAST)(l,o,r);if(void 0===c)throw ea(`Argument "${s}" has invalid value ${(0,en.print)(l)}.`,{nodes:[l]});n[s]=c}return n}(a,e)),e.arguments)for(let t of e.arguments){let e=t.name.value;if(null==l[e]){let r=a?.args.find(t=>t.name===e);r&&(l[e]=(0,et.valueFromAST)(t.value,r.type))}null==l[e]&&(l[e]=(0,er.valueFromASTUntyped)(t.value))}if(s.length>0&&o.length>0){let e=i(l);if(o.some(t=>i(t)===e))continue}o.push(l)}return n}(e,void 0,t)).map(([e,t])=>t?.map(t=>({name:e,args:t}))).flat(1/0).filter(Boolean)}el(function(e){return new Set([...ec(e)].map(e=>e.name))});let ec=el(function(e){return new Set(ed(e).values())}),ed=el(function(e){let t=new Map,r=e.getQueryType();r&&t.set("query",r);let n=e.getMutationType();n&&t.set("mutation",n);let i=e.getSubscriptionType();return i&&t.set("subscription",i),t});function ep(e,t,r){let n,i=[],s=eu(e,r);null!=s&&(n=ey(t,s));let o=null,a=null,l=null;(null!=n&&(i=n.filter(e=>q.specifiedDirectives.every(t=>t.name!==e.name.value)),o=n.find(e=>"deprecated"===e.name.value),a=n.find(e=>"specifiedBy"===e.name.value),l=n.find(e=>"oneOf"===e.name.value)),null!=e.deprecationReason&&null==o&&(o=em("deprecated",{reason:e.deprecationReason},q.GraphQLDeprecatedDirective)),null!=e.specifiedByUrl||null!=e.specifiedByURL&&null==a)&&(a=em("specifiedBy",{url:e.specifiedByUrl||e.specifiedByURL}));return e.isOneOf&&null==l&&(l=em("oneOf")),null!=o&&i.push(o),null!=a&&i.push(a),null!=l&&i.push(l),i}function ef(e,t,r){return{kind:U.Kind.INPUT_VALUE_DEFINITION,description:ee(e),name:{kind:U.Kind.NAME,value:e.name},type:Y(e.type),defaultValue:void 0!==e.defaultValue?X(e.defaultValue,e.type)??void 0:void 0,directives:ep(e,t,r)}}function eh(e,t,r){return{kind:U.Kind.FIELD_DEFINITION,description:ee(e),name:{kind:U.Kind.NAME,value:e.name},arguments:e.args.map(e=>ef(e,t,r)),type:Y(e.type),directives:ep(e,t,r)}}function em(e,t,r){let n=[];for(let e in t){let i,s=t[e];if(null!=r){let t=r.args.find(t=>t.name===e);t&&(i=X(s,t.type))}null==i&&(i=W(s)),null!=i&&n.push({kind:U.Kind.ARGUMENT,name:{kind:U.Kind.NAME,value:e},value:i})}return{kind:U.Kind.DIRECTIVE,name:{kind:U.Kind.NAME,value:e},arguments:n}}function ey(e,t){let r=[];for(let{name:n,args:i}of t){let t=e?.getDirective(n);r.push(em(n,i,t))}return r}var eg=e.i(50177),ev=e.i(21281);let eT={};function eE(e,t,r,n){let i=function(e){let t=function(e){let t=e.loc;if(!t)return;let r=[],n=t.startToken.prev;for(;null!=n&&n.kind===eg.TokenKind.COMMENT&&null!=n.next&&null!=n.prev&&n.line+1===n.next.line&&n.line!==n.prev.line;){let e=String(n.value);r.push(e),n=n.prev}return r.length>0?r.reverse().join("\n"):void 0}(e);if(void 0!==t)return function(e){let t=e.split(/\r\n|[\n\r]/g),r=function(e){let t=null;for(let r=1;r<e.length;r++){let n=e[r],i=eP(n);if(i!==n.length&&(null===t||i<t)&&0===(t=i))break}return null===t?0:t}(t);if(0!==r)for(let e=1;e<t.length;e++)t[e]=t[e].slice(r);for(;t.length>0&&eR(t[0]);)t.shift();for(;t.length>0&&eR(t[t.length-1]);)t.pop();return t.join("\n")}(`
${t}`)}(e);if("string"!=typeof i||0===i.length)return;let s=[t];r&&(s.push(r),n&&s.push(n));let o=s.join(".");eT[o]||(eT[o]=[]),eT[o].push(i)}function e_(e){return"\n# "+e.replace(/\n/g,"\n# ")}function eb(e,t){return e?e.filter(e=>e).join(t||""):""}function eS(e){return e?.some(e=>e.includes("\n"))??!1}function eI(e){return e&&`  ${e.replace(/\n/g,"\n  ")}`}function eO(e){return e&&0!==e.length?`{
${eI(eb(e,"\n"))}
}`:""}function eN(e,t,r){return t?e+t+(r||""):""}let ew={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>eb(e.definitions,"\n\n")},OperationDefinition:{leave:e=>{let t=eN("(",eb(e.variableDefinitions,", "),")");return eb([e.operation,eb([e.name,t]),eb(e.directives," ")]," ")+" "+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:r,directives:n})=>e+": "+t+eN(" = ",r)+eN(" ",eb(n," "))},SelectionSet:{leave:({selections:e})=>eO(e)},Field:{leave({alias:e,name:t,arguments:r,directives:n,selectionSet:i}){let s=eN("",e,": ")+t,o=s+eN("(",eb(r,", "),")");return o.length>80&&(o=s+eN("(\n",eI(eb(r,"\n")),"\n)")),eb([o,eb(n," "),i]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+eN(" ",eb(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:r})=>eb(["...",eN("on ",e),eb(t," "),r]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:r,directives:n,selectionSet:i})=>`fragment ${e}${eN("(",eb(r,", "),")")} on ${t} ${eN("",eb(n," ")," ")}`+i},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?function(e,t=!1){let r=e.replace(/\\/g,"\\\\").replace(/"""/g,'\\"""');return(" "===e[0]||"	"===e[0])&&-1===e.indexOf("\n")?`"""${r.replace(/"$/,'"\n')}"""`:`"""
${t?r:eI(r)}
"""`}(e):JSON.stringify(e)},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+eb(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+eb(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+eN("(",eb(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({directives:e,operationTypes:t})=>eb(["schema",eb(e," "),eO(t)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({name:e,directives:t})=>eb(["scalar",e,eb(t," ")]," ")},ObjectTypeDefinition:{leave:({name:e,interfaces:t,directives:r,fields:n})=>eb(["type",e,eN("implements ",eb(t," & ")),eb(r," "),eO(n)]," ")},FieldDefinition:{leave:({name:e,arguments:t,type:r,directives:n})=>e+(eS(t)?eN("(\n",eI(eb(t,"\n")),"\n)"):eN("(",eb(t,", "),")"))+": "+r+eN(" ",eb(n," "))},InputValueDefinition:{leave:({name:e,type:t,defaultValue:r,directives:n})=>eb([e+": "+t,eN("= ",r),eb(n," ")]," ")},InterfaceTypeDefinition:{leave:({name:e,interfaces:t,directives:r,fields:n})=>eb(["interface",e,eN("implements ",eb(t," & ")),eb(r," "),eO(n)]," ")},UnionTypeDefinition:{leave:({name:e,directives:t,types:r})=>eb(["union",e,eb(t," "),eN("= ",eb(r," | "))]," ")},EnumTypeDefinition:{leave:({name:e,directives:t,values:r})=>eb(["enum",e,eb(t," "),eO(r)]," ")},EnumValueDefinition:{leave:({name:e,directives:t})=>eb([e,eb(t," ")]," ")},InputObjectTypeDefinition:{leave:({name:e,directives:t,fields:r})=>eb(["input",e,eb(t," "),eO(r)]," ")},DirectiveDefinition:{leave:({name:e,arguments:t,repeatable:r,locations:n})=>"directive @"+e+(eS(t)?eN("(\n",eI(eb(t,"\n")),"\n)"):eN("(",eb(t,", "),")"))+(r?" repeatable":"")+" on "+eb(n," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>eb(["extend schema",eb(e," "),eO(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>eb(["extend scalar",e,eb(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:r,fields:n})=>eb(["extend type",e,eN("implements ",eb(t," & ")),eb(r," "),eO(n)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:r,fields:n})=>eb(["extend interface",e,eN("implements ",eb(t," & ")),eb(r," "),eO(n)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:r})=>eb(["extend union",e,eb(t," "),eN("= ",eb(r," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:r})=>eb(["extend enum",e,eb(t," "),eO(r)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:r})=>eb(["extend input",e,eb(t," "),eO(r)]," ")}},eA=Object.keys(ew).reduce((e,t)=>{var r;return{...e,[t]:{leave:(r=ew[t].leave,(e,t,n,i,s)=>{let o=[],a=i.reduce((e,t)=>(["fields","arguments","values"].includes(t)&&e.name&&o.push(e.name.value),e[t]),s[0]),l=[...o,a?.name?.value].filter(Boolean).join("."),u=[];return e.kind.includes("Definition")&&eT[l]&&u.push(...eT[l]),eb([...u.map(e_),e.description,r(e,t,n,i,s)],"\n")})}}},{});function eP(e){let t=0;for(;t<e.length&&(" "===e[t]||"	"===e[t]);)t++;return t}function eR(e){return eP(e)===e.length}function ex(e){return e.as??e.url.name}function eL(e,t){var r,n;if(e.url.name&&t===`@${e.url.name}`){let t;return((t=ex(e))&&`@${t}`).substring(1)}let i=e.imports.find(e=>e.name===t),s=i?.as??i?.name??(r=ex(e),n=t,r?.length?n.startsWith("@")?`@${r}__${n.substring(1)}`:`${r}__${n}`:n);return s.startsWith("@")?s.substring(1):s}let eD=/v(\d{1,3})\.(\d{1,4})/i;function eM(e){let t=new URL(e),r=t.pathname.split("/").filter(Boolean),n=r[r.length-1];if(n){if(eD.test(n)){let e=r[r.length-2];return{identity:t.origin+(e?`/${r.slice(0,r.length-1).join("/")}`:""),name:e??null,version:n}}return{identity:`${t.origin}/${r.join("/")}`,name:n,version:null}}return{identity:t.origin,name:null,version:null}}function ek(e,t){return t.some(({value:t})=>t===e.value)}let eC=(e,t)=>{if(e.kind===t.kind)switch(e.kind){case U.Kind.LIST:return e.values.length===t.values.length&&e.values.every(e=>t.values.find(t=>eC(e,t)));case U.Kind.VARIABLE:case U.Kind.NULL:return!0;case U.Kind.OBJECT:return e.fields.length===t.fields.length&&e.fields.every(e=>t.fields.find(t=>e.name.value===t.name.value&&eC(e.value,t.value)));default:return e.value===t.value}return!1},eF=e=>"link"===e.name.value,ej=e=>{let t=eF(e)?e.arguments?.find(e=>"url"===e.name.value)?.value:void 0;return t?.kind==="StringValue"?t.value:void 0},eU=(e,t)=>!!(e.name.value===t.name.value&&(e.arguments===t.arguments||e.arguments?.length===t.arguments?.length&&e.arguments?.every(e=>t.arguments?.find(t=>e.name.value===t.name.value&&e.value.kind===t.value.kind&&eC(e.value,t.value)))));function eK(e=[],t=[],r,n){let i=r&&r.reverseDirectives,s=[];for(let a of[...i?e:t,...i?t:e]){var o;if(o=r?.repeatableLinkImports,n?.[a.name.value]?.repeatable??o?.has(a.name.value))s.find(e=>eU(a,e))||s.push(a);else{let e=s.findIndex(e=>e.name.value===a.name.value);if(-1===e)s.push(a);else{if(eF(a)&&eF(s[e])){let t=ej(a),r=ej(s[e]);if(t&&r&&t!==r){s.push(a);continue}}let t=function(e,t){let r=[];for(let n of[...t,...e]){let e=r.findIndex(e=>e.name.value===n.name.value);if(-1===e)r.push(n);else{let t=r[e];if("ListValue"===t.value.kind){let e=t.value.values,r=n.value.values;t.value={...t.value,values:eq(e,r,(e,t)=>{let r=e.value;return!r||!t.some(e=>e.value===r)})}}else t.value=n.value}}return r}(a.arguments??[],s[e].arguments??[]);s[e]={...s[e],arguments:0===t.length?void 0:t}}}}return s}function eq(e,t,r){return e.concat(t.filter(t=>r(t,e)))}var eB=e.i(39588);function eQ(e){let t=e;for(;t.kind===U.Kind.LIST_TYPE||"NonNullType"===t.kind;)t=t.type;return t}function eG(e){return e.kind!==U.Kind.NAMED_TYPE}function e$(e){return e.kind===U.Kind.LIST_TYPE}function eH(e){return e.kind===U.Kind.NON_NULL_TYPE}function eV(e){return e$(e)?`[${eV(e.type)}]`:eH(e)?`${eV(e.type)}!`:e.name.value}function ez(e,t){return null==e&&null==t?o.A_EQUALS_B:null==e?o.A_SMALLER_THAN_B:null==t?o.A_GREATER_THAN_B:e<t?o.A_SMALLER_THAN_B:e>t?o.A_GREATER_THAN_B:o.A_EQUALS_B}function eY(e,t,r,n,i){let s=[];if(null!=r&&s.push(...r),null!=t)for(let r of t){let[t,o]=function(e,t){let r=e.findIndex(e=>e.name.value===t.name.value);return[r>-1?e[r]:null,r]}(s,r);if(t&&!n?.ignoreFieldConflicts){let a=n?.onFieldTypeConflict&&n.onFieldTypeConflict(t,r,e,n?.throwOnConflict)||function(e,t,r,n=!1){let i=eV(t.type),s=eV(r.type);if(i!==s){let o=eQ(t.type),a=eQ(r.type);if(o.name.value!==a.name.value)throw Error(`Field "${r.name.value}" already defined with a different type. Declared as "${o.name.value}", but you tried to override with "${a.name.value}"`);if(!function e(t,r,n=!1){return eG(t)||eG(r)?eH(r)?e(eH(t)?t.type:t,r.type):eH(t)?e(r,t,n):!!e$(t)&&(e$(r)&&e(t.type,r.type)||eH(r)&&e(t,r.type)):t.toString()===r.toString()}(t.type,r.type,!n))throw Error(`Field '${e.name.value}.${t.name.value}' changed type from '${i}' to '${s}'`)}return eH(r.type)&&!eH(t.type)&&(t.type=r.type),t}(e,t,r,n?.throwOnConflict);a.arguments=function(e,t,r){let n=function(e,t){return e.reduce((e,r)=>{let n=e.findIndex(e=>e.name.value===r.name.value);return -1===n?e.concat([r]):(t?.reverseArguments||(e[n]=r),e)},[])}([...t,...e].filter(M),r);return r&&r.sort&&n.sort(D),n}(r.arguments||[],t.arguments||[],n),a.directives=eK(r.directives,t.directives,n,i),a.description=r.description||t.description,s[o]=a}else s.push(r)}if(n&&n.sort&&s.sort(D),n&&n.exclusions){let t=n.exclusions;return s.filter(r=>!t.includes(`${e.name.value}.${r.name.value}`))}return s}function eW(e=[],t=[],r={}){let n=[...t,...e.filter(e=>!t.find(t=>t.name.value===e.name.value))];return r&&r.sort&&n.sort(D),n}(r=o||(o={}))[r.A_SMALLER_THAN_B=-1]="A_SMALLER_THAN_B",r[r.A_EQUALS_B=0]="A_EQUALS_B",r[r.A_GREATER_THAN_B=1]="A_GREATER_THAN_B";let eJ={query:"Query",mutation:"Mutation",subscription:"Subscription"},eX="SCHEMA_DEF_SYMBOL";function eZ(e,t,r={}){var n,i,s,o,a;for(let l of e)if("name"in l){let e=l.name?.value;if(t?.commentDescriptions&&function(e){let t=e.name?.value;if(null!=t)switch(eE(e,t),e.kind){case"EnumTypeDefinition":if(e.values)for(let r of e.values)eE(r,t,r.name.value);break;case"ObjectTypeDefinition":case"InputObjectTypeDefinition":case"InterfaceTypeDefinition":if(e.fields){for(let r of e.fields)if(eE(r,t,r.name.value),"FieldDefinition"===r.kind&&r.arguments)for(let e of r.arguments)eE(e,t,r.name.value,e.name.value)}}}(l),null==e)continue;if(t?.exclusions?.includes(e+".*")||t?.exclusions?.includes(e))delete r[e];else switch(l.kind){case U.Kind.OBJECT_TYPE_DEFINITION:case U.Kind.OBJECT_TYPE_EXTENSION:r[e]=function(e,t,r,n){if(t)try{return{name:e.name,description:e.description||t.description,kind:r?.convertExtensions||"ObjectTypeDefinition"===e.kind||"ObjectTypeDefinition"===t.kind?"ObjectTypeDefinition":"ObjectTypeExtension",loc:e.loc,fields:eY(e,e.fields,t.fields,r,n),directives:eK(e.directives,t.directives,r,n),interfaces:eW(e.interfaces,t.interfaces,r)}}catch(t){throw Error(`Unable to merge GraphQL type "${e.name.value}": ${t.message}`)}return r?.convertExtensions?{...e,kind:U.Kind.OBJECT_TYPE_DEFINITION}:e}(l,r[e],t,r);break;case U.Kind.ENUM_TYPE_DEFINITION:case U.Kind.ENUM_TYPE_EXTENSION:r[e]=(n=r[e],n?{name:l.name,description:l.description||n.description,kind:t?.convertExtensions||"EnumTypeDefinition"===l.kind||"EnumTypeDefinition"===n.kind?"EnumTypeDefinition":"EnumTypeExtension",loc:l.loc,directives:eK(l.directives,n.directives,t,r),values:function(e,t,r,n){if(r?.consistentEnumMerge){let r=[];e&&r.push(...e),e=t,t=r}let i=new Map;if(e)for(let t of e)i.set(t.name.value,t);if(t)for(let e of t){let t=e.name.value;if(i.has(t)){let r=i.get(t);r.description=e.description||r.description,r.directives=eK(e.directives,r.directives,void 0)}else i.set(t,e)}let s=[...i.values()];return r&&r.sort&&s.sort(D),s}(l.values,n.values,t)}:t?.convertExtensions?{...l,kind:U.Kind.ENUM_TYPE_DEFINITION}:l);break;case U.Kind.UNION_TYPE_DEFINITION:case U.Kind.UNION_TYPE_EXTENSION:r[e]=(i=r[e],i?{name:l.name,description:l.description||i.description,directives:eK(l.directives,i.directives,t,r),kind:t?.convertExtensions||"UnionTypeDefinition"===l.kind||"UnionTypeDefinition"===i.kind?U.Kind.UNION_TYPE_DEFINITION:U.Kind.UNION_TYPE_EXTENSION,loc:l.loc,types:eW(l.types,i.types,t)}:t?.convertExtensions?{...l,kind:U.Kind.UNION_TYPE_DEFINITION}:l);break;case U.Kind.SCALAR_TYPE_DEFINITION:case U.Kind.SCALAR_TYPE_EXTENSION:r[e]=(s=r[e],s?{name:l.name,description:l.description||s.description,kind:t?.convertExtensions||"ScalarTypeDefinition"===l.kind||"ScalarTypeDefinition"===s.kind?"ScalarTypeDefinition":"ScalarTypeExtension",loc:l.loc,directives:eK(l.directives,s.directives,t,r)}:t?.convertExtensions?{...l,kind:U.Kind.SCALAR_TYPE_DEFINITION}:l);break;case U.Kind.INPUT_OBJECT_TYPE_DEFINITION:case U.Kind.INPUT_OBJECT_TYPE_EXTENSION:r[e]=function(e,t,r,n){if(t)try{return{name:e.name,description:e.description||t.description,kind:r?.convertExtensions||"InputObjectTypeDefinition"===e.kind||"InputObjectTypeDefinition"===t.kind?"InputObjectTypeDefinition":"InputObjectTypeExtension",loc:e.loc,fields:eY(e,e.fields,t.fields,r),directives:eK(e.directives,t.directives,r,n)}}catch(t){throw Error(`Unable to merge GraphQL input type "${e.name.value}": ${t.message}`)}return r?.convertExtensions?{...e,kind:U.Kind.INPUT_OBJECT_TYPE_DEFINITION}:e}(l,r[e],t,r);break;case U.Kind.INTERFACE_TYPE_DEFINITION:case U.Kind.INTERFACE_TYPE_EXTENSION:r[e]=function(e,t,r,n){if(t)try{return{name:e.name,description:e.description||t.description,kind:r?.convertExtensions||"InterfaceTypeDefinition"===e.kind||"InterfaceTypeDefinition"===t.kind?"InterfaceTypeDefinition":"InterfaceTypeExtension",loc:e.loc,fields:eY(e,e.fields,t.fields,r,n),directives:eK(e.directives,t.directives,r,n),interfaces:e.interfaces?eW(e.interfaces,t.interfaces,r):void 0}}catch(t){throw Error(`Unable to merge GraphQL interface "${e.name.value}": ${t.message}`)}return r?.convertExtensions?{...e,kind:U.Kind.INTERFACE_TYPE_DEFINITION}:e}(l,r[e],t,r);break;case U.Kind.DIRECTIVE_DEFINITION:r[e]&&e in{}&&!(null!=(o=r[e])&&"object"==typeof o&&"kind"in o&&"string"==typeof o.kind)&&(r[e]=void 0),r[e]=function(e,t){return t?{...e,arguments:eq(t.arguments||[],e.arguments||[],(e,t)=>!ek(e.name,t.map(e=>e.name))),locations:[...t.locations,...e.locations.filter(e=>!ek(e,t.locations))]}:e}(l,r[e])}}else{(l.kind===U.Kind.SCHEMA_DEFINITION||l.kind===U.Kind.SCHEMA_EXTENSION)&&(r[eX]=(a=r[eX],a?{kind:l.kind===U.Kind.SCHEMA_DEFINITION||a.kind===U.Kind.SCHEMA_DEFINITION?U.Kind.SCHEMA_DEFINITION:U.Kind.SCHEMA_EXTENSION,description:l.description||a.description,directives:eK(l.directives,a.directives,t,void 0),operationTypes:function(e=[],t=[]){let r=[];for(let n in eJ){let i=e.find(e=>e.operation===n)||t.find(e=>e.operation===n);i&&r.push(i)}return r}(l.operationTypes,a.operationTypes)}:t?.convertExtensions?{...l,kind:U.Kind.SCHEMA_DEFINITION}:l))}return r}function e0(e,t){let r;eT={};let n={kind:U.Kind.DOCUMENT,definitions:function(e,t){eT={};let{allDirectives:r,allNodes:n,repeatableLinkImports:i}=function e(t,r,n=[],i=[],s=new Set,o=new Set){let a=e=>{o.add(e)};if(t&&!s.has(t))if(s.add(t),"function"==typeof t)e(t(),r,n,i,s,o);else if(Array.isArray(t))for(let a of t)e(a,r,n,i,s,o);else if((0,R.isSchema)(t))e(function(e,t={}){let r=t.pathToDirectivesInExtensions,n=e.getTypeMap(),i=function(e,t){let r=new Map([["query",void 0],["mutation",void 0],["subscription",void 0]]),n=[];if(null!=e.astNode&&n.push(e.astNode),null!=e.extensionASTNodes)for(let t of e.extensionASTNodes)n.push(t);for(let e of n)if(e.operationTypes)for(let t of e.operationTypes)r.set(t.operation,t);let i=ed(e);for(let[e,t]of r){let n=i.get(e);if(null!=n){let i=Y(n);null!=t?t.type=i:r.set(e,{kind:U.Kind.OPERATION_TYPE_DEFINITION,operation:e,type:i})}}let s=[...r.values()].filter(M),o=ep(e,e,t);if(!s.length&&!o.length)return null;let a={kind:null!=s?U.Kind.SCHEMA_DEFINITION:U.Kind.SCHEMA_EXTENSION,operationTypes:s,directives:o},l=ee(e);return l&&(a.description=l),a}(e,r),s=null!=i?[i]:[];for(let t of e.getDirectives())(0,q.isSpecifiedDirective)(t)||s.push(function(e,t,r){return{kind:U.Kind.DIRECTIVE_DEFINITION,description:ee(e),name:{kind:U.Kind.NAME,value:e.name},arguments:e.args?.map(e=>ef(e,t,r)),repeatable:e.isRepeatable,locations:e.locations?.map(e=>({kind:U.Kind.NAME,value:e}))||[]}}(t,e,r));for(let t in n){let i=n[t],u=(0,G.isSpecifiedScalarType)(i),c=(0,Q.isIntrospectionType)(i);if(!u&&!c)if((0,B.isObjectType)(i))s.push(function(e,t,r){return{kind:U.Kind.OBJECT_TYPE_DEFINITION,description:ee(e),name:{kind:U.Kind.NAME,value:e.name},fields:Object.values(e.getFields()).map(e=>eh(e,t,r)),interfaces:Object.values(e.getInterfaces()).map(e=>Y(e)),directives:ep(e,t,r)}}(i,e,r));else if((0,B.isInterfaceType)(i))s.push(function(e,t,r){let n={kind:U.Kind.INTERFACE_TYPE_DEFINITION,description:ee(e),name:{kind:U.Kind.NAME,value:e.name},fields:Object.values(e.getFields()).map(e=>eh(e,t,r)),directives:ep(e,t,r)};return"getInterfaces"in e&&(n.interfaces=Object.values(e.getInterfaces()).map(e=>Y(e))),n}(i,e,r));else if((0,B.isUnionType)(i)){var o,a,l;s.push((o=i,a=e,l=r,{kind:U.Kind.UNION_TYPE_DEFINITION,description:ee(o),name:{kind:U.Kind.NAME,value:o.name},directives:ep(o,a,l),types:o.getTypes().map(e=>Y(e))}))}else if((0,B.isInputObjectType)(i))s.push(function(e,t,r){return{kind:U.Kind.INPUT_OBJECT_TYPE_DEFINITION,description:ee(e),name:{kind:U.Kind.NAME,value:e.name},fields:Object.values(e.getFields()).map(e=>{var n,i,s;return n=e,i=t,s=r,{kind:U.Kind.INPUT_VALUE_DEFINITION,description:ee(n),name:{kind:U.Kind.NAME,value:n.name},type:Y(n.type),directives:ep(n,i,s),defaultValue:X(n.defaultValue,n.type)??void 0}}),directives:ep(e,t,r)}}(i,e,r));else if((0,B.isEnumType)(i))s.push(function(e,t,r){return{kind:U.Kind.ENUM_TYPE_DEFINITION,description:ee(e),name:{kind:U.Kind.NAME,value:e.name},values:Object.values(e.getValues()).map(e=>{var n,i,s;return n=e,i=t,s=r,{kind:U.Kind.ENUM_VALUE_DEFINITION,description:ee(n),name:{kind:U.Kind.NAME,value:n.name},directives:ep(n,i,s)}}),directives:ep(e,t,r)}}(i,e,r));else if((0,B.isScalarType)(i))s.push(function(e,t,r){let n=ey(t,eu(e,r)),i=e.specifiedByUrl||e.specifiedByURL;return i&&!n.some(e=>"specifiedBy"===e.name.value)&&n.push(em("specifiedBy",{url:i})),{kind:U.Kind.SCALAR_TYPE_DEFINITION,description:ee(e),name:{kind:U.Kind.NAME,value:e.name},directives:n}}(i,e,r));else throw Error(`Unknown type ${i}.`)}return{kind:U.Kind.DOCUMENT,definitions:s}}(t,r).definitions,r,n,i,s,o);else if("string"==typeof t||t instanceof eB.Source)e((0,K.parse)(t,r).definitions,r,n,i,s,o);else if("object"==typeof t&&(0,j.isDefinitionNode)(t)){let e=function(e){let t=[];for(let r of e.definitions)if(r.kind===U.Kind.SCHEMA_EXTENSION||r.kind===U.Kind.SCHEMA_DEFINITION){let e=r.directives?.filter(e=>"link"===e.name.value),n=e?.map(e=>(function(e){let t,r,n=[];for(let s of e)switch(s.name.value){case"url":s.value.kind===U.Kind.STRING&&(t=eM(s.value.value));break;case"import":var i;n=(i=s.value).kind===U.Kind.LIST?i.values.map(e=>{let t;if(e.kind===U.Kind.STRING)t={name:e.value};else if(e.kind===U.Kind.OBJECT){let r,n="";for(let t of e.fields)"name"===t.name.value?t.value.kind===U.Kind.STRING&&(n=t.value.value):"as"===t.name.value&&t.value.kind===U.Kind.STRING&&(r=t.value.value);t={name:n,as:r}}return t}).filter(e=>void 0!==e):[];break;case"as":s.value.kind===U.Kind.STRING&&(r=s.value.value??void 0)}if(void 0!==t)return{url:t,as:r,imports:n}})(e.arguments??[])).filter(e=>void 0!==e)??[];t=t.concat(n);let i=r.directives?.filter(({name:e})=>"core"===e.value),s=i?.map(e=>(function(e){let t=e.find(({name:e,value:t})=>"feature"===e.value&&t.kind===U.Kind.STRING);if(t)return{url:eM(t.value.value),imports:[]}})(e.arguments??[])).filter(e=>void 0!==e);s&&(t=t.concat(...s))}return t}({definitions:[t],kind:U.Kind.DOCUMENT}),r=e.find(e=>"https://specs.apollo.dev/federation"===e.url.identity);r&&(a(eL(r,"@composeDirective")),a(eL(r,"@key")));let s=e.find(e=>"https://specs.apollo.dev/link"===e.url.identity);s&&a(eL(s,"@link")),t.kind===U.Kind.DIRECTIVE_DEFINITION?n.push(t):i.push(t)}else if(t&&"object"==typeof t&&"kind"in t&&t.kind===U.Kind.DOCUMENT)e(t.definitions,r,n,i,s,o);else throw Error(`typeDefs must contain only strings, documents, schemas, or functions, got ${typeof t}`);return{allDirectives:n,allNodes:i,repeatableLinkImports:o}}(e,t),s=eZ(r,t);t.repeatableLinkImports=i;let o=eZ(n,t,s);if(t?.useSchemaDefinition){let e=o[eX]||{kind:U.Kind.SCHEMA_DEFINITION,operationTypes:[]},t=e.operationTypes;for(let e in eJ)if(!t.find(t=>t.operation===e)){let r=o[eJ[e]];null!=r&&null!=r.name&&t.push({kind:U.Kind.OPERATION_TYPE_DEFINITION,type:{kind:U.Kind.NAMED_TYPE,name:r.name},operation:e})}e?.operationTypes?.length!=null&&e.operationTypes.length>0&&(o[eX]=e)}t?.forceSchemaDefinition&&!o[eX]?.operationTypes?.length&&(o[eX]={kind:U.Kind.SCHEMA_DEFINITION,operationTypes:[{kind:U.Kind.OPERATION_TYPE_DEFINITION,operation:"query",type:{kind:U.Kind.NAMED_TYPE,name:{kind:U.Kind.NAME,value:"Query"}}}]});let a=Object.values(o);if(t?.sort){let e="function"==typeof t.sort?t.sort:ez;a.sort((t,r)=>e(t.name?.value,r.name?.value))}return a}(e,{useSchemaDefinition:!0,forceSchemaDefinition:!1,throwOnConflict:!1,commentDescriptions:!1,...t})};if(t?.commentDescriptions)r=(0,ev.visit)(n,eA);else r=n;return eT={},r}function e1(e,t){let r=e.getTypeMap();for(let e in r){let n=r[e];if(!(0,B.getNamedType)(n).name.startsWith("__")){if((0,B.isObjectType)(n)){let e=n.getFields();for(let r in e)for(let n of e[r].args)n.defaultValue=t(n.type,n.defaultValue)}else if((0,B.isInputObjectType)(n)){let e=n.getFields();for(let r in e){let n=e[r];n.defaultValue=t(n.type,n.defaultValue)}}}}}function e6(e,t){let r=e.getTypeMap();for(let e in r){let n=r[e];if(!(0,B.getNamedType)(n).name.startsWith("__")&&(0,B.isObjectType)(n)){let r=n.getFields();for(let n in r)t(r[n],e,n)}}}function e2(e,t){if(t){let r=e[t.name];if((0,B.isObjectType)(r))return r}}function e4(e,t,r=null,n=null){if(null==t)return t;let i=(0,B.getNullableType)(e);if((0,B.isLeafType)(i))return null!=r?r(i,t):t;if((0,B.isListType)(i))return x(t).map(e=>e4(i.ofType,e,r,n));if((0,B.isInputObjectType)(i)){let e=i.getFields(),s={};for(let i in t){let o=e[i];null!=o&&(s[i]=e4(o.type,t[i],r,n))}return null!=n?n(i,s):s}}function e8(e,t){return e4(e,t,(e,t)=>{try{return e.serialize(t)}catch{return t}})}function e5(e,t){return e4(e,t,(e,t)=>{try{return e.parseValue(t)}catch{return t}})}function e9(e,t={}){var r,n;let i,s,o=tn(tr(e7(te((r=e7(te(e.getTypeMap(),e,e8),e,t,e=>(0,B.isLeafType)(e)),n=e,(s=null!=(i=t[a.ENUM_VALUE])?i:null)?e7(r,n,{[a.ENUM_TYPE]:e=>{let t=e.toConfig(),r=t.values,i={};for(let t in r){let o=r[t],a=s(o,e.name,n,t);if(void 0===a)i[t]=o;else if(Array.isArray(a)){let[e,t]=a;i[e]=void 0===t?o:t}else null!==a&&(i[t]=a)}return ti(new B.GraphQLEnumType({...t,values:i}))}},e=>(0,B.isEnumType)(e)):r),e,e5),e,t,e=>!(0,B.isLeafType)(e)),e,t),e,t),{typeMap:l,directives:u}=function(e,t){let r=Object.create(null);for(let t in e)r[t]=e[t];let n=Object.create(null);for(let e in r){let t=r[e];if(null==t||e.startsWith("__"))continue;let i=t.name;if(!i.startsWith("__")){if(null!=n[i]){console.warn(`Duplicate schema type name ${i} found; keeping the existing one found in the schema`);continue}n[i]=t}}for(let e in n)n[e]=s(n[e]);return{typeMap:n,directives:t.map(e=>(function(e){if((0,q.isSpecifiedDirective)(e))return e;let t=e.toConfig();return t.args=i(t.args),new q.GraphQLDirective(t)})(e))};function i(e){let t={};for(let r in e){let n=e[r],i=l(n.type);null!=i&&(n.type=i,t[r]=n)}return t}function s(e){if((0,B.isObjectType)(e)){let t=e.toConfig(),r={...t,fields:()=>o(t.fields),interfaces:()=>a(t.interfaces)};return new B.GraphQLObjectType(r)}if((0,B.isInterfaceType)(e)){let t=e.toConfig(),r={...t,fields:()=>o(t.fields)};return"interfaces"in r&&(r.interfaces=()=>a(t.interfaces)),new B.GraphQLInterfaceType(r)}if((0,B.isUnionType)(e)){let t=e.toConfig(),r={...t,types:()=>a(t.types)};return new B.GraphQLUnionType(r)}if((0,B.isInputObjectType)(e)){let t=e.toConfig(),r={...t,fields:()=>(function(e){let t={};for(let r in e){let n=e[r],i=l(n.type);null!=i&&(n.type=i,t[r]=n)}return t})(t.fields)};return new B.GraphQLInputObjectType(r)}if((0,B.isEnumType)(e)){let t=e.toConfig();return new B.GraphQLEnumType(t)}else if((0,B.isScalarType)(e)){if((0,G.isSpecifiedScalarType)(e))return e;let t=e.toConfig();return new B.GraphQLScalarType(t)}throw Error(`Unexpected schema type: ${e}`)}function o(e){let t={};for(let r in e){let n=e[r],s=l(n.type);null!=s&&n.args&&(n.type=s,n.args=i(n.args),t[r]=n)}return t}function a(e){let t=[];for(let r of e){let e=l(r);null!=e&&t.push(e)}return t}function l(e){if((0,B.isListType)(e)){let t=l(e.ofType);return null!=t?new B.GraphQLList(t):null}if((0,B.isNonNullType)(e)){let t=l(e.ofType);return null!=t?new B.GraphQLNonNull(t):null}if((0,B.isNamedType)(e)){let t=r[e.name];return void 0===t&&(n[(t=!function(e){if("getFields"in e){let t=e.getFields();for(let e in t)return"_fake"===t[e].name}return!1}(e)?s(e):function(e){switch(e.name){case G.GraphQLInt.name:return G.GraphQLInt;case G.GraphQLFloat.name:return G.GraphQLFloat;case G.GraphQLString.name:return G.GraphQLString;case G.GraphQLBoolean.name:return G.GraphQLBoolean;case G.GraphQLID.name:return G.GraphQLID;default:return e}}(e)).name]=r[e.name]=t),null!=t?n[t.name]:null}return null}}(o,function(e,t,r){let n,i=null!=(n=r[a.DIRECTIVE])?n:null;if(null==i)return e.slice();let s=[];for(let r of e){let e=i(r,t);void 0===e?s.push(r):null!==e&&s.push(e)}return s}(e.getDirectives(),e,t));return new R.GraphQLSchema({...e.toConfig(),query:e2(l,e2(o,e.getQueryType())),mutation:e2(l,e2(o,e.getMutationType())),subscription:e2(l,e2(o,e.getSubscriptionType())),types:Object.values(l),directives:u})}(n=a||(a={})).TYPE="MapperKind.TYPE",n.SCALAR_TYPE="MapperKind.SCALAR_TYPE",n.ENUM_TYPE="MapperKind.ENUM_TYPE",n.COMPOSITE_TYPE="MapperKind.COMPOSITE_TYPE",n.OBJECT_TYPE="MapperKind.OBJECT_TYPE",n.INPUT_OBJECT_TYPE="MapperKind.INPUT_OBJECT_TYPE",n.ABSTRACT_TYPE="MapperKind.ABSTRACT_TYPE",n.UNION_TYPE="MapperKind.UNION_TYPE",n.INTERFACE_TYPE="MapperKind.INTERFACE_TYPE",n.ROOT_OBJECT="MapperKind.ROOT_OBJECT",n.QUERY="MapperKind.QUERY",n.MUTATION="MapperKind.MUTATION",n.SUBSCRIPTION="MapperKind.SUBSCRIPTION",n.DIRECTIVE="MapperKind.DIRECTIVE",n.FIELD="MapperKind.FIELD",n.COMPOSITE_FIELD="MapperKind.COMPOSITE_FIELD",n.OBJECT_FIELD="MapperKind.OBJECT_FIELD",n.ROOT_FIELD="MapperKind.ROOT_FIELD",n.QUERY_ROOT_FIELD="MapperKind.QUERY_ROOT_FIELD",n.MUTATION_ROOT_FIELD="MapperKind.MUTATION_ROOT_FIELD",n.SUBSCRIPTION_ROOT_FIELD="MapperKind.SUBSCRIPTION_ROOT_FIELD",n.INTERFACE_FIELD="MapperKind.INTERFACE_FIELD",n.INPUT_OBJECT_FIELD="MapperKind.INPUT_OBJECT_FIELD",n.ARGUMENT="MapperKind.ARGUMENT",n.ENUM_VALUE="MapperKind.ENUM_VALUE";let e3=["String","ID","Int","Float","Boolean"];function e7(e,t,r,n=()=>!0){let i={};for(let s in e)if(!s.startsWith("__")&&!e3.includes(s)){let o=e[s];if(null==o||!n(o)){i[s]=o;continue}let l=function(e,t,r){let n,i,s,o=[...(i=e.getType(r),s=[a.TYPE],(0,B.isObjectType)(i)?(s.push(a.COMPOSITE_TYPE,a.OBJECT_TYPE),r===e.getQueryType()?.name?s.push(a.ROOT_OBJECT,a.QUERY):r===e.getMutationType()?.name?s.push(a.ROOT_OBJECT,a.MUTATION):r===e.getSubscriptionType()?.name&&s.push(a.ROOT_OBJECT,a.SUBSCRIPTION)):(0,B.isInputObjectType)(i)?s.push(a.INPUT_OBJECT_TYPE):(0,B.isInterfaceType)(i)?s.push(a.COMPOSITE_TYPE,a.ABSTRACT_TYPE,a.INTERFACE_TYPE):(0,B.isUnionType)(i)?s.push(a.COMPOSITE_TYPE,a.ABSTRACT_TYPE,a.UNION_TYPE):(0,B.isEnumType)(i)?s.push(a.ENUM_TYPE):(0,B.isScalarType)(i)&&s.push(a.SCALAR_TYPE),s)];for(;!n&&o.length>0;)n=t[o.pop()];return null!=n?n:null}(t,r,s);if(null==l){i[s]=o;continue}let u=l(o,t);if(void 0===u){i[s]=o;continue}i[s]=u}return i}function te(e,t,r){let n=tn(e,t,{[a.ARGUMENT]:t=>{if(void 0===t.defaultValue)return t;let n=tt(e,t.type);if(null!=n)return{...t,defaultValue:r(n,t.defaultValue)}}});return tr(n,t,{[a.INPUT_OBJECT_FIELD]:e=>{if(void 0===e.defaultValue)return e;let t=tt(n,e.type);if(null!=t)return{...e,defaultValue:r(t,e.defaultValue)}}})}function tt(e,t){if((0,B.isListType)(t)){let r=tt(e,t.ofType);return null!=r?new B.GraphQLList(r):null}if((0,B.isNonNullType)(t)){let r=tt(e,t.ofType);return null!=r?new B.GraphQLNonNull(r):null}if((0,B.isNamedType)(t)){let r=e[t.name];return null!=r?r:null}return null}function tr(e,t,r){let n={};for(let i in e)if(!i.startsWith("__")){let s=e[i];if(!(0,B.isObjectType)(s)&&!(0,B.isInterfaceType)(s)&&!(0,B.isInputObjectType)(s)){n[i]=s;continue}let o=function(e,t,r){let n,i,s,o=[...(i=e.getType(r),s=[a.FIELD],(0,B.isObjectType)(i)?(s.push(a.COMPOSITE_FIELD,a.OBJECT_FIELD),r===e.getQueryType()?.name?s.push(a.ROOT_FIELD,a.QUERY_ROOT_FIELD):r===e.getMutationType()?.name?s.push(a.ROOT_FIELD,a.MUTATION_ROOT_FIELD):r===e.getSubscriptionType()?.name&&s.push(a.ROOT_FIELD,a.SUBSCRIPTION_ROOT_FIELD)):(0,B.isInterfaceType)(i)?s.push(a.COMPOSITE_FIELD,a.INTERFACE_FIELD):(0,B.isInputObjectType)(i)&&s.push(a.INPUT_OBJECT_FIELD),s)];for(;!n&&o.length>0;)n=t[o.pop()];return n??null}(t,r,i);if(null==o){n[i]=s;continue}let l=s.toConfig(),u=l.fields,c={};for(let e in u){let r=u[e],n=o(r,e,i,t);if(void 0===n)c[e]=r;else if(Array.isArray(n)){let[e,t]=n;null!=t.astNode&&(t.astNode={...t.astNode,name:{...t.astNode.name,value:e}}),c[e]=void 0===t?r:t}else null!==n&&(c[e]=n)}(0,B.isObjectType)(s)?n[i]=ti(new B.GraphQLObjectType({...l,fields:c})):(0,B.isInterfaceType)(s)?n[i]=ti(new B.GraphQLInterfaceType({...l,fields:c})):n[i]=ti(new B.GraphQLInputObjectType({...l,fields:c}))}return n}function tn(e,t,r){let n={};for(let i in e)if(!i.startsWith("__")){let s=e[i];if(!(0,B.isObjectType)(s)&&!(0,B.isInterfaceType)(s)){n[i]=s;continue}let o=function(e){let t=e[a.ARGUMENT];return null!=t?t:null}(r);if(null==o){n[i]=s;continue}let l=s.toConfig(),u=l.fields,c={};for(let e in u){let r=u[e],n=r.args;if(null==n){c[e]=r;continue}let s=Object.keys(n);if(!s.length){c[e]=r;continue}let a={};for(let r of s){let s=n[r],l=o(s,e,i,t);if(void 0===l)a[r]=s;else if(Array.isArray(l)){let[e,t]=l;a[e]=t}else null!==l&&(a[r]=l)}c[e]={...r,args:a}}(0,B.isObjectType)(s)?n[i]=new B.GraphQLObjectType({...l,fields:c}):(0,B.isInterfaceType)(s)?n[i]=new B.GraphQLInterfaceType({...l,fields:c}):n[i]=new B.GraphQLInputObjectType({...l,fields:c})}return n}function ti(e){if((0,B.isObjectType)(e)){let t=e.toConfig();if(null!=t.astNode){let e=[];for(let r in t.fields){let n=t.fields[r];null!=n.astNode&&e.push(n.astNode)}t.astNode={...t.astNode,kind:U.Kind.OBJECT_TYPE_DEFINITION,fields:e}}return null!=t.extensionASTNodes&&(t.extensionASTNodes=t.extensionASTNodes.map(e=>({...e,kind:U.Kind.OBJECT_TYPE_EXTENSION,fields:void 0}))),new B.GraphQLObjectType(t)}if((0,B.isInterfaceType)(e)){let t=e.toConfig();if(null!=t.astNode){let e=[];for(let r in t.fields){let n=t.fields[r];null!=n.astNode&&e.push(n.astNode)}t.astNode={...t.astNode,kind:U.Kind.INTERFACE_TYPE_DEFINITION,fields:e}}return null!=t.extensionASTNodes&&(t.extensionASTNodes=t.extensionASTNodes.map(e=>({...e,kind:U.Kind.INTERFACE_TYPE_EXTENSION,fields:void 0}))),new B.GraphQLInterfaceType(t)}if((0,B.isInputObjectType)(e)){let t=e.toConfig();if(null!=t.astNode){let e=[];for(let r in t.fields){let n=t.fields[r];null!=n.astNode&&e.push(n.astNode)}t.astNode={...t.astNode,kind:U.Kind.INPUT_OBJECT_TYPE_DEFINITION,fields:e}}return null!=t.extensionASTNodes&&(t.extensionASTNodes=t.extensionASTNodes.map(e=>({...e,kind:U.Kind.INPUT_OBJECT_TYPE_EXTENSION,fields:void 0}))),new B.GraphQLInputObjectType(t)}{if(!(0,B.isEnumType)(e))return e;let t=e.toConfig();if(null!=t.astNode){let e=[];for(let r in t.values){let n=t.values[r];null!=n.astNode&&e.push(n.astNode)}t.astNode={...t.astNode,values:e}}return null!=t.extensionASTNodes&&(t.extensionASTNodes=t.extensionASTNodes.map(e=>({...e,values:void 0}))),new B.GraphQLEnumType(t)}}function ts(e,t){for(let r in t)e[r]=t[r]}function to(e,t,r,n,i){if(!r.resolve){let r=`Resolver missing for "${n}.${i}".
To disable this validator, use:
  resolverValidationOptions: {
    ${e}: 'ignore'
  }`;if("error"===t)throw Error(r);"warn"===t&&console.warn(r);return}if("function"!=typeof r.resolve)throw Error(`Resolver "${n}.${i}" must be a function`)}let ta=()=>{let e,t,r=new Promise((r,n)=>{e=r,t=n});return r.resolve=e,r.reject=t,r};var tl=e.i(22019),tu=e.i(65726),tc=e.i(27145),td=e.i(28069),tp=e.i(8280),tf=e.i(94555);(i=l||(l={})).INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",i.GRAPHQL_PARSE_FAILED="GRAPHQL_PARSE_FAILED",i.GRAPHQL_VALIDATION_FAILED="GRAPHQL_VALIDATION_FAILED",i.PERSISTED_QUERY_NOT_FOUND="PERSISTED_QUERY_NOT_FOUND",i.PERSISTED_QUERY_NOT_SUPPORTED="PERSISTED_QUERY_NOT_SUPPORTED",i.BAD_USER_INPUT="BAD_USER_INPUT",i.OPERATION_RESOLUTION_FAILURE="OPERATION_RESOLUTION_FAILURE",i.BAD_REQUEST="BAD_REQUEST",(s=u||(u={})).INTROSPECTION_DISABLED="INTROSPECTION_DISABLED",s.MAX_RECURSIVE_SELECTIONS_EXCEEDED="MAX_RECURSIVE_SELECTIONS_EXCEEDED";var th=ei;class tm extends Map{__identity=Symbol("HeaderMap");set(e,t){return super.set(e.toLowerCase(),t)}get(e){return super.get(e.toLowerCase())}delete(e){return super.delete(e.toLowerCase())}has(e){return super.has(e.toLowerCase())}}class ty extends th.GraphQLError{constructor(e,t,r){super(e,{...r,extensions:{...r?.extensions,code:t}}),this.name=this.constructor.name}}class tg extends ty{constructor(e){super(e.message,l.GRAPHQL_PARSE_FAILED,{source:e.source,positions:e.positions,extensions:{http:tD(400),...e.extensions},originalError:e})}}class tv extends ty{constructor(e){super(e.message,l.GRAPHQL_VALIDATION_FAILED,{nodes:e.nodes,extensions:{http:tD(400),...e.extensions},originalError:e.originalError??e})}}let tT=()=>({status:200,headers:new tm([["cache-control","private, no-cache, must-revalidate"]])});class tE extends ty{constructor(){super("PersistedQueryNotFound",l.PERSISTED_QUERY_NOT_FOUND,{extensions:{http:tT()}})}}class t_ extends ty{constructor(){super("PersistedQueryNotSupported",l.PERSISTED_QUERY_NOT_SUPPORTED,{extensions:{http:tT()}})}}class tb extends ty{constructor(e){super(e.message,l.BAD_USER_INPUT,{nodes:e.nodes,originalError:e.originalError??e,extensions:e.extensions})}}class tS extends ty{constructor(e){super(e.message,l.OPERATION_RESOLUTION_FAILURE,{nodes:e.nodes,originalError:e.originalError??e,extensions:{http:tD(400),...e.extensions}})}}class tI extends ty{constructor(e,t){super(e,l.BAD_REQUEST,{...t,extensions:{http:tD(400),...t?.extensions}})}}function tO(e,t){let r=e[t];if("string"==typeof r)return r}function tN(e,t){let r=e.getAll(t);switch(r.length){case 0:return;case 1:return r[0];default:throw new tI(`The '${t}' search parameter may only be specified once.`)}}function tw(e,t){let r,n=tN(e,t);if(void 0!==n){try{r=JSON.parse(n)}catch{throw new tI(`The ${t} search parameter contains invalid JSON.`)}if(!tP(r))throw new tI(`The ${t} search parameter should contain a JSON-encoded object.`);return r}}function tA(e,t){let r=e[t];if(tP(r))return r}function tP(e){return!!e&&"object"==typeof e&&!Buffer.isBuffer(e)&&!Array.isArray(e)}async function tR({server:e,httpRequest:t,contextValue:r,schemaDerivedData:n,internals:i,sharedResponseHTTPGraphQLHead:s}){let o;switch(t.method){case"POST":if(!(tP(l=t.body)&&Object.keys(l).length>0))throw new tI("POST body missing, invalid Content-Type, or JSON object has no keys.");var a,l,u=t.body.query;if(u&&"string"!=typeof u)if(u.kind===U.Kind.DOCUMENT)throw new tI("GraphQL queries must be strings. It looks like you're sending the internal graphql-js representation of a parsed query in your request instead of a request in the GraphQL query language. You can convert an AST to a string using the `print` function from `graphql`, or use a client like `apollo-client` which converts the internal representation to a string for you.");else throw new tI("GraphQL queries must be strings.");if("string"==typeof t.body.variables)throw new tI("`variables` in a POST body should be provided as an object, not a recursively JSON-encoded string.");if("string"==typeof t.body.extensions)throw new tI("`extensions` in a POST body should be provided as an object, not a recursively JSON-encoded string.");if("extensions"in t.body&&null!==t.body.extensions&&!tP(t.body.extensions))throw new tI("`extensions` in a POST body must be an object if provided.");if("variables"in t.body&&null!==t.body.variables&&!tP(t.body.variables))throw new tI("`variables` in a POST body must be an object if provided.");if("operationName"in t.body&&null!==t.body.operationName&&"string"!=typeof t.body.operationName)throw new tI("`operationName` in a POST body must be a string if provided.");o={query:tO(t.body,"query"),operationName:tO(t.body,"operationName"),variables:tA(t.body,"variables"),extensions:tA(t.body,"extensions"),http:t};break;case"GET":{let e=new URLSearchParams(t.search);o={query:tN(e,"query"),operationName:tN(e,"operationName"),variables:tw(e,"variables"),extensions:tw(e,"extensions"),http:t};break}default:throw new tI("Apollo Server supports only GET/POST requests.",{extensions:{http:{status:405,headers:new tm([["allow","GET, POST"]])}}})}let c=await ri({server:e,graphQLRequest:o,internals:i,schemaDerivedData:n,sharedResponseHTTPGraphQLHead:s},{contextValue:r});if("single"===c.body.kind){if(!c.http.headers.get("content-type")){let e=ra(t);if(null===e)throw new tI(`An 'accept' header was provided for this request which does not accept ${ro.APPLICATION_JSON} or ${ro.APPLICATION_GRAPHQL_RESPONSE_JSON}`,{extensions:{http:{status:406}}});c.http.headers.set("content-type",e)}return{...c.http,body:{kind:"complete",string:await i.stringifyResult({errors:(a=c.body.singleResult).errors,data:a.data,extensions:a.extensions})}}}let d=t.headers.get("accept"),p=new td.default({headers:{accept:d}}).mediaType([ro.MULTIPART_MIXED_NO_DEFER_SPEC,ro.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_9,ro.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_2]);if(!d||p!==ro.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_2&&p!==ro.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_9)throw new tI(`Apollo server received an operation that uses incremental delivery (@defer or @stream), but the client does not accept multipart/mixed HTTP responses. To enable incremental delivery support, add the HTTP header 'Accept: ${ro.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_9}' if your client supports the current incremental format or 'Accept: ${ro.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_2}' if your client supports the legacy incremental format`,{extensions:{http:{status:406}}});return c.http.headers.set("content-type",`multipart/mixed; boundary="-"; ${p.replace("multipart/mixed; ","")}`),{...c.http,body:{kind:"chunked",asyncIterator:tx(c.body.initialResult,c.body.subsequentResults)}}}async function*tx(e,t){for await(let r of(yield`\r
---\r
content-type: application/json; charset=utf-8\r
\r
${JSON.stringify(e)}\r
---${e.hasNext?"":"--"}\r
`,t))yield`content-type: application/json; charset=utf-8\r
\r
${JSON.stringify(r)}\r
---${r.hasNext?"":"--"}\r
`}function tL(e){return JSON.stringify(e)+"\n"}function tD(e){return{status:e,headers:new tm}}function tM(e,t){if(t.status&&(e.status=t.status),t.headers)for(let[r,n]of t.headers)e.headers.set(r,n)}function tk(e,t={}){let r=t.formatError??(e=>e),n=tD();return{httpFromErrors:n,formattedErrors:e.map(e=>{try{return r(i(e),e)}catch(e){if(t.includeStacktraceInErrorResponses)return i(e);return{message:"Internal server error",extensions:{code:l.INTERNAL_SERVER_ERROR}}}})};function i(e){var r;let i=tF(e),s={...i.extensions,code:i.extensions.code??l.INTERNAL_SERVER_ERROR};return(r=s.http)&&"object"==typeof r&&(!("status"in r)||"number"==typeof r.status)&&(!("headers"in r)||r.headers instanceof Map)&&(tM(n,{headers:new tm,...s.http}),delete s.http),t.includeStacktraceInErrorResponses&&(s.stacktrace=i.stack?.split("\n")),{...i.toJSON(),extensions:s}}}function tC(e){return e instanceof Error?e:new ei.GraphQLError("Unexpected error value: "+String(e))}function tF(e,t=""){let r=tC(e);return r instanceof ei.GraphQLError?r:new ei.GraphQLError(t+r.message,{originalError:r})}async function tj({server:e,batchRequest:t,body:r,contextValue:n,schemaDerivedData:i,internals:s}){if(0===r.length)throw new tI("No operations found in request.");let o=tD(),a=await Promise.all(r.map(async r=>{let a={...t,body:r},l=await tR({server:e,httpRequest:a,contextValue:n,schemaDerivedData:i,internals:s,sharedResponseHTTPGraphQLHead:o});if("chunked"===l.body.kind)throw Error("Incremental delivery is not implemented for batch requests");return l.body.string}));return{...o,body:{kind:"complete",string:`[${a.join(",")}]`}}}async function tU(e,t,r,n,i){if(!("POST"===t.method&&Array.isArray(t.body)))return await tR({server:e,httpRequest:t,contextValue:r,schemaDerivedData:n,internals:i,sharedResponseHTTPGraphQLHead:null});if(i.allowBatchedHttpRequests)return await tj({server:e,batchRequest:t,body:t.body,contextValue:r,schemaDerivedData:n,internals:i});throw new tI("Operation batching disabled.")}var tK=e.i(62984),tq=e.i(94392);let tB=["x-apollo-operation-name","apollo-require-preflight"],tQ=["application/x-www-form-urlencoded","multipart/form-data","text/plain"];var tG=e.i(87584),t$=e.i(21972),tH=e.i(9083),tV=e.i(39024);let tz=Symbol("apolloServerExecutionDispatcherWillResolveField"),tY=Symbol("apolloServerUserFieldResolver"),tW=Symbol("apolloServerPluginsEnabled");function tJ(e){return e&&"function"==typeof e.then}function tX(e){return null!=e}async function tZ(e,t){let r=(await Promise.all(e.map(e=>t(e)))).filter(tX);return r.reverse(),async(...e)=>{for(let t of r)t(...e)}}async function t0(e,t){for(let r of e){let e=await t(r);if(null!=e)return e}return null}class t1{map;constructor(e){this.map=e}append(e,t){this.map.has(e)?this.map.set(e,this.map.get(e)+", "+t):this.map.set(e,t)}delete(e){this.map.delete(e)}get(e){return this.map.get(e)??null}has(e){return this.map.has(e)}set(e,t){this.map.set(e,t)}entries(){return this.map.entries()}keys(){return this.map.keys()}values(){return this.map.values()}[Symbol.iterator](){return this.map.entries()}}async function t6(){if(void 0!==t)return;let r=await e.A(99105);t="17.0.0-alpha.9"===r.version&&"experimentalExecuteIncrementally"in r?r.experimentalExecuteIncrementally:null}async function t2({useLegacyIncremental:e,legacyExperimentalExecuteIncrementally:r,...n}){if(await t6(),e){if(r)return r(n);if(t)throw new tI(`Apollo Server received an operation that uses incremental delivery (@defer or @stream) with the legacy incremental format, but the server does not support the legacy incremental delivery format. Add the HTTP header: 'Accept: ${ro.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_9}' to use the current incremental delivery format`,{extensions:{http:{status:406}}})}return t?t(n):(0,tV.execute)(n)}function t4(e){return(0,tf.createHash)("sha256").update(e).digest("hex")}async function t8(e,t,r,n){let i,s=(await Promise.all(r.plugins.map(e=>e.requestDidStart?.(n)))).filter(tX),o=n.request,{query:a,extensions:l}=o;if(n.metrics.persistedQueryHit=!1,n.metrics.persistedQueryRegister=!1,l?.persistedQuery){if(!r.persistedQueries)return await g([new t_]);if(1!==l.persistedQuery.version)return await g([new ei.GraphQLError("Unsupported persisted query version",{extensions:{http:tD(400)}})]);if(i=l.persistedQuery.sha256Hash,void 0===a){if(!(a=await r.persistedQueries.cache.get(i)))return await g([new tE]);n.metrics.persistedQueryHit=!0}else{if(i!==t4(a))return await g([new ei.GraphQLError("provided sha does not match query",{extensions:{http:tD(400)}})]);n.metrics.persistedQueryRegister=!0}}else{if(!a)return await g([new tI("GraphQL operations must contain a non-empty `query` or a `persistedQuery` extension.")]);i=t4(a)}if(n.queryHash=i,n.source=a,await Promise.all(s.map(e=>e.didResolveSource?.(n))),e.documentStore)try{n.document=await e.documentStore.get(e.documentStoreKeyPrefix+i)}catch(e){t.logger.warn("An error occurred while attempting to read from the documentStore. "+tC(e).message)}if(!n.document){let o=await tZ(s,async e=>e.parsingDidStart?.(n));try{n.document=(0,K.parse)(a,r.parseOptions)}catch(t){let e=tC(t);return await o(e),await g([new tg(tF(e))])}if(await o(),!0!==r.dangerouslyDisableValidation){let t=await tZ(s,async e=>e.validationDidStart?.(n)),i=(0,tH.validate)(e.schema,n.document,[...tG.specifiedRules,...r.validationRules]);if(0===i.length&&r.laterValidationRules&&(i=(0,tH.validate)(e.schema,n.document,r.laterValidationRules)),0!==i.length)return await t(i),await g(i.map(e=>new tv(e)));await t()}e.documentStore&&Promise.resolve(e.documentStore.set(e.documentStoreKeyPrefix+i,n.document)).catch(e=>t.logger.warn("Could not store validated document. "+e?.message))}let u=(0,t$.getOperationAST)(n.document,o.operationName);if(n.operation=u||void 0,n.operationName=u?.name?.value||null,o.http?.method==="GET"&&u?.operation&&"query"!==u.operation)return await g([new tI(`GET requests only support query operations, not ${u.operation} operations`,{extensions:{http:{status:405,headers:new tm([["allow","POST"]])}}})]);try{await Promise.all(s.map(e=>e.didResolveOperation?.(n)))}catch(e){return await g([tF(e)])}if(n.metrics.persistedQueryRegister&&r.persistedQueries){let e=r.persistedQueries?.ttl;Promise.resolve(r.persistedQueries.cache.set(i,a,void 0!==e?{ttl:r.persistedQueries?.ttl}:void 0)).catch(t.logger.warn.bind(t.logger))}let c=await t0(s,async e=>await e.responseForOperation?.(n));if(null!==c)n.response.body=c.body,tM(n.response.http,c.http);else{let t=(await Promise.all(s.map(e=>e.executionDidStart?.(n)))).filter(tX);if(t.reverse(),t.some(e=>e.willResolveField)){var d;Object.defineProperty(n.contextValue,tz,{value:(...e)=>{var r;let n;return r=t=>t.willResolveField?.(...e),(n=t.map(e=>r(e)).filter(tX)).reverse(),(...e)=>{for(let t of n)t(...e)}}}),r.fieldResolver&&Object.defineProperty(n.contextValue,tY,{value:r.fieldResolver}),(d=e.schema)[tW]||(Object.defineProperty(d,tW,{value:!0}),Object.values(d.getTypeMap()).forEach(e=>{!(0,B.getNamedType)(e).name.startsWith("__")&&e instanceof B.GraphQLObjectType&&Object.values(e.getFields()).forEach(e=>{var t;let r;r=(t=e).resolve,t.resolve=(e,t,n,i)=>{let s=n?.[tz],o=n?.[tY],a="function"==typeof s&&s({source:e,args:t,contextValue:n,info:i}),l=r||o||tV.defaultFieldResolver;try{let r=l(e,t,n,i);return"function"==typeof a&&function e(t,r){tJ(t)?t.then(t=>e(t,r),e=>r(e)):Array.isArray(t)&&t.some(tJ)?Promise.all(t).then(e=>r(null,e),e=>r(e)):r(null,t)}(r,a),r}catch(e){throw"function"==typeof a&&a(e),e}}})}))}try{let e=await p({...n,useLegacyIncremental:new td.default({headers:{accept:o.http?.headers.get("accept")}}).mediaType([ro.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_9,ro.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_2])===ro.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_2}),t="singleResult"in e?e.singleResult:e.initialResult;if(!n.operation){if(!t.errors?.length)throw Error("Unexpected error: Apollo Server did not resolve an operation but execute did not return errors");throw new tS(t.errors[0])}let i=t.errors?.map(e=>e.nodes?.length===1&&e.nodes[0].kind===U.Kind.VARIABLE_DEFINITION&&(e.message.startsWith(`Variable "$${e.nodes[0].variable.name.value}" has invalid value`)||e.message.startsWith(`Variable "$${e.nodes[0].variable.name.value}" got invalid value `)||e.message.startsWith(`Variable "$${e.nodes[0].variable.name.value}" of required type `)||e.message.startsWith(`Variable "$${e.nodes[0].variable.name.value}" of non-null type `))&&e.extensions?.code==null?new tb(e):e);i&&await y(i);let{formattedErrors:s,httpFromErrors:a}=i?v(i):{formattedErrors:void 0,httpFromErrors:tD()};r.status400ForVariableCoercionErrors&&i?.length&&void 0===t.data&&!a.status&&(a.status=400),tM(n.response.http,a),"singleResult"in e?n.response.body={kind:"single",singleResult:{...t,errors:s}}:n.response.body={kind:"incremental",initialResult:{...e.initialResult,errors:s},subsequentResults:e.subsequentResults}}catch(r){let e=tC(r);return await Promise.all(t.map(t=>t.executionDidEnd?.(e))),await g([tF(e)])}await Promise.all(t.map(e=>e.executionDidEnd?.()))}if(await m(),!n.response.body)throw Error("got to end of processGraphQLRequest without setting body?");return n.response;async function p({useLegacyIncremental:n,...i}){let{request:s,document:o}=i;if(r.__testing_incrementalExecutionResults)return r.__testing_incrementalExecutionResults;if(r.gatewayExecutor)return{singleResult:await r.gatewayExecutor(function(e,t,r){let n={};if("query"in e.request&&(n.query=e.request.query),"operationName"in e.request&&(n.operationName=e.request.operationName),"variables"in e.request&&(n.variables=e.request.variables),"extensions"in e.request&&(n.extensions=e.request.extensions),e.request.http){let t=e.request.http,r=""!==t.search&&!t.search.startsWith("?");n.http={method:t.method,url:`https://unknown-url.invalid/${r?"?":""}${t.search}`,headers:new t1(t.headers)}}return{request:n,response:{http:{headers:new t1(e.response.http.headers),get status(){return e.response.http.status},set status(newStatus){e.response.http.status=newStatus}}},logger:t.logger,schema:e.schema,schemaHash:"schemaHash no longer exists since Apollo Server 4",context:e.contextValue,cache:t.cache,queryHash:e.queryHash,document:e.document,source:e.source,operationName:e.operationName,operation:e.operation,errors:e.errors,metrics:e.metrics,debug:r.includeStacktraceInErrorResponses,overallCachePolicy:e.overallCachePolicy,requestIsBatched:e.requestIsBatched}}(i,t,r))};{let t=await t2({schema:e.schema,document:o,rootValue:"function"==typeof r.rootValue?r.rootValue(o):r.rootValue,contextValue:i.contextValue,variableValues:s.variables,operationName:s.operationName,fieldResolver:r.fieldResolver,useLegacyIncremental:n,legacyExperimentalExecuteIncrementally:r.legacyExperimentalExecuteIncrementally});return"initialResult"in t?{initialResult:t.initialResult,subsequentResults:"pending"in t.initialResult?h(t.subsequentResults):f(t.subsequentResults)}:{singleResult:t}}}async function*f(e){for await(let t of e){let e=t.incremental?{...t,incremental:await t5(t.incremental,async e=>{let{errors:t}=e;return t?(await Promise.all(s.map(e=>e.didEncounterSubsequentErrors?.(n,t))),{...e,errors:v(t).formattedErrors}):e})}:t;await Promise.all(s.map(t=>t.willSendSubsequentPayload?.(n,e))),yield e}}async function*h(e){for await(let t of e){let e=t.incremental?{...t,incremental:await t5(t.incremental,async e=>{let{errors:t}=e;return t?(await Promise.all(s.map(e=>e.didEncounterSubsequentErrors?.(n,t))),{...e,errors:v(t).formattedErrors}):e})}:t;t.completed&&(e.completed=await t5(t.completed,async e=>{let{errors:t}=e;return t?(await Promise.all(s.map(e=>e.didEncounterSubsequentErrors?.(n,t))),{...e,errors:v(t).formattedErrors}):e})),await Promise.all(s.map(t=>t.willSendSubsequentPayload?.(n,e))),yield e}}async function m(){await Promise.all(s.map(e=>e.willSendResponse?.(n)))}async function y(e){return n.errors=e,await Promise.all(s.map(e=>e.didEncounterErrors?.(n)))}async function g(e){await y(e);let{formattedErrors:t,httpFromErrors:r}=v(e);return n.response.body={kind:"single",singleResult:{errors:t}},tM(n.response.http,r),n.response.http.status||(n.response.http.status=500),await m(),n.response}function v(e){return tk(e,{formatError:r.formatError,includeStacktraceInErrorResponses:r.includeStacktraceInErrorResponses})}}async function t5(e,t){let r=[];for(let n of e){let e=await t(n);r.push(e)}return r}var t9=e.i(118),t3=e.i(66879);class t7{logger;schemaDerivedDataProvider;onSchemaLoadOrUpdateListeners=new Set;isStopped=!1;schemaDerivedData;schemaContext;modeSpecificState;constructor(e){this.logger=e.logger,this.schemaDerivedDataProvider=e.schemaDerivedDataProvider,"gateway"in e?this.modeSpecificState={mode:"gateway",gateway:e.gateway,apolloConfig:e.apolloConfig}:this.modeSpecificState={mode:"schema",apiSchema:e.apiSchema,schemaDerivedData:e.schemaDerivedDataProvider(e.apiSchema)}}async start(){if("gateway"!==this.modeSpecificState.mode)return this.processSchemaLoadOrUpdateEvent({apiSchema:this.modeSpecificState.apiSchema},this.modeSpecificState.schemaDerivedData),null;{let e=this.modeSpecificState.gateway;if(e.onSchemaLoadOrUpdate)this.modeSpecificState.unsubscribeFromGateway=e.onSchemaLoadOrUpdate(e=>{this.processSchemaLoadOrUpdateEvent(e)});else throw Error("Unexpectedly couldn't find onSchemaLoadOrUpdate on gateway");return(await this.modeSpecificState.gateway.load({apollo:this.modeSpecificState.apolloConfig})).executor}}onSchemaLoadOrUpdate(e){if(!this.schemaContext)throw Error("You must call start() before onSchemaLoadOrUpdate()");if(!this.isStopped)try{e(this.schemaContext)}catch(e){throw Error(`An error was thrown from an 'onSchemaLoadOrUpdate' listener: ${e.message}`)}return this.onSchemaLoadOrUpdateListeners.add(e),()=>{this.onSchemaLoadOrUpdateListeners.delete(e)}}getSchemaDerivedData(){if(!this.schemaDerivedData)throw Error("You must call start() before getSchemaDerivedData()");return this.schemaDerivedData}async stop(){this.isStopped=!0,"gateway"===this.modeSpecificState.mode&&(this.modeSpecificState.unsubscribeFromGateway?.(),await this.modeSpecificState.gateway.stop?.())}processSchemaLoadOrUpdateEvent(e,t){this.isStopped||(this.schemaDerivedData=t??this.schemaDerivedDataProvider(e.apiSchema),this.schemaContext=e,this.onSchemaLoadOrUpdateListeners.forEach(t=>{try{t(e)}catch(e){this.logger.error("An error was thrown from an 'onSchemaLoadOrUpdate' listener"),this.logger.error(e)}}))}}let re=e=>({Field(t){("__schema"===t.name.value||"__type"===t.name.value)&&e.reportError(new ei.GraphQLError("GraphQL introspection is not allowed by Apollo Server, but the query contained __schema or __type. To enable introspection, pass introspection: true to ApolloServer in production",{nodes:[t],extensions:{validationErrorCode:u.INTROSPECTION_DISABLED}}))}});class rt{selectionCountLimit;context;fragmentInfo=new Map;operationInfo=new Map;currentFragment;currentOperation;fragmentRecursiveSelectionCount=new Map;constructor(e,t){this.selectionCountLimit=e,this.context=t}getExecutionDefinitionInfo(){if(void 0!==this.currentFragment){let e=this.fragmentInfo.get(this.currentFragment);return e||(e={selectionCount:0,fragmentSpreads:new Map},this.fragmentInfo.set(this.currentFragment,e)),e}if(void 0!==this.currentOperation){let e=this.operationInfo.get(this.currentOperation);return e||(e={selectionCount:0,fragmentSpreads:new Map},this.operationInfo.set(this.currentOperation,e)),e}}processSelection(e){let t=this.getExecutionDefinitionInfo();if(t&&(t.selectionCount++,void 0!==e)){let r=(t.fragmentSpreads.get(e)??0)+1;t.fragmentSpreads.set(e,r)}}enterFragment(e){this.currentFragment=e}leaveFragment(){this.currentFragment=void 0}enterOperation(e){this.currentOperation=e}leaveOperation(){this.currentOperation=void 0}computeFragmentRecursiveSelectionsCount(e){let t=this.fragmentRecursiveSelectionCount.get(e);if(null===t)return 0;if(void 0!==t)return t;this.fragmentRecursiveSelectionCount.set(e,null);let r=this.fragmentInfo.get(e),n=0;if(r)for(let[e,t]of(n=r.selectionCount,r.fragmentSpreads))n+=t*this.computeFragmentRecursiveSelectionsCount(e);return this.fragmentRecursiveSelectionCount.set(e,n),n}reportError(e){let t=e?`Operation "${e}"`:"Anonymous operation";this.context.reportError(new ei.GraphQLError(`${t} recursively requests too many selections.`,{nodes:[],extensions:{validationErrorCode:u.MAX_RECURSIVE_SELECTIONS_EXCEEDED}}))}checkLimitExceeded(){for(let[e,t]of this.operationInfo){let r=t.selectionCount;for(let[e,n]of t.fragmentSpreads)r+=n*this.computeFragmentRecursiveSelectionsCount(e);r>this.selectionCountLimit&&this.reportError(e)}}}function rr(e){return t=>{let r=new rt(e,t);return{Field(){r.processSelection()},InlineFragment(){r.processSelection()},FragmentSpread(e){r.processSelection(e.name.value)},FragmentDefinition:{enter(e){r.enterFragment(e.name.value)},leave(){r.leaveFragment()}},OperationDefinition:{enter(e){r.enterOperation(e.name?.value??null)},leave(){r.leaveOperation()}},Document:{leave(){r.checkLimitExceeded()}}}}}class rn{internals;cache;logger;constructor(e){let t;const r=e.nodeEnv??"production"??"";this.logger=e.logger??function(){let e=tc.default.getLogger("apollo-server");return e.setLevel(tc.default.levels.INFO),e}();const n=function(e,t){let r={},{APOLLO_KEY:n,APOLLO_GRAPH_REF:i,APOLLO_GRAPH_ID:s,APOLLO_GRAPH_VARIANT:o}=process.env;e?.key?r.key=e.key.trim():n&&(r.key=n.trim()),(e?.key??n)!==r.key&&t.warn("The provided API key has unexpected leading or trailing whitespace. Apollo Server will trim the key value before use."),r.key&&function(e){let t=/[^\t\x20-\x7e\x80-\xff]/g;if(t.test(e)){let r=e.match(t);throw Error(`The API key provided to Apollo Server contains characters which are invalid as HTTP header values. The following characters found in the key are invalid: ${r.join(", ")}. Valid header values may only contain ASCII visible characters. If you think there is an issue with your key, please contact Apollo support.`)}}(r.key),r.key&&(r.keyHash=(0,tf.createHash)("sha512").update(r.key).digest("hex")),e?.graphRef?r.graphRef=e.graphRef:i&&(r.graphRef=i);let a=e?.graphId??s,l=e?.graphVariant??o;if(r.graphRef){if(a)throw Error("Cannot specify both graph ref and graph ID. Please use `apollo.graphRef` or `APOLLO_GRAPH_REF` without also setting the graph ID.");if(l)throw Error("Cannot specify both graph ref and graph variant. Please use `apollo.graphRef` or `APOLLO_GRAPH_REF` without also setting the graph variant.")}else a&&(r.graphRef=l?`${a}@${l}`:a);return r}(e.apollo,this.logger);if(e.cache&&"bounded"!==e.cache&&A.PrefixingKeyValueCache.prefixesAreUnnecessaryForIsolation(e.cache))throw Error("You cannot pass a cache returned from `PrefixingKeyValueCache.cacheDangerouslyDoesNotNeedPrefixesForIsolation`to `new ApolloServer({ cache })`, because Apollo Server may use it for multiple features whose cache keys must be distinct from each other.");const i=e.gateway?{phase:"initialized",schemaManager:new t7({gateway:e.gateway,apolloConfig:n,schemaDerivedDataProvider:t=>rn.generateSchemaDerivedData(t,e.documentStore),logger:this.logger})}:{phase:"initialized",schemaManager:new t7({apiSchema:rn.constructSchema(e),schemaDerivedDataProvider:t=>rn.generateSchemaDerivedData(t,e.documentStore),logger:this.logger})},s=e.introspection??"production"!==r,o=e.hideSchemaDetailsFromClientErrors??!1;this.cache=void 0===e.cache||"bounded"===e.cache?new A.InMemoryLRUCache:e.cache;const a=!0===e.maxRecursiveSelections?[rr(1e7)]:"number"==typeof e.maxRecursiveSelections?[rr(e.maxRecursiveSelections)]:[],l=[...s?[]:[re],...a];a.length>0?t=e.validationRules:l.push(...e.validationRules??[]),this.internals={formatError:e.formatError,rootValue:e.rootValue,validationRules:l,laterValidationRules:t,hideSchemaDetailsFromClientErrors:o,dangerouslyDisableValidation:e.dangerouslyDisableValidation??!1,fieldResolver:e.fieldResolver,includeStacktraceInErrorResponses:e.includeStacktraceInErrorResponses??("production"!==r&&"test"!==r),persistedQueries:!1===e.persistedQueries?void 0:{...e.persistedQueries,cache:new A.PrefixingKeyValueCache(e.persistedQueries?.cache??this.cache,"apq:")},nodeEnv:r,allowBatchedHttpRequests:e.allowBatchedHttpRequests??!1,apolloConfig:n,plugins:e.plugins??[],parseOptions:e.parseOptions??{},state:i,stopOnTerminationSignals:e.stopOnTerminationSignals,gatewayExecutor:null,csrfPreventionRequestHeaders:!0===e.csrfPrevention||void 0===e.csrfPrevention?tB:!1===e.csrfPrevention?null:e.csrfPrevention.requestHeaders??tB,status400ForVariableCoercionErrors:e.status400ForVariableCoercionErrors??!0,__testing_incrementalExecutionResults:e.__testing_incrementalExecutionResults,stringifyResult:e.stringifyResult??tL,legacyExperimentalExecuteIncrementally:e.legacyExperimentalExecuteIncrementally},this.warnAgainstDeprecatedConfigOptions(e)}warnAgainstDeprecatedConfigOptions(e){"status400ForVariableCoercionErrors"in e&&(!0===e.status400ForVariableCoercionErrors?this.logger.warn("The `status400ForVariableCoercionErrors: true` configuration option is now the default behavior and has no effect in Apollo Server v5. You can safely remove this option from your configuration."):this.logger.warn("The `status400ForVariableCoercionErrors: false` configuration option is deprecated and will be removed in Apollo Server v6. Apollo recommends removing any dependency on this behavior."))}async start(){return await this._start(!1)}startInBackgroundHandlingStartupErrorsByLoggingAndFailingAllRequests(){this._start(!0).catch(e=>this.logStartupError(e))}async _start(e){if("initialized"!==this.internals.state.phase)throw Error("You should only call 'start()' or 'startInBackgroundHandlingStartupErrorsByLoggingAndFailingAllRequests()' once on your ApolloServer.");let t=this.internals.state.schemaManager,r=ta();this.internals.state={phase:"starting",barrier:r,schemaManager:t,startedInBackground:e};try{await this.addDefaultPlugins();let r=[],n=await t.start();n&&(this.internals.gatewayExecutor=n),r.push(async()=>{await t.stop()});let i=t.getSchemaDerivedData(),s={logger:this.logger,cache:this.cache,schema:i.schema,apollo:this.internals.apolloConfig,startedInBackground:e},o=(await Promise.all(this.internals.plugins.map(async e=>({serverListener:e.serverWillStart&&await e.serverWillStart(s),installedImplicitly:rs(e)&&e.__internal_installed_implicitly__})))).filter(e=>"object"==typeof e.serverListener);o.forEach(({serverListener:{schemaDidLoadOrUpdate:e}})=>{e&&t.onSchemaLoadOrUpdate(e)});let a=o.map(e=>e.serverListener.serverWillStop).filter(tX);a.length&&r.push(async()=>{await Promise.all(a.map(e=>e()))});let l=o.map(e=>e.serverListener.drainServer).filter(tX),u=l.length?async()=>{await Promise.all(l.map(e=>e()))}:null,c=o.filter(e=>e.serverListener.renderLandingPage);c.length>1&&(c=c.filter(e=>!e.installedImplicitly));let d=null;if(c.length>1)throw Error("Only one plugin can implement renderLandingPage.");c.length&&(d=await c[0].serverListener.renderLandingPage());let p=this.maybeRegisterTerminationSignalHandlers(["SIGINT","SIGTERM"],e);this.internals.state={phase:"started",schemaManager:t,drainServers:u,landingPage:d,toDispose:r,toDisposeLast:p}}catch(t){let e=tC(t);try{await Promise.all(this.internals.plugins.map(async t=>t.startupDidFail?.({error:e})))}catch(e){this.logger.error(`startupDidFail hook threw: ${e}`)}throw this.internals.state={phase:"failed to start",error:e},e}finally{r.resolve()}}maybeRegisterTerminationSignalHandlers(e,t){let r=[];if(!1===this.internals.stopOnTerminationSignals||void 0===this.internals.stopOnTerminationSignals&&!(w.isNodeLike&&"test"!==this.internals.nodeEnv&&!t))return r;let n=!1,i=async e=>{if(!n){n=!0;try{await this.stop()}catch(t){this.logger.error(`stop() threw during ${e} shutdown`),this.logger.error(t),process.exit(1)}process.kill(process.pid,e)}};return e.forEach(e=>{process.on(e,i),r.push(async()=>{process.removeListener(e,i)})}),r}async _ensureStarted(){for(;;)switch(this.internals.state.phase){case"initialized":throw Error("You need to call `server.start()` before using your Apollo Server.");case"starting":await this.internals.state.barrier;break;case"failed to start":throw this.logStartupError(this.internals.state.error),Error("This data graph is missing a valid configuration. More details may be available in the server logs.");case"started":case"draining":return this.internals.state;case"stopping":case"stopped":throw this.logger.warn("A GraphQL operation was received during server shutdown. The operation will fail. Consider draining the HTTP server on shutdown; see https://go.apollo.dev/s/drain for details."),Error(`Cannot execute GraphQL operations ${"stopping"===this.internals.state.phase?"while the server is stopping":"after the server has stopped"}.'`);default:throw new t9.UnreachableCaseError(this.internals.state)}}assertStarted(e){if("started"!==this.internals.state.phase&&"draining"!==this.internals.state.phase&&!("starting"===this.internals.state.phase&&this.internals.state.startedInBackground))throw Error("You must `await server.start()` before calling `"+e+"`")}logStartupError(e){this.logger.error("An error occurred during Apollo Server startup. All GraphQL requests will now fail. The startup error was: "+(e?.message||e))}static constructSchema(e){if(e.schema)return e.schema;let{typeDefs:t,resolvers:r}=e;return function({typeDefs:e,resolvers:t={},resolverValidationOptions:r={},inheritResolversFromInterfaces:n=!1,updateResolversInPlace:i=!1,schemaExtensions:s,defaultFieldResolver:o,...l}){let u;if("object"!=typeof r)throw Error("Expected `resolverValidationOptions` to be an object");if(!e)throw Error("Must provide typeDefs");if((0,R.isSchema)(e))u=e;else if(l?.commentDescriptions){let t=e0(e,{...l,commentDescriptions:!0});u=(0,P.buildSchema)(t,l)}else{let t=e0(e,l);u=(0,P.buildASTSchema)(t,l)}if(u=function({schema:e,resolvers:t,defaultFieldResolver:r,resolverValidationOptions:n={},inheritResolversFromInterfaces:i=!1,updateResolversInPlace:s=!1}){var o,l,u;let{requireResolversToMatchSchema:c="error",requireResolversForResolveType:d}=n,p=i?function(e,t){let r={},n=e.getTypeMap();for(let e in n){let i=n[e];if("getInterfaces"in i){for(let n of(r[e]={},i.getInterfaces()))if(t[n.name])for(let i in t[n.name])"__isTypeOf"!==i&&i.startsWith("__")||(r[e][i]=t[n.name][i]);let n=t[e];r[e]={...r[e],...n}}else{let n=t[e];null!=n&&(r[e]=n)}}return r}(e,t):t;for(let t in p){let r=p[t];if("object"!=typeof r)throw Error(`"${t}" defined in resolvers, but has invalid value "${r}". The resolver's value must be of type object.`);let n=e.getType(t);if(null==n){let e=`"${t}" defined in resolvers, but not in schema`;if(c&&"error"!==c){"warn"===c&&console.warn(e);continue}throw Error(e)}if((0,G.isSpecifiedScalarType)(n))for(let e in r)e.startsWith("__")?n[e.substring(2)]=r[e]:n[e]=r[e];else if((0,B.isEnumType)(n)){let e=n.getValues();for(let t in r)if(!t.startsWith("__")&&!e.some(e=>e.name===t)&&c&&"ignore"!==c){let e=`${n.name}.${t} was defined in resolvers, but not present within ${n.name}`;if("error"===c)throw Error(e);console.warn(e)}}else if((0,B.isUnionType)(n)){for(let e in r)if(!e.startsWith("__")&&c&&"ignore"!==c){let t=`${n.name}.${e} was defined in resolvers, but ${n.name} is not an object or interface type`;if("error"===c)throw Error(t);console.warn(t)}}else if((0,B.isObjectType)(n)||(0,B.isInterfaceType)(n)){for(let e in r)if(!e.startsWith("__"))if(null==n.getFields()[e]){if(c&&"ignore"!==c){let r=`${t}.${e} defined in resolvers, but not in schema`;if("error"===c)throw Error(r);console.error(r)}}else{let n=r[e];if("function"!=typeof n&&"object"!=typeof n)throw Error(`Resolver ${t}.${e} must be object or function`)}}}return e=s?function(e,t,r){let n=e.getTypeMap();for(let r in t){let i=e.getType(r),s=t[r];if((0,B.isScalarType)(i))for(let e in s)e.startsWith("__")?i[e.substring(2)]=s[e]:"astNode"===e&&null!=i.astNode?i.astNode={...i.astNode,description:s?.astNode?.description??i.astNode.description,directives:(i.astNode.directives??[]).concat(s?.astNode?.directives??[])}:"extensionASTNodes"===e&&null!=i.extensionASTNodes?i.extensionASTNodes=i.extensionASTNodes.concat(s?.extensionASTNodes??[]):"extensions"===e&&null!=i.extensions&&null!=s.extensions?i.extensions=Object.assign(Object.create(null),i.extensions,s.extensions):i[e]=s[e];else if((0,B.isEnumType)(i)){let e=i.toConfig(),t=e.values;for(let r in s)r.startsWith("__")?e[r.substring(2)]=s[r]:"astNode"===r&&null!=e.astNode?e.astNode={...e.astNode,description:s?.astNode?.description??e.astNode.description,directives:(e.astNode.directives??[]).concat(s?.astNode?.directives??[])}:"extensionASTNodes"===r&&null!=e.extensionASTNodes?e.extensionASTNodes=e.extensionASTNodes.concat(s?.extensionASTNodes??[]):"extensions"===r&&null!=i.extensions&&null!=s.extensions?i.extensions=Object.assign(Object.create(null),i.extensions,s.extensions):t[r]&&(t[r].value=s[r]);n[r]=new B.GraphQLEnumType(e)}else if((0,B.isUnionType)(i))for(let e in s)e.startsWith("__")&&(i[e.substring(2)]=s[e]);else if((0,B.isObjectType)(i)||(0,B.isInterfaceType)(i))for(let e in s){if(e.startsWith("__")){i[e.substring(2)]=s[e];continue}let t=i.getFields()[e];if(null!=t){let r=s[e];"function"==typeof r?t.resolve=r.bind(s):ts(t,r)}}}return e1(e,e8),function(e,t){let r=Object.create(null);for(let t in e){let n=e[t];if(null==n||t.startsWith("__"))continue;let i=n.name;if(!i.startsWith("__")){if(null!=r[i]){console.warn(`Duplicate schema type name ${i} found; keeping the existing one found in the schema`);continue}r[i]=n}}for(let t in r){let n=r[t];e[t]=n}for(let e of t)e.args=e.args.filter(e=>(e.type=s(e.type),null!==e.type));for(let t in e){let o=e[t];!t.startsWith("__")&&t in r&&null!=o&&function(e){if((0,B.isObjectType)(e)){n(e),i(e);return}if((0,B.isInterfaceType)(e)){n(e),"getInterfaces"in e&&i(e);return}if((0,B.isUnionType)(e))return function(e){let t=e.getTypes();t.push(...t.splice(0).map(e=>s(e)).filter(Boolean))}(e);if((0,B.isInputObjectType)(e))return function(e){let t=e.getFields();for(let[e,r]of Object.entries(t))r.type=s(r.type),null===r.type&&delete t[e]}(e);if(!(0,B.isLeafType)(e))throw Error(`Unexpected schema type: ${e}`)}(o)}for(let t in e)t.startsWith("__")||t in r||delete e[t];function n(e){let t=e.getFields();for(let[e,r]of Object.entries(t))r.args.map(e=>(e.type=s(e.type),null===e.type?null:e)).filter(Boolean),r.type=s(r.type),null===r.type&&delete t[e]}function i(e){if("getInterfaces"in e){let t=e.getInterfaces();t.push(...t.splice(0).map(e=>s(e)).filter(Boolean))}}function s(t){if((0,B.isListType)(t)){let e=s(t.ofType);return null!=e?new B.GraphQLList(e):null}if((0,B.isNonNullType)(t)){let e=s(t.ofType);return null!=e?new B.GraphQLNonNull(e):null}if((0,B.isNamedType)(t)){let r=e[t.name];if(r&&t!==r)return r}return t}}(e.getTypeMap(),e.getDirectives()),e1(e,e5),null!=r&&e6(e,e=>{e.resolve||(e.resolve=r)}),e}(e,p,r):(o=e,l=p,u=r,o=e9(o,{[a.SCALAR_TYPE]:e=>{let t=e.toConfig(),r=l[e.name];if(!(0,G.isSpecifiedScalarType)(e)&&null!=r){for(let n in r)n.startsWith("__")?t[n.substring(2)]=r[n]:"astNode"===n&&null!=t.astNode?t.astNode={...t.astNode,description:r?.astNode?.description??t.astNode.description,directives:(t.astNode.directives??[]).concat(r?.astNode?.directives??[])}:"extensionASTNodes"===n&&null!=t.extensionASTNodes?t.extensionASTNodes=t.extensionASTNodes.concat(r?.extensionASTNodes??[]):"extensions"===n&&null!=t.extensions&&null!=r.extensions?t.extensions=Object.assign(Object.create(null),e.extensions,r.extensions):t[n]=r[n];return new B.GraphQLScalarType(t)}},[a.ENUM_TYPE]:e=>{let t=l[e.name],r=e.toConfig(),n=r.values;if(null!=t){for(let i in t)i.startsWith("__")?r[i.substring(2)]=t[i]:"astNode"===i&&null!=r.astNode?r.astNode={...r.astNode,description:t?.astNode?.description??r.astNode.description,directives:(r.astNode.directives??[]).concat(t?.astNode?.directives??[])}:"extensionASTNodes"===i&&null!=r.extensionASTNodes?r.extensionASTNodes=r.extensionASTNodes.concat(t?.extensionASTNodes??[]):"extensions"===i&&null!=r.extensions&&null!=t.extensions?r.extensions=Object.assign(Object.create(null),e.extensions,t.extensions):n[i]&&(n[i].value=t[i]);return new B.GraphQLEnumType(r)}},[a.UNION_TYPE]:e=>{let t=l[e.name];if(null!=t){let r=e.toConfig();return t.__resolveType&&(r.resolveType=t.__resolveType),new B.GraphQLUnionType(r)}},[a.OBJECT_TYPE]:e=>{let t=l[e.name];if(null!=t){let r=e.toConfig();return t.__isTypeOf&&(r.isTypeOf=t.__isTypeOf),new B.GraphQLObjectType(r)}},[a.INTERFACE_TYPE]:e=>{let t=l[e.name];if(null!=t){let r=e.toConfig();return t.__resolveType&&(r.resolveType=t.__resolveType),new B.GraphQLInterfaceType(r)}},[a.COMPOSITE_FIELD]:(e,t,r)=>{let n=l[r];if(null!=n){let r=n[t];if(null!=r){let t={...e};return"function"==typeof r?t.resolve=r.bind(n):ts(t,r),t}}}}),null!=u&&(o=e9(o,{[a.OBJECT_FIELD]:e=>({...e,resolve:null!=e.resolve?e.resolve:u})})),o),d&&"ignore"!==d&&e9(e,{[a.ABSTRACT_TYPE]:e=>{if(!e.resolveType){let t=`Type "${e.name}" is missing a "__resolveType" resolver. Pass 'ignore' into "resolverValidationOptions.requireResolversForResolveType" to disable this error.`;if("error"===d)throw Error(t);"warn"===d&&console.warn(t)}}}),e}({schema:u,resolvers:function e(t,r){if(!t||Array.isArray(t)&&0===t.length)return{};if(!Array.isArray(t))return t;if(1===t.length)return t[0]||{};let n=[];for(let r of t)Array.isArray(r)&&(r=e(r)),"object"==typeof r&&r&&n.push(r);let i=k(n,!0);if(r?.exclusions)for(let e of r.exclusions){let[t,r]=e.split(".");!(["__proto__","constructor","prototype"].includes(t)||["__proto__","constructor","prototype"].includes(r))&&(r&&"*"!==r?i[t]&&delete i[t][r]:delete i[t])}return i}(t),resolverValidationOptions:r,inheritResolversFromInterfaces:n,updateResolversInPlace:i,defaultFieldResolver:o}),Object.keys(r).length>0&&function(e,t={}){let{requireResolversForArgs:r,requireResolversForNonScalar:n,requireResolversForAllFields:i}=t;if(i&&(r||n))throw TypeError("requireResolversForAllFields takes precedence over the more specific assertions. Please configure either requireResolversForAllFields or requireResolversForArgs / requireResolversForNonScalar, but not a combination of them.");e6(e,(e,t,s)=>{i&&to("requireResolversForAllFields",i,e,t,s),r&&e.args.length>0&&to("requireResolversForArgs",r,e,t,s),"ignore"===n||(0,B.isScalarType)((0,B.getNamedType)(e.type))||to("requireResolversForNonScalar",n,e,t,s)})}(u,r),s)for(let e of x(s)){var c=u,d=e;for(let[e,t]of(F(c,d.schemaExtensions),Object.entries(d.types||{}))){let r=c.getType(e);if(r){if(F(r,t.extensions),"object"===t.type||"interface"===t.type)for(let[e,n]of Object.entries(t.fields)){let t=r.getFields()[e];if(t)for(let[e,r]of(F(t,n.extensions),Object.entries(n.arguments)))F(t.args.find(t=>t.name===e),r)}else if("input"===t.type)for(let[e,n]of Object.entries(t.fields))F(r.getFields()[e],n.extensions);else if("enum"===t.type)for(let[e,n]of Object.entries(t.values))F(r.getValue(e),n)}}}return u}({typeDefs:Array.isArray(t)?t:[t],resolvers:r})}static generateSchemaDerivedData(e,t){return(0,tl.assertValidSchema)(e),{schema:e,documentStore:void 0===t?new A.InMemoryLRUCache:t,documentStoreKeyPrefix:t?`${(0,t3.computeCoreSchemaHash)((0,tu.printSchema)(e))}:`:""}}async stop(){switch(this.internals.state.phase){case"initialized":case"starting":case"failed to start":throw Error("apolloServer.stop() should only be called after `await apolloServer.start()` has succeeded");case"stopped":if(this.internals.state.stopError)throw this.internals.state.stopError;return;case"stopping":case"draining":{await this.internals.state.barrier;let e=this.internals.state;if("stopped"!==e.phase)throw Error(`Surprising post-stopping state ${e.phase}`);if(e.stopError)throw e.stopError;return}case"started":break;default:throw new t9.UnreachableCaseError(this.internals.state)}let e=ta(),{schemaManager:t,drainServers:r,landingPage:n,toDispose:i,toDisposeLast:s}=this.internals.state;this.internals.state={phase:"draining",barrier:e,schemaManager:t,landingPage:n};try{await r?.(),this.internals.state={phase:"stopping",barrier:e},await Promise.all([...i].map(e=>e())),await Promise.all([...s].map(e=>e()))}catch(t){throw this.internals.state={phase:"stopped",stopError:t},e.resolve(),t}this.internals.state={phase:"stopped",stopError:null}}async addDefaultPlugins(){let{plugins:t,apolloConfig:r,nodeEnv:n,hideSchemaDetailsFromClientErrors:i}=this.internals,s=e=>t.some(t=>(0,tK.pluginIsInternal)(t)&&t.__internal_plugin_id__===e),o=new Map;for(let e of t)if((0,tK.pluginIsInternal)(e)){let t=e.__internal_plugin_id__;o.has(t)||o.set(t,{sawDisabled:!1,sawNonDisabled:!1});let r=o.get(t);if(e.__is_disabled_plugin__?r.sawDisabled=!0:r.sawNonDisabled=!0,r.sawDisabled&&r.sawNonDisabled)throw Error(`You have tried to install both ApolloServerPlugin${t} and ApolloServerPlugin${t}Disabled in your server. Please choose whether or not you want to disable the feature and install the appropriate plugin for your use case.`)}if(!s("CacheControl")){let{ApolloServerPluginCacheControl:r}=await e.A(8981);t.push(r())}if(!s("UsageReporting")&&r.key)if(r.graphRef){let{ApolloServerPluginUsageReporting:r}=await e.A(27515);t.unshift(r({__onlyIfSchemaIsNotSubgraph:!0}))}else this.logger.warn("You have specified an Apollo key but have not specified a graph ref; usage reporting is disabled. To enable usage reporting, set the `APOLLO_GRAPH_REF` environment variable to `your-graph-id@your-graph-variant`. To disable this warning, install `ApolloServerPluginUsageReportingDisabled`.");{let n=s("SchemaReporting"),i="true"===process.env.APOLLO_SCHEMA_REPORTING;if(!n&&i)if(r.key){let{ApolloServerPluginSchemaReporting:r}=await e.A(97318);t.push(r())}else throw Error("You've enabled schema reporting by setting the APOLLO_SCHEMA_REPORTING environment variable to true, but you also need to provide your Apollo API key, via the APOLLO_KEY environment variable or via `new ApolloServer({apollo: {key})")}if(!s("InlineTrace")){let{ApolloServerPluginInlineTrace:r}=await e.A(37353);t.push(r({__onlyIfSchemaIsSubgraph:!0}))}if(!s("LandingPageDisabled")){let{ApolloServerPluginLandingPageLocalDefault:r,ApolloServerPluginLandingPageProductionDefault:i}=await e.A(18035),s="production"!==n?r():i();if(!rs(s))throw Error("default landing page plugin should be implicitly installable?");s.__internal_installed_implicitly__=!0,t.push(s)}{let r=s("DisableSuggestions");if(i&&!r){let{ApolloServerPluginDisableSuggestions:r}=await e.A(96341);t.push(r())}}}addPlugin(e){if("initialized"!==this.internals.state.phase)throw Error("Can't add plugins after the server has started");this.internals.plugins.push(e)}async executeHTTPGraphQLRequest({httpGraphQLRequest:e,context:t}){try{let r,n;try{r=await this._ensureStarted()}catch(t){return await this.errorResponse(t,e)}if(r.landingPage&&this.prefersHTML(e)){let t;if("string"==typeof r.landingPage.html)t=r.landingPage.html;else try{t=await r.landingPage.html()}catch(r){let t=tC(r);return this.logger.error(`Landing page \`html\` function threw: ${t}`),await this.errorResponse(t,e)}return{headers:new tm([["content-type","text/html"]]),body:{kind:"complete",string:t}}}this.internals.csrfPreventionRequestHeaders&&function(e,t){let r=e.get("content-type");if(void 0!==r){let e=tq.default.parse(r);if(null===e||!tQ.includes(e.essence))return}if(!t.some(t=>{let r=e.get(t);return void 0!==r&&r.length>0}))throw new tI(`This operation has been blocked as a potential Cross-Site Request Forgery (CSRF). Please either specify a 'content-type' header (with a type that is not one of ${tQ.join(", ")}) or provide a non-empty value for one of the following headers: ${t.join(", ")}
`)}(e.headers,this.internals.csrfPreventionRequestHeaders);try{n=await t()}catch(r){let t=tC(r);try{await Promise.all(this.internals.plugins.map(async e=>e.contextCreationDidFail?.({error:t})))}catch(e){this.logger.error(`contextCreationDidFail hook threw: ${e}`)}return await this.errorResponse(tF(t,"Context creation failed: "),e)}return await tU(this,e,n,r.schemaManager.getSchemaDerivedData(),this.internals)}catch(t){if(t instanceof ei.GraphQLError&&t.extensions.code===l.BAD_REQUEST)try{await Promise.all(this.internals.plugins.map(async e=>e.invalidRequestWasReceived?.({error:t})))}catch(e){this.logger.error(`invalidRequestWasReceived hook threw: ${e}`)}return await this.errorResponse(t,e)}}async errorResponse(e,t){let{formattedErrors:r,httpFromErrors:n}=tk([e],{includeStacktraceInErrorResponses:this.internals.includeStacktraceInErrorResponses,formatError:this.internals.formatError});return{status:n.status??500,headers:new tm([...n.headers,["content-type",ra(t)??ro.APPLICATION_JSON]]),body:{kind:"complete",string:await this.internals.stringifyResult({errors:r})}}}prefersHTML(e){let t=e.headers.get("accept");return"GET"===e.method&&!!t&&new td.default({headers:{accept:t}}).mediaType([ro.APPLICATION_JSON,ro.APPLICATION_GRAPHQL_RESPONSE_JSON,ro.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_2,ro.MULTIPART_MIXED_EXPERIMENTAL_ALPHA_9,ro.MULTIPART_MIXED_NO_DEFER_SPEC,ro.TEXT_HTML])===ro.TEXT_HTML}async executeOperation(e,t={}){"initialized"===this.internals.state.phase&&await this.start();let r=(await this._ensureStarted()).schemaManager.getSchemaDerivedData(),n={...e,query:e.query&&"string"!=typeof e.query?(0,en.print)(e.query):e.query};return await ri({server:this,graphQLRequest:n,internals:this.internals,schemaDerivedData:r,sharedResponseHTTPGraphQLHead:null},t)}}async function ri({server:e,graphQLRequest:t,internals:r,schemaDerivedData:n,sharedResponseHTTPGraphQLHead:i},s){var o;let a={logger:e.logger,cache:e.cache,schema:n.schema,request:t,response:{http:i??tD()},contextValue:Object.assign(Object.create(Object.getPrototypeOf(o=s?.contextValue??{})),o),metrics:{},overallCachePolicy:(0,tp.newCachePolicy)(),requestIsBatched:null!==i};try{return await t8(n,e,r,a)}catch(n){let t=tC(n);throw await Promise.all(r.plugins.map(async e=>e.unexpectedErrorProcessingRequest?.({requestContext:a,error:t}))),e.logger.error(`Unexpected error processing request: ${t}`),Error("Internal server error")}}function rs(e){return"__internal_installed_implicitly__"in e}let ro={APPLICATION_JSON:"application/json; charset=utf-8",APPLICATION_JSON_GRAPHQL_CALLBACK:"application/json; callbackSpec=1.0; charset=utf-8",APPLICATION_GRAPHQL_RESPONSE_JSON:"application/graphql-response+json; charset=utf-8",MULTIPART_MIXED_NO_DEFER_SPEC:"multipart/mixed",MULTIPART_MIXED_EXPERIMENTAL_ALPHA_2:"multipart/mixed; deferSpec=20220824",MULTIPART_MIXED_EXPERIMENTAL_ALPHA_9:"multipart/mixed; incrementalSpec=v0.2",TEXT_HTML:"text/html"};function ra(e){if(!e.headers.get("accept"))return ro.APPLICATION_JSON;{let t=new td.default({headers:{accept:e.headers.get("accept")}}).mediaType([ro.APPLICATION_JSON,ro.APPLICATION_GRAPHQL_RESPONSE_JSON,ro.APPLICATION_JSON_GRAPHQL_CALLBACK]);return t||null}}var rl=e.i(58660);let ru=`
  type User {
    id: String!
    email: String!
    name: String
    image: String
  }

  type Document {
    id: String!
    title: String!
    type: String!
    createdAt: DateTime!
    updatedAt: DateTime!
    owner: User!
    access: [DocumentAccess!]!
  }

  type DocumentAccess {
    id: String!
    user: User!
    document: Document!
    permission: PermissionType!
    grantedAt: DateTime!
  }

  enum PermissionType {
    VIEWER
    EDITOR
    ADMIN
  }

  type Query {
    documents: [Document!]!
    document(id: String!): Document
    myDocuments: [Document!]!
    sharedDocuments: [Document!]!
  }

  type Mutation {
    createDocument(title: String!, type: String!): Document!
    updateDocument(id: String!, title: String): Document!
    deleteDocument(id: String!): Boolean!
    shareDocument(
      documentId: String!
      userId: String!
      permission: PermissionType!
    ): DocumentAccess!
    revokeAccess(documentId: String!, userId: String!): Boolean!
  }

  type Subscription {
    documentUpdated(documentId: String!): Document!
    documentShared(documentId: String!): DocumentAccess!
  }

  scalar DateTime
`,rc=(0,K.parse)(ru);var rd=e.i(63021);let rp=new(e.i(16840)).PubSub,rf=new rd.PrismaClient,rh=async(e,t,r)=>(console.log("=== myDocuments called ==="),console.log("Context received:",r),console.log("User in context:",r?.user),r?.user)?(console.log("Fetching documents for user:",r.user.id),(await rf.document.findMany({where:{ownerId:r.user.id},include:{owner:!0,access:{include:{user:!0}}},orderBy:{updatedAt:"desc"}})).map(e=>({...e,access:e.access||[]}))):(console.log("No user in context, returning documents for default user"),(await rf.document.findMany({where:{ownerId:"cmk1q6rlz00005m8ivwcxc5cy"},include:{owner:!0,access:{include:{user:!0}}},orderBy:{updatedAt:"desc"}})).map(e=>({...e,access:e.access||[]})));var rm=e.i(63466),ry=e.i(98043);let rg=new rn({typeDefs:rc,resolvers:{Query:{documents:async()=>await rf.document.findMany({include:{owner:!0,access:{include:{user:!0}}}}),document:async(e,{id:t})=>await rf.document.findUnique({where:{id:t},include:{owner:!0,access:{include:{user:!0}}}}),myDocuments:rh,sharedDocuments:async(e,t,r)=>{if(!r?.user)return console.log("No user in context, returning empty shared documents"),[];console.log("Fetching shared documents for user:",r.user.id);let n=await rf.document.findMany({where:{access:{some:{userId:r.user.id}}},include:{owner:!0,access:{include:{user:!0}}}});return console.log("Returning shared documents array:",n),n}},Mutation:{createDocument:async(e,{title:t,type:r},n)=>{if(console.log("=== createDocument called ==="),console.log("Context received:",n),console.log("User in context:",n?.user),!n?.user){console.log("No user in context, creating document with default user");let e=await rf.document.create({data:{title:t,type:r,ownerId:"cmk1q6rlz00005m8ivwcxc5cy"},include:{owner:!0,access:{include:{user:!0}}}});return rp.publish("DOCUMENT_CREATED",{documentCreated:e}),e}console.log("Creating document for user:",n.user.id);let i=await rf.document.create({data:{title:t,type:r,ownerId:n.user.id},include:{owner:!0,access:{include:{user:!0}}}});return rp.publish("DOCUMENT_CREATED",{documentCreated:i}),i},updateDocument:async(e,{id:t,title:r},n)=>{if(console.log("=== updateDocument called ==="),console.log("Document ID:",t),console.log("Context received:",n),console.log("User in context:",n?.user),!n?.user){console.log("No user in context, allowing update for testing");let e=await rf.document.update({where:{id:t},data:{...r&&{title:r}},include:{owner:!0,access:{include:{user:!0}}}});return rp.publish("DOCUMENT_UPDATED",{documentUpdated:e}),e}console.log("Updating document for user:",n.user.id);let i=await rf.document.update({where:{id:t},data:{...r&&{title:r}},include:{owner:!0,access:{include:{user:!0}}}});return rp.publish("DOCUMENT_UPDATED",{documentUpdated:i}),i},deleteDocument:async(e,{id:t},r)=>{if(console.log("=== deleteDocument called ==="),console.log("Document ID:",t),console.log("Context received:",r),console.log("User in context:",r?.user),r?.user){let e=await rf.document.findUnique({where:{id:t}});if(!e)throw Error("Document not found");if(e.ownerId!==r.user.id)throw Error("Unauthorized: You can only delete your own documents")}else console.log("No user in context, allowing deletion for testing");return console.log("Deleting document:",t),await rf.document.delete({where:{id:t}}),console.log("Document deleted successfully"),!0},shareDocument:async(e,{documentId:t,userId:r,permission:n},i)=>{if(console.log("=== shareDocument called ==="),console.log("Document ID:",t),console.log("User ID to share with:",r),console.log("Permission:",n),console.log("Context received:",i),console.log("User in context:",i?.user),!i?.user){console.log("No user in context, allowing share for testing");let e=r;if(r.includes("@")){let t=r.trim().toLowerCase();e=(await rf.user.upsert({where:{email:t},update:{},create:{email:t,name:t.split("@")[0]}})).id}let i=await rf.documentAccess.upsert({where:{userId_documentId:{userId:e,documentId:t}},update:{permission:n},create:{documentId:t,userId:e,permission:n},include:{user:!0,document:{include:{owner:!0}}}});return rp.publish("DOCUMENT_SHARED",{documentShared:i}),i}console.log("Sharing document for user:",i.user.id);let s=r;if(r.includes("@")){let e=r.trim().toLowerCase();s=(await rf.user.upsert({where:{email:e},update:{},create:{email:e,name:e.split("@")[0]}})).id}let o=await rf.documentAccess.upsert({where:{userId_documentId:{userId:s,documentId:t}},update:{permission:n},create:{documentId:t,userId:s,permission:n},include:{user:!0,document:{include:{owner:!0}}}});return rp.publish("DOCUMENT_SHARED",{documentShared:o}),o},revokeAccess:async(e,{documentId:t,userId:r},n)=>{if(console.log("=== revokeAccess called ==="),console.log("Document ID:",t),console.log("User ID to revoke:",r),console.log("Context received:",n),console.log("User in context:",n?.user),!n?.user){console.log("No user in context, allowing revoke for testing");let e=r;if(r.includes("@")){let t=await rf.user.findUnique({where:{email:r}});e=t?.id||"cmk1q6rlz00005m8ivwcxc5cy"}try{return await rf.documentAccess.delete({where:{userId_documentId:{userId:e,documentId:t}}}),console.log("Access revoked successfully"),!0}catch(e){return console.error("Error revoking access:",e),!0}}console.log("Revoking access for user:",r);let i=r;if(r.includes("@")){let e=r.trim().toLowerCase(),t=await rf.user.findUnique({where:{email:e}});if(!t)throw Error("User not found");i=t.id}try{return await rf.documentAccess.delete({where:{userId_documentId:{userId:i,documentId:t}}}),console.log("Access revoked successfully"),!0}catch(e){throw console.error("Error revoking access:",e),Error("Failed to revoke access")}}},Subscription:{documentUpdated:{subscribe:(e,{documentId:t})=>rp.asyncIterator([`DOCUMENT_UPDATED_${t}`])},documentShared:{subscribe:(e,{documentId:t})=>rp.asyncIterator([`DOCUMENT_SHARED_${t}`])}}}}),rv=(0,rl.startServerAndCreateNextHandler)(rg,{context:async e=>{console.log("=== GraphQL Context Debug ==="),console.log("Request method:",e.method),console.log("Request URL:",e.url),console.log("Request headers:",e.headers),console.log("Request cookies:",e.cookies);let t=null,r=null;try{if(e.headers?.["x-user-id"]&&(console.log("Found x-user-id header:",e.headers["x-user-id"]),r={user:{id:e.headers["x-user-id"],email:"user@example.com",name:"User"}},console.log("Created session from x-user-id:",r)),!r&&e.cookies?.["next-auth.session-token"]&&(console.log("Found session token in cookies:",e.cookies["next-auth.session-token"]),t=await (0,rm.getToken)({req:e,secret:process.env.NEXTAUTH_SECRET,cookieName:"next-auth.session-token"}),console.log("Token from cookies:",t),t&&(r={user:{id:t.id,email:t.email,name:t.name}})),!r&&e.headers?.authorization){let n=e.headers.authorization;console.log("Found auth header:",n),n.startsWith("Bearer ")&&(t=await (0,rm.getToken)({req:{...e,headers:{...e.headers,cookie:`next-auth.session-token=${n.substring(7)}`}},secret:process.env.NEXTAUTH_SECRET}),console.log("Token from auth header:",t),t&&(r={user:{id:t.id,email:t.email,name:t.name}}))}console.log("Final session:",r),console.log("=== End Debug ===")}catch(e){console.error("Session retrieval error:",e)}return{user:r?.user||null,prisma:ry.prisma}}});async function rT(e){return console.log("=== GraphQL API GET ==="),console.log("Request URL:",e.url),console.log("Request headers:",Object.fromEntries(e.headers.entries())),rv(e)}async function rE(e){return console.log("=== GraphQL API POST ==="),console.log("Request URL:",e.url),console.log("Request headers:",Object.fromEntries(e.headers.entries())),rv(e)}e.s(["GET",()=>rT,"POST",()=>rE],1965);var r_=e.i(1965);let rb=new c.AppRouteRouteModule({definition:{kind:d.RouteKind.APP_ROUTE,page:"/api/graphql/route",pathname:"/api/graphql",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/graphql/route.ts",nextConfigOutput:"",userland:r_}),{workAsyncStorage:rS,workUnitAsyncStorage:rI,serverHooks:rO}=rb;function rN(){return(0,p.patchFetch)({workAsyncStorage:rS,workUnitAsyncStorage:rI})}async function rw(e,t,r){rb.isDev&&(0,f.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let n="/api/graphql/route";n=n.replace(/\/index$/,"")||"/";let i=await rb.prepare(e,t,{srcPage:n,multiZoneDraftMode:!1});if(!i)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:s,params:o,nextConfig:a,parsedUrl:l,isDraftMode:u,prerenderManifest:c,routerServerContext:p,isOnDemandRevalidate:w,revalidateOnlyGenerated:A,resolvedPathname:P,clientReferenceManifest:R,serverActionsManifest:x}=i,L=(0,y.normalizeAppPath)(n),D=!!(c.dynamicRoutes[L]||c.routes[P]),M=async()=>((null==p?void 0:p.render404)?await p.render404(e,t,l,!1):t.end("This page could not be found"),null);if(D&&!u){let e=!!c.routes[P],t=c.dynamicRoutes[L];if(t&&!1===t.fallback&&!e){if(a.experimental.adapterPath)return await M();throw new O.NoFallbackError}}let k=null;!D||rb.isDev||u||(k="/index"===(k=P)?"/":k);let C=!0===rb.isDev||!D,F=D&&!C;x&&R&&(0,m.setManifestsSingleton)({page:n,clientReferenceManifest:R,serverActionsManifest:x});let j=e.method||"GET",U=(0,h.getTracer)(),K=U.getActiveScopeSpan(),q={params:o,prerenderManifest:c,renderOpts:{experimental:{authInterrupts:!!a.experimental.authInterrupts},cacheComponents:!!a.cacheComponents,supportsDynamicResponse:C,incrementalCache:(0,f.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:a.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n,i)=>rb.onRequestError(e,t,n,i,p)},sharedContext:{buildId:s}},B=new g.NodeNextRequest(e),Q=new g.NodeNextResponse(t),G=v.NextRequestAdapter.fromNodeNextRequest(B,(0,v.signalFromNodeResponse)(t));try{let i=async e=>rb.handle(G,q).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=U.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==T.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let i=r.get("next.route");if(i){let t=`${j} ${i}`;e.setAttributes({"next.route":i,"http.route":i,"next.span_name":t}),e.updateName(t)}else e.updateName(`${j} ${n}`)}),s=!!(0,f.getRequestMeta)(e,"minimalMode"),o=async o=>{var l,f;let h=async({previousCacheEntry:a})=>{try{if(!s&&w&&A&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await i(o);e.fetchMetrics=q.renderOpts.fetchMetrics;let l=q.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let u=q.renderOpts.collectedTags;if(!D)return await (0,_.sendResponse)(B,Q,n,q.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,b.toNodeOutgoingHttpHeaders)(n.headers);u&&(t[I.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==q.renderOpts.collectedRevalidate&&!(q.renderOpts.collectedRevalidate>=I.INFINITE_CACHE)&&q.renderOpts.collectedRevalidate,i=void 0===q.renderOpts.collectedExpire||q.renderOpts.collectedExpire>=I.INFINITE_CACHE?void 0:q.renderOpts.collectedExpire;return{value:{kind:N.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:i}}}}catch(t){throw(null==a?void 0:a.isStale)&&await rb.onRequestError(e,t,{routerKind:"App Router",routePath:n,routeType:"route",revalidateReason:(0,E.getRevalidateReason)({isStaticGeneration:F,isOnDemandRevalidate:w})},!1,p),t}},m=await rb.handleResponse({req:e,nextConfig:a,cacheKey:k,routeKind:d.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:c,isRoutePPREnabled:!1,isOnDemandRevalidate:w,revalidateOnlyGenerated:A,responseGenerator:h,waitUntil:r.waitUntil,isMinimalMode:s});if(!D)return null;if((null==m||null==(l=m.value)?void 0:l.kind)!==N.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==m||null==(f=m.value)?void 0:f.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",w?"REVALIDATED":m.isMiss?"MISS":m.isStale?"STALE":"HIT"),u&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let y=(0,b.fromNodeOutgoingHttpHeaders)(m.value.headers);return s&&D||y.delete(I.NEXT_CACHE_TAGS_HEADER),!m.cacheControl||t.getHeader("Cache-Control")||y.get("Cache-Control")||y.set("Cache-Control",(0,S.getCacheControlHeader)(m.cacheControl)),await (0,_.sendResponse)(B,Q,new Response(m.value.body,{headers:y,status:m.value.status||200})),null};K?await o(K):await U.withPropagatedContext(e.headers,()=>U.trace(T.BaseServerSpan.handleRequest,{spanName:`${j} ${n}`,kind:h.SpanKind.SERVER,attributes:{"http.method":j,"http.target":e.url}},o))}catch(t){if(t instanceof O.NoFallbackError||await rb.onRequestError(e,t,{routerKind:"App Router",routePath:L,routeType:"route",revalidateReason:(0,E.getRevalidateReason)({isStaticGeneration:F,isOnDemandRevalidate:w})},!1,p),D)throw t;return await (0,_.sendResponse)(B,Q,new Response(null,{status:500})),null}}e.s(["handler",()=>rw,"patchFetch",()=>rN,"routeModule",()=>rb,"serverHooks",()=>rO,"workAsyncStorage",()=>rS,"workUnitAsyncStorage",()=>rI],39943)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__35087fe8._.js.map