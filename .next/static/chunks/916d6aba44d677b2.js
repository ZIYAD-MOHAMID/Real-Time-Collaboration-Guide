(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67034,(e,t,r)=>{var n={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,s=l(e),o=s[0],a=s[1],c=new i((o+a)*3/4-a),u=0,h=a>0?o-4:o;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=0,a=n-i;o<a;o+=16383)s.push(function(e,t,n){for(var i,s=[],o=t;o<n;o+=3)i=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(r[i>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}(e,o,o+16383>a?a:o+16383));return 1===i?s.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&s.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n[45]=62,n[95]=63},72:function(e,t,r){"use strict";var n=r(675),i=r(783),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return u(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e){var n=e,i=t;if(("string"!=typeof i||""===i)&&(i="utf8"),!a.isEncoding(i))throw TypeError("Unknown encoding: "+i);var s=0|f(n,i),l=o(s),c=l.write(n,i);return c!==s&&(l=l.slice(0,c)),l}if(ArrayBuffer.isView(e))return h(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(T(e,ArrayBuffer)||e&&T(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(T(e,SharedArrayBuffer)||e&&T(e.buffer,SharedArrayBuffer)))return function(e,t,r){var n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),a.prototype),n}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var u=e.valueOf&&e.valueOf();if(null!=u&&u!==e)return a.from(u,t,r);var p=function(e){if(a.isBuffer(e)){var t=0|d(e.length),r=o(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?o(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(p)return p;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),o(e<0?0:0|d(e))}function h(e){for(var t=e.length<0?0:0|d(e.length),r=o(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}t.Buffer=a,t.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,r){return(c(e),e<=0)?o(e):void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)},a.allocUnsafe=function(e){return u(e)},a.allocUnsafeSlow=function(e){return u(e)};function d(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||T(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return _(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return C(e).length;default:if(i)return n?-1:_(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,r){var i,s,o,a=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=I[e[s]];return i}(this,t,r);case"utf8":case"utf-8":return b(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return i=this,s=t,o=r,0===s&&o===i.length?n.fromByteArray(i):n.fromByteArray(i.slice(s,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}(this,t,r);default:if(a)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function g(e,t,r,n,i){var s;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(s=r*=1)!=s&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(i)return -1;else r=e.length-1;else if(r<0)if(!i)return -1;else r=0;if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return y(e,[t],r,n,i)}throw TypeError("val must be string, number or Buffer")}function y(e,t,r,n,i){var s,o=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;o=2,a/=2,l/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var u=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===l)return u*o}else -1!==u&&(s-=s-u),u=-1}else for(r+l>a&&(r=a-l),s=r;s>=0;s--){for(var h=!0,d=0;d<l;d++)if(c(e,s+d)!==c(t,d)){h=!1;break}if(h)return s}return -1}a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(T(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),T(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:+(n<r)},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,n=a.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(T(s,Uint8Array)&&(s=a.from(s)),!a.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},a.byteLength=f,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?b(this,0,e):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(e,t,r,n,i){if(T(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var s=i-n,o=r-t,l=Math.min(s,o),c=this.slice(n,i),u=e.slice(t,r),h=0;h<l;++h)if(c[h]!==u[h]){s=c[h],o=u[h];break}return s<o?-1:+(o<s)},a.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)};function b(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,o,a,l,c=e[i],u=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=r)switch(h){case 1:c<128&&(u=c);break;case 2:(192&(s=e[i+1]))==128&&(l=(31&c)<<6|63&s)>127&&(u=l);break;case 3:s=e[i+1],o=e[i+2],(192&s)==128&&(192&o)==128&&(l=(15&c)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(l=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=h}var d=n,f=d.length;if(f<=4096)return String.fromCharCode.apply(String,d);for(var p="",m=0;m<f;)p+=String.fromCharCode.apply(String,d.slice(m,m+=4096));return p}function v(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function x(e,t,r,n,i,s){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function w(e,t,r,n,i,s){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function k(e,t,r,n,s){return t*=1,r>>>=0,s||w(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function E(e,t,r,n,s){return t*=1,r>>>=0,s||w(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}a.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,s,o,a,l,c,u,h,d=this.length-t;if((void 0===r||r>d)&&(r=d),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var f=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a,l=parseInt(t.substr(2*o,2),16);if((a=l)!=a)break;e[r+o]=l}return o}(this,e,t,r);case"utf8":case"utf-8":return i=t,s=r,O(_(e,this.length-i),this,i,s);case"ascii":return o=t,a=r,O(N(e),this,o,a);case"latin1":case"binary":return function(e,t,r,n){return O(N(t),e,r,n)}(this,e,t,r);case"base64":return l=t,c=r,O(C(e),this,l,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=t,h=r,O(function(e,t){for(var r,n,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i.push(r%256),i.push(n);return i}(e,this.length-u),this,u,h);default:if(f)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},a.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},a.prototype.readInt8=function(e,t){return(e>>>=0,t||v(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),i.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),i.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),i.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),i.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;x(this,e,t,r,i,0)}var s=1,o=0;for(this[t]=255&e;++o<r&&(s*=256);)this[t+o]=e/s&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;x(this,e,t,r,i,0)}var s=r-1,o=1;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=e/o&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){var i=Math.pow(2,8*r-1);x(this,e,t,r,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){var i=Math.pow(2,8*r-1);x(this,e,t,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return E(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return E(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var s=i-1;s>=0;--s)e[s+t]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},a.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){var i,s=e.charCodeAt(0);("utf8"===n&&s<128||"latin1"===n)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=a.isBuffer(e)?e:a.from(e,n),l=o.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%l]}return this};var S=/[^+/0-9A-Za-z-_]/g;function _(e,t){t=t||1/0;for(var r,n=e.length,i=null,s=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319||o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function N(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function C(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(S,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function O(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function T(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var I=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},783:function(e,t){t.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,l=(1<<a)-1,c=l>>1,u=-7,h=r?i-1:0,d=r?-1:1,f=e[t+h];for(h+=d,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=256*s+e[t+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=256*o+e[t+h],h+=d,u-=8);if(0===s)s=1-c;else{if(s===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),s-=c}return(f?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,a,l,c=8*s-i-1,u=(1<<c)-1,h=u>>1,d=5960464477539062e-23*(23===i),f=n?0:s-1,p=n?1:-1,m=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(a=+!!isNaN(t),o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(t*l-1)*Math.pow(2,i),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[r+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;e[r+f]=255&o,f+=p,o/=256,c-=8);e[r+f-p]|=128*m}}},i={};function s(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}},o=!0;try{n[e](r,r.exports,s),o=!1}finally{o&&delete i[e]}return r.exports}s.ab="/ROOT/node_modules/next/dist/compiled/buffer/",t.exports=s(72)},30257,e=>{"use strict";let t,r,n,i,s,o,a,l;var c,u,h,d,f,p,m,g,y,b,v,x,w,k,E=e.i(43476),S=e.i(71645),_=e.i(17255),N=e.i(18566);class C{constructor(e,t,r){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=r}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class O{constructor(e,t,r,n,i,s){this.kind=e,this.start=t,this.end=r,this.line=n,this.column=i,this.value=s,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}let T={Name:[],Document:["definitions"],OperationDefinition:["description","name","variableDefinitions","directives","selectionSet"],VariableDefinition:["description","variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["description","name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"],TypeCoordinate:["name"],MemberCoordinate:["name","memberName"],ArgumentCoordinate:["name","fieldName","argumentName"],DirectiveCoordinate:["name"],DirectiveArgumentCoordinate:["name","argumentName"]},I=new Set(Object.keys(T));function D(e){let t=null==e?void 0:e.kind;return"string"==typeof t&&I.has(t)}function j(e){return"function"==typeof e}function A(e){return function(t){if(j(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}(c=g||(g={})).QUERY="query",c.MUTATION="mutation",c.SUBSCRIPTION="subscription";var R=function(e,t){return(R=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function M(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}R(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var L=function(){return(L=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function F(e,t){var r,n,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){var c=[a,l];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,n=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){s=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(6===c[0]&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=t.call(e,s)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function P(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function B(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function V(e){return this instanceof V?(this.v=e,this):new V(e)}function q(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}"function"==typeof SuppressedError&&SuppressedError;var z=q(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}});function W(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var $=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,r,n,i,s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var o=P(s),a=o.next();!a.done;a=o.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else s.remove(this);var l=this.initialTeardown;if(j(l))try{l()}catch(e){i=e instanceof z?e.errors:[e]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var u=P(c),h=u.next();!h.done;h=u.next()){var d=h.value;try{H(d)}catch(e){i=null!=i?i:[],e instanceof z?i=B(B([],U(i)),U(e.errors)):i.push(e)}}}catch(e){r={error:e}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}if(i)throw new z(i)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)H(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(r=this._finalizers)?r:[]).push(e)}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&W(t,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&W(r,e),e instanceof t&&e._removeParent(this)},(e=new t).closed=!0,t.EMPTY=e,t}(),Q=$.EMPTY;function K(e){return e instanceof $||e&&"closed"in e&&j(e.remove)&&j(e.add)&&j(e.unsubscribe)}function H(e){j(e)?e():e.unsubscribe()}var G=void 0,J={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=J.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,B([e,t],U(r))):setTimeout.apply(void 0,B([e,t],U(r)))},clearTimeout:function(e){var t=J.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Y(e){J.setTimeout(function(){!1;throw e})}function X(){}var Z=ee("C",void 0,void 0);function ee(e,t,r){return{kind:e,value:t,error:r}}var et=null;function er(e){var t,r,n,i;1;e()}var en=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,K(t)&&t.add(r)):r.destination=eu,r}return M(t,e),t.create=function(e,t,r){return new ea(e,t,r)},t.prototype.next=function(e){this.isStopped?ec(ee("N",e,void 0),this):this._next(e)},t.prototype.error=function(e){this.isStopped?ec(ee("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?ec(Z,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}($),ei=Function.prototype.bind;function es(e,t){return ei.call(e,t)}var eo=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){el(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){el(e)}else el(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){el(e)}},e}(),ea=function(e){function t(t,r,n){var i,s,o=e.call(this)||this;return j(t)||!t?i={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:i=t,o.destination=new eo(i),o}return M(t,e),t}(en);function el(e){1;Y(e)}function ec(e,t){}var eu={closed:!0,next:X,error:function(e){throw e},complete:X};function eh(e,t,r,n,i){return new ed(e,t,r,n,i)}var ed=function(e){function t(t,r,n,i,s,o){var a=e.call(this,t)||this;return a.onFinalize=s,a.shouldUnsubscribe=o,a._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return M(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),r||null==(t=this.onFinalize)||t.call(this)}},t}(en);function ef(e,t){return A(function(r,n){var i=0;r.subscribe(eh(n,function(r){n.next(e.call(t,r,i++))}))})}function ep(e,t){if(!e)throw Error(t)}function em(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return function(e,t){let r;if(null===e)return"null";if(t.includes(e))return"[Circular]";let n=[...t,e];if("function"==typeof e.toJSON){let t=e.toJSON();if(t!==e)return"string"==typeof t?t:em(t,n)}else if(Array.isArray(e)){var i,s,o=e,a=n;if(0===o.length)return"[]";if(a.length>2)return"[Array]";let t=Math.min(10,o.length),r=o.length-t,l=[];for(let e=0;e<t;++e)l.push(em(o[e],a));return 1===r?l.push("... 1 more item"):r>1&&l.push(`... ${r} more items`),"["+l.join(", ")+"]"}return i=e,s=n,0===(r=Object.entries(i)).length?"{}":s.length>2?"["+function(e){let t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){let t=e.constructor.name;if("string"==typeof t&&""!==t)return t}return t}(i)+"]":"{ "+r.map(([e,t])=>e+": "+em(t,s)).join(", ")+" }"}(e,t);default:return String(e)}}(u=y||(y={})).NAME="Name",u.DOCUMENT="Document",u.OPERATION_DEFINITION="OperationDefinition",u.VARIABLE_DEFINITION="VariableDefinition",u.SELECTION_SET="SelectionSet",u.FIELD="Field",u.ARGUMENT="Argument",u.FRAGMENT_SPREAD="FragmentSpread",u.INLINE_FRAGMENT="InlineFragment",u.FRAGMENT_DEFINITION="FragmentDefinition",u.VARIABLE="Variable",u.INT="IntValue",u.FLOAT="FloatValue",u.STRING="StringValue",u.BOOLEAN="BooleanValue",u.NULL="NullValue",u.ENUM="EnumValue",u.LIST="ListValue",u.OBJECT="ObjectValue",u.OBJECT_FIELD="ObjectField",u.DIRECTIVE="Directive",u.NAMED_TYPE="NamedType",u.LIST_TYPE="ListType",u.NON_NULL_TYPE="NonNullType",u.SCHEMA_DEFINITION="SchemaDefinition",u.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",u.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",u.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",u.FIELD_DEFINITION="FieldDefinition",u.INPUT_VALUE_DEFINITION="InputValueDefinition",u.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",u.UNION_TYPE_DEFINITION="UnionTypeDefinition",u.ENUM_TYPE_DEFINITION="EnumTypeDefinition",u.ENUM_VALUE_DEFINITION="EnumValueDefinition",u.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",u.DIRECTIVE_DEFINITION="DirectiveDefinition",u.SCHEMA_EXTENSION="SchemaExtension",u.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",u.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",u.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",u.UNION_TYPE_EXTENSION="UnionTypeExtension",u.ENUM_TYPE_EXTENSION="EnumTypeExtension",u.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension",u.TYPE_COORDINATE="TypeCoordinate",u.MEMBER_COORDINATE="MemberCoordinate",u.ARGUMENT_COORDINATE="ArgumentCoordinate",u.DIRECTIVE_COORDINATE="DirectiveCoordinate",u.DIRECTIVE_ARGUMENT_COORDINATE="DirectiveArgumentCoordinate";let eg=Object.freeze({});function ey(e,t,r=T){let n,i,s,o=new Map;for(let e of Object.values(y))o.set(e,function(e,t){let r=e[t];return"object"==typeof r?r:"function"==typeof r?{enter:r,leave:void 0}:{enter:e.enter,leave:e.leave}}(t,e));let a=Array.isArray(e),l=[e],c=-1,u=[],h=e,d=[],f=[];do{var p,m,g;let e,y=++c===l.length,b=y&&0!==u.length;if(y){if(i=0===f.length?void 0:d[d.length-1],h=s,s=f.pop(),b)if(a){h=h.slice();let e=0;for(let[t,r]of u){let n=t-e;null===r?(h.splice(n,1),e++):h[n]=r}}else for(let[e,t]of(h={...h},u))h[e]=t;c=n.index,l=n.keys,u=n.edits,a=n.inArray,n=n.prev}else if(s){if(null==(h=s[i=a?c:l[c]]))continue;d.push(i)}if(!Array.isArray(h)){D(h)||ep(!1,`Invalid AST Node: ${em(h,[])}.`);let r=y?null==(p=o.get(h.kind))?void 0:p.leave:null==(m=o.get(h.kind))?void 0:m.enter;if((e=null==r?void 0:r.call(t,h,i,s,d,f))===eg)break;if(!1===e){if(!y){d.pop();continue}}else if(void 0!==e&&(u.push([i,e]),!y))if(D(e))h=e;else{d.pop();continue}}void 0===e&&b&&u.push([i,h]),y?d.pop():(n={inArray:a,index:c,keys:l,edits:u,prev:n},l=(a=Array.isArray(h))?h:null!=(g=r[h.kind])?g:[],c=-1,u=[],s&&f.push(s),s=h)}while(void 0!==n)return 0!==u.length?u[u.length-1][1]:e}function eb(e,t,r){let n=new Set(e),i=n.size;return ey(t,{Directive(e){if(n.delete(e.name.value)&&(!r||!n.size))return eg}}),r?!n.size:n.size<i}function ev(e){try{return e()}catch{}}let ex=ev(()=>globalThis)||ev(()=>window)||ev(()=>self)||ev(()=>e.g)||ev(function(){return ev.constructor("return this")()}),ew="4.0.11",ek=new Map;function eE(e){let t=ek.get(e)||1;return ek.set(e,t+1),`${e}:${t}:${Math.random().toString(36).slice(2)}`}let eS="Invariant Violation";class e_ extends Error{constructor(e=eS){super(e),this.name=eS,Object.setPrototypeOf(this,e_.prototype)}}let eN=["debug","log","warn","error","silent"],eC=eN.indexOf("silent");function eO(e,...t){if(!e)throw eI(...t)}function eT(e){return function(t,...r){if(eN.indexOf(e)>=eC){let n=console[e]||console.log;if("number"==typeof t){let e=t;(t=eA(e))||(t=eR(e,r),r=[])}n(t,...r)}}}function eI(e,...t){return new e_(eA(e,t)||eR(e,t))}eO.debug=eT("debug"),eO.log=eT("log"),eO.warn=eT("warn"),eO.error=eT("error");let eD=Symbol.for("ApolloErrorMessageHandler_"+ew);function ej(e){if("string"==typeof e)return e;try{return(function(e,t=0){let r=eE("stringifyForDisplay");return JSON.stringify(e,(e,t)=>void 0===t?r:t,t).split(JSON.stringify(r)).join("<undefined>")})(e,2).slice(0,1e3)}catch{return"<non-serializable>"}}function eA(e,t=[]){if(e)return ex[eD]&&ex[eD](e,t.map(ej))}function eR(e,t=[]){if(e)return"string"==typeof e?t.reduce((e,t)=>e.replace(/%[sdfo]/,ej(t)),e):`An error occurred! For more details, see the full error text at https://go.apollo.dev/c/err#${encodeURIComponent(JSON.stringify({version:ew,message:e,args:t.map(ej)}))}`}class eM{isIncrementalResult(e){return!1}prepareRequest(e){return eO(!eb(["defer"],e.query),64),e}extractErrors(){}startRequest=void 0}var eL="function"==typeof Symbol&&Symbol.observable||"@@observable";function eF(e){return e}var eP=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this,i=!function(e){return e&&e instanceof en||e&&j(e.next)&&j(e.error)&&j(e.complete)&&K(e)}(e)?new ea(e,t,r):e;return er(function(){var e=n.operator,t=n.source;i.add(e?e.call(i,t):t?n._subscribe(i):n._trySubscribe(i))}),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=eU(t))(function(t,n){var i=new ea({next:function(t){try{e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:t});r.subscribe(i)})},e.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},e.prototype[eL]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?eF:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=eU(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function eU(e){var t;return null!=(t=null!=e?e:G)?t:Promise}var eB=new eP(function(e){return e.complete()});let eV={...ex[Symbol.for("apollo.cacheSize")]};function eq(e,t){return e.definitions.find(e=>"OperationDefinition"===e.kind&&!!e.name)?.name.value??t}let ez=()=>Object.create(null),{forEach:eW,slice:e$}=Array.prototype,{hasOwnProperty:eQ}=Object.prototype;class eK{constructor(e=!0,t=ez){this.weakness=e,this.makeData=t}lookup(){return this.lookupArray(arguments)}lookupArray(e){let t=this;return eW.call(e,e=>t=t.getChildTrie(e)),eQ.call(t,"data")?t.data:t.data=this.makeData(e$.call(e))}peek(){return this.peekArray(arguments)}peekArray(e){let t=this;for(let r=0,n=e.length;t&&r<n;++r){let n=t.mapFor(e[r],!1);t=n&&n.get(e[r])}return t&&t.data}remove(){return this.removeArray(arguments)}removeArray(e){let t;if(e.length){let r=e[0],n=this.mapFor(r,!1),i=n&&n.get(r);i&&(t=i.removeArray(e$.call(e,1)),i.data||i.weak||i.strong&&i.strong.size||n.delete(r))}else t=this.data,delete this.data;return t}getChildTrie(e){let t=this.mapFor(e,!0),r=t.get(e);return r||t.set(e,r=new eK(this.weakness,this.makeData)),r}mapFor(e,t){return this.weakness&&function(e){switch(typeof e){case"object":if(null===e)break;case"function":return!0}return!1}(e)?this.weak||(t?this.weak=new WeakMap:void 0):this.strong||(t?this.strong=new Map:void 0)}}function eH(){}class eG{constructor(e=1/0,t=eH){this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}has(e){return this.map.has(e)}get(e){let t=this.getNode(e);return t&&t.value}get size(){return this.map.size}getNode(e){let t=this.map.get(e);if(t&&t!==this.newest){let{older:e,newer:r}=t;r&&(r.older=e),e&&(e.newer=r),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=r)}return t}set(e,t){let r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(e,r),r.value)}clean(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)}delete(e){let t=this.map.get(e);return!!t&&(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0)}}function eJ(){}let eY="undefined"!=typeof WeakRef?WeakRef:function(e){return{deref:()=>e}},eX="undefined"!=typeof WeakMap?WeakMap:Map,eZ="undefined"!=typeof FinalizationRegistry?FinalizationRegistry:function(){return{register:eJ,unregister:eJ}};class e0{constructor(e=1/0,t=eJ){this.max=e,this.dispose=t,this.map=new eX,this.newest=null,this.oldest=null,this.unfinalizedNodes=new Set,this.finalizationScheduled=!1,this.size=0,this.finalize=()=>{let e=this.unfinalizedNodes.values();for(let t=0;t<10024;t++){let t=e.next().value;if(!t)break;this.unfinalizedNodes.delete(t);let r=t.key;delete t.key,t.keyRef=new eY(r),this.registry.register(r,t,t)}this.unfinalizedNodes.size>0?queueMicrotask(this.finalize):this.finalizationScheduled=!1},this.registry=new eZ(this.deleteNode.bind(this))}has(e){return this.map.has(e)}get(e){let t=this.getNode(e);return t&&t.value}getNode(e){let t=this.map.get(e);if(t&&t!==this.newest){let{older:e,newer:r}=t;r&&(r.older=e),e&&(e.newer=r),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=r)}return t}set(e,t){let r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.scheduleFinalization(r),this.map.set(e,r),this.size++,r.value)}clean(){for(;this.oldest&&this.size>this.max;)this.deleteNode(this.oldest)}deleteNode(e){e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.size--;let t=e.key||e.keyRef&&e.keyRef.deref();this.dispose(e.value,t),e.keyRef?this.registry.unregister(e):this.unfinalizedNodes.delete(e),t&&this.map.delete(t)}delete(e){let t=this.map.get(e);return!!t&&(this.deleteNode(t),!0)}scheduleFinalization(e){this.unfinalizedNodes.add(e),this.finalizationScheduled||(this.finalizationScheduled=!0,queueMicrotask(this.finalize))}}let e1=new WeakSet;function e2(e){!(e.size<=(e.max||-1))&&(e1.has(e)||(e1.add(e),setTimeout(()=>{e.clean(),e1.delete(e)},100)))}let e4=function(e,t){let r=new e0(e,t);return r.set=function(e,t){let r=e0.prototype.set.call(this,e,t);return e2(this),r},r},e3=function(e,t){let r=new eG(e,t);return r.set=function(e,t){let r=eG.prototype.set.call(this,e,t);return e2(this),r},r},e5=function(e,{max:t}){let r=new eK(!0),n=new e4(t);return(...t)=>{let i=r.lookupArray(t),s=n.get(i);if(s){if(s.error)throw s.error;return s.result}let o=n.set(i,{});try{return o.result=e(...t)}catch(e){throw o.error=e,e}}}((e,t)=>{eO(e&&"Document"===e.kind,1);let r=e.definitions.filter(e=>"OperationDefinition"===e.kind);t&&eO(1==r.length&&r[0].operation===t,4,t,t,r[0].operation),ey(e,{Field(t,n,i,s){if(t.alias&&("__typename"===t.alias.value||t.alias.value.startsWith("__ac_"))&&t.alias.value!==t.name.value){let n=e,i=[];for(let e of s)(n=n[e]).kind===y.FIELD&&i.push(n.alias?.value||n.name.value);throw i.splice(-1,1,t.name.value),eI(5,t.alias.value,i.join("."),r[0].operation,eq(e,"(anonymous)"))}}})},{max:eV.checkDocument||2e3});function e8(e){return e5(e),e.definitions.filter(e=>"OperationDefinition"===e.kind)[0]}class e6{static empty(){return new e6(()=>eB)}static from(e){if(0===e.length)return e6.empty();let[t,...r]=e;return t.concat(...r)}static split(e,t,r=new e6((e,t)=>t(e))){return Object.assign(new e6((n,i)=>e(n)?t.request(n,i):r.request(n,i)),{left:t,right:r})}static execute(e,t,r){return e.request(function(e,{client:t}){let r={query:e.query,variables:e.variables||{},extensions:e.extensions||{},operationName:eq(e.query),operationType:e8(e.query).operation},n={...e.context},i=()=>Object.freeze({...n});return Object.defineProperty(r,"setContext",{enumerable:!1,value:e=>{n="function"==typeof e?{...n,...e(i())}:{...n,...e}}}),Object.defineProperty(r,"getContext",{enumerable:!1,value:i}),Object.defineProperty(r,"client",{enumerable:!1,value:t}),r}(t,r),()=>eB)}static concat(...e){return e6.from(e)}constructor(e){e&&(this.request=e)}split(e,t,r){return this.concat(e6.split(e,t,r))}concat(...e){return 0===e.length?this:e.reduce(this.combine.bind(this),this)}combine(e,t){return Object.assign(new e6((r,n)=>e.request(r,e=>t.request(e,n))),{left:e,right:t})}request(e,t){throw eI(63)}left;right}let e9=e6.execute,e7=null,te={},tt=1;function tr(e){try{return e()}catch(e){}}let tn="@wry/context:Slot",ti=tr(()=>globalThis)||tr(()=>e.g)||Object.create(null),ts=ti[tn]||Array[tn]||function(e){try{Object.defineProperty(ti,tn,{value:e,enumerable:!1,writable:!1,configurable:!0})}finally{return e}}(class{constructor(){this.id=["slot",tt++,Date.now(),Math.random().toString(36).slice(2)].join(":")}hasValue(){for(let e=e7;e;e=e.parent)if(this.id in e.slots){let t=e.slots[this.id];if(t===te)break;return e!==e7&&(e7.slots[this.id]=t),!0}return e7&&(e7.slots[this.id]=te),!1}getValue(){if(this.hasValue())return e7.slots[this.id]}withValue(e,t,r,n){let i={__proto__:null,[this.id]:e},s=e7;e7={parent:s,slots:i};try{return t.apply(n,r)}finally{e7=s}}static bind(e){let t=e7;return function(){let r=e7;try{return e7=t,e.apply(this,arguments)}finally{e7=r}}}static noContext(e,t,r){if(!e7)return e.apply(r,t);{let n=e7;try{return e7=null,e.apply(r,t)}finally{e7=n}}}}),{bind:to,noContext:ta}=ts,tl=new ts,{hasOwnProperty:tc}=Object.prototype,tu=Array.from||function(e){let t=[];return e.forEach(e=>t.push(e)),t};function th(e){let{unsubscribe:t}=e;"function"==typeof t&&(e.unsubscribe=void 0,t())}let td=[];function tf(e,t){if(!e)throw Error(t||"assertion failure")}function tp(e,t){let r=e.length;return r>0&&r===t.length&&e[r-1]===t[r-1]}function tm(e){switch(e.length){case 0:throw Error("unknown value");case 1:return e[0];case 2:throw e[1]}}class tg{constructor(e){this.fn=e,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++tg.count}peek(){if(1===this.value.length&&!tv(this))return ty(this),this.value[0]}recompute(e){var t,r,n;return tf(!this.recomputing,"already recomputing"),ty(this),tv(this)?(t=this,r=e,tS(t),tl.withValue(t,tb,[t,r]),function(e,t){if("function"==typeof e.subscribe)try{th(e),e.unsubscribe=e.subscribe.apply(null,t)}catch(t){return e.setDirty(),!1}return!0}(t,r)&&((n=t).dirty=!1,tv(n)||function(e){tx(e,tk)}(n)),tm(t.value)):tm(this.value)}setDirty(){var e;this.dirty||(this.dirty=!0,e=this,tx(e,tw),th(this))}dispose(){this.setDirty(),tS(this),tx(this,(e,t)=>{e.setDirty(),t_(e,this)})}forget(){this.dispose()}dependOn(e){e.add(this),this.deps||(this.deps=td.pop()||new Set),this.deps.add(e)}forgetDeps(){this.deps&&(tu(this.deps).forEach(e=>e.delete(this)),this.deps.clear(),td.push(this.deps),this.deps=null)}}function ty(e){let t=tl.getValue();if(t)return e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),tv(e)?tw(t,e):tk(t,e),t}function tb(e,t){let r;e.recomputing=!0;let{normalizeResult:n}=e;n&&1===e.value.length&&(r=e.value.slice(0)),e.value.length=0;try{if(e.value[0]=e.fn.apply(null,t),n&&r&&!tp(r,e.value))try{e.value[0]=n(e.value[0],r[0])}catch(e){}}catch(t){e.value[1]=t}e.recomputing=!1}function tv(e){return e.dirty||!!(e.dirtyChildren&&e.dirtyChildren.size)}tg.count=0;function tx(e,t){let r=e.parents.size;if(r){let n=tu(e.parents);for(let i=0;i<r;++i)t(n[i],e)}}function tw(e,t){tf(e.childValues.has(t)),tf(tv(t));let r=!tv(e);if(e.dirtyChildren){if(e.dirtyChildren.has(t))return}else e.dirtyChildren=td.pop()||new Set;e.dirtyChildren.add(t),r&&tx(e,tw)}function tk(e,t){tf(e.childValues.has(t)),tf(!tv(t));let r=e.childValues.get(t);0===r.length?e.childValues.set(t,t.value.slice(0)):tp(r,t.value)||e.setDirty(),tE(e,t),tv(e)||tx(e,tk)}function tE(e,t){let r=e.dirtyChildren;r&&(r.delete(t),0===r.size&&(td.length<100&&td.push(r),e.dirtyChildren=null))}function tS(e){e.childValues.size>0&&e.childValues.forEach((t,r)=>{t_(e,r)}),e.forgetDeps(),tf(null===e.dirtyChildren)}function t_(e,t){t.parents.delete(e),e.childValues.delete(t),tE(e,t)}let tN={setDirty:!0,dispose:!0,forget:!0};function tC(e){let t=new Map,r=e&&e.subscribe;function n(e){let n=tl.getValue();if(n){let i=t.get(e);i||t.set(e,i=new Set),n.dependOn(i),"function"==typeof r&&(th(i),i.unsubscribe=r(e))}}return n.dirty=function(e,r){let n=t.get(e);if(n){let i=r&&tc.call(tN,r)?r:"setDirty";tu(n).forEach(e=>e[i]()),t.delete(e),th(n)}},n}function tO(...e){return(t||(t=new eK("function"==typeof WeakMap))).lookupArray(e)}let tT=new Set;function tI(e,{max:t=65536,keyArgs:r,makeCacheKey:n=tO,normalizeResult:i,subscribe:s,cache:o=eG}=Object.create(null)){let a="function"==typeof o?new o(t,e=>e.dispose()):o,l=function(){let t=n.apply(null,r?r.apply(null,arguments):arguments);if(void 0===t)return e.apply(null,arguments);let o=a.get(t);o||(a.set(t,o=new tg(e)),o.normalizeResult=i,o.subscribe=s,o.forget=()=>a.delete(t));let l=o.recompute(Array.prototype.slice.call(arguments));return a.set(t,o),tT.add(a),tl.hasValue()||(tT.forEach(e=>e.clean()),tT.clear()),l};function c(e){let t=e&&a.get(e);t&&t.setDirty()}function u(e){let t=e&&a.get(e);if(t)return t.peek()}function h(e){return!!e&&a.delete(e)}return Object.defineProperty(l,"size",{get:()=>a.size,configurable:!1,enumerable:!1}),Object.freeze(l.options={max:t,keyArgs:r,makeCacheKey:n,normalizeResult:i,subscribe:s,cache:a}),l.dirtyKey=c,l.dirty=function(){c(n.apply(null,arguments))},l.peekKey=u,l.peek=function(){return u(n.apply(null,arguments))},l.forgetKey=h,l.forget=function(){return h(n.apply(null,arguments))},l.makeCacheKey=n,l.getKey=r?function(){return n.apply(null,r.apply(null,arguments))}:n,Object.freeze(l)}function tD(e){return e}class tj{transform;cached;resultCache=new WeakSet;getCacheKey(e){return[e]}static identity(){return new tj(tD,{cache:!1})}static split(e,t,r=tj.identity()){return Object.assign(new tj(n=>(e(n)?t:r).transformDocument(n),{cache:!1}),{left:t,right:r})}constructor(e,t={}){this.transform=e,t.getCacheKey&&(this.getCacheKey=t.getCacheKey),this.cached=!1!==t.cache,this.resetCache()}resetCache(){if(this.cached){let e=new eK;this.performWork=tI(tj.prototype.performWork.bind(this),{makeCacheKey:t=>{let r=this.getCacheKey(t);if(r)return eO(Array.isArray(r),20),e.lookupArray(r)},max:eV["documentTransform.cache"],cache:e0})}}performWork(e){return e5(e),this.transform(e)}transformDocument(e){if(this.resultCache.has(e))return e;let t=this.performWork(e);return this.resultCache.add(t),t}concat(e){return Object.assign(new tj(t=>e.transformDocument(this.transformDocument(t)),{cache:!1}),{left:this,right:e})}left;right}function tA(...e){let t={};return e.forEach(e=>{e&&Object.keys(e).forEach(r=>{let n=e[r];void 0!==n&&(t[r]=n)})}),t}function tR(e,t){return tA(e,t,t.variables&&{variables:tA({...e&&e.variables,...t.variables})})}function tM(e){return ey(e,{FragmentSpread(e){if(!e.directives?.some(({name:e})=>"unmask"===e.value))return null}})}function tL(e,t){var r=j(e)?e:function(){return e},n=function(e){return e.error(r())};return new eP(t?function(e){return t.schedule(n,0,e)}:n)}var tF=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function tP(e){return j(null==e?void 0:e.then)}function tU(e){return Symbol.asyncIterator&&j(null==e?void 0:e[Symbol.asyncIterator])}function tB(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var tV="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function tq(e){return j(null==e?void 0:e[tV])}function tz(e){return function(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),n[Symbol.asyncIterator]=function(){return this},n;function o(e,t){i[e]&&(n[e]=function(t){return new Promise(function(r,n){s.push([e,t,r,n])>1||a(e,t)})},t&&(n[e]=t(n[e])))}function a(e,t){try{var r;(r=i[e](t)).value instanceof V?Promise.resolve(r.value.v).then(l,c):u(s[0][2],r)}catch(e){u(s[0][3],e)}}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function(){var t,r,n;return F(this,function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,V(t.read())];case 3:if(n=(r=i.sent()).value,!r.done)return[3,5];return[4,V(void 0)];case 4:return[2,i.sent()];case 5:return[4,V(n)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function tW(e){return j(null==e?void 0:e.getReader)}function t$(e){if(e instanceof eP)return e;if(null!=e){var t,r,n,i;if(j(e[eL])){return t=e,new eP(function(e){var r=t[eL]();if(j(r.subscribe))return r.subscribe(e);throw TypeError("Provided object does not correctly implement Symbol.observable")})}if(tF(e)){return r=e,new eP(function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}if(tP(e)){return n=e,new eP(function(e){n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,Y)})}if(tU(e))return tQ(e);if(tq(e)){return i=e,new eP(function(e){var t,r;try{for(var n=P(i),s=n.next();!s.done;s=n.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}e.complete()})}if(tW(e))return tQ(tz(e))}throw tB(e)}function tQ(e){return new eP(function(t){(function(e,t){var r,n,i,s,o,a,l,c;return o=this,a=void 0,l=void 0,c=function(){var o;return F(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),r=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=P(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){var s,o,a;s=n,o=i,a=(t=e[r](t)).done,Promise.resolve(t.value).then(function(e){s({value:e,done:a})},o)})}}}(e),a.label=1;case 1:return[4,r.next()];case 2:if((n=a.sent()).done)return[3,4];if(o=n.value,t.next(o),t.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return i={error:a.sent()},[3,11];case 6:if(a.trys.push([6,,9,10]),!(n&&!n.done&&(s=r.return)))return[3,8];return[4,s.call(r)];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})},new(l||(l=Promise))(function(e,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function n(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):((i=t.value)instanceof l?i:new l(function(e){e(i)})).then(r,n)}i((c=c.apply(o,a||[])).next())})})(e,t).catch(function(e){return t.error(e)})})}function tK(e){return A(function(t,r){var n,i=null,s=!1;i=t.subscribe(eh(r,void 0,void 0,function(o){n=t$(e(o,tK(e)(t))),i?(i.unsubscribe(),i=null,n.subscribe(r)):s=!0})),s&&(i.unsubscribe(),i=null,n.subscribe(r))})}function tH(e,t,r,n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var s=t.schedule(function(){r(),i?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(s),!i)return s}function tG(e,t,r){return(void 0===r&&(r=1/0),j(t))?tG(function(r,n){return ef(function(e,i){return t(r,e,n,i)})(t$(e(r,n)))},r):("number"==typeof t&&(r=t),A(function(t,n){var i,s,o,a,l,c,u,h;return i=r,s=[],o=0,a=0,l=!1,c=function(){!l||s.length||o||n.complete()},u=function(e){return o<i?h(e):s.push(e)},h=function(t){o++;var r=!1;t$(e(t,a++)).subscribe(eh(n,function(e){n.next(e)},function(){r=!0},void 0,function(){if(r)try{for(o--;s.length&&o<i;)!function(){var e=s.shift();h(e)}();c()}catch(e){n.error(e)}}))},t.subscribe(eh(n,u,function(){l=!0,c()})),function(){}}))}function tJ(e){var t;return(t=e[e.length-1])&&j(t.schedule)?e.pop():void 0}function tY(e,t){return void 0===t&&(t=0),A(function(r,n){r.subscribe(eh(n,function(r){return tH(n,e,function(){return n.next(r)},t)},function(){return tH(n,e,function(){return n.complete()},t)},function(r){return tH(n,e,function(){return n.error(r)},t)}))})}function tX(e,t){return void 0===t&&(t=0),A(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}function tZ(e,t){if(!e)throw Error("Iterable cannot be null");return new eP(function(r){tH(r,t,function(){var n=e[Symbol.asyncIterator]();tH(r,t,function(){n.next().then(function(e){e.done?r.complete():r.next(e.value)})},0,!0)})})}function t0(e,t){return t?function(e,t){if(null!=e){if(j(e[eL]))return t$(e).pipe(tX(t),tY(t));if(tF(e))return new eP(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})});if(tP(e))return t$(e).pipe(tX(t),tY(t));if(tU(e))return tZ(e,t);if(tq(e))return new eP(function(r){var n;return tH(r,t,function(){n=e[tV](),tH(r,t,function(){var e,t,i;try{t=(e=n.next()).value,i=e.done}catch(e){r.error(e);return}i?r.complete():r.next(t)},0,!0)}),function(){return j(null==n?void 0:n.return)&&n.return()}});if(tW(e))return tZ(tz(e),t)}throw tB(e)}(e,t):t$(e)}function t1(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return tG(eF,1)(t0(e,tJ(e)))}var t2=q(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function t4(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=tJ(e);return t0(e,r)}(h=b||(b={})).NEXT="N",h.ERROR="E",h.COMPLETE="C";var t3=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){return function(e,t){var r,n,i,s=e.kind,o=e.value,a=e.error;if("string"!=typeof s)throw TypeError('Invalid notification, missing "kind"');"N"===s?null==(r=t.next)||r.call(t,o):"E"===s?null==(n=t.error)||n.call(t,a):null==(i=t.complete)||i.call(t)}(this,e)},e.prototype.do=function(e,t,r){var n=this.kind,i=this.value,s=this.error;return"N"===n?null==e?void 0:e(i):"E"===n?null==t?void 0:t(s):null==r?void 0:r()},e.prototype.accept=function(e,t,r){return j(null==e?void 0:e.next)?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){var e=this.kind,t=this.value,r=this.error,n="N"===e?t4(t):"E"===e?tL(function(){return r}):"C"===e?eB:0;if(!n)throw TypeError("Unexpected notification kind "+e);return n},e.createNext=function(t){return new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e}(),t5=q(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),t8=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return M(t,e),t.prototype.lift=function(e){var t=new t6(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new t5},t.prototype.next=function(e){var t=this;er(function(){var r,n;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=P(t.currentObservers),s=i.next();!s.done;s=i.next())s.value.next(e)}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}})},t.prototype.error=function(e){var t=this;er(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}})},t.prototype.complete=function(){var e=this;er(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null==(e=this.observers)?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this.hasError,n=this.isStopped,i=this.observers;return r||n?Q:(this.currentObservers=null,i.push(e),new $(function(){t.currentObservers=null,W(i,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this.thrownError,n=this.isStopped;t?e.error(r):n&&e.complete()},t.prototype.asObservable=function(){var e=new eP;return e.source=this,e},t.create=function(e,t){return new t6(e,t)},t}(eP),t6=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return M(t,e),t.prototype.next=function(e){var t,r;null==(r=null==(t=this.destination)?void 0:t.next)||r.call(t,e)},t.prototype.error=function(e){var t,r;null==(r=null==(t=this.destination)?void 0:t.error)||r.call(t,e)},t.prototype.complete=function(){var e,t;null==(t=null==(e=this.destination)?void 0:e.complete)||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!=(r=null==(t=this.source)?void 0:t.subscribe(e))?r:Q},t}(t8);function t9(e){void 0===e&&(e={});var t=e.connector,r=void 0===t?function(){return new t8}:t,n=e.resetOnError,i=void 0===n||n,s=e.resetOnComplete,o=void 0===s||s,a=e.resetOnRefCountZero,l=void 0===a||a;return function(e){var t,n,s,a=0,c=!1,u=!1,h=function(){null==n||n.unsubscribe(),n=void 0},d=function(){h(),t=s=void 0,c=u=!1},f=function(){var e=t;d(),null==e||e.unsubscribe()};return A(function(e,p){a++,u||c||h();var m=s=null!=s?s:r();p.add(function(){0!=--a||u||c||(n=t7(f,l))}),m.subscribe(p),!t&&a>0&&(t=new ea({next:function(e){return m.next(e)},error:function(e){u=!0,h(),n=t7(d,i,e),m.error(e)},complete:function(){c=!0,h(),n=t7(d,o),m.complete()}}),t$(e).subscribe(t))})(e)}}function t7(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(!0===t)return void e();if(!1!==t){var i=new ea({next:function(){i.unsubscribe(),e()}});return t$(t.apply(void 0,B([],U(r)))).subscribe(i)}}var re={now:function(){return(re.delegate||Date).now()},delegate:void 0},rt=function(e){function t(t,r,n){void 0===t&&(t=1/0),void 0===r&&(r=1/0),void 0===n&&(n=re);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=r,i._timestampProvider=n,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=r===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,r),i}return M(t,e),t.prototype.next=function(t){var r=this.isStopped,n=this._buffer,i=this._infiniteTimeWindow,s=this._timestampProvider,o=this._windowTime;!r&&(n.push(t),i||n.push(s.now()+o)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),r=this._infiniteTimeWindow,n=this._buffer.slice(),i=0;i<n.length&&!e.closed;i+=r?1:2)e.next(n[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this._bufferSize,t=this._timestampProvider,r=this._buffer,n=this._infiniteTimeWindow,i=(n?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!n){for(var s=t.now(),o=0,a=1;a<r.length&&r[a]<=s;a+=2)o=a;o&&r.splice(0,o+1)}},t}(t8);function rr(e,t,r){var n=j(e)||t||r?{next:e,error:t,complete:r}:e;return n?A(function(e,t){null==(r=n.subscribe)||r.call(n);var r,i=!0;e.subscribe(eh(t,function(e){var r;null==(r=n.next)||r.call(n,e),t.next(e)},function(){var e;i=!1,null==(e=n.complete)||e.call(n),t.complete()},function(e){var r;i=!1,null==(r=n.error)||r.call(n,e),t.error(e)},function(){var e,t;i&&(null==(e=n.unsubscribe)||e.call(n)),null==(t=n.finalize)||t.call(n)}))}):eF}let rn=Object.assign(function(e){return JSON.stringify(e,ri)},{reset(){r=new e3(eV.canonicalStringify||1e3)}});function ri(e,t){if(t&&"object"==typeof t){let e=Object.getPrototypeOf(t);if(e===Object.prototype||null===e){let n=Object.keys(t);if(n.every(rs))return t;let i=JSON.stringify(n),s=r.get(i);if(!s){n.sort();let e=JSON.stringify(n);s=r.get(e)||n,r.set(i,s),r.set(e,s)}let o=Object.create(e);return s.forEach(e=>{o[e]=t[e]}),o}}return t}function rs(e,t,r){return 0===t||r[t-1]<=e}function ro(e,t){return"object"==typeof e&&null!==e&&e[Symbol.for("apollo.error")]===t}function ra(e){Object.defineProperty(e,Symbol.for("apollo.error"),{value:e.name,enumerable:!1,writable:!1,configurable:!1})}function rl(e){return e.filter(e=>e).map(e=>e.message||"Error message not found.").join("\n")}rn.reset();class rc extends Error{static is(e){return ro(e,"CombinedGraphQLErrors")}static formatMessage=rl;errors;data;extensions;constructor(e,t=e.errors||[]){super(rc.formatMessage(t,{result:e,defaultFormatMessage:rl})),this.errors=t,this.data=e.data,this.extensions=e.extensions,this.name="CombinedGraphQLErrors",ra(this),Object.setPrototypeOf(this,rc.prototype)}}function ru(e){return e.map(e=>e.message||"Error message not found.").join("\n")}class rh extends Error{static is(e){return ro(e,"CombinedProtocolErrors")}static formatMessage=ru;errors;constructor(e){super(rh.formatMessage(e,{defaultFormatMessage:ru})),this.name="CombinedProtocolErrors",this.errors=e,ra(this),Object.setPrototypeOf(this,rh.prototype)}}class rd extends Error{static is(e){return ro(e,"UnconventionalError")}constructor(e){super("An error of unexpected shape occurred.",{cause:e}),this.name="UnconventionalError",ra(this),Object.setPrototypeOf(this,rd.prototype)}}let rf=Symbol(),rp=new WeakSet,{toString:rm,hasOwnProperty:rg}=Object.prototype,ry=Function.prototype.toString,rb=new Map;function rv(e,t){try{return function e(t,r){if(t===r)return!0;let n=rm.call(t);if(n!==rm.call(r))return!1;switch(n){case"[object Array]":if(t.length!==r.length)break;case"[object Object]":{if(rE(t,r))return!0;let n=rx(t),i=rx(r),s=n.length;if(s!==i.length)return!1;for(let e=0;e<s;++e)if(!rg.call(r,n[e]))return!1;for(let i=0;i<s;++i){let s=n[i];if(!e(t[s],r[s]))return!1}return!0}case"[object Error]":return t.name===r.name&&t.message===r.message;case"[object Number]":if(t!=t)return r!=r;case"[object Boolean]":case"[object Date]":return+t==+r;case"[object RegExp]":case"[object String]":return t==`${r}`;case"[object Map]":case"[object Set]":{if(t.size!==r.size)return!1;if(rE(t,r))return!0;let i=t.entries(),s="[object Map]"===n;for(;;){let t=i.next();if(t.done)break;let[n,o]=t.value;if(!r.has(n)||s&&!e(o,r.get(n)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":t=new Uint8Array(t),r=new Uint8Array(r);case"[object DataView]":{let e=t.byteLength;if(e===r.byteLength)for(;e--&&t[e]===r[e];);return -1===e}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{var i,s;let e,n=ry.call(t);if(n!==ry.call(r))return!1;return i=n,s=rk,!((e=i.length-s.length)>=0)||i.indexOf(s,e)!==e}}return!1}(e,t)}finally{rb.clear()}}function rx(e){return Object.keys(e).filter(rw,e)}function rw(e){return void 0!==this[e]}let rk="{ [native code] }";function rE(e,t){let r=rb.get(e);if(r){if(r.has(t))return!0}else rb.set(e,r=new Set);return r.add(t),!1}function rS(e=[]){let t={};return e.forEach(e=>{t[e.name.value]=e}),t}function r_(e){return e.definitions.filter(e=>"FragmentDefinition"===e.kind)}function rN(e){return null!==e&&"object"==typeof e}function rC(e){return e.alias?e.alias.value:e.name.value}let rO=new ts;function rT(e,t,r){return rO.withValue(!0,()=>{let n=function e(t,r,n,i,s){let{knownChanged:o}=n,a=function(e,t){if(t.has(e))return t.get(e);let r=Array.isArray(e)?[]:{};return t.set(e,r),r}(t,n.mutableTargets);if(Array.isArray(t)){for(let[s,l]of Array.from(t.entries())){if(null===l){a[s]=null;continue}let t=e(l,r,n,i,void 0);o.has(t)&&o.add(a),a[s]=t}return o.has(a)?a:t}for(let l of r.selections){let r;if(i&&o.add(a),l.kind===y.FIELD){let s=rC(l),c=l.selectionSet;if(void 0===(r=a[s]||t[s]))continue;if(c&&null!==r){let a=e(t[s],c,n,i,void 0);o.has(a)&&(r=a)}a[s]=r}if(l.kind===y.INLINE_FRAGMENT&&(!l.typeCondition||n.cache.fragmentMatches(l,t.__typename))&&(r=e(t,l.selectionSet,n,i,s)),l.kind===y.FRAGMENT_SPREAD){let i=l.name.value,o=n.fragmentMap[i]||(n.fragmentMap[i]=n.cache.lookupFragment(i));eO(o,39,i);let a=function(e){let t=e.directives?.find(({name:e})=>"unmask"===e.value);if(!t)return"mask";let r=t.arguments?.find(({name:e})=>"mode"===e.value);return r&&"value"in r.value&&"migrate"===r.value.value?"migrate":"unmask"}(l);"mask"!==a&&(r=e(t,o.selectionSet,n,"migrate"===a,s))}o.has(r)&&o.add(a)}return"__typename"in t&&!("__typename"in a)&&(a.__typename=t.__typename),Object.keys(a).length!==Object.keys(t).length&&o.add(a),o.has(a)?a:t}(e,t,r,!1);return Object.isFrozen(e),n})}function rI(e){return 7!==e&&8!==e}function rD(e){return 9===e||32===e}function rj(e){return e>=48&&e<=57}function rA(e){return e>=97&&e<=122||e>=65&&e<=90}function rR(e){return rA(e)||95===e}let rM=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function rL(e){return rF[e.charCodeAt(0)]}let rF=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],rP={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>rU(e.definitions,"\n\n")},OperationDefinition:{leave(e){let t=rz(e.variableDefinitions)?rV("(\n",rU(e.variableDefinitions,"\n"),"\n)"):rV("(",rU(e.variableDefinitions,", "),")"),r=rV("",e.description,"\n")+rU([e.operation,rU([e.name,t]),rU(e.directives," ")]," ");return("query"===r?"":r+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:r,directives:n,description:i})=>rV("",i,"\n")+e+": "+t+rV(" = ",r)+rV(" ",rU(n," "))},SelectionSet:{leave:({selections:e})=>rB(e)},Field:{leave({alias:e,name:t,arguments:r,directives:n,selectionSet:i}){let s=rV("",e,": ")+t,o=s+rV("(",rU(r,", "),")");return o.length>80&&(o=s+rV("(\n",rq(rU(r,"\n")),"\n)")),rU([o,rU(n," "),i]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+rV(" ",rU(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:r})=>rU(["...",rV("on ",e),rU(t," "),r]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:r,directives:n,selectionSet:i,description:s})=>rV("",s,"\n")+`fragment ${e}${rV("(",rU(r,", "),")")} `+`on ${t} ${rV("",rU(n," ")," ")}`+i},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>{let r,n,i,s,o,a,l,c,u,h,d;return t?(i=1===(n=(r=e.replace(/"""/g,'\\"""')).split(/\r\n|[\n\r]/g)).length,s=n.length>1&&n.slice(1).every(e=>0===e.length||rD(e.charCodeAt(0))),o=r.endsWith('\\"""'),a=e.endsWith('"')&&!o,l=e.endsWith("\\"),c=a||l,u=!i||e.length>70||c||s||o,h="",d=i&&rD(e.charCodeAt(0)),(u&&!d||s)&&(h+="\n"),h+=r,(u||c)&&(h+="\n"),'"""'+h+'"""'):`"${e.replace(rM,rL)}"`}},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+rU(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+rU(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+rV("(",rU(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:r})=>rV("",e,"\n")+rU(["schema",rU(t," "),rB(r)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:r})=>rV("",e,"\n")+rU(["scalar",t,rU(r," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:r,directives:n,fields:i})=>rV("",e,"\n")+rU(["type",t,rV("implements ",rU(r," & ")),rU(n," "),rB(i)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:r,type:n,directives:i})=>rV("",e,"\n")+t+(rz(r)?rV("(\n",rq(rU(r,"\n")),"\n)"):rV("(",rU(r,", "),")"))+": "+n+rV(" ",rU(i," "))},InputValueDefinition:{leave:({description:e,name:t,type:r,defaultValue:n,directives:i})=>rV("",e,"\n")+rU([t+": "+r,rV("= ",n),rU(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:r,directives:n,fields:i})=>rV("",e,"\n")+rU(["interface",t,rV("implements ",rU(r," & ")),rU(n," "),rB(i)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:r,types:n})=>rV("",e,"\n")+rU(["union",t,rU(r," "),rV("= ",rU(n," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:r,values:n})=>rV("",e,"\n")+rU(["enum",t,rU(r," "),rB(n)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:r})=>rV("",e,"\n")+rU([t,rU(r," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:r,fields:n})=>rV("",e,"\n")+rU(["input",t,rU(r," "),rB(n)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:r,repeatable:n,locations:i})=>rV("",e,"\n")+"directive @"+t+(rz(r)?rV("(\n",rq(rU(r,"\n")),"\n)"):rV("(",rU(r,", "),")"))+(n?" repeatable":"")+" on "+rU(i," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>rU(["extend schema",rU(e," "),rB(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>rU(["extend scalar",e,rU(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:r,fields:n})=>rU(["extend type",e,rV("implements ",rU(t," & ")),rU(r," "),rB(n)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:r,fields:n})=>rU(["extend interface",e,rV("implements ",rU(t," & ")),rU(r," "),rB(n)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:r})=>rU(["extend union",e,rU(t," "),rV("= ",rU(r," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:r})=>rU(["extend enum",e,rU(t," "),rB(r)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:r})=>rU(["extend input",e,rU(t," "),rB(r)]," ")},TypeCoordinate:{leave:({name:e})=>e},MemberCoordinate:{leave:({name:e,memberName:t})=>rU([e,rV(".",t)])},ArgumentCoordinate:{leave:({name:e,fieldName:t,argumentName:r})=>rU([e,rV(".",t),rV("(",r,":)")])},DirectiveCoordinate:{leave:({name:e})=>rU(["@",e])},DirectiveArgumentCoordinate:{leave:({name:e,argumentName:t})=>rU(["@",e,rV("(",t,":)")])}};function rU(e,t=""){var r;return null!=(r=null==e?void 0:e.filter(e=>e).join(t))?r:""}function rB(e){return rV("{\n",rq(rU(e,"\n")),"\n}")}function rV(e,t,r=""){return null!=t&&""!==t?e+t+r:""}function rq(e){return rV("  ",e.replace(/\n/g,"\n  "))}function rz(e){var t;return null!=(t=null==e?void 0:e.some(e=>e.includes("\n")))&&t}let rW=Object.assign(e=>{let t=n.get(e);return t||(t=ey(e,rP),n.set(e,t)),t},{reset(){n=new e4(eV.print||2e3)}});function r$(e,t=()=>void 0){return r=>new eP(n=>{let i=t();return r.subscribe({next(t){let r;try{r=e(t,i)}catch(e){n.error(e)}void 0!==r&&n.next(r)},error(e){n.error(e)},complete(){n.complete()}})})}function rQ(e,t,r,n){if(r.kind===y.INT||r.kind===y.FLOAT)e[t.value]=Number(r.value);else if(r.kind===y.BOOLEAN||r.kind===y.STRING)e[t.value]=r.value;else if(r.kind===y.OBJECT){let i={};r.fields.map(e=>rQ(i,e.name,e.value,n)),e[t.value]=i}else if(r.kind===y.VARIABLE){let i=(n||{})[r.name.value];e[t.value]=i}else if(r.kind===y.LIST)e[t.value]=r.values.map(e=>{let r={};return rQ(r,t,e,n),r[t.value]});else if(r.kind===y.ENUM)e[t.value]=r.value;else if(r.kind===y.NULL)e[t.value]=null;else throw eI(19,t.value,r.kind)}function rK(e){let t={},r=e&&e.variableDefinitions;return r&&r.length&&r.forEach(e=>{e.defaultValue&&rQ(t,e.variable.name,e.defaultValue)}),t}function rH(e){return!!e.errors?.length}rW.reset();let rG=Array.isArray;function rJ(e){return Array.isArray(e)&&e.length>0}function rY(e){let t=new Map;return function(r=e){let n=t.get(r);return n||t.set(r,n={variables:new Set,fragmentSpreads:new Set}),n}}function rX(e){let t={data:e.data};return e.error&&(t.error=e.error),t}(d=v||(v={}))[d.loading=1]="loading",d[d.setVariables=2]="setVariables",d[d.fetchMore=3]="fetchMore",d[d.refetch=4]="refetch",d[d.poll=6]="poll",d[d.ready=7]="ready",d[d.error=8]="error",d[d.streaming=9]="streaming";var rZ=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return M(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r.closed||t.next(this._value),r},t.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,r=this._value;if(e)throw t;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(t8);function r0(e,t){switch(e.kind){case"InlineFragment":return e;case"FragmentSpread":{let r=e.name.value;if("function"==typeof t)return t(r);let n=t&&t[r];return eO(n,9,r),n||null}default:return null}}function r1(e){let t;for(let r of(e5(e),e.definitions)){if("OperationDefinition"===r.kind)return r;"FragmentDefinition"!==r.kind||t||(t=r)}if(t)return t;throw eI(12)}function r2(e){return"Field"===e.kind}function r4({directives:e},t){var r;let n;return!e||!e.length||(n=[],(r=e)&&r.length&&r.forEach(e=>{if(!function({name:{value:e}}){return"skip"===e||"include"===e}(e))return;let t=e.arguments,r=e.name.value;eO(t&&1===t.length,16,r);let i=t[0];eO(i.name&&"if"===i.name.value,17,r);let s=i.value;eO(s&&("Variable"===s.kind||"BooleanValue"===s.kind),18,r),n.push({directive:e,ifArgument:i})}),n).every(({directive:e,ifArgument:r})=>{let n=!1;return"Variable"===r.value.kind?eO(void 0!==(n=t&&t[r.value.name.value]),15,e.name.value):n=r.value.value,"skip"===e.name.value?!n:n})}function r3(e,{data:t,...r},{data:n,...i},s){return rv(r,i)&&function e(t,r,n,i){if(r===n)return!0;let s=new Set;return t.selections.every(t=>{if(s.has(t)||(s.add(t),!r4(t,i.variables)||r5(t)))return!0;if(r2(t)){let s=rC(t),o=r&&r[s],a=n&&n[s],l=t.selectionSet;if(!l)return rv(o,a);let c=Array.isArray(o),u=Array.isArray(a);if(c!==u)return!1;if(c&&u){let t=o.length;if(a.length!==t)return!1;for(let r=0;r<t;++r)if(!e(l,o[r],a[r],i))return!1;return!0}return e(l,o,a,i)}{let s=r0(t,i.fragmentMap);if(s)return!!r5(s)||e(s.selectionSet,r,n,i)}})}(r1(e).selectionSet,t,n,{fragmentMap:rS(r_(e)),variables:s})}function r5(e){return!!e.directives&&e.directives.some(r8)}function r8(e){return"nonreactive"===e.name.value}function r6(e){return e.catch(()=>{}),e}let r9=Symbol.for("apollo.observableQuery.variablesUnknown"),{assign:r7,hasOwnProperty:ne}=Object,nt={loading:!0,networkStatus:v.loading,data:void 0,dataState:"empty",partial:!0},nr={loading:!1,networkStatus:v.ready,data:void 0,dataState:"empty",partial:!0};class nn{options;queryName;variablesUnknown=!1;_lastWrite;get query(){return this.lastQuery}get variables(){return this.options.variables}unsubscribeFromCache;input;subject;isTornDown;queryManager;subscriptions=new Set;waitForNetworkResult;lastQuery;linkSubscription;pollingInfo;get networkStatus(){return this.subject.getValue().result.networkStatus}constructor({queryManager:e,options:t,transformedQuery:r=e.transform(t.query)}){this.queryManager=e,this.waitForNetworkResult="network-only"===t.fetchPolicy,this.isTornDown=!1,this.subscribeToMore=this.subscribeToMore.bind(this),this.maskResult=this.maskResult.bind(this);const{watchQuery:{fetchPolicy:n="cache-first"}={}}=e.defaultOptions,{fetchPolicy:i=n,initialFetchPolicy:s="standby"===i?n:i}=t;t[r9]&&(eO("standby"===i,77),this.variablesUnknown=!0),this.lastQuery=r,this.options={...t,initialFetchPolicy:s,fetchPolicy:i,variables:this.getVariablesWithDefaults(t.variables)},this.initializeObservablesQueue(),this["@@observable"]=()=>this,Symbol.observable&&(this[Symbol.observable]=()=>this);const o=e8(this.query);this.queryName=o&&o.name&&o.name.value}initializeObservablesQueue(){this.subject=new rZ({query:this.query,variables:this.variables,result:nt,meta:{}});let e=this.subject.pipe(rr({subscribe:()=>{this.subject.observed||(this.reobserve(),setTimeout(()=>this.updatePolling()))},unsubscribe:()=>{this.subject.observed||this.tearDownQuery()}}),r$(({query:e,variables:t,result:r,meta:n},i)=>{let{shouldEmit:s}=n;if(r===nt&&(i.previous=void 0,i.previousVariables=void 0),"standby"===this.options.fetchPolicy||2===s)return;if(1===s)return l();let{previous:o,previousVariables:a}=i;if(o){let n=this.queryManager.getDocumentInfo(e),i=this.queryManager.dataMasking,s=i?n.nonReactiveQuery:e;if((i||n.hasNonreactiveDirective?r3(s,o,r,t):rv(o,r))&&rv(a,t))return}if(!(3===s&&(!this.options.notifyOnNetworkStatusChange||rv(o,r))))return l();function l(){return i.previous=r,i.previousVariables=t,r}},()=>({})));this.pipe=e.pipe.bind(e),this.subscribe=e.subscribe.bind(e),this.input=new t8,this.input.complete=()=>{},this.input.pipe(this.operator).subscribe(this.subject)}subscribe;pipe;[Symbol.observable];"@@observable";getCacheDiff({optimistic:e=!0}={}){return this.queryManager.cache.diff({query:this.query,variables:this.variables,returnPartialData:!0,optimistic:e})}getInitialResult(e){let t=this.queryManager.prioritizeCacheValues?"cache-first":e||this.options.fetchPolicy,r=()=>{let e=this.getCacheDiff(),t=this.options.returnPartialData||e.complete?e.result??void 0:void 0;return this.maskResult({data:t,dataState:e.complete?"complete":void 0===t?"empty":"partial",loading:!e.complete,networkStatus:e.complete?v.ready:v.loading,partial:!e.complete})};switch(t){case"cache-only":return{...r(),loading:!1,networkStatus:v.ready};case"cache-first":return r();case"cache-and-network":return{...r(),loading:!0,networkStatus:v.loading};case"standby":return nr;default:return nt}}resubscribeCache(){let{variables:e,fetchPolicy:t}=this.options,r=this.query,n="standby"===t||"no-cache"===t||this.waitForNetworkResult,i=!ni({query:r,variables:e},this.unsubscribeFromCache)&&!this.waitForNetworkResult;if((n||i)&&this.unsubscribeFromCache?.(),n||!i)return;let s={query:r,variables:e,optimistic:!0,watcher:this,callback:e=>{let t=this.queryManager.getDocumentInfo(r);if((t.hasClientExports||t.hasForcedResolvers)&&(s.lastDiff=void 0),s.lastOwnDiff===e)return;let{result:n}=this.subject.getValue();(e.complete||!n.error&&n!==nt&&n!==nr)&&(rv(n.data,e.result)||this.scheduleNotify())}},o=this.queryManager.cache.watch(s);this.unsubscribeFromCache=Object.assign(()=>{this.unsubscribeFromCache=void 0,o()},{query:r,variables:e})}stableLastResult;getCurrentResult(){let{result:e}=this.subject.getValue(),t=e.networkStatus===v.error||this.hasObservers()||"no-cache"===this.options.fetchPolicy?e:this.getInitialResult();return t===nt&&(t=this.getInitialResult()),rv(this.stableLastResult,t)||(this.stableLastResult=t),this.stableLastResult}refetch(e){let{fetchPolicy:t}=this.options,r={pollInterval:0};return"no-cache"===t?r.fetchPolicy="no-cache":r.fetchPolicy="network-only",e&&!rv(this.variables,e)&&(r.variables=this.options.variables=this.getVariablesWithDefaults({...this.variables,...e})),this._lastWrite=void 0,this._reobserve(r,{newNetworkStatus:v.refetch})}fetchMore({query:e,variables:t,context:r,errorPolicy:n,updateQuery:i}){eO("cache-only"!==this.options.fetchPolicy,79,eq(this.query,"(anonymous)"));let s={...tA(this.options,{errorPolicy:"none"},{query:e,context:r,errorPolicy:n}),variables:e?t:{...this.variables,...t},fetchPolicy:"no-cache",notifyOnNetworkStatusChange:this.options.notifyOnNetworkStatusChange};s.query=this.transformDocument(s.query),this.lastQuery=e?this.transformDocument(this.options.query):s.query;let o=!1,a="no-cache"!==this.options.fetchPolicy;a||eO(i,80);let{finalize:l,pushNotification:c}=this.pushOperation(v.fetchMore);return c({source:"newNetworkStatus",kind:"N",value:{}},{shouldEmit:3}),this.queryManager.fetchQuery(s,v.fetchMore).then(e=>{if(l(),a){let t=this.getCacheDiff();this.queryManager.cache.batch({update:t=>{i?t.updateQuery({query:this.query,variables:this.variables,returnPartialData:!0,optimistic:!1},t=>i(t,{fetchMoreResult:e.data,variables:s.variables})):t.writeQuery({query:s.query,variables:s.variables,data:e.data})},onWatchUpdated:(e,r)=>{e.watcher!==this||rv(r.result,t.result)||(o=!0)}})}else{let t=this.getCurrentResult(),r=i(t.data,{fetchMoreResult:e.data,variables:s.variables});c({kind:"N",value:{...t,networkStatus:v.ready,loading:!1,data:r,dataState:"streaming"===t.dataState?"streaming":"complete"},source:"network"})}return this.maskResult(e)}).finally(()=>{l(),a&&!o&&c({kind:"N",source:"newNetworkStatus",value:{}},{shouldEmit:1})})}subscribeToMore(e){let t=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables,context:e.context}).subscribe({next:t=>{let{updateQuery:r,onError:n}=e,{error:i}=t;i?n?n(i):eO.error(81,i):r&&this.updateQuery((e,n)=>r(e,{subscriptionData:t,...n}))}});return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)&&t.unsubscribe()}}applyOptions(e){let t=tA(this.options,e||{});r7(this.options,t),this.updatePolling()}async setVariables(e){return(e=this.getVariablesWithDefaults(e),rv(this.variables,e))?rX(this.getCurrentResult()):(this.options.variables=e,this.hasObservers())?this._reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:e},{newNetworkStatus:v.setVariables}):rX(this.getCurrentResult())}updateQuery(e){let{queryManager:t}=this,{result:r,complete:n}=this.getCacheDiff({optimistic:!1}),i=e(r,{variables:this.variables,complete:!!n,previousData:r});i&&(t.cache.writeQuery({query:this.options.query,data:i,variables:this.variables}),t.broadcastQueries())}startPolling(e){this.options.pollInterval=e,this.updatePolling()}stopPolling(){this.options.pollInterval=0,this.updatePolling()}applyNextFetchPolicy(e,t){if(t.nextFetchPolicy){let{fetchPolicy:r="cache-first",initialFetchPolicy:n=r}=t;"standby"===r||("function"==typeof t.nextFetchPolicy?t.fetchPolicy=t.nextFetchPolicy.call(t,r,{reason:e,options:t,observable:this,initialFetchPolicy:n}):"variables-changed"===e?t.fetchPolicy=n:t.fetchPolicy=t.nextFetchPolicy)}return t.fetchPolicy}fetch(e,t,r,n){let i=this.options.fetchPolicy;e.context??={};let s=!1,o=e=>new eP(r=>{try{return e.subscribe({next(e){s=!0,r.next(e)},error:e=>r.error(e),complete:()=>r.complete()})}finally{s||(h.override=t,this.input.next({kind:"N",source:"newNetworkStatus",value:{resetError:!0},query:c,variables:u,meta:{shouldEmit:3,fetchPolicy:i}}))}}),{observable:a,fromLink:l}=this.queryManager.fetchObservableWithInfo(e,{networkStatus:t,query:r,onCacheHit:()=>{s=!0},fetchQueryOperator:o,observableQuery:this}),{query:c,variables:u}=this,h={abort:()=>{f.unsubscribe()},query:c,variables:u};this.activeOperations.add(h);let d=t==v.refetch||t==v.setVariables,f=(a=a.pipe(n,t9())).pipe(rr({next:e=>{"newNetworkStatus"===e.source||"N"===e.kind&&e.value.loading?h.override=t:delete h.override},finalize:()=>this.activeOperations.delete(h)})).subscribe({next:e=>{let t={};d&&"N"===e.kind&&"loading"in e.value&&!e.value.loading&&(d=!1,t.shouldEmit=1),this.input.next({...e,query:c,variables:u,meta:t})}});return{fromLink:l,subscription:f,observable:a}}didWarnCacheOnlyPolling=!1;updatePolling(){if(this.queryManager.ssrMode)return;let{pollingInfo:e,options:{fetchPolicy:t,pollInterval:r}}=this;if(!r||!this.hasObservers()||"cache-only"===t)return void this.cancelPolling();if(e?.interval===r)return;(e||(this.pollingInfo={})).interval=r;let n=()=>{this.pollingInfo&&(rI(this.networkStatus)||this.options.skipPollAttempt?.()?i():this._reobserve({fetchPolicy:"no-cache"===this.options.initialFetchPolicy?"no-cache":"network-only"},{newNetworkStatus:v.poll}).then(i,i))},i=()=>{let e=this.pollingInfo;e&&(clearTimeout(e.timeout),e.timeout=setTimeout(n,e.interval))};i()}cancelPolling(){this.pollingInfo&&(clearTimeout(this.pollingInfo.timeout),delete this.pollingInfo)}reobserve(e){return this._reobserve(e)}_reobserve(e,t){var r;let n,i,s;this.isTornDown=!1;let{newNetworkStatus:o}=t||{};this.queryManager.obsQueries.add(this);let a=o===v.refetch||o===v.poll,l=this.variables,c=this.options.fetchPolicy,u=tA(this.options,e||{});this.variablesUnknown&&="standby"===u.fetchPolicy;let h=a?u:r7(this.options,u),d=this.transformDocument(h.query);this.lastQuery=d,e&&"variables"in e&&(h.variables=this.getVariablesWithDefaults(e.variables)),!a&&(this.updatePolling(),e&&e.variables&&!rv(e.variables,l)&&"standby"!==h.fetchPolicy&&(h.fetchPolicy===c||"function"==typeof h.nextFetchPolicy)&&(this.applyNextFetchPolicy("variables-changed",h),void 0===o&&(o=v.setVariables)));let f=this.networkStatus;o||(o=v.loading,f!==v.loading&&e?.variables&&!rv(e.variables,l)&&(o=v.setVariables),"standby"===h.fetchPolicy&&(o=v.ready)),"standby"===h.fetchPolicy&&this.cancelPolling(),this.resubscribeCache();let{promise:p,operator:m}=(r=e=>{switch(e.kind){case"E":throw e.error;case"N":if("newNetworkStatus"!==e.source&&!e.value.loading)return e.value}},n="standby"===h.fetchPolicy?{data:void 0}:void 0,{promise:new Promise((e,t)=>{i=e,s=t}),operator:rr({next(e){try{let t=r(e);void 0!==t&&(n=t)}catch(e){s(e)}},finalize:()=>{if(n)i(n);else{let e="The operation was aborted.",t="AbortError";s("undefined"!=typeof DOMException?new DOMException(e,t):Object.assign(Error(e),{name:t}))}}})}),{subscription:g,observable:y,fromLink:b}=this.fetch(h,o,d,m);a||!b&&this.linkSubscription||(this.linkSubscription&&this.linkSubscription.unsubscribe(),this.linkSubscription=g);let x=Object.assign(r6(p.then(e=>rX(this.maskResult(e))).finally(()=>{this.hasObservers()||0!==this.activeOperations.size||this.tearDownQuery()})),{retain:()=>{let e=y.subscribe({}),t=()=>e.unsubscribe();return p.then(t,t),x}});return x}hasObservers(){return this.subject.observed}stop(){this.subject.complete(),this.initializeObservablesQueue(),this.tearDownQuery()}tearDownQuery(){this.isTornDown||(this.resetNotifications(),this.unsubscribeFromCache?.(),this.linkSubscription&&(this.linkSubscription.unsubscribe(),delete this.linkSubscription),this.stopPolling(),this.subscriptions.forEach(e=>e.unsubscribe()),this.subscriptions.clear(),this.queryManager.obsQueries.delete(this),this.isTornDown=!0,this.abortActiveOperations(),this._lastWrite=void 0)}transformDocument(e){return this.queryManager.transform(e)}maskResult(e){let t=this.queryManager.maskOperation({document:this.query,data:e.data,fetchPolicy:this.options.fetchPolicy,cause:this});return t===e.data?e:{...e,data:t}}dirty=!1;notifyTimeout;resetNotifications(){this.notifyTimeout&&(clearTimeout(this.notifyTimeout),this.notifyTimeout=void 0),this.dirty=!1}scheduleNotify(){!this.dirty&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(()=>this.notify(!0),0)))}notify(e=!1){if(!e){let e=this.queryManager.getDocumentInfo(this.query);if(e.hasClientExports||e.hasForcedResolvers)return}let{dirty:t}=this;if(this.resetNotifications(),t&&("cache-only"==this.options.fetchPolicy||"cache-and-network"==this.options.fetchPolicy||!this.activeOperations.size)){let e=this.getCacheDiff();rv(e.result,this.getCacheDiff({optimistic:!1}).result)?this.reobserveCacheFirst():this.input.next({kind:"N",value:{data:e.result,dataState:e.complete?"complete":e.result?"partial":"empty",networkStatus:v.ready,loading:!1,error:void 0,partial:!e.complete},source:"cache",query:this.query,variables:this.variables,meta:{}})}}activeOperations=new Set;pushOperation(e){let t=!1,{query:r,variables:n}=this,i=()=>{this.activeOperations.delete(s)},s={override:e,abort:()=>{t=!0,i()},query:r,variables:n};return this.activeOperations.add(s),{finalize:i,pushNotification:(e,i)=>{t||this.input.next({...e,query:r,variables:n,meta:{...i}})}}}calculateNetworkStatus(e){if(e===v.streaming)return e;let t=Array.from(this.activeOperations.values()).reverse().find(e=>ni(e,this)&&void 0!==e.override);return t?.override??e}abortActiveOperations(){this.activeOperations.forEach(e=>e.abort())}reset(){let e="cache-only"===this.options.fetchPolicy;this.setResult(e?nr:nt,{shouldEmit:e?1:2}),this.abortActiveOperations()}setResult(e,t){this.input.next({source:"setResult",kind:"N",value:e,query:this.query,variables:this.variables,meta:{...t}})}operator=r$(e=>{let t,{query:r,variables:n,meta:i}=e;if("setResult"===e.source)return{query:r,variables:n,result:e.value,meta:i};if("C"===e.kind||!ni(e,this))return;let s=this.subject.getValue();if("cache"===e.source){if((t=e.value).networkStatus===v.ready&&t.partial&&(!this.options.returnPartialData||s.result.networkStatus===v.error)&&"cache-only"!==this.options.fetchPolicy)return}else if("network"===e.source)this.waitForNetworkResult&&(this.waitForNetworkResult=!1,this.resubscribeCache()),t="E"===e.kind?{...ni(s,e)?s.result:{data:void 0,dataState:"empty",partial:!0},error:e.error,networkStatus:v.error,loading:!1}:e.value,"E"===e.kind&&"streaming"===t.dataState&&(t.dataState="complete"),t.error&&(i.shouldEmit=1);else if("newNetworkStatus"===e.source){let r=ni(s,e)?s.result:this.getInitialResult(i.fetchPolicy),{resetError:n}=e.value,o=n?void 0:r.error,a=o?v.error:v.ready;t={...r,error:o,networkStatus:a}}return eO(t),t.error||delete t.error,t.networkStatus=this.calculateNetworkStatus(t.networkStatus),t.loading=rI(t.networkStatus),{query:r,variables:n,result:t=this.maskResult(t),meta:i}});reobserveCacheFirst(){let{fetchPolicy:e,nextFetchPolicy:t}=this.options;"cache-and-network"===e||"network-only"===e?this.reobserve({fetchPolicy:"cache-first",nextFetchPolicy(r,n){return(this.nextFetchPolicy=t,"function"==typeof this.nextFetchPolicy)?this.nextFetchPolicy(r,n):e}}):this.reobserve()}getVariablesWithDefaults(e){return this.queryManager.getVariables(this.query,e)}}function ni(e,t){return!!(e&&t&&e.query===t.query&&rv(e.variables,t.variables))}let ns={},no=new WeakMap;function na(e,t){let r=e[t];"function"==typeof r&&(e[t]=function(){return no.set(e,(no.get(e)+1)%1e15),r.apply(this,arguments)})}let nl=new WeakMap;class nc{lastRequestId=1;cache;queryManager;id;observableQuery;incremental;constructor(e,t){const r=this.cache=e.cache,n=(nl.get(e)||0)+1;nl.set(e,n),this.id=n+"",this.observableQuery=t,this.queryManager=e,no.has(r)||(no.set(r,0),na(r,"evict"),na(r,"modify"),na(r,"reset"))}_lastWrite;get lastWrite(){return(this.observableQuery||this)._lastWrite}set lastWrite(e){(this.observableQuery||this)._lastWrite=e}resetLastWrite(){this.lastWrite=void 0}shouldWrite(e,t){let{lastWrite:r}=this;return!(r&&r.dmCount===no.get(this.cache)&&rv(t,r.variables)&&rv(e.data,r.result.data))}get hasNext(){return!!this.incremental&&this.incremental.hasNext}maybeHandleIncrementalResult(e,t,r){let{incrementalHandler:n}=this.queryManager;return n.isIncrementalResult(t)?(this.incremental||=n.startRequest({query:r}),this.incremental.handle(e,t)):t}markQueryResult(e,{document:t,variables:r,errorPolicy:n,cacheWriteBehavior:i}){let s={query:t,variables:r,returnPartialData:!0,optimistic:!0};this.observableQuery?.resetNotifications();let o=0===i,a=o?void 0:this.cache.diff(s),l=this.maybeHandleIncrementalResult(a?.result,e,t);return o||(nu(l,n)?this.cache.batch({onWatchUpdated:(e,t)=>{e.watcher===this.observableQuery&&(e.lastOwnDiff=t)},update:e=>{if(this.shouldWrite(l,r))e.writeQuery({query:t,data:l.data,variables:r,overwrite:1===i}),this.lastWrite={result:l,variables:r,dmCount:no.get(this.cache)};else if(a&&a.complete){l={...l,data:a.result};return}let n=e.diff(s);n.complete&&(l={...l,data:n.result})}}):this.lastWrite=void 0),l}markMutationResult(e,t,r=this.cache){let n=[],i=0===t.cacheWriteBehavior,s=this.maybeHandleIncrementalResult(i?void 0:r.diff({id:"ROOT_MUTATION",query:this.queryManager.getDocumentInfo(t.document).asQuery,variables:t.variables,optimistic:!1,returnPartialData:!0}).result,e,t.document);if("ignore"===t.errorPolicy&&(s={...s,errors:[]}),rH(s)&&"none"===t.errorPolicy)return Promise.resolve(s);let o=()=>({...s,dataState:this.hasNext?"streaming":"complete"});if(!i&&nu(s,t.errorPolicy)){n.push({result:s.data,dataId:"ROOT_MUTATION",query:t.document,variables:t.variables});let{updateQueries:e}=t;e&&this.queryManager.getObservableQueries("all").forEach(t=>{let r=t&&t.queryName;if(!r||!Object.hasOwnProperty.call(e,r))return;let i=e[r],{query:s,variables:a}=t,{result:l,complete:c}=t.getCacheDiff({optimistic:!1});if(c&&l){let e=i(l,{mutationResult:o(),queryName:s&&eq(s)||void 0,queryVariables:a});e&&n.push({result:e,dataId:"ROOT_QUERY",query:s,variables:a})}})}let a=t.refetchQueries;if("function"==typeof a&&(a=a(o())),n.length>0||(a||"").length>0||t.update||t.onQueryUpdated||t.removeOptimistic){let e=[];if(this.queryManager.refetchQueries({updateCache:e=>{i||n.forEach(t=>e.write(t));let{update:r}=t;if(r){if(!i){let r=e.diff({id:"ROOT_MUTATION",query:this.queryManager.getDocumentInfo(t.document).asQuery,variables:t.variables,optimistic:!1,returnPartialData:!0});r.complete&&(s={...s,data:r.result})}this.hasNext||r(e,s,{context:t.context,variables:t.variables})}i||t.keepRootFields||this.hasNext||e.modify({id:"ROOT_MUTATION",fields:(e,{fieldName:t,DELETE:r})=>"__typename"===t?e:r})},include:a,optimistic:!1,removeOptimistic:t.removeOptimistic,onQueryUpdated:t.onQueryUpdated||null}).forEach(t=>e.push(t)),t.awaitRefetchQueries||t.onQueryUpdated)return Promise.all(e).then(()=>s)}return Promise.resolve(s)}markMutationOptimistic(e,t){let r="function"==typeof e?e(t.variables,{IGNORE:ns}):e;return r!==ns&&(this.cache.recordOptimisticTransaction(e=>{try{this.markMutationResult({data:r},t,e)}catch(e){eO.error(e)}},this.id),!0)}markSubscriptionResult(e,{document:t,variables:r,errorPolicy:n,cacheWriteBehavior:i}){0!==i&&(nu(e,n)&&this.cache.write({query:t,result:e.data,dataId:"ROOT_SUBSCRIPTION",variables:r}),this.queryManager.broadcastQueries())}}function nu(e,t="none"){let r=!rH(e);return!r&&("ignore"===t||"all"===t)&&e.data&&(r=!0),r}class nh{defaultOptions;client;clientOptions;assumeImmutableResults;documentTransform;ssrMode;defaultContext;dataMasking;incrementalHandler;localState;queryDeduplication;prioritizeCacheValues=!1;onBroadcast;mutationStore;obsQueries=new Set;fetchCancelFns=new Map;constructor(e){const t=new tj(e=>this.cache.transformDocument(e),{cache:!1});this.client=e.client,this.defaultOptions=e.defaultOptions,this.queryDeduplication=e.queryDeduplication,this.clientOptions=e.clientOptions,this.ssrMode=e.ssrMode,this.assumeImmutableResults=e.assumeImmutableResults,this.dataMasking=e.dataMasking,this.localState=e.localState,this.incrementalHandler=e.incrementalHandler;const r=e.documentTransform;this.documentTransform=r?t.concat(r).concat(t):t,this.defaultContext=e.defaultContext||{},(this.onBroadcast=e.onBroadcast)&&(this.mutationStore={})}get link(){return this.client.link}get cache(){return this.client.cache}stop(){this.obsQueries.forEach(e=>e.stop()),this.cancelPendingFetches(eI(84))}cancelPendingFetches(e){this.fetchCancelFns.forEach(t=>t(e)),this.fetchCancelFns.clear()}async mutate({mutation:e,variables:t,optimisticResponse:r,updateQueries:n,refetchQueries:i=[],awaitRefetchQueries:s=!1,update:o,onQueryUpdated:a,fetchPolicy:l,errorPolicy:c,keepRootFields:u,context:h}){let d=new nc(this);e=this.cache.transformForLink(this.transform(e));let{hasClientExports:f}=this.getDocumentInfo(e);t=this.getVariables(e,t),f&&(t=await this.localState.getExportedVariables({client:this.client,document:e,variables:t,context:h}));let p=this.mutationStore&&(this.mutationStore[d.id]={mutation:e,variables:t,loading:!0,error:null}),m=r&&d.markMutationOptimistic(r,{document:e,variables:t,cacheWriteBehavior:2*("no-cache"!==l),errorPolicy:c,context:h,updateQueries:n,update:o,keepRootFields:u});return this.broadcastQueries(),new Promise((f,g)=>{let y={};return this.getObservableFromLink(e,{...h,optimisticResponse:m?r:void 0},t,{},!1).observable.pipe(nd(),tG(r=>{let f={...r};return t0(d.markMutationResult(f,{document:e,variables:t,cacheWriteBehavior:2*("no-cache"!==l),errorPolicy:c,context:h,update:o,updateQueries:n,awaitRefetchQueries:s,refetchQueries:i,removeOptimistic:m?d.id:void 0,onQueryUpdated:a,keepRootFields:u}))})).pipe(ef(e=>{if(rH(e)&&"none"===c)throw new rc(e);return p&&(p.loading=!1,p.error=null),e})).subscribe({next:t=>{if(this.broadcastQueries(),!d.hasNext){let r={data:this.maskOperation({document:e,data:t.data,fetchPolicy:l,cause:y})};rH(t)&&(r.error=new rc(t)),Object.keys(t.extensions||{}).length&&(r.extensions=t.extensions),f(r)}},error:e=>(p&&(p.loading=!1,p.error=e),m&&this.cache.removeOptimistic(d.id),this.broadcastQueries(),"ignore"===c)?f({data:void 0}):"all"===c?f({data:void 0,error:e}):void g(e)})})}fetchQuery(e,t){return e5(e.query,g.QUERY),(async()=>{var r,n,i;return r=this.fetchObservableWithInfo(e,{networkStatus:t}).observable.pipe(r$(e=>{switch(e.kind){case"E":throw e.error;case"N":if("newNetworkStatus"!==e.source)return rX(e.value)}})),i="object"==typeof(n={defaultValue:{data:void 0}}),new Promise(function(e,t){var s,o=!1;r.subscribe({next:function(e){s=e,o=!0},error:t,complete:function(){o?e(s):i?e(n.defaultValue):t(new t2)}})})})()}transform(e){return this.documentTransform.transformDocument(e)}transformCache=new e4(eV["queryManager.getDocumentInfo"]||2e3);getDocumentInfo(e){let{transformCache:t}=this;if(!t.has(e)){let r,n=e8(e),i={hasClientExports:eb(["client","export"],e,!0),hasForcedResolvers:(r=!1,ey(e,{Directive:{enter(e){if("client"===e.name.value&&e.arguments&&(r=e.arguments.some(e=>"always"===e.name.value&&"BooleanValue"===e.value.kind&&!0===e.value.value)))return eg}}}),r),hasNonreactiveDirective:eb(["nonreactive"],e),hasIncrementalDirective:eb(["defer"],e),nonReactiveQuery:ey(e,{FragmentSpread:e=>{if(!e.directives?.some(e=>"unmask"===e.name.value))return{...e,directives:[...e.directives||[],{kind:y.DIRECTIVE,name:{kind:y.NAME,value:"nonreactive"}}]}}}),clientQuery:eb(["client"],e)?e:null,serverQuery:function(e,t){var r,n,i;let s,o,a;e5(t);let l=rY(""),c=rY(""),u=e=>{for(let t=0,r;t<e.length&&(r=e[t]);++t)if(!rG(r)){if(r.kind===y.OPERATION_DEFINITION)return l(r.name&&r.name.value);if(r.kind===y.FRAGMENT_DEFINITION)return c(r.name.value)}return eO.error(14),null},h=0;for(let e=t.definitions.length-1;e>=0;--e)t.definitions[e].kind===y.OPERATION_DEFINITION&&++h;let d=(r=e,s=new Map,o=new Map,r.forEach(e=>{e&&(e.name?s.set(e.name,e):e.test&&o.set(e.test,e))}),e=>{let t=s.get(e.name.value);return!t&&o.size&&o.forEach((r,n)=>{n(e)&&(t=r)}),t}),f=e=>rJ(e)&&e.map(d).some(e=>e&&e.remove),p=new Map,m=!1,g={enter(e){if(f(e.directives))return m=!0,null}},b=ey(t,{Field:g,InlineFragment:g,VariableDefinition:{enter:()=>!1},Variable:{enter(e,t,r,n,i){let s=u(i);s&&s.variables.add(e.name.value)}},FragmentSpread:{enter(e,t,r,n,i){if(f(e.directives))return m=!0,null;let s=u(i);s&&s.fragmentSpreads.add(e.name.value)}},FragmentDefinition:{enter(e,t,r,n){p.set(JSON.stringify(n),e)},leave:(e,t,r,n)=>e===p.get(JSON.stringify(n))?e:h>0&&e.selectionSet.selections.every(e=>e.kind===y.FIELD&&"__typename"===e.name.value)?(c(e.name.value).removed=!0,m=!0,null):void 0},Directive:{leave(e){if(d(e))return m=!0,null}}});if(!m)return t;let v=e=>(!e.transitiveVars&&(e.transitiveVars=new Set(e.variables),e.removed||e.fragmentSpreads.forEach(t=>{v(c(t)).transitiveVars.forEach(t=>{e.transitiveVars.add(t)})})),e),x=new Set;b.definitions.forEach(e=>{e.kind===y.OPERATION_DEFINITION?v(l(e.name&&e.name.value)).fragmentSpreads.forEach(e=>{x.add(e)}):e.kind!==y.FRAGMENT_DEFINITION||0!==h||c(e.name.value).removed||x.add(e.name.value)}),x.forEach(e=>{v(c(e)).fragmentSpreads.forEach(e=>{x.add(e)})});let w={enter(e){let t;if(t=e.name.value,!x.has(t)||c(t).removed)return null}};return!function e(t,r){return!t||t.selectionSet.selections.every(t=>t.kind===y.FRAGMENT_SPREAD&&e(r[t.name.value],r))}(e8(n=ey(b,{FragmentSpread:w,FragmentDefinition:w,OperationDefinition:{leave(e){if(e.variableDefinitions){let t=v(l(e.name&&e.name.value)).transitiveVars;if(t.size<e.variableDefinitions.length)return{...e,variableDefinitions:e.variableDefinitions.filter(e=>t.has(e.variable.name.value))}}}}}))||(eO("Document"===(i=n).kind,6),eO(i.definitions.length<=1,7),eO("FragmentDefinition"===(a=i.definitions[0]).kind,8),a),rS(r_(n)))?n:null}([{name:"client",remove:!0},{name:"connection"},{name:"nonreactive"},{name:"unmask"}],e),operationType:n?.operation,defaultVars:rK(n),asQuery:{...e,definitions:e.definitions.map(e=>"OperationDefinition"===e.kind&&"query"!==e.operation?{...e,operation:"query"}:e)}};t.set(e,i)}let r=t.get(e);if(r.violation)throw r.violation;return r}getVariables(e,t){let r=this.getDocumentInfo(e).defaultVars,n=Object.entries(t??{}).map(([e,t])=>[e,void 0===t?r[e]:t]);return{...r,...Object.fromEntries(n)}}watchQuery(e){e5(e.query,g.QUERY);let t=this.transform(e.query);return void 0===(e={...e,variables:this.getVariables(t,e.variables)}).notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!0),new nn({queryManager:this,options:e,transformedQuery:t})}query(e){let t=this.transform(e.query);return this.fetchQuery({...e,query:t}).then(r=>({...r,data:this.maskOperation({document:t,data:r?.data,fetchPolicy:e.fetchPolicy})}))}requestIdCounter=1;generateRequestId(){return this.requestIdCounter++}clearStore(e={discardWatches:!0}){return this.cancelPendingFetches(eI(86)),this.obsQueries.forEach(e=>{e.reset()}),this.mutationStore&&(this.mutationStore={}),this.cache.reset(e)}getObservableQueries(e="active"){let t=new Set,r=new Map,n=new Map,i=new Set;return Array.isArray(e)&&e.forEach(e=>{if("string"==typeof e)r.set(e,e),n.set(e,!1);else if(rN(e)&&"Document"===e.kind&&Array.isArray(e.definitions)){let t=rW(this.transform(e));r.set(t,eq(e)),n.set(t,!1)}else rN(e)&&e.query&&i.add(e)}),this.obsQueries.forEach(r=>{let i=rW(this.transform(r.options.query));if("all"===e)return void t.add(r);let{queryName:s,options:{fetchPolicy:o}}=r;("active"!==e||"standby"!==o)&&("active"===e||s&&n.has(s)||i&&n.has(i))&&(t.add(r),s&&n.set(s,!0),i&&n.set(i,!0))}),i.size&&i.forEach(e=>{let r=new nn({queryManager:this,options:{...e,fetchPolicy:"network-only"}});t.add(r)}),t}refetchObservableQueries(e=!1){let t=[];return this.getObservableQueries(e?"all":"active").forEach(r=>{let{fetchPolicy:n}=r.options;(e||"standby"!==n)&&"cache-only"!==n&&t.push(r.refetch())}),this.broadcastQueries(),Promise.all(t)}startGraphQLSubscription(e){let t,{query:r,variables:n}=e,{fetchPolicy:i,errorPolicy:s="none",context:o={},extensions:a={}}=e;return e5(r,g.SUBSCRIPTION),r=this.transform(r),n=this.getVariables(r,n),Object.assign((this.getDocumentInfo(r).hasClientExports?t0(this.localState.getExportedVariables({client:this.client,document:r,variables:n,context:o})):t4(n)).pipe(tG(e=>{var n;let{observable:l,restart:c}=this.getObservableFromLink(r,o,e,a),u=new nc(this);return t=c,l.pipe(ef(t=>{u.markSubscriptionResult(t,{document:r,variables:e,errorPolicy:s,cacheWriteBehavior:2*("no-cache"!==i)});let n={data:t.data??void 0};if(rH(t))n.error=new rc(t);else"extensions"in t&&rh.is(t.extensions[rf])&&(n.error=t.extensions[rf],delete t.extensions[rf]);return t.extensions&&Object.keys(t.extensions).length&&(n.extensions=t.extensions),n.error&&"none"===s&&(n.data=void 0),"ignore"===s&&delete n.error,n}),tK(e=>"ignore"===s?t4({data:void 0}):t4({data:void 0,error:e})),(n=e=>!!(e.data||e.error),A(function(e,t){var r=0;e.subscribe(eh(t,function(e){return n.call(void 0,e,r++)&&t.next(e)}))})))})),{restart:()=>t?.()})}broadcastQueries(){this.onBroadcast&&this.onBroadcast(),this.obsQueries.forEach(e=>e.notify())}inFlightLinkObservables=new eK(!1);getObservableFromLink(e,t,r,n,i=t?.queryDeduplication??this.queryDeduplication){let s={},{serverQuery:o,clientQuery:a,operationType:l,hasIncrementalDirective:c}=this.getDocumentInfo(e),u=eq(e),h={client:this.client};if(o){let{inFlightLinkObservables:e,link:a}=this;try{let c=this.incrementalHandler.prepareRequest({query:o,variables:r,context:{...this.defaultContext,...t,queryDeduplication:i},extensions:n});function d(e){return new eP(t=>{function r(){return e.subscribe({next:t.next.bind(t),complete:t.complete.bind(t),error:t.error.bind(t)})}let n=r();return s.restart||=()=>{n.unsubscribe(),n=r()},()=>{n.unsubscribe(),s.restart=void 0}})}if(t=c.context,i){var f,p,m,y,b,v,x,w,k;let t=rW(o),n=rn(r);(s=e.lookup(t,n)).observable||(s.observable=e9(a,c,h).pipe(d,(f=()=>{e.peek(t,n)===s&&e.remove(t,n)},A(function(e,t){try{e.subscribe(t)}finally{t.add(f)}})),l===g.SUBSCRIPTION?t9():(p={refCount:!0},k=!1,p&&!0?(w=void 0===(b=p.bufferSize)?1/0:b,m=void 0===(v=p.windowTime)?1/0:v,k=void 0!==(x=p.refCount)&&x,y=p.scheduler):w=null!=p?p:1/0,t9({connector:function(){return new rt(w,m,y)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:k}))))}else s.observable=e9(a,c,h).pipe(d)}catch(e){s.observable=tL(()=>e)}}else s.observable=t4({data:{}});if(a){let{operation:n}=e8(e);eO(!c,91,n[0].toUpperCase()+n.slice(1),u??"(anonymous)"),s.observable=s.observable.pipe(tG(e=>t0(this.localState.execute({client:this.client,document:a,remoteResult:e,context:t,variables:r}))))}return{restart:()=>s.restart?.(),observable:s.observable.pipe(tK(e=>{var t,r,n;throw n=e=null!==(r=t=e)&&"object"==typeof r&&"string"==typeof r.message&&"string"==typeof r.name&&("string"==typeof r.stack||void 0===r.stack)?t:"string"==typeof t?Error(t,{cause:t}):new rd(t),rp.add(n),e}))}}getResultsFromLink(e,{queryInfo:t,cacheWriteBehavior:r,observableQuery:n}){let i=t.lastRequestId=this.generateRequestId(),{errorPolicy:s}=e,o=this.cache.transformForLink(e.query);return this.getObservableFromLink(o,e.context,e.variables).observable.pipe(ef(i=>{let a=t.markQueryResult(i,{...e,document:o,cacheWriteBehavior:r}),l=rH(a);if(l&&"none"===s)throw t.resetLastWrite(),n?.resetNotifications(),new rc(a);let c={data:a.data,...t.hasNext?{loading:!0,networkStatus:v.streaming,dataState:"streaming",partial:!0}:{dataState:a.data?"complete":"empty",loading:!1,networkStatus:v.ready,partial:!a.data}};return l&&("none"===s&&(c.data=void 0,c.dataState="empty"),"ignore"!==s&&(c.error=new rc(a),"streaming"!==c.dataState&&(c.networkStatus=v.error))),c}),tK(e=>{if(i>=t.lastRequestId&&"none"===s)throw t.resetLastWrite(),n?.resetNotifications(),e;let r={data:void 0,dataState:"empty",loading:!1,networkStatus:v.ready,partial:!0};return"ignore"!==s&&(r.error=e,r.networkStatus=v.error),t4(r)}))}fetchObservableWithInfo(e,{networkStatus:t=v.loading,query:r=e.query,fetchQueryOperator:n=e=>e,onCacheHit:i=()=>{},observableQuery:s}){let o,a,l=this.getVariables(r,e.variables),c=this.defaultOptions.watchQuery,{fetchPolicy:u=c&&c.fetchPolicy||"cache-first",errorPolicy:h=c&&c.errorPolicy||"none",returnPartialData:d=!1,notifyOnNetworkStatusChange:f=!0,context:p={}}=e;this.prioritizeCacheValues&&("network-only"===u||"cache-and-network"===u)&&(u="cache-first");let m=Object.assign({},e,{query:r,variables:l,fetchPolicy:u,errorPolicy:h,returnPartialData:d,notifyOnNetworkStatusChange:f,context:p}),g=new nc(this,s),y=r=>{m.variables=r;let o="no-cache"===u?0:t===v.refetch&&"merge"!==m.refetchWritePolicy?1:2,a=this.fetchQueryByPolicy(m,{queryInfo:g,cacheWriteBehavior:o,onCacheHit:i,observableQuery:s});return a.observable=a.observable.pipe(n),"standby"!==m.fetchPolicy&&s?.applyNextFetchPolicy("after-fetch",e),a},b=()=>{this.fetchCancelFns.delete(g.id)};this.fetchCancelFns.set(g.id,e=>{x.next({kind:"E",error:e,source:"network"})});let x=new t8;if(this.getDocumentInfo(m.query).hasClientExports)o=t0(this.localState.getExportedVariables({client:this.client,document:m.query,variables:m.variables,context:m.context})).pipe(tG(e=>y(e).observable)),a=!0;else{let e=y(m.variables);a=e.fromLink,o=e.observable}return{observable:new eP(e=>{e.add(b),o.subscribe(e),x.subscribe(e)}).pipe(t9()),fromLink:a}}refetchQueries({updateCache:e,include:t,optimistic:r=!1,removeOptimistic:n=r?eE("refetchQueries"):void 0,onQueryUpdated:i}){let s=new Map;t&&this.getObservableQueries(t).forEach(e=>{if("cache-only"===e.options.fetchPolicy||e.variablesUnknown)return;let t=e.getCurrentResult();s.set(e,{oq:e,lastDiff:{result:t?.data,complete:!t?.partial}})});let o=new Map;if(e){let t=new Set;this.cache.batch({update:e,optimistic:r&&n||!1,removeOptimistic:n,onWatchUpdated(e,r,n){let a=e.watcher;if(a instanceof nn&&!t.has(a)){if(t.add(a),i){s.delete(a);let e=i(a,r,n);return!0===e&&(e=a.refetch().retain()),!1!==e&&o.set(a,e),e}null!==i&&"cache-only"!==a.options.fetchPolicy&&s.set(a,{oq:a,lastDiff:n,diff:r})}}})}return s.size&&s.forEach(({oq:e,lastDiff:t,diff:r})=>{let n;i&&(r||(r=e.getCacheDiff()),n=i(e,r,t)),i&&!0!==n||(n=e.refetch().retain()),!1!==n&&o.set(e,n)}),n&&this.cache.removeOptimistic(n),o}noCacheWarningsByCause=new WeakSet;maskOperation(e){var t;let r,{document:n,data:i}=e;return this.dataMasking?(t=this.cache,(eO(r=e8(n),43),null==i)?i:rT(i,r.selectionSet,{operationType:r.operation,operationName:r.name?.value,fragmentMap:rS(r_(n)),cache:t,mutableTargets:new WeakMap,knownChanged:new WeakSet})):i}maskFragment(e){var t,r;let n,i,{data:s,fragment:o,fragmentName:a}=e;return this.dataMasking?(t=this.cache,r=a,n=o.definitions.filter(e=>e.kind===y.FRAGMENT_DEFINITION),void 0===r&&(eO(1===n.length,41,n.length),r=n[0].name.value),(eO(!!(i=n.find(e=>e.name.value===r)),42,r),null==s||rv(s,{}))?s:rT(s,i.selectionSet,{operationType:"fragment",operationName:i.name.value,fragmentMap:rS(r_(o)),cache:t,mutableTargets:new WeakMap,knownChanged:new WeakSet})):s}fetchQueryByPolicy({query:e,variables:t,fetchPolicy:r,errorPolicy:n,returnPartialData:i,context:s},{cacheWriteBehavior:o,onCacheHit:a,queryInfo:l,observableQuery:c}){let u=()=>this.cache.diff({query:e,variables:t,returnPartialData:!0,optimistic:!0}),h=(r,o)=>{let l=r.result,c=e=>(r.complete||i||(e=void 0),{data:e,dataState:r.complete?"complete":e?"partial":"empty",loading:rI(o),networkStatus:o,partial:!r.complete}),u=e=>t4({kind:"N",value:c(e),source:"cache"});return(r.complete||i)&&this.getDocumentInfo(e).hasForcedResolvers?(a(),t0(this.localState.execute({client:this.client,document:e,remoteResult:l?{data:l}:void 0,context:s,variables:t,onlyRunForcedResolvers:!0,returnPartialData:!0}).then(e=>({kind:"N",value:c(e.data||void 0),source:"cache"})))):u("none"===n&&o===v.refetch&&r.missing?void 0:l||void 0)},d=()=>this.getResultsFromLink({query:e,variables:t,context:s,fetchPolicy:r,errorPolicy:n},{cacheWriteBehavior:o,queryInfo:l,observableQuery:c}).pipe(nd(),A(function(e,t){e.subscribe(eh(t,function(e){t.next(t3.createNext(e))},function(){t.next(t3.createComplete()),t.complete()},function(e){t.next(t3.createError(e)),t.complete()}))}),ef(e=>({...e,source:"network"})));switch(r){default:case"cache-first":{let e=u();if(e.complete)return{fromLink:!1,observable:h(e,v.ready)};if(i)return{fromLink:!0,observable:t1(h(e,v.loading),d())};return{fromLink:!0,observable:d()}}case"cache-and-network":{let e=u();if(e.complete||i)return{fromLink:!0,observable:t1(h(e,v.loading),d())};return{fromLink:!0,observable:d()}}case"cache-only":return{fromLink:!1,observable:t1(h(u(),v.ready))};case"network-only":case"no-cache":return{fromLink:!0,observable:d()};case"standby":return{fromLink:!1,observable:eB}}}}function nd(){let e=!1;return rr({next(){e=!0},complete(){eO(e,95)}})}class nf{link;cache;disableNetworkFetches;set prioritizeCacheValues(e){this.queryManager.prioritizeCacheValues=e}get prioritizeCacheValues(){return this.queryManager.prioritizeCacheValues}version;queryDeduplication;defaultOptions;devtoolsConfig;queryManager;devToolsHookCb;resetStoreCallbacks=[];clearStoreCallbacks=[];constructor(e){const{cache:t,documentTransform:r,ssrMode:n=!1,ssrForceFetchDelay:i=0,queryDeduplication:s=!0,defaultOptions:o,defaultContext:a,assumeImmutableResults:l=t.assumeImmutableResults,localState:c,devtools:u,dataMasking:h,link:d,incrementalHandler:f=new eM}=e;this.link=d,this.cache=t,this.queryDeduplication=s,this.defaultOptions=o||{},this.devtoolsConfig={...u,enabled:u?.enabled??!1},this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.watchFragment=this.watchFragment.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.refetchObservableQueries=this.refetchObservableQueries.bind(this),this.version=ew,this.queryManager=new nh({client:this,defaultOptions:this.defaultOptions,defaultContext:a,documentTransform:r,queryDeduplication:s,ssrMode:n,dataMasking:!!h,clientOptions:e,incrementalHandler:f,assumeImmutableResults:l,onBroadcast:this.devtoolsConfig.enabled?()=>{this.devToolsHookCb&&this.devToolsHookCb()}:void 0,localState:c}),this.prioritizeCacheValues=n||i>0,i&&setTimeout(()=>{this.prioritizeCacheValues=!1},i),this.devtoolsConfig.enabled&&this.connectToDevTools()}connectToDevTools(){if("undefined"==typeof window)return;let e=window,t=Symbol.for("apollo.devtools");(e[t]=e[t]||[]).push(this),e.__APOLLO_CLIENT__=this}get documentTransform(){return this.queryManager.documentTransform}get localState(){return this.queryManager.localState}set localState(e){this.queryManager.localState=e}stop(){this.queryManager.stop()}watchQuery(e){return this.defaultOptions.watchQuery&&(e=tR(this.defaultOptions.watchQuery,e)),this.queryManager.watchQuery(e)}query(e){return this.defaultOptions.query&&(e=tR(this.defaultOptions.query,e)),this.queryManager.query(e)}mutate(e){let t=tR(tA({fetchPolicy:"network-only",errorPolicy:"none"},this.defaultOptions.mutate),e);return e5(t.mutation,g.MUTATION),this.queryManager.mutate(t)}subscribe(e){let t={},r=this.queryManager.startGraphQLSubscription(e);return Object.assign(r.pipe(ef(r=>({...r,data:this.queryManager.maskOperation({document:e.query,data:r.data,fetchPolicy:e.fetchPolicy,cause:t})}))),{restart:r.restart})}readQuery(e,t=!1){return this.cache.readQuery({...e,query:this.transform(e.query)},t)}watchFragment(e){let t=this.queryManager.dataMasking;return this.cache.watchFragment({...e,fragment:this.transform(e.fragment,t)}).pipe(ef(e=>e))}readFragment(e,t=!1){return this.cache.readFragment({...e,fragment:this.transform(e.fragment)},t)}writeQuery(e){let t=this.cache.writeQuery(e);return!1!==e.broadcast&&this.queryManager.broadcastQueries(),t}writeFragment(e){let t=this.cache.writeFragment(e);return!1!==e.broadcast&&this.queryManager.broadcastQueries(),t}__actionHookForDevTools(e){this.devToolsHookCb=e}__requestRaw(e){return e9(this.link,e,{client:this})}resetStore(){return Promise.resolve().then(()=>this.queryManager.clearStore({discardWatches:!1})).then(()=>Promise.all(this.resetStoreCallbacks.map(e=>e()))).then(()=>this.refetchObservableQueries())}clearStore(){return Promise.resolve().then(()=>this.queryManager.clearStore({discardWatches:!0})).then(()=>Promise.all(this.clearStoreCallbacks.map(e=>e())))}onResetStore(e){return this.resetStoreCallbacks.push(e),()=>{this.resetStoreCallbacks=this.resetStoreCallbacks.filter(t=>t!==e)}}onClearStore(e){return this.clearStoreCallbacks.push(e),()=>{this.clearStoreCallbacks=this.clearStoreCallbacks.filter(t=>t!==e)}}reFetchObservableQueries;refetchObservableQueries(e){return this.queryManager.refetchObservableQueries(e)}refetchQueries(e){let t=this.queryManager.refetchQueries(e),r=[],n=[];t.forEach((e,t)=>{r.push(t),n.push(e)});let i=Promise.all(n);return i.queries=r,i.results=n,i.catch(e=>{}),i}getObservableQueries(e="active"){return this.queryManager.getObservableQueries(e)}extract(e){return this.cache.extract(e)}restore(e){return this.cache.restore(e)}setLink(e){this.link=e}get defaultContext(){return this.queryManager.defaultContext}maskedFragmentTransform=new tj(tM);transform(e,t=!1){let r=this.queryManager.transform(e);return t?this.maskedFragmentTransform.transformDocument(r):r}}let np={kind:y.FIELD,name:{kind:y.NAME,value:"__typename"}},nm=Object.assign(function(e){return ey(e,{SelectionSet:{enter(e,t,r){if(r&&r.kind===y.OPERATION_DEFINITION)return;let{selections:n}=e;if(!(!n||n.some(e=>e.kind===y.FIELD&&("__typename"===e.name.value||0===e.name.value.lastIndexOf("__",0))))&&!(r.kind===y.FIELD&&r.directives&&r.directives.some(e=>"export"===e.name.value)))return{...e,selections:[...n,np]}}}})},{added:e=>e===np});function ng(e){return!!(e&&"object"==typeof e&&"string"==typeof e.__ref)}function ny(e,t){let r=t,n=[];return e.definitions.forEach(e=>{if("OperationDefinition"===e.kind)throw eI(10,e.operation,e.name?` named '${e.name.value}'`:"");"FragmentDefinition"===e.kind&&n.push(e)}),void 0===r&&(eO(1===n.length,11,n.length),r=n[0].name.value),{...e,definitions:[{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}},...e.definitions]}}class nb{assumeImmutableResults=!1;lookupFragment(e){return null}batch(e){let t,r="string"==typeof e.optimistic?e.optimistic:!1===e.optimistic?null:void 0;return this.performTransaction(()=>t=e.update(this),r),t}recordOptimisticTransaction(e,t){this.performTransaction(e,t)}transformDocument(e){return e}transformForLink(e){return e}identify(e){}gc(){return[]}modify(e){return!1}readQuery(e,t=!!e.optimistic){return this.read({...e,rootId:e.id||"ROOT_QUERY",optimistic:t})}watchFragment(e){let t,{fragment:r,fragmentName:n,from:i,optimistic:s=!0,...o}=e,a=this.getFragmentDoc(r,n),l=void 0===i||"string"==typeof i?i:this.identify(i),c={...o,returnPartialData:!0,id:l,query:a,optimistic:s};return new eP(r=>this.watch({...c,immediate:!0,callback:n=>{let i=n.result;if(null===i&&(i={}),t&&r3(a,{data:t.result},{data:i},e.variables))return;let s={data:i,dataState:n.complete?"complete":"partial",complete:!!n.complete};n.missing&&(s.missing=n.missing.missing),t={...n,result:i},r.next(s)}}))}getFragmentDoc=tI(ny,{max:eV["cache.fragmentQueryDocuments"]||1e3,cache:e0});readFragment(e,t=!!e.optimistic){return this.read({...e,query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t})}writeQuery({id:e,data:t,...r}){return this.write(Object.assign(r,{dataId:e||"ROOT_QUERY",result:t}))}writeFragment({id:e,data:t,fragment:r,fragmentName:n,...i}){return this.write(Object.assign(i,{query:this.getFragmentDoc(r,n),dataId:e,result:t}))}updateQuery(e,t){return this.batch({update(r){let n=r.readQuery(e),i=t(n);return null==i?n:(r.writeQuery({...e,data:i}),i)}})}updateFragment(e,t){return this.batch({update(r){let n=r.readFragment(e),i=t(n);return null==i?n:(r.writeFragment({...e,data:i}),i)}})}}let{hasOwnProperty:nv}=Object.prototype,nx=function(e,t,r){return this.merge(e[r],t[r])};class nw{reconciler;constructor(e=nx){this.reconciler=e}merge(e,t,...r){return rN(t)&&rN(e)?(Object.keys(t).forEach(n=>{if(nv.call(e,n)){let i=e[n];if(t[n]!==i){let s=this.reconciler(e,t,n,...r);s!==i&&((e=this.shallowCopyForMerge(e))[n]=s)}}else(e=this.shallowCopyForMerge(e))[n]=t[n]}),e):t}isObject=rN;pastCopies=new Set;shallowCopyForMerge(e){return rN(e)&&!this.pastCopies.has(e)&&(e=Array.isArray(e)?e.slice(0):{__proto__:Object.getPrototypeOf(e),...e},this.pastCopies.add(e)),e}}function nk(e){return{__ref:String(e)}}let{hasOwnProperty:nE}=Object.prototype;function nS({__typename:e,id:t,_id:r},n){if("string"==typeof e&&(n&&(n.keyObject=null!=t?{id:t}:null!=r?{_id:r}:void 0),null==t&&null!=r&&(t=r),null!=t))return`${e}:${"number"==typeof t||"string"==typeof t?t:JSON.stringify(t)}`}let n_={dataIdFromObject:nS,resultCaching:!0},nN=/^[_a-z][_0-9a-z]*/i;function nC(e){let t=e.match(nN);return t?t[0]:e}function nO(e){return rN(e)&&!ng(e)&&!rG(e)}function nT(e,t){let r=rS(r_(e));return{fragmentMap:r,lookupFragment(e){let n=r[e];return!n&&t&&(n=t.lookup(e)),n||null}}}let nI={},nD=()=>nI,nj={};class nA{policies;group;data={};constructor(e,t){this.policies=e,this.group=t}toObject(){return{...this.data}}has(e){return void 0!==this.lookup(e,!0)}get(e,t){if(this.group.depend(e,t),nE.call(this.data,e)){let r=this.data[e];if(r&&nE.call(r,t))return r[t]}return"__typename"===t&&nE.call(this.policies.rootTypenamesById,e)?this.policies.rootTypenamesById[e]:this instanceof nF?this.parent.get(e,t):void 0}lookup(e,t){return(t&&this.group.depend(e,"__exists"),nE.call(this.data,e))?this.data[e]:this instanceof nF?this.parent.lookup(e,t):this.policies.rootTypenamesById[e]?{}:void 0}merge(e,t){let r;ng(e)&&(e=e.__ref),ng(t)&&(t=t.__ref);let n="string"==typeof e?this.lookup(r=e):e,i="string"==typeof t?this.lookup(r=t):t;if(!i)return;eO("string"==typeof r,96);let s=new nw(nU).merge(n,i);if(this.data[r]=s,s!==n&&(delete this.refs[r],this.group.caching)){let e={};n||(e.__exists=1),Object.keys(i).forEach(t=>{if(!n||n[t]!==s[t]){e[t]=1;let r=nC(t);r===t||this.policies.hasKeyArgs(s.__typename,r)||(e[r]=1),void 0!==s[t]||this instanceof nF||delete s[t]}}),e.__typename&&!(n&&n.__typename)&&this.policies.rootTypenamesById[r]===s.__typename&&delete e.__typename,Object.keys(e).forEach(e=>this.group.dirty(r,e))}}modify(e,t,r){let n=this.lookup(e);if(n){let i={},s=!1,o=!0,a={DELETE:nI,INVALIDATE:nj,isReference:ng,toReference:this.toReference,canRead:this.canRead,readField:(t,r)=>this.policies.readField("string"==typeof t?{fieldName:t,from:r||nk(e)}:t,{store:this})};if(Object.keys(n).forEach(l=>{let c=nC(l),u=n[l];if(void 0===u)return;let h="function"==typeof t?t:t[l]||(r?void 0:t[c]);if(h){let t=h===nD?nI:h(u,{...a,fieldName:c,storeFieldName:l,storage:this.getStorage(e,l)});if(t===nj)this.group.dirty(e,l);else if(t===nI&&(t=void 0),t!==u&&(i[l]=t,s=!0,u=t,0)){let e=e=>{if(void 0===this.lookup(e.__ref))return!0};if(ng(t))e(t);else if(Array.isArray(t)){let r,n=!1;for(let i of t){if(ng(i)){if(n=!0,e(i))break}else if("object"==typeof i&&i){let[e]=this.policies.identify(i);e&&(r=i)}if(n&&void 0!==r)break}}}}void 0!==u&&(o=!1)}),s)return this.merge(e,i),o&&(this instanceof nF?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1}delete(e,t,r){let n=this.lookup(e);if(n){let i=this.getFieldValue(n,"__typename"),s=t&&r?this.policies.getStoreFieldName({typename:i,fieldName:t,args:r}):t;return this.modify(e,s?{[s]:nD}:nD,!!r)}return!1}evict(e,t){let r=!1;return e.id&&(nE.call(this.data,e.id)&&(r=this.delete(e.id,e.fieldName,e.args)),this instanceof nF&&this!==t&&(r=this.parent.evict(e,t)||r),(e.fieldName||r)&&this.group.dirty(e.id,e.fieldName||"__exists")),r}clear(){this.replace(null)}extract(){let e=this.toObject(),t=[];return this.getRootIdSet().forEach(e=>{nE.call(this.policies.rootTypenamesById,e)||t.push(e)}),t.length&&(e.__META={extraRootIds:t.sort()}),e}replace(e){if(Object.keys(this.data).forEach(t=>{e&&nE.call(e,t)||this.delete(t)}),e){let{__META:t,...r}=e;Object.keys(r).forEach(e=>{this.merge(e,r[e])}),t&&t.extraRootIds.forEach(this.retain,this)}}rootIds={};retain(e){return this.rootIds[e]=(this.rootIds[e]||0)+1}release(e){if(this.rootIds[e]>0){let t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0}getRootIdSet(e=new Set){return Object.keys(this.rootIds).forEach(e.add,e),this instanceof nF?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e}gc(){let e=this.getRootIdSet(),t=this.toObject();e.forEach(r=>{nE.call(t,r)&&(Object.keys(this.findChildRefIds(r)).forEach(e.add,e),delete t[r])});let r=Object.keys(t);if(r.length){let e=this;for(;e instanceof nF;)e=e.parent;r.forEach(t=>e.delete(t))}return r}refs={};findChildRefIds(e){if(!nE.call(this.refs,e)){let t=this.refs[e]={},r=this.data[e];if(!r)return t;let n=new Set([r]);n.forEach(e=>{ng(e)&&(t[e.__ref]=!0),rN(e)&&Object.keys(e).forEach(t=>{let r=e[t];rN(r)&&n.add(r)})})}return this.refs[e]}makeCacheKey(){return this.group.keyMaker.lookupArray(arguments)}getFieldValue=(e,t)=>ng(e)?this.get(e.__ref,t):e&&e[t];canRead=e=>ng(e)?this.has(e.__ref):"object"==typeof e;toReference=(e,t)=>{if("string"==typeof e)return nk(e);if(ng(e))return e;let[r]=this.policies.identify(e);if(r){let n=nk(r);return t&&this.merge(r,e),n}};get supportsResultCaching(){return this.group.caching}}class nR{caching;parent;d=null;keyMaker;constructor(e,t=null){this.caching=e,this.parent=t,this.resetCaching()}resetCaching(){this.d=this.caching?tC():null,this.keyMaker=new eK}depend(e,t){if(this.d){this.d(t+"#"+e);let r=nC(t);r!==t&&this.d(r+"#"+e),this.parent&&this.parent.depend(e,t)}}dirty(e,t){this.d&&this.d.dirty(t+"#"+e,"__exists"===t?"forget":"setDirty")}}function nM(e,t){nB(e)&&e.group.depend(t,"__exists")}class nL extends nA{constructor({policies:e,resultCaching:t=!0,seed:r}){super(e,new nR(t)),r&&this.replace(r)}stump=new nP(this);addLayer(e,t){return this.stump.addLayer(e,t)}removeLayer(){return this}storageTrie=new eK;getStorage(){return this.storageTrie.lookupArray(arguments)}}nA.Root=nL;class nF extends nA{id;parent;replay;group;constructor(e,t,r,n){super(t.policies,n),this.id=e,this.parent=t,this.replay=r,this.group=n,r(this)}addLayer(e,t){return new nF(e,this,t,this.group)}removeLayer(e){let t=this.parent.removeLayer(e);return e===this.id?(this.group.caching&&Object.keys(this.data).forEach(e=>{let r=this.data[e],n=t.lookup(e);n?r?r!==n&&Object.keys(r).forEach(t=>{rv(r[t],n[t])||this.group.dirty(e,t)}):(this.group.dirty(e,"__exists"),Object.keys(n).forEach(t=>{this.group.dirty(e,t)})):this.delete(e)}),t):t===this.parent?this:t.addLayer(this.id,this.replay)}toObject(){return{...this.parent.toObject(),...this.data}}findChildRefIds(e){let t=this.parent.findChildRefIds(e);return nE.call(this.data,e)?{...t,...super.findChildRefIds(e)}:t}getStorage(...e){let t=this.parent;for(;t.parent;)t=t.parent;return t.getStorage(...e)}}class nP extends nF{constructor(e){super("EntityStore.Stump",e,()=>{},new nR(e.group.caching,e.group))}removeLayer(){return this}merge(e,t){return this.parent.merge(e,t)}}function nU(e,t,r){let n=e[r],i=t[r];return rv(n,i)?n:i}function nB(e){return!!(e&&e.supportsResultCaching)}function nV(e,t){if(e.arguments&&e.arguments.length){let r={};return e.arguments.forEach(({name:e,value:n})=>rQ(r,e,n,t)),r}return null}let nq=["connection","include","skip","client","rest","export","nonreactive"],nz=rn,nW=Object.assign(function(e,t,r){if(t&&r&&r.connection&&r.connection.key){if(r.connection.filter&&r.connection.filter.length>0){let e=r.connection.filter?r.connection.filter:[];e.sort();let n={};e.forEach(e=>{n[e]=t[e]});let i=nz(n);if("{}"!==i)return`${r.connection.key}(${i})`}return r.connection.key}let n=e;if(t){let e=nz(t);"{}"!==e&&(n+=`(${e})`)}return r&&Object.keys(r).forEach(e=>{-1===nq.indexOf(e)&&(r[e]&&Object.keys(r[e]).length?n+=`@${e}(${nz(r[e])})`:n+=`@${e}`)}),n},{setStringify(e){let t=nz;return nz=e,t}}),n$={};function nQ(e){let t=JSON.stringify(e);return n$[t]||(n$[t]={})}function nK(e){let t=nQ(e);return t.keyFieldsFn||(t.keyFieldsFn=(t,r)=>{let n=(e,t)=>r.readField(t,e),i=r.keyObject=nG(e,e=>{let i=nY(r.storeObject,e,n);return void 0===i&&t!==r.storeObject&&nE.call(t,e[0])&&(i=nY(t,e,nJ)),eO(void 0!==i,99,e.join("."),t),i});return`${r.typename}:${JSON.stringify(i)}`})}function nH(e){let t=nQ(e);return t.keyArgsFn||(t.keyArgsFn=(t,{field:r,variables:n,fieldName:i})=>{let s=JSON.stringify(nG(e,e=>{let i=e[0],s=i.charAt(0);if("@"===s){if(r&&rJ(r.directives)){let t=i.slice(1),s=r.directives.find(e=>e.name.value===t),o=s&&nV(s,n);return o&&nY(o,e.slice(1))}return}if("$"===s){let t=i.slice(1);if(n&&nE.call(n,t)){let r=e.slice(0);return r[0]=t,nY(n,r)}return}if(t)return nY(t,e)}));return(t||"{}"!==s)&&(i+=":"+s),i})}function nG(e,t){let r=new nw;return(function e(t){let r=nQ(t);if(!r.paths){let n=r.paths=[],i=[];t.forEach((r,s)=>{rG(r)?(e(r).forEach(e=>n.push(i.concat(e))),i.length=0):(i.push(r),rG(t[s+1])||(n.push(i.slice(0)),i.length=0))})}return r.paths})(e).reduce((e,n)=>{let i=t(n);if(void 0!==i){for(let e=n.length-1;e>=0;--e)i={[n[e]]:i};e=r.merge(e,i)}return e},{})}function nJ(e,t){return e[t]}function nY(e,t,r){return r=r||nJ,function e(t){return rN(t)?rG(t)?t.map(e):nG(Object.keys(t).sort(),e=>nY(t,e)):t}(t.reduce(function e(t,n){return rG(t)?t.map(t=>e(t,n)):t&&r(t,n)},e))}let nX=new ts,nZ=new WeakMap;function n0(e){let t=nZ.get(e);return t||nZ.set(e,t={vars:new Set,dep:tC()}),t}function n1(e){n0(e).vars.forEach(t=>t.forgetCache(e))}function n2(e){let t=new Set,r=new Set,n=function(s){if(arguments.length>0){if(e!==s){e=s,t.forEach(e=>{var t;n0(e).dep.dirty(n),(t=e).broadcastWatches&&t.broadcastWatches()});let i=Array.from(r);r.clear(),i.forEach(t=>t(e))}}else{let e=nX.getValue();e&&(i(e),n0(e).dep(n))}return e};n.onNextChange=e=>(r.add(e),()=>{r.delete(e)});let i=n.attachCache=e=>(t.add(e),n0(e).vars.add(n),n);return n.forgetCache=e=>t.delete(e),n}function n4(e){return void 0!==e.args?e.args:e.field?nV(e.field,e.variables):null}let n3=()=>void 0,n5=(e,t)=>t.fieldName,n8=(e,t,{mergeObjects:r})=>r(e,t),n6=(e,t)=>t;class n9{config;typePolicies={};toBeAdded={};supertypeMap=new Map;fuzzySubtypes=new Map;cache;rootIdsByTypename={};rootTypenamesById={};usingPossibleTypes=!1;constructor(e){this.config=e,this.config={dataIdFromObject:nS,...e},this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}identify(e,t){let r,n=this,i=t&&(t.typename||t.storeObject?.__typename)||e.__typename;if(i===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];let s=t&&t.storeObject||e,o={...t,typename:i,storeObject:s,readField:t&&t.readField||((...e)=>{let t=ie(e,s);return n.readField(t,{store:n.cache.data,variables:t.variables})})},a=i&&this.getTypePolicy(i),l=a&&a.keyFn||this.config.dataIdFromObject;return rO.withValue(!0,()=>{for(;l;){let t=l({...e,...s},o);if(rG(t))l=nK(t);else{r=t;break}}}),r=r?String(r):void 0,o.keyObject?[r,o.keyObject]:[r]}addTypePolicies(e){Object.keys(e).forEach(t=>{let{queryType:r,mutationType:n,subscriptionType:i,...s}=e[t];r&&this.setRootTypename("Query",t),n&&this.setRootTypename("Mutation",t),i&&this.setRootTypename("Subscription",t),nE.call(this.toBeAdded,t)?this.toBeAdded[t].push(s):this.toBeAdded[t]=[s]})}updateTypePolicy(e,t,r){let n=this.getTypePolicy(e),{keyFields:i,fields:s}=t;function o(e,t){e.merge="function"==typeof t?t:!0===t?n8:!1===t?n6:e.merge}o(n,t.merge),n.keyFn=!1===i?n3:rG(i)?nK(i):"function"==typeof i?i:n.keyFn,s&&Object.keys(s).forEach(t=>{let n=r[t];n&&n?.typename===e||(n=r[t]={typename:e});let i=s[t];if("function"==typeof i)n.read=i;else{let{keyArgs:e,read:t,merge:r}=i;n.keyFn=!1===e?n5:rG(e)?nH(e):"function"==typeof e?e:n.keyFn,"function"==typeof t&&(n.read=t),o(n,r)}n.read&&n.merge&&(n.keyFn=n.keyFn||n5)})}setRootTypename(e,t=e){let r="ROOT_"+e.toUpperCase(),n=this.rootTypenamesById[r];t!==n&&(eO(!n||n===e,100,e),n&&delete this.rootIdsByTypename[n],this.rootIdsByTypename[t]=r,this.rootTypenamesById[r]=t)}addPossibleTypes(e){this.usingPossibleTypes=!0,Object.keys(e).forEach(t=>{this.getSupertypeSet(t,!0),e[t].forEach(e=>{this.getSupertypeSet(e,!0).add(t);let r=e.match(nN);r&&r[0]===e||this.fuzzySubtypes.set(e,new RegExp(e))})})}getTypePolicy(e){if(!nE.call(this.typePolicies,e)){let t=this.typePolicies[e]={};t.fields={};let r=this.supertypeMap.get(e);!r&&this.fuzzySubtypes.size&&(r=this.getSupertypeSet(e,!0),this.fuzzySubtypes.forEach((t,n)=>{if(t.test(e)){let e=this.supertypeMap.get(n);e&&e.forEach(e=>r.add(e))}})),r&&r.size&&r.forEach(e=>{let{fields:r,...n}=this.getTypePolicy(e);Object.assign(t,n),Object.assign(t.fields,r)})}let t=this.toBeAdded[e];return t&&t.length&&t.splice(0).forEach(t=>{this.updateTypePolicy(e,t,this.typePolicies[e].fields)}),this.typePolicies[e]}getFieldPolicy(e,t){if(e)return this.getTypePolicy(e).fields[t]}getSupertypeSet(e,t){let r=this.supertypeMap.get(e);return!r&&t&&this.supertypeMap.set(e,r=new Set),r}fragmentMatches(e,t,r,n){if(!e.typeCondition)return!0;if(!t)return!1;let i=e.typeCondition.name.value;if(t===i)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(i)){let s=this.getSupertypeSet(t,!0),o=[s],a=e=>{let t=this.getSupertypeSet(e,!1);t&&t.size&&0>o.indexOf(t)&&o.push(t)},l=!!(r&&this.fuzzySubtypes.size),c=!1;for(let u=0;u<o.length;++u){let h=o[u];if(h.has(i))return s.has(i)||s.add(i),!0;h.forEach(a),l&&u===o.length-1&&function e(t,r,n){return!!rN(r)&&(rG(r)?r.every(r=>e(t,r,n)):t.selections.every(t=>{if(r2(t)&&r4(t,n)){let i=rC(t);return nE.call(r,i)&&(!t.selectionSet||e(t.selectionSet,r[i],n))}return!0}))}(e.selectionSet,r,n)&&(l=!1,c=!0,this.fuzzySubtypes.forEach((e,r)=>{let n=t.match(e);n&&n[0]===t&&a(r)}))}}return!1}hasKeyArgs(e,t){let r=this.getFieldPolicy(e,t);return!!(r&&r.keyFn)}getStoreFieldName(e){var t,r;let n,i,s,{typename:o,fieldName:a}=e,l=this.getFieldPolicy(o,a),c=l&&l.keyFn;if(c&&o){let t={typename:o,fieldName:a,field:e.field||null,variables:e.variables},r=n4(e);for(;c;){let e=c(r,t);if(rG(e))c=nH(e);else{n=e||a;break}}}return(void 0===n&&(n=e.field?(t=e.field,r=e.variables,i=null,t.directives&&(i={},t.directives.forEach(e=>{i[e.name.value]={},e.arguments&&e.arguments.forEach(({name:t,value:n})=>rQ(i[e.name.value],t,n,r))})),s=null,t.arguments&&t.arguments.length&&(s={},t.arguments.forEach(({name:e,value:t})=>rQ(s,e,t,r))),nW(t.name.value,s,i)):nW(a,n4(e))),!1===n)?a:a===nC(n)?n:a+":"+n}readField(e,t){let r=e.from;if(!r||!(e.field||e.fieldName))return;if(void 0===e.typename){let n=t.store.getFieldValue(r,"__typename");n&&(e.typename=n)}let n=this.getStoreFieldName(e),i=nC(n),s=t.store.getFieldValue(r,n),o=this.getFieldPolicy(e.typename,i),a=o&&o.read;if(a){let i=n7(this,r,e,t,t.store.getStorage(ng(r)?r.__ref:r,n));return nX.withValue(this.cache,a,[s,i])}return s}getReadFunction(e,t){let r=this.getFieldPolicy(e,t);return r&&r.read}getMergeFunction(e,t,r){let n=this.getFieldPolicy(e,t),i=n&&n.merge;return!i&&r&&(i=(n=this.getTypePolicy(r))&&n.merge),i}runMergeFunction(e,t,{field:r,typename:n,merge:i},s,o){return i===n8?it(s.store)(e,t):i===n6?t:(s.overwrite&&(e=void 0),i(e,t,n7(this,void 0,{typename:n,fieldName:r.name.value,field:r,variables:s.variables},s,o||{})))}}function n7(e,t,r,n,i){let s=e.getStoreFieldName(r),o=nC(s),a=r.variables||n.variables,{toReference:l,canRead:c}=n.store;return{args:n4(r),field:r.field||null,fieldName:o,storeFieldName:s,variables:a,isReference:ng,toReference:l,storage:i,cache:e.cache,canRead:c,readField:(...r)=>e.readField(ie(r,t,a),n),mergeObjects:it(n.store)}}function ie(e,t,r){let n,{0:i,1:s,length:o}=e;return"string"==typeof i?n={fieldName:i,from:o>1?s:t}:(n={...i},nE.call(n,"from")||(n.from=t)),void 0===n.variables&&(n.variables=r),n}function it(e){return function(t,r){if(rG(t)||rG(r))throw eI(103);if(rN(t)&&rN(r)){let n=e.getFieldValue(t,"__typename"),i=e.getFieldValue(r,"__typename");if(n&&i&&n!==i)return r;if(ng(t)&&nO(r))return e.merge(t.__ref,r),t;if(nO(t)&&ng(r))return e.merge(t,r.__ref),r;if(nO(t)&&nO(r))return{...t,...r}}return r}}class ir extends Error{message;path;query;variables;constructor(e,t,r,n){if(super(e),this.message=e,this.path=t,this.query=r,this.variables=n,this.name="MissingFieldError",Array.isArray(this.path)){this.missing=this.message;for(let e=this.path.length-1;e>=0;--e)this.missing={[this.path[e]]:this.missing}}else this.missing=this.path;this.__proto__=ir.prototype}missing}function ii(e){return[e.selectionSet,e.objectOrReference,e.context]}class is{executeSelectionSet;executeSubSelectedArray;config;knownResults=new WeakMap;constructor(e){this.config=e,this.executeSelectionSet=tI(e=>{let t=ii(e),r=this.executeSelectionSet.peek(...t);return r||(nM(e.context.store,e.enclosingRef.__ref),this.execSelectionSetImpl(e))},{max:eV["inMemoryCache.executeSelectionSet"]||5e4,keyArgs:ii,makeCacheKey(e,t,r){if(nB(r.store))return r.store.makeCacheKey(e,ng(t)?t.__ref:t,r.varString)}}),this.executeSubSelectedArray=tI(e=>(nM(e.context.store,e.enclosingRef.__ref),this.execSubSelectedArrayImpl(e)),{max:eV["inMemoryCache.executeSubSelectedArray"]||1e4,makeCacheKey({field:e,array:t,context:r}){if(nB(r.store))return r.store.makeCacheKey(e,t,r.varString)}})}diffQueryAgainstStore({store:e,query:t,rootId:r="ROOT_QUERY",variables:n,returnPartialData:i=!0}){let s,o,a=this.config.cache.policies;n={...rK((eO((s=e8(t))&&"query"===s.operation,13),s)),...n};let l=nk(r),c=this.executeSelectionSet({selectionSet:r1(t).selectionSet,objectOrReference:l,enclosingRef:l,context:{store:e,query:t,policies:a,variables:n,varString:rn(n),...nT(t,this.config.fragments)}});c.missing&&(o=new ir(function(e){try{JSON.stringify(e,(e,t)=>{if("string"==typeof t)throw t;return t})}catch(e){return e}}(c.missing),c.missing,t,n));let u=!o,{result:h}=c;return{result:u||i?0===Object.keys(h).length?null:h:null,complete:u,missing:o}}isFresh(e,t,r,n){if(nB(n.store)&&this.knownResults.get(e)===r){let i=this.executeSelectionSet.peek(r,t,n);if(i&&e===i.result)return!0}return!1}execSelectionSetImpl({selectionSet:e,objectOrReference:t,enclosingRef:r,context:n}){let i;if(ng(t)&&!n.policies.rootTypenamesById[t.__ref]&&!n.store.has(t.__ref))return{result:{},missing:`Dangling reference to missing ${t.__ref} object`};let{variables:s,policies:o,store:a}=n,l=a.getFieldValue(t,"__typename"),c=[],u=new nw;function h(e,t){return e.missing&&(i=u.merge(i,{[t]:e.missing})),e.result}"string"!=typeof l||o.rootIdsByTypename[l]||c.push({__typename:l});let d=new Set(e.selections);d.forEach(e=>{if(r4(e,s))if(r2(e)){let s=o.readField({fieldName:e.name.value,field:e,variables:n.variables,from:t},n),a=rC(e);void 0===s?nm.added(e)||(i=u.merge(i,{[a]:`Can't find field '${e.name.value}' on ${ng(t)?t.__ref+" object":"object "+JSON.stringify(t,null,2)}`})):rG(s)?s.length>0&&(s=h(this.executeSubSelectedArray({field:e,array:s,enclosingRef:r,context:n}),a)):e.selectionSet&&null!=s&&(s=h(this.executeSelectionSet({selectionSet:e.selectionSet,objectOrReference:s,enclosingRef:ng(s)?s:r,context:n}),a)),void 0!==s&&c.push({[a]:s})}else{let t=r0(e,n.lookupFragment);if(!t&&e.kind===y.FRAGMENT_SPREAD)throw eI(104,e.name.value);t&&o.fragmentMatches(t,l)&&t.selectionSet.selections.forEach(d.add,d)}});let f={result:function(e){let t=e[0]||{},r=e.length;if(r>1){let n=new nw;for(let i=1;i<r;++i)t=n.merge(t,e[i])}return t}(c),missing:i};return f.result&&this.knownResults.set(f.result,e),f}execSubSelectedArrayImpl({field:e,array:t,enclosingRef:r,context:n}){let i,s=new nw;function o(e,t){return e.missing&&(i=s.merge(i,{[t]:e.missing})),e.result}return e.selectionSet&&(t=t.filter(n.store.canRead)),{result:t=t.map((t,i)=>null===t?null:rG(t)?o(this.executeSubSelectedArray({field:e,array:t,enclosingRef:r,context:n}),i):e.selectionSet?o(this.executeSelectionSet({selectionSet:e.selectionSet,objectOrReference:t,enclosingRef:ng(t)?t:r,context:n}),i):t),missing:i}}}let{toString:io}=Object.prototype;function ia(e,t,r){let n=`${t}${r}`,i=e.flavors.get(n);return i||e.flavors.set(n,i=e.clientOnly===t&&e.deferred===r?e:{...e,clientOnly:t,deferred:r}),i}class il{cache;reader;fragments;constructor(e,t,r){this.cache=e,this.reader=t,this.fragments=r}writeToStore(e,{query:t,result:r,dataId:n,variables:i,overwrite:s}){let o=e8(t),a=new nw,l={store:e,written:{},merge:(e,t)=>a.merge(e,t),variables:i={...rK(o),...i},varString:rn(i),...nT(t,this.fragments),overwrite:!!s,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map},c=this.processSelectionSet({result:r||{},dataId:n,selectionSet:o.selectionSet,mergeTree:{map:new Map},context:l});if(!ng(c))throw eI(106,r);return l.incomingById.forEach(({storeObject:t,mergeTree:r,fieldNodeSet:n},i)=>{let s=nk(i);if(r&&r.map.size){let e=this.applyMerges(r,s,t,l);if(ng(e))return;t=e}e.merge(i,t)}),e.retain(c.__ref),c}processSelectionSet({dataId:e,result:t,selectionSet:r,context:n,mergeTree:i}){let{policies:s}=this.cache,o={},a=e&&s.rootTypenamesById[e]||ip(t,r,n.fragmentMap)||e&&n.store.get(e,"__typename");"string"==typeof a&&(o.__typename=a);let l=(...e)=>{let t=ie(e,o,n.variables);if(ng(t.from)){let e=n.incomingById.get(t.from.__ref);if(e){let r=s.readField({...t,from:e.storeObject},n);if(void 0!==r)return r}}return s.readField(t,n)},c=new Set;this.flattenFields(r,t,n,a).forEach((e,r)=>{let n=t[rC(r)];if(c.add(r),void 0!==n){let t,c=s.getStoreFieldName({typename:a,fieldName:r.name.value,field:r,variables:e.variables}),u=iu(i,c),h=this.processFieldValue(n,r,r.selectionSet?ia(e,!1,!1):e,u);r.selectionSet&&(ng(h)||nO(h))&&(t=l("__typename",h));let d=s.getMergeFunction(a,r.name.value,t);d?u.info={field:r,typename:a,merge:d}:id(i,c),o=e.merge(o,{[c]:h})}});try{let[i,c]=s.identify(t,{typename:a,selectionSet:r,fragmentMap:n.fragmentMap,storeObject:o,readField:l});e=e||i,c&&(o=n.merge(o,c))}catch(t){if(!e)throw t}if("string"==typeof e){let s=nk(e),a=n.written[e]||(n.written[e]=[]);if(a.indexOf(r)>=0||(a.push(r),this.reader&&this.reader.isFresh(t,s,r,n)))return s;let l=n.incomingById.get(e);return l?(l.storeObject=n.merge(l.storeObject,o),l.mergeTree=function e(t,r){if(t===r||!r||ih(r))return t;if(!t||ih(t))return r;let n=t.info&&r.info?{...t.info,...r.info}:t.info||r.info,i=t.map.size&&r.map.size,s={info:n,map:i?new Map:t.map.size?t.map:r.map};if(i){let n=new Set(r.map.keys());t.map.forEach((t,i)=>{s.map.set(i,e(t,r.map.get(i))),n.delete(i)}),n.forEach(n=>{s.map.set(n,e(r.map.get(n),t.map.get(n)))})}return s}(l.mergeTree,i),c.forEach(e=>l.fieldNodeSet.add(e))):n.incomingById.set(e,{storeObject:o,mergeTree:ih(i)?void 0:i,fieldNodeSet:c}),s}return o}processFieldValue(e,t,r,n){return t.selectionSet&&null!==e?rG(e)?e.map((e,i)=>{let s=this.processFieldValue(e,t,r,iu(n,i));return id(n,i),s}):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:r,mergeTree:n}):e}flattenFields(e,t,r,n=ip(t,e,r.fragmentMap)){let i=new Map,{policies:s}=this.cache,o=new eK(!1);return!function e(a,l){let c=o.lookup(a,l.clientOnly,l.deferred);c.visited||(c.visited=!0,a.selections.forEach(o=>{if(!r4(o,r.variables))return;let{clientOnly:a,deferred:c}=l;if(!(a&&c)&&rJ(o.directives)&&o.directives.forEach(e=>{let t=e.name.value;if("client"===t&&(a=!0),"defer"===t){let t=nV(e,r.variables);t&&!1===t.if||(c=!0)}}),r2(o)){let e=i.get(o);e&&(a=a&&e.clientOnly,c=c&&e.deferred),i.set(o,ia(r,a,c))}else{let i=r0(o,r.lookupFragment);if(!i&&o.kind===y.FRAGMENT_SPREAD)throw eI(108,o.name.value);i&&s.fragmentMatches(i,n,t,r.variables)&&e(i.selectionSet,ia(r,a,c))}}))}(e,r),i}applyMerges(e,t,r,n,i){if(e.map.size&&!ng(r)){let s,o=!rG(r)&&(ng(t)||nO(t))?t:void 0,a=r;o&&!i&&(i=[ng(o)?o.__ref:o]);let l=(e,t)=>rG(e)?"number"==typeof t?e[t]:void 0:n.store.getFieldValue(e,String(t));e.map.forEach((e,t)=>{let r=l(o,t),c=l(a,t);if(void 0===c)return;i&&i.push(t);let u=this.applyMerges(e,r,c,n,i);u!==c&&(s=s||new Map).set(t,u),i&&eO(i.pop()===t)}),s&&(r=rG(a)?a.slice(0):{...a},s.forEach((e,t)=>{r[t]=e}))}return e.info?this.cache.policies.runMergeFunction(t,r,e.info,n,i&&n.store.getStorage(...i)):r}}let ic=[];function iu({map:e},t){return e.has(t)||e.set(t,ic.pop()||{map:new Map}),e.get(t)}function ih(e){return!e||!(e.info||e.map.size)}function id({map:e},t){let r=e.get(t);r&&ih(r)&&(ic.push(r),e.delete(t))}function ip(e,t,r){let n;for(let r of t.selections)if(r2(r)){if("__typename"===r.name.value)return e[rC(r)]}else n?n.push(r):n=[r];if("string"==typeof e.__typename)return e.__typename;if(n)for(let t of n){let n=ip(e,r0(t,r).selectionSet,r);if("string"==typeof n)return n}}class im extends nb{data;optimisticData;config;watches=new Set;storeReader;storeWriter;addTypenameTransform=new tj(nm);maybeBroadcastWatch;assumeImmutableResults=!0;policies;makeVar=n2;constructor(e={}){super(),this.config=tA(n_,e),this.policies=new n9({cache:this,dataIdFromObject:this.config.dataIdFromObject,possibleTypes:this.config.possibleTypes,typePolicies:this.config.typePolicies}),this.init()}init(){let e=this.data=new nA.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=e.stump,this.resetResultCache()}resetResultCache(){let{fragments:e}=this.config;this.addTypenameTransform.resetCache(),e?.resetCaches(),this.storeWriter=new il(this,this.storeReader=new is({cache:this,fragments:e}),e),this.maybeBroadcastWatch=tI((e,t)=>this.broadcastWatch(e,t),{max:eV["inMemoryCache.maybeBroadcastWatch"]||5e3,makeCacheKey:e=>{let t=e.optimistic?this.optimisticData:this.data;if(nB(t)){let{optimistic:r,id:n,variables:i}=e;return t.makeCacheKey(e.query,e.callback,rn({optimistic:r,id:n,variables:i}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(e=>e.resetCaching())}restore(e){return this.init(),e&&this.data.replace(e),this}extract(e=!1){return(e?this.optimisticData:this.data).extract()}read(e){let{returnPartialData:t=!1}=e;return this.storeReader.diffQueryAgainstStore({...e,store:e.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:t}).result}write(e){try{return++this.txCount,this.storeWriter.writeToStore(this.data,e)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}}modify(e){if(nE.call(e,"id")&&!e.id)return!1;let t=e.optimistic?this.optimisticData:this.data;try{return++this.txCount,t.modify(e.id||"ROOT_QUERY",e.fields,!1)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}}diff(e){return this.storeReader.diffQueryAgainstStore({...e,store:e.optimistic?this.optimisticData:this.data,rootId:e.id||"ROOT_QUERY",config:this.config})}watch(e){var t;return this.watches.size||(t=this,n0(t).vars.forEach(e=>e.attachCache(t))),this.watches.add(e),e.immediate&&this.maybeBroadcastWatch(e),()=>{this.watches.delete(e)&&!this.watches.size&&n1(this),this.maybeBroadcastWatch.forget(e)}}gc(e){rn.reset(),rW.reset();let t=this.optimisticData.gc();return e&&!this.txCount&&e.resetResultCache&&this.resetResultCache(),t}retain(e,t){return(t?this.optimisticData:this.data).retain(e)}release(e,t){return(t?this.optimisticData:this.data).release(e)}identify(e){if(ng(e))return e.__ref;try{return this.policies.identify(e)[0]}catch(e){}}evict(e){if(!e.id){if(nE.call(e,"id"))return!1;e={...e,id:"ROOT_QUERY"}}try{return++this.txCount,this.optimisticData.evict(e,this.data)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}}reset(e){return this.init(),rn.reset(),e&&e.discardWatches?(this.watches.forEach(e=>this.maybeBroadcastWatch.forget(e)),this.watches.clear(),n1(this)):this.broadcastWatches(),Promise.resolve()}removeOptimistic(e){let t=this.optimisticData.removeLayer(e);t!==this.optimisticData&&(this.optimisticData=t,this.broadcastWatches())}txCount=0;batch(e){let t,{update:r,optimistic:n=!0,removeOptimistic:i,onWatchUpdated:s}=e,o=e=>{let{data:n,optimisticData:i}=this;++this.txCount,e&&(this.data=this.optimisticData=e);try{return t=r(this)}finally{--this.txCount,this.data=n,this.optimisticData=i}},a=new Set;return s&&!this.txCount&&this.broadcastWatches({...e,onWatchUpdated:e=>(a.add(e),!1)}),"string"==typeof n?this.optimisticData=this.optimisticData.addLayer(n,o):!1===n?o(this.data):o(),"string"==typeof i&&(this.optimisticData=this.optimisticData.removeLayer(i)),s&&a.size?(this.broadcastWatches({...e,onWatchUpdated(e,t){let r=s.call(this,e,t);return!1!==r&&a.delete(e),r}}),a.size&&a.forEach(e=>this.maybeBroadcastWatch.dirty(e))):this.broadcastWatches(e),t}performTransaction(e,t){return this.batch({update:e,optimistic:t||null!==t})}transformDocument(e){return this.addTypenameTransform.transformDocument(this.addFragmentsToDocument(e))}fragmentMatches(e,t){return this.policies.fragmentMatches(e,t)}lookupFragment(e){return this.config.fragments?.lookup(e)||null}broadcastWatches(e){this.txCount||this.watches.forEach(t=>this.maybeBroadcastWatch(t,e))}addFragmentsToDocument(e){let{fragments:t}=this.config;return t?t.transform(e):e}broadcastWatch(e,t){let{lastDiff:r}=e,n=this.diff(e);(!t||(e.optimistic&&"string"==typeof t.optimistic&&(n.fromOptimisticTransaction=!0),!t.onWatchUpdated||!1!==t.onWatchUpdated.call(this,e,n,r)))&&(r&&rv(r.result,n.result)||e.callback(e.lastDiff=n,r))}}class ig extends e6{constructor(e={}){super((t,r)=>{let n=t.client,i=n.queryManager.clientOptions,s=t.getContext();{let{name:r,version:n,transport:o="headers"}=tA({},i.clientAwareness,e.clientAwareness,s.clientAwareness);"headers"===o&&t.setContext(({headers:e,extensions:t})=>({headers:tA({"apollographql-client-name":r,"apollographql-client-version":n},e)}))}{let{transport:r="extensions"}=tA({},i.enhancedClientAwareness,e.enhancedClientAwareness);"extensions"===r&&(t.extensions=tA({clientLibrary:{name:"@apollo/client",version:n.version}},t.extensions))}return r(t)})}}function iy(e,t){return e8(e)?.operation===t}class ib extends Error{static is(e){return ro(e,"ServerError")}response;statusCode;bodyText;constructor(e,t){super(e),this.name="ServerError",this.response=t.response,this.statusCode=t.response.status,this.bodyText=t.bodyText,ra(this),Object.setPrototypeOf(this,ib.prototype)}}class iv extends Error{static is(e){return ro(e,"ServerParseError")}response;statusCode;bodyText;constructor(e,t){super(e instanceof Error?e.message:"Could not parse server response",{cause:e}),this.name="ServerParseError",this.response=t.response,this.statusCode=t.response.status,this.bodyText=t.bodyText,ra(this),Object.setPrototypeOf(this,iv.prototype)}}let{hasOwnProperty:ix}=Object.prototype;async function*iw(e){let t,r=new TextDecoder("utf-8"),n=e.headers?.get("content-type"),i=n?.match(/;\s*boundary=(?:'([^']+)'|"([^"]+)"|([^"'].+?))\s*(?:;|$)/i),s="\r\n--"+(i?i[1]??i[2]??i[3]??"-":"-"),o="";eO(e.body&&"function"==typeof e.body.getReader,60);let a=e.body.getReader(),l=!1,c=!1,u=()=>c&&"-"==o[0]&&"-"==o[1];try{for(;!l;){({value:t,done:l}=await a.read());let e="string"==typeof t?t:r.decode(t),n=o.length-s.length+1,i=(o+=e).indexOf(s,n);for(;i>-1&&!u();){let e;c=!0,[e,o]=[o.slice(0,i),o.slice(i+s.length)];let t=e.indexOf("\r\n\r\n"),r=function(e){let t={};return e.split("\n").forEach(e=>{let r=e.indexOf(":");if(r>-1){let n=e.slice(0,r).trim().toLowerCase(),i=e.slice(r+1).trim();t[n]=i}}),t}(e.slice(0,t))["content-type"];if(r&&-1===r.toLowerCase().indexOf("application/json"))throw Error("Unsupported patch content type: application/json is required.");let n=e.slice(t);n&&(yield n),i=o.indexOf(s)}if(u())return}throw Error("premature end of multipart body")}finally{a.cancel()}}async function ik(e,t){for await(let r of iw(e)){let n=iE(e,r);if(0!=Object.keys(n).length)if(rN(n)&&"payload"in n){if(1===Object.keys(n).length&&null===n.payload)return;let e={...n.payload};"errors"in n&&(e.extensions={...e.extensions,[rf]:new rh(n.errors??[])}),t(e)}else t(n)}}function iE(e,t){if(e.status>=300)throw new ib(`Response not successful: Received status code ${e.status}`,{response:e,bodyText:t});try{return JSON.parse(t)}catch(r){throw new iv(r,{response:e,bodyText:t})}}let iS={http:{includeQuery:!0,includeExtensions:!0,preserveHeaderCase:!1},headers:{accept:"application/graphql-response+json,application/json;q=0.9","content-type":"application/json"},options:{method:"POST"}},i_=(e,t)=>t(e),iN=ev(()=>fetch);function iC(){}class iO extends e6{constructor(e={}){let{uri:t="/graphql",fetch:r,print:n=i_,includeExtensions:i,preserveHeaderCase:s,useGETForQueries:o,includeUnusedVariables:a=!1,...l}=e;const c={http:tA({includeExtensions:i,preserveHeaderCase:s}),options:l.fetchOptions,credentials:l.credentials,headers:l.headers};super(e=>{var i,s;let l,u,h,d=(l=e.getContext().uri)||("function"==typeof t?t(e):t||"/graphql"),f=e.getContext(),p={...f.http};iy(e.query,"subscription")&&(p.accept=["multipart/mixed;boundary=graphql;subscriptionSpec=1.0",...p.accept||[]]);let{options:m,body:g}=function(e,t,...r){let n={},i={};r.forEach(e=>{n={...n,...e.options,headers:{...n.headers,...e.headers}},e.credentials&&(n.credentials=e.credentials),n.headers.accept=(e.http?.accept||[]).concat(n.headers.accept).join(","),i={...i,...e.http}}),n.headers=function(e,t){if(!t){let t={};return Object.keys(Object(e)).forEach(r=>{t[r.toLowerCase()]=e[r]}),t}let r={};Object.keys(Object(e)).forEach(t=>{r[t.toLowerCase()]={originalName:t,value:e[t]}});let n={};return Object.keys(r).forEach(e=>{n[r[e].originalName]=r[e].value}),n}(n.headers,i.preserveHeaderCase);let{operationName:s,extensions:o,variables:a,query:l}=e,c={operationName:s,variables:a};return i.includeExtensions&&Object.keys(o||{}).length&&(c.extensions=o),i.includeQuery&&(c.query=t(l,rW)),{options:n,body:c}}(e,n,iS,c,{http:p,options:f.fetchOptions,credentials:f.credentials,headers:f.headers});g.variables&&!a&&(i=g.variables,s=e.query,u={...i},h=new Set(Object.keys(i)),ey(s,{Variable(e,t,r){r&&"VariableDefinition"!==r.kind&&h.delete(e.name.value)}}),h.forEach(e=>{delete u[e]}),g.variables=u);let y=new AbortController,b=()=>{y=void 0};if(m.signal){let e=m.signal,t=()=>{y?.abort(e.reason)};e.addEventListener("abort",t,{once:!0}),b=()=>{y?.signal.removeEventListener("abort",b),y=void 0,e.removeEventListener("abort",t),b=iC},y.signal.addEventListener("abort",b,{once:!0})}return m.signal=y.signal,o&&!iy(e.query,"mutation")&&(m.method="GET"),new eP(t=>{if("GET"===m.method){let{newURI:e,parseError:t}=function(e,t){let r=[],n=(e,t)=>{r.push(`${e}=${encodeURIComponent(t)}`)};if("query"in t&&n("query",t.query),t.operationName&&n("operationName",t.operationName),t.variables){let e;try{e=JSON.stringify(t.variables)}catch(e){return{parseError:e}}n("variables",e)}if(t.extensions){let e;try{e=JSON.stringify(t.extensions)}catch(e){return{parseError:e}}n("extensions",e)}let i="",s=e,o=e.indexOf("#");-1!==o&&(i=e.substr(o),s=e.substr(0,o));let a=-1===s.indexOf("?")?"?":"&";return{newURI:s+a+r.join("&")+i}}(d,g);if(t)throw t;d=e}else m.body=JSON.stringify(g);let n=r||ev(()=>fetch)||iN,i=t.next.bind(t);return n(d,m).then(t=>{e.setContext({response:t});let r=t.headers?.get("content-type");return null!==r&&/^multipart\/mixed/i.test(r)?ik(t,i):(t=>t.text().then(r=>{let n=function(e,t){let r=e.headers.get("content-type");if(r?.includes("application/graphql-response+json"))try{return JSON.parse(t)}catch(r){throw new iv(r,{response:e,bodyText:t})}return iE(e,t)}(t,r);if(!Array.isArray(n)&&!ix.call(n,"data")&&!ix.call(n,"errors"))throw new ib(`Server response was malformed for query '${Array.isArray(e)?e.map(e=>e.operationName):e.operationName}'.`,{response:t,bodyText:r});return n}))(t).then(i)}).then(()=>{b(),t.complete()}).catch(e=>{b(),t.error(e)}),()=>{y&&y.abort()}})})}}class iT extends e6{constructor(e={}){const{left:t,right:r,request:n}=e6.from([new ig(e),new iO(e)]);super(n),Object.assign(this,{left:t,right:r})}}var iI=function(e){function t(t,r){return e.call(this)||this}return M(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}($),iD={setInterval:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=iD.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,B([e,t],U(r))):setInterval.apply(void 0,B([e,t],U(r)))},clearInterval:function(e){var t=iD.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},ij=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return M(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r,n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=null!=(r=this.id)?r:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),iD.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&iD.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,W(n,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(iI),iA=1,iR={};function iM(e){return e in iR&&(delete iR[e],!0)}var iL=function(e){var t=iA++;return iR[t]=!0,x||(x=Promise.resolve()),x.then(function(){return iM(t)&&e()}),t},iF=function(e){iM(e)},iP={setImmediate:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=iP.delegate;return((null==r?void 0:r.setImmediate)||iL).apply(void 0,B([],U(e)))},clearImmediate:function(e){var t=iP.delegate;return((null==t?void 0:t.clearImmediate)||iF)(e)},delegate:void 0},iU=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return M(t,e),t.prototype.requestAsyncId=function(t,r,n){return(void 0===n&&(n=0),null!==n&&n>0)?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t._scheduled||(t._scheduled=iP.setImmediate(t.flush.bind(t,void 0))))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!=n?n>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);var i,s=t.actions;null!=r&&(null==(i=s[s.length-1])?void 0:i.id)!==r&&(iP.clearImmediate(r),t._scheduled===r&&(t._scheduled=void 0))},t}(ij),iB=function(){function e(t,r){void 0===r&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},e.now=re.now,e}(),iV=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t.prototype.flush=function(e){this._active=!0;var t,r=this._scheduled;this._scheduled=void 0;var n=this.actions;e=e||n.shift();do if(t=e.execute(e.state,e.delay))break;while((e=n[0])&&e.id===r&&n.shift())if(this._active=!1,t){for(;(e=n[0])&&e.id===r&&n.shift();)e.unsubscribe();throw t}},t}(function(e){function t(t,r){void 0===r&&(r=iB.now);var n=e.call(this,t,r)||this;return n.actions=[],n._active=!1,n}return M(t,e),t.prototype.flush=function(e){var t,r=this.actions;if(this._active)return void r.push(e);this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=r.shift())if(this._active=!1,t){for(;e=r.shift();)e.unsubscribe();throw t}},t}(iB)))(iU);let iq=Symbol.for("apollo.skipToken");function iz(e,t){let r=S.useRef(void 0);return r.current&&rv(r.current.deps,t)||(r.current={value:e(),deps:t}),r.current.value}let iW=Symbol.for("apollo.hook.wrappers"),i$=Symbol.for("__APOLLO_CONTEXT__");function iQ(){eO("createContext"in S,37);let e=S.createContext[i$];return e||(Object.defineProperty(S.createContext,i$,{value:e=S.createContext({}),enumerable:!1,writable:!1,configurable:!0}),e.displayName="ApolloContext"),e}function iK(e){let t=S.useContext(iQ()),r=e||t.client;return eO(!!r,28),r}let iH="function"==typeof ev(()=>window.document.createElement),iG=S.useSyncExternalStore,iJ="ReactNative"==ev(()=>navigator.product),iY=ev(()=>navigator.userAgent.indexOf("jsdom")>=0)||!1,iX=(iH||iJ)&&!iY,iZ=iG||((e,t,r)=>{let n=t(),[{inst:i},s]=S.useState({inst:{value:n,getSnapshot:t}});return iX?S.useLayoutEffect(()=>{Object.assign(i,{value:n,getSnapshot:t}),i0(i)&&s({inst:i})},[e,n,t]):Object.assign(i,{value:n,getSnapshot:t}),S.useEffect(()=>(i0(i)&&s({inst:i}),e(function(){i0(i)&&s({inst:i})})),[e]),n});function i0({value:e,getSnapshot:t}){try{return e!==t()}catch{return!0}}let i1=Symbol();function i2(e,...[t]){return(function(e,t,r){let n=[r.queryManager,e.startsWith("use")?S.useContext(iQ()):void 0],i=t;for(let t of n){let r=t?.[iW]?.[e];r&&(i=r(i))}return i})("useQuery",i4,iK("object"==typeof t?t.client:void 0))(e,t)}function i4(e,t={}){var r,n,i,s,o,a,l,c;let u=iK("object"==typeof t?t.client:void 0),{ssr:h}="object"==typeof t?t:{},d=iz(()=>{if(n===iq){let e={...tR(i,{query:r,fetchPolicy:"standby"}),[r9]:!0};return e[i3]=!0,e}let e=tR(i,{...n,query:r});return n.skip&&(e.initialFetchPolicy=n.initialFetchPolicy||n.fetchPolicy,e.fetchPolicy="standby"),e},[r=e,n=t,i=u.defaultOptions.watchQuery]);function f(t){let r=u.watchQuery(d);return{client:u,query:e,observable:r,resultData:{current:r.getCurrentResult(),previousData:t?.resultData.current.data,variables:r.variables}}}let[p,m]=S.useState(f);(u!==p.client||e!==p.query)&&m(p=f(p));let{observable:g,resultData:y}=p;s=d,o=g,s.fetchPolicy||(s.fetchPolicy=o.options.initialFetchPolicy),function(e,t,r){if(t[i1]&&!rv(t[i1],r)){var n,i;t[i1][i3]&&!r.initialFetchPolicy&&(r.initialFetchPolicy=r.fetchPolicy),(n=t[i1],i=r,n.query===i.query&&rv(n.variables,i.variables)&&(n.fetchPolicy===i.fetchPolicy||"standby"!==i.fetchPolicy&&"standby"!==n.fetchPolicy))?t.applyOptions(r):t.reobserve(r);let s=t.getCurrentResult();rv(s.data,e.current.data)||(e.previousData=e.current.data||e.previousData),e.current=s,e.variables=t.variables}t[i1]=r}(y,g,d);let b=(a=g,l=y,c=h,iZ(S.useCallback(e=>{let t=a.pipe(tY(iV)).subscribe(t=>{let r=l.current;rv(r,t)&&rv(l.variables,a.variables)||(l.variables=a.variables,r.data&&!rv(r.data,t.data)&&(l.previousData=r.data),l.current=t,e())});return()=>{setTimeout(()=>t.unsubscribe())}},[a,l]),()=>l.current,()=>!1===c?i2.ssrDisabledResult:l.current)),v=S.useMemo(()=>({refetch:g.refetch.bind(g),fetchMore:g.fetchMore.bind(g),updateQuery:g.updateQuery.bind(g),startPolling:g.startPolling.bind(g),stopPolling:g.stopPolling.bind(g),subscribeToMore:g.subscribeToMore.bind(g)}),[g]),x=y.previousData;return S.useMemo(()=>{let{partial:e,...t}=b;return{...t,client:u,observable:g,variables:g.variables,previousData:x,...v}},[b,u,g,x,v])}let i3=Symbol();i2.ssrDisabledResult={loading:!0,data:void 0,dataState:"empty",error:void 0,networkStatus:v.loading,partial:!0};let i5=iH?S.useLayoutEffect:S.useEffect;function i8(e,t){let r=iK(t?.client),[n,i]=S.useState(()=>i6(r)),s=S.useRef({result:n,mutationId:0,isMounted:!0,client:r,mutation:e,options:t});i5(()=>{Object.assign(s.current,{client:r,options:t,mutation:e})});let o=S.useCallback((e={})=>{let{options:t,mutation:r}=s.current,n={...t,mutation:r},o=e.client||s.current.client;!s.current.result.loading&&s.current.isMounted&&i(s.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:o});let a=++s.current.mutationId,l=tR(n,e);return r6(o.mutate(l).then(t=>{let{data:r,error:n}=t,c=e.onError||s.current.options?.onError;if(n&&c&&c(n,l),a===s.current.mutationId){let e={called:!0,loading:!1,data:r,error:n,client:o};s.current.isMounted&&!rv(s.current.result,e)&&i(s.current.result=e)}let u=e.onCompleted||s.current.options?.onCompleted;return n||u?.(t.data,l),t},t=>{if(a===s.current.mutationId&&s.current.isMounted){let e={loading:!1,error:t,data:void 0,called:!0,client:o};rv(s.current.result,e)||i(s.current.result=e)}let r=e.onError||s.current.options?.onError;throw r&&r(t,l),t}))},[]),a=S.useCallback(()=>{if(s.current.isMounted){let e=i6(s.current.client);Object.assign(s.current,{mutationId:0,result:e}),i(e)}},[]);return S.useEffect(()=>{let e=s.current;return e.isMounted=!0,()=>{e.isMounted=!1}},[]),[o,{reset:a,...n}]}function i6(e){return{data:void 0,error:void 0,called:!1,loading:!1,client:e}}let i9=/\r\n|[\n\r]/g;function i7(e,t){let r=0,n=1;for(let i of e.body.matchAll(i9)){if("number"==typeof i.index||function(e,t){if(!e)throw Error("Unexpected invariant triggered.")}(!1),i.index>=t)break;r=i.index+i[0].length,n+=1}return{line:n,column:t+1-r}}function se(e,t){let r=e.locationOffset.column-1,n="".padStart(r)+e.body,i=t.line-1,s=e.locationOffset.line-1,o=t.line+s,a=1===t.line?r:0,l=t.column+a,c=`${e.name}:${o}:${l}
`,u=n.split(/\r\n|[\n\r]/g),h=u[i];if(h.length>120){let e=Math.floor(l/80),t=[];for(let e=0;e<h.length;e+=80)t.push(h.slice(e,e+80));return c+st([[`${o} |`,t[0]],...t.slice(1,e+1).map(e=>["|",e]),["|","^".padStart(l%80)],["|",t[e+1]]])}return c+st([[`${o-1} |`,u[i-1]],[`${o} |`,h],["|","^".padStart(l)],[`${o+1} |`,u[i+1]]])}function st(e){let t=e.filter(([e,t])=>void 0!==t),r=Math.max(...t.map(([e])=>e.length));return t.map(([e,t])=>e.padStart(r)+(t?" "+t:"")).join("\n")}class sr extends Error{constructor(e,...t){var r,n,i;const{nodes:s,source:o,positions:a,path:l,originalError:c,extensions:u}=function(e){let t=e[0];return null==t||"kind"in t||"length"in t?{nodes:t,source:e[1],positions:e[2],path:e[3],originalError:e[4],extensions:e[5]}:t}(t);super(e),this.name="GraphQLError",this.path=null!=l?l:void 0,this.originalError=null!=c?c:void 0,this.nodes=sn(Array.isArray(s)?s:s?[s]:void 0);const h=sn(null==(r=this.nodes)?void 0:r.map(e=>e.loc).filter(e=>null!=e));this.source=null!=o?o:null==h||null==(n=h[0])?void 0:n.source,this.positions=null!=a?a:null==h?void 0:h.map(e=>e.start),this.locations=a&&o?a.map(e=>i7(o,e)):null==h?void 0:h.map(e=>i7(e.source,e.start));const d=!function(e){return"object"==typeof e&&null!==e}(null==c?void 0:c.extensions)||null==c?void 0:c.extensions;this.extensions=null!=(i=null!=u?u:d)?i:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=c&&c.stack?Object.defineProperty(this,"stack",{value:c.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,sr):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(let r of this.nodes){var t;r.loc&&(e+="\n\n"+se((t=r.loc).source,i7(t.source,t.start)))}else if(this.source&&this.locations)for(let t of this.locations)e+="\n\n"+se(this.source,t);return e}toJSON(){let e={message:this.message};return null!=this.locations&&(e.locations=this.locations),null!=this.path&&(e.path=this.path),null!=this.extensions&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function sn(e){return void 0===e||0===e.length?void 0:e}function si(e,t,r){return new sr(`Syntax Error: ${r}`,{source:e,positions:[t]})}(f=w||(w={})).QUERY="QUERY",f.MUTATION="MUTATION",f.SUBSCRIPTION="SUBSCRIPTION",f.FIELD="FIELD",f.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",f.FRAGMENT_SPREAD="FRAGMENT_SPREAD",f.INLINE_FRAGMENT="INLINE_FRAGMENT",f.VARIABLE_DEFINITION="VARIABLE_DEFINITION",f.SCHEMA="SCHEMA",f.SCALAR="SCALAR",f.OBJECT="OBJECT",f.FIELD_DEFINITION="FIELD_DEFINITION",f.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",f.INTERFACE="INTERFACE",f.UNION="UNION",f.ENUM="ENUM",f.ENUM_VALUE="ENUM_VALUE",f.INPUT_OBJECT="INPUT_OBJECT",f.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION",(p=k||(k={})).SOF="<SOF>",p.EOF="<EOF>",p.BANG="!",p.DOLLAR="$",p.AMP="&",p.PAREN_L="(",p.PAREN_R=")",p.DOT=".",p.SPREAD="...",p.COLON=":",p.EQUALS="=",p.AT="@",p.BRACKET_L="[",p.BRACKET_R="]",p.BRACE_L="{",p.PIPE="|",p.BRACE_R="}",p.NAME="Name",p.INT="Int",p.FLOAT="Float",p.STRING="String",p.BLOCK_STRING="BlockString",p.COMMENT="Comment";class ss{constructor(e){const t=new O(k.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==k.EOF)do if(e.next)e=e.next;else{let t=function(e,t){let r=e.source.body,n=r.length,i=t;for(;i<n;){let t=r.charCodeAt(i);switch(t){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++e.line,e.lineStart=i;continue;case 13:10===r.charCodeAt(i+1)?i+=2:++i,++e.line,e.lineStart=i;continue;case 35:return function(e,t){let r=e.source.body,n=r.length,i=t+1;for(;i<n;){let e=r.charCodeAt(i);if(10===e||13===e)break;if(so(e))++i;else if(sa(r,i))i+=2;else break}return sh(e,k.COMMENT,t,i,r.slice(t+1,i))}(e,i);case 33:return sh(e,k.BANG,i,i+1);case 36:return sh(e,k.DOLLAR,i,i+1);case 38:return sh(e,k.AMP,i,i+1);case 40:return sh(e,k.PAREN_L,i,i+1);case 41:return sh(e,k.PAREN_R,i,i+1);case 46:if(46===r.charCodeAt(i+1)&&46===r.charCodeAt(i+2))return sh(e,k.SPREAD,i,i+3);break;case 58:return sh(e,k.COLON,i,i+1);case 61:return sh(e,k.EQUALS,i,i+1);case 64:return sh(e,k.AT,i,i+1);case 91:return sh(e,k.BRACKET_L,i,i+1);case 93:return sh(e,k.BRACKET_R,i,i+1);case 123:return sh(e,k.BRACE_L,i,i+1);case 124:return sh(e,k.PIPE,i,i+1);case 125:return sh(e,k.BRACE_R,i,i+1);case 34:if(34===r.charCodeAt(i+1)&&34===r.charCodeAt(i+2))return function(e,t){let r=e.source.body,n=r.length,i=e.lineStart,s=t+3,o=s,a="",l=[];for(;s<n;){let n=r.charCodeAt(s);if(34===n&&34===r.charCodeAt(s+1)&&34===r.charCodeAt(s+2)){a+=r.slice(o,s),l.push(a);let n=sh(e,k.BLOCK_STRING,t,s+3,(function(e){var t,r;let n=Number.MAX_SAFE_INTEGER,i=null,s=-1;for(let t=0;t<e.length;++t){let o=e[t],a=function(e){let t=0;for(;t<e.length&&rD(e.charCodeAt(t));)++t;return t}(o);a!==o.length&&(i=null!=(r=i)?r:t,s=t,0!==t&&a<n&&(n=a))}return e.map((e,t)=>0===t?e:e.slice(n)).slice(null!=(t=i)?t:0,s+1)})(l).join("\n"));return e.line+=l.length-1,e.lineStart=i,n}if(92===n&&34===r.charCodeAt(s+1)&&34===r.charCodeAt(s+2)&&34===r.charCodeAt(s+3)){a+=r.slice(o,s),o=s+1,s+=4;continue}if(10===n||13===n){a+=r.slice(o,s),l.push(a),13===n&&10===r.charCodeAt(s+1)?s+=2:++s,a="",o=s,i=s;continue}if(so(n))++s;else if(sa(r,s))s+=2;else throw si(e.source,s,`Invalid character within String: ${su(e,s)}.`)}throw si(e.source,s,"Unterminated string.")}(e,i);return function(e,t){let r=e.source.body,n=r.length,i=t+1,s=i,o="";for(;i<n;){let n=r.charCodeAt(i);if(34===n)return o+=r.slice(s,i),sh(e,k.STRING,t,i+1,o);if(92===n){o+=r.slice(s,i);let t=117===r.charCodeAt(i+1)?123===r.charCodeAt(i+2)?function(e,t){let r=e.source.body,n=0,i=3;for(;i<12;){let e=r.charCodeAt(t+i++);if(125===e){if(i<5||!so(n))break;return{value:String.fromCodePoint(n),size:i}}if((n=n<<4|sp(e))<0)break}throw si(e.source,t,`Invalid Unicode escape sequence: "${r.slice(t,t+i)}".`)}(e,i):function(e,t){let r=e.source.body,n=sf(r,t+2);if(so(n))return{value:String.fromCodePoint(n),size:6};if(sl(n)&&92===r.charCodeAt(t+6)&&117===r.charCodeAt(t+7)){let e=sf(r,t+8);if(sc(e))return{value:String.fromCodePoint(n,e),size:12}}throw si(e.source,t,`Invalid Unicode escape sequence: "${r.slice(t,t+6)}".`)}(e,i):function(e,t){let r=e.source.body;switch(r.charCodeAt(t+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:"\n",size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw si(e.source,t,`Invalid character escape sequence: "${r.slice(t,t+2)}".`)}(e,i);o+=t.value,i+=t.size,s=i;continue}if(10===n||13===n)break;if(so(n))++i;else if(sa(r,i))i+=2;else throw si(e.source,i,`Invalid character within String: ${su(e,i)}.`)}throw si(e.source,i,"Unterminated string.")}(e,i)}if(rj(t)||45===t)return function(e,t,r){let n=e.source.body,i=t,s=r,o=!1;if(45===s&&(s=n.charCodeAt(++i)),48===s){if(rj(s=n.charCodeAt(++i)))throw si(e.source,i,`Invalid number, unexpected digit after 0: ${su(e,i)}.`)}else i=sd(e,i,s),s=n.charCodeAt(i);if(46===s&&(o=!0,s=n.charCodeAt(++i),i=sd(e,i,s),s=n.charCodeAt(i)),(69===s||101===s)&&(o=!0,(43===(s=n.charCodeAt(++i))||45===s)&&(s=n.charCodeAt(++i)),i=sd(e,i,s),s=n.charCodeAt(i)),46===s||rR(s))throw si(e.source,i,`Invalid number, expected digit but got: ${su(e,i)}.`);return sh(e,o?k.FLOAT:k.INT,t,i,n.slice(t,i))}(e,i,t);if(rR(t))return function(e,t){let r=e.source.body,n=r.length,i=t+1;for(;i<n;){var s;if(rA(s=r.charCodeAt(i))||rj(s)||95===s)++i;else break}return sh(e,k.NAME,t,i,r.slice(t,i))}(e,i);throw si(e.source,i,39===t?"Unexpected single quote character ('), did you mean to use a double quote (\")?":so(t)||sa(r,i)?`Unexpected character: ${su(e,i)}.`:`Invalid character: ${su(e,i)}.`)}return sh(e,k.EOF,n,n)}(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===k.COMMENT)return e}}function so(e){return e>=0&&e<=55295||e>=57344&&e<=1114111}function sa(e,t){return sl(e.charCodeAt(t))&&sc(e.charCodeAt(t+1))}function sl(e){return e>=55296&&e<=56319}function sc(e){return e>=56320&&e<=57343}function su(e,t){let r=e.source.body.codePointAt(t);if(void 0===r)return k.EOF;if(r>=32&&r<=126){let e=String.fromCodePoint(r);return'"'===e?"'\"'":`"${e}"`}return"U+"+r.toString(16).toUpperCase().padStart(4,"0")}function sh(e,t,r,n,i){let s=e.line,o=1+r-e.lineStart;return new O(t,r,n,s,o,i)}function sd(e,t,r){if(!rj(r))throw si(e.source,t,`Invalid number, expected digit but got: ${su(e,t)}.`);let n=e.source.body,i=t+1;for(;rj(n.charCodeAt(i));)++i;return i}function sf(e,t){return sp(e.charCodeAt(t))<<12|sp(e.charCodeAt(t+1))<<8|sp(e.charCodeAt(t+2))<<4|sp(e.charCodeAt(t+3))}function sp(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}var sm=e.i(47167);let sg=globalThis.process&&1?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;if("object"==typeof e&&null!==e){var r;let n=t.prototype[Symbol.toStringTag];if(n===(Symbol.toStringTag in e?e[Symbol.toStringTag]:null==(r=e.constructor)?void 0:r.name)){let t=em(e,[]);throw Error(`Cannot use ${n} "${t}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class sy{constructor(e,t="GraphQL request",r={line:1,column:1}){"string"==typeof e||ep(!1,`Body must be a string. Received: ${em(e,[])}.`),this.body=e,this.name=t,this.locationOffset=r,this.locationOffset.line>0||ep(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||ep(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}class sb{constructor(e,t={}){const{lexer:r,...n}=t;if(r)this._lexer=r;else{const t=sg(e,sy)?e:new sy(e);this._lexer=new ss(t)}this._options=n,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){let e=this.expectToken(k.NAME);return this.node(e,{kind:y.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:y.DOCUMENT,definitions:this.many(k.SOF,this.parseDefinition,k.EOF)})}parseDefinition(){if(this.peek(k.BRACE_L))return this.parseOperationDefinition();let e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(e&&t.kind===k.BRACE_L)throw si(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are not supported on shorthand queries.");if(t.kind===k.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition()}if(e)throw si(this._lexer.source,this._lexer.token.start,"Unexpected description, only GraphQL definitions support descriptions.");if("extend"===t.value)return this.parseTypeSystemExtension()}throw this.unexpected(t)}parseOperationDefinition(){let e,t=this._lexer.token;if(this.peek(k.BRACE_L))return this.node(t,{kind:y.OPERATION_DEFINITION,operation:g.QUERY,description:void 0,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});let r=this.parseDescription(),n=this.parseOperationType();return this.peek(k.NAME)&&(e=this.parseName()),this.node(t,{kind:y.OPERATION_DEFINITION,operation:n,description:r,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){let e=this.expectToken(k.NAME);switch(e.value){case"query":return g.QUERY;case"mutation":return g.MUTATION;case"subscription":return g.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(k.PAREN_L,this.parseVariableDefinition,k.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:y.VARIABLE_DEFINITION,description:this.parseDescription(),variable:this.parseVariable(),type:(this.expectToken(k.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(k.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){let e=this._lexer.token;return this.expectToken(k.DOLLAR),this.node(e,{kind:y.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:y.SELECTION_SET,selections:this.many(k.BRACE_L,this.parseSelection,k.BRACE_R)})}parseSelection(){return this.peek(k.SPREAD)?this.parseFragment():this.parseField()}parseField(){let e,t,r=this._lexer.token,n=this.parseName();return this.expectOptionalToken(k.COLON)?(e=n,t=this.parseName()):t=n,this.node(r,{kind:y.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(k.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){let t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(k.PAREN_L,t,k.PAREN_R)}parseArgument(e=!1){let t=this._lexer.token,r=this.parseName();return this.expectToken(k.COLON),this.node(t,{kind:y.ARGUMENT,name:r,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){let e=this._lexer.token;this.expectToken(k.SPREAD);let t=this.expectOptionalKeyword("on");return!t&&this.peek(k.NAME)?this.node(e,{kind:y.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:y.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){let e=this._lexer.token,t=this.parseDescription();return(this.expectKeyword("fragment"),!0===this._options.allowLegacyFragmentVariables)?this.node(e,{kind:y.FRAGMENT_DEFINITION,description:t,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:y.FRAGMENT_DEFINITION,description:t,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()}parseValueLiteral(e){let t=this._lexer.token;switch(t.kind){case k.BRACKET_L:return this.parseList(e);case k.BRACE_L:return this.parseObject(e);case k.INT:return this.advanceLexer(),this.node(t,{kind:y.INT,value:t.value});case k.FLOAT:return this.advanceLexer(),this.node(t,{kind:y.FLOAT,value:t.value});case k.STRING:case k.BLOCK_STRING:return this.parseStringLiteral();case k.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:y.BOOLEAN,value:!0});case"false":return this.node(t,{kind:y.BOOLEAN,value:!1});case"null":return this.node(t,{kind:y.NULL});default:return this.node(t,{kind:y.ENUM,value:t.value})}case k.DOLLAR:if(e){if(this.expectToken(k.DOLLAR),this._lexer.token.kind===k.NAME){let e=this._lexer.token.value;throw si(this._lexer.source,t.start,`Unexpected variable "$${e}" in constant value.`)}throw this.unexpected(t)}return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){let e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:y.STRING,value:e.value,block:e.kind===k.BLOCK_STRING})}parseList(e){let t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:y.LIST,values:this.any(k.BRACKET_L,t,k.BRACKET_R)})}parseObject(e){let t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:y.OBJECT,fields:this.any(k.BRACE_L,t,k.BRACE_R)})}parseObjectField(e){let t=this._lexer.token,r=this.parseName();return this.expectToken(k.COLON),this.node(t,{kind:y.OBJECT_FIELD,name:r,value:this.parseValueLiteral(e)})}parseDirectives(e){let t=[];for(;this.peek(k.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){let t=this._lexer.token;return this.expectToken(k.AT),this.node(t,{kind:y.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){let e,t=this._lexer.token;if(this.expectOptionalToken(k.BRACKET_L)){let r=this.parseTypeReference();this.expectToken(k.BRACKET_R),e=this.node(t,{kind:y.LIST_TYPE,type:r})}else e=this.parseNamedType();return this.expectOptionalToken(k.BANG)?this.node(t,{kind:y.NON_NULL_TYPE,type:e}):e}parseNamedType(){return this.node(this._lexer.token,{kind:y.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(k.STRING)||this.peek(k.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");let r=this.parseConstDirectives(),n=this.many(k.BRACE_L,this.parseOperationTypeDefinition,k.BRACE_R);return this.node(e,{kind:y.SCHEMA_DEFINITION,description:t,directives:r,operationTypes:n})}parseOperationTypeDefinition(){let e=this._lexer.token,t=this.parseOperationType();this.expectToken(k.COLON);let r=this.parseNamedType();return this.node(e,{kind:y.OPERATION_TYPE_DEFINITION,operation:t,type:r})}parseScalarTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");let r=this.parseName(),n=this.parseConstDirectives();return this.node(e,{kind:y.SCALAR_TYPE_DEFINITION,description:t,name:r,directives:n})}parseObjectTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");let r=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();return this.node(e,{kind:y.OBJECT_TYPE_DEFINITION,description:t,name:r,interfaces:n,directives:i,fields:s})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(k.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(k.BRACE_L,this.parseFieldDefinition,k.BRACE_R)}parseFieldDefinition(){let e=this._lexer.token,t=this.parseDescription(),r=this.parseName(),n=this.parseArgumentDefs();this.expectToken(k.COLON);let i=this.parseTypeReference(),s=this.parseConstDirectives();return this.node(e,{kind:y.FIELD_DEFINITION,description:t,name:r,arguments:n,type:i,directives:s})}parseArgumentDefs(){return this.optionalMany(k.PAREN_L,this.parseInputValueDef,k.PAREN_R)}parseInputValueDef(){let e,t=this._lexer.token,r=this.parseDescription(),n=this.parseName();this.expectToken(k.COLON);let i=this.parseTypeReference();this.expectOptionalToken(k.EQUALS)&&(e=this.parseConstValueLiteral());let s=this.parseConstDirectives();return this.node(t,{kind:y.INPUT_VALUE_DEFINITION,description:r,name:n,type:i,defaultValue:e,directives:s})}parseInterfaceTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");let r=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();return this.node(e,{kind:y.INTERFACE_TYPE_DEFINITION,description:t,name:r,interfaces:n,directives:i,fields:s})}parseUnionTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");let r=this.parseName(),n=this.parseConstDirectives(),i=this.parseUnionMemberTypes();return this.node(e,{kind:y.UNION_TYPE_DEFINITION,description:t,name:r,directives:n,types:i})}parseUnionMemberTypes(){return this.expectOptionalToken(k.EQUALS)?this.delimitedMany(k.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");let r=this.parseName(),n=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();return this.node(e,{kind:y.ENUM_TYPE_DEFINITION,description:t,name:r,directives:n,values:i})}parseEnumValuesDefinition(){return this.optionalMany(k.BRACE_L,this.parseEnumValueDefinition,k.BRACE_R)}parseEnumValueDefinition(){let e=this._lexer.token,t=this.parseDescription(),r=this.parseEnumValueName(),n=this.parseConstDirectives();return this.node(e,{kind:y.ENUM_VALUE_DEFINITION,description:t,name:r,directives:n})}parseEnumValueName(){if("true"===this._lexer.token.value||"false"===this._lexer.token.value||"null"===this._lexer.token.value)throw si(this._lexer.source,this._lexer.token.start,`${sv(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");let r=this.parseName(),n=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();return this.node(e,{kind:y.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:r,directives:n,fields:i})}parseInputFieldsDefinition(){return this.optionalMany(k.BRACE_L,this.parseInputValueDef,k.BRACE_R)}parseTypeSystemExtension(){let e=this._lexer.lookahead();if(e.kind===k.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");let t=this.parseConstDirectives(),r=this.optionalMany(k.BRACE_L,this.parseOperationTypeDefinition,k.BRACE_R);if(0===t.length&&0===r.length)throw this.unexpected();return this.node(e,{kind:y.SCHEMA_EXTENSION,directives:t,operationTypes:r})}parseScalarTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");let t=this.parseName(),r=this.parseConstDirectives();if(0===r.length)throw this.unexpected();return this.node(e,{kind:y.SCALAR_TYPE_EXTENSION,name:t,directives:r})}parseObjectTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");let t=this.parseName(),r=this.parseImplementsInterfaces(),n=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(0===r.length&&0===n.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:y.OBJECT_TYPE_EXTENSION,name:t,interfaces:r,directives:n,fields:i})}parseInterfaceTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");let t=this.parseName(),r=this.parseImplementsInterfaces(),n=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(0===r.length&&0===n.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:y.INTERFACE_TYPE_EXTENSION,name:t,interfaces:r,directives:n,fields:i})}parseUnionTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");let t=this.parseName(),r=this.parseConstDirectives(),n=this.parseUnionMemberTypes();if(0===r.length&&0===n.length)throw this.unexpected();return this.node(e,{kind:y.UNION_TYPE_EXTENSION,name:t,directives:r,types:n})}parseEnumTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");let t=this.parseName(),r=this.parseConstDirectives(),n=this.parseEnumValuesDefinition();if(0===r.length&&0===n.length)throw this.unexpected();return this.node(e,{kind:y.ENUM_TYPE_EXTENSION,name:t,directives:r,values:n})}parseInputObjectTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");let t=this.parseName(),r=this.parseConstDirectives(),n=this.parseInputFieldsDefinition();if(0===r.length&&0===n.length)throw this.unexpected();return this.node(e,{kind:y.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:r,fields:n})}parseDirectiveDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(k.AT);let r=this.parseName(),n=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");let s=this.parseDirectiveLocations();return this.node(e,{kind:y.DIRECTIVE_DEFINITION,description:t,name:r,arguments:n,repeatable:i,locations:s})}parseDirectiveLocations(){return this.delimitedMany(k.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){let e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(w,t.value))return t;throw this.unexpected(e)}parseSchemaCoordinate(){let e,t,r=this._lexer.token,n=this.expectOptionalToken(k.AT),i=this.parseName();return(!n&&this.expectOptionalToken(k.DOT)&&(e=this.parseName()),(n||e)&&this.expectOptionalToken(k.PAREN_L)&&(t=this.parseName(),this.expectToken(k.COLON),this.expectToken(k.PAREN_R)),n)?t?this.node(r,{kind:y.DIRECTIVE_ARGUMENT_COORDINATE,name:i,argumentName:t}):this.node(r,{kind:y.DIRECTIVE_COORDINATE,name:i}):e?t?this.node(r,{kind:y.ARGUMENT_COORDINATE,name:i,fieldName:e,argumentName:t}):this.node(r,{kind:y.MEMBER_COORDINATE,name:i,memberName:e}):this.node(r,{kind:y.TYPE_COORDINATE,name:i})}node(e,t){return!0!==this._options.noLocation&&(t.loc=new C(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){let t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw si(this._lexer.source,t.start,`Expected ${sx(e)}, found ${sv(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e&&(this.advanceLexer(),!0)}expectKeyword(e){let t=this._lexer.token;if(t.kind===k.NAME&&t.value===e)this.advanceLexer();else throw si(this._lexer.source,t.start,`Expected "${e}", found ${sv(t)}.`)}expectOptionalKeyword(e){let t=this._lexer.token;return t.kind===k.NAME&&t.value===e&&(this.advanceLexer(),!0)}unexpected(e){let t=null!=e?e:this._lexer.token;return si(this._lexer.source,t.start,`Unexpected ${sv(t)}.`)}any(e,t,r){this.expectToken(e);let n=[];for(;!this.expectOptionalToken(r);)n.push(t.call(this));return n}optionalMany(e,t,r){if(this.expectOptionalToken(e)){let e=[];do e.push(t.call(this));while(!this.expectOptionalToken(r))return e}return[]}many(e,t,r){this.expectToken(e);let n=[];do n.push(t.call(this));while(!this.expectOptionalToken(r))return n}delimitedMany(e,t){this.expectOptionalToken(e);let r=[];do r.push(t.call(this));while(this.expectOptionalToken(e))return r}advanceLexer(){let{maxTokens:e}=this._options,t=this._lexer.advance();if(t.kind!==k.EOF&&(++this._tokenCounter,void 0!==e&&this._tokenCounter>e))throw si(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function sv(e){let t=e.value;return sx(e.kind)+(null!=t?` "${t}"`:"")}function sx(e){return e===k.BANG||e===k.DOLLAR||e===k.AMP||e===k.PAREN_L||e===k.PAREN_R||e===k.DOT||e===k.SPREAD||e===k.COLON||e===k.EQUALS||e===k.AT||e===k.BRACKET_L||e===k.BRACKET_R||e===k.BRACE_L||e===k.PIPE||e===k.BRACE_R?`"${e}"`:e}var sw=new Map,sk=new Map,sE=!0,sS=!1;function s_(e){return e.replace(/[\s,]+/g," ").trim()}function sN(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];"string"==typeof e&&(e=[e]);var n=e[0];return t.forEach(function(t,r){t&&"Document"===t.kind?n+=t.loc.source.body:n+=t,n+=e[r+1]}),function(e){var t=s_(e);if(!sw.has(t)){let l,c;var r,n,i,s,o,a=(Object.defineProperty(c=(l=new sb(e,{experimentalFragmentVariables:sS,allowLegacyFragmentVariables:sS})).parseDocument(),"tokenCount",{enumerable:!1,value:l.tokenCount}),c);if(!a||"Document"!==a.kind)throw Error("Not a valid GraphQL document.");sw.set(t,((s=new Set((r=new Set,n=[],a.definitions.forEach(function(e){if("FragmentDefinition"===e.kind){var t,i=e.name.value,s=s_((t=e.loc).source.body.substring(t.start,t.end)),o=sk.get(i);o&&!o.has(s)?sE&&console.warn("Warning: fragment with name "+i+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):o||sk.set(i,o=new Set),o.add(s),r.has(s)||(r.add(s),n.push(e))}else n.push(e)}),i=L(L({},a),{definitions:n})).definitions)).forEach(function(e){e.loc&&delete e.loc,Object.keys(e).forEach(function(t){var r=e[t];r&&"object"==typeof r&&s.add(r)})}),(o=i.loc)&&(delete o.startToken,delete o.endToken),i))}return sw.get(t)}(n)}var sC=sN;(m=sN||(sN={})).gql=sC,m.resetCaches=function(){sw.clear(),sk.clear()},m.disableFragmentWarnings=function(){sE=!1},m.enableExperimentalFragmentVariables=function(){sS=!0},m.disableExperimentalFragmentVariables=function(){sS=!1},sN.default=sN;var sO=e.i(59544),sT=e.i(3812),sI=e.i(39964);let sD=sN`
  mutation ShareDocument(
    $documentId: String!
    $userId: String!
    $permission: PermissionType!
  ) {
    shareDocument(
      documentId: $documentId
      userId: $userId
      permission: $permission
    ) {
      id
      user {
        id
        name
        email
      }
      permission
    }
  }
`,sj=sN`
  query GetDocumentAccess($documentId: String!) {
    document(id: $documentId) {
      id
      access {
        id
        permission
        user {
          id
          name
          email
        }
      }
    }
  }
`,sA=sN`
  mutation RemoveAccess($documentId: String!, $userId: String!) {
    revokeAccess(documentId: $documentId, userId: $userId)
  }
`;function sR({documentId:e,documentTitle:t,isOpen:r,onClose:n,onShareComplete:i}){let{data:s}=(0,_.useSession)(),[o,a]=(0,S.useState)(""),[l,c]=(0,S.useState)("EDITOR"),[u,h]=(0,S.useState)([]),[d,f]=(0,S.useState)(!1),[p,m]=(0,S.useState)(!1),[g,y]=(0,S.useState)("");S.default.useEffect(()=>{r&&(a(""),c("EDITOR"),m(!1),y(""))},[e,r]);let b=S.default.useMemo(()=>new nf({link:new iT({uri:"/api/graphql",credentials:"include",headers:{...s&&{"x-user-id":s.user?.id||""}}}),cache:new im}),[s?.user?.id]),{data:v,loading:x}=i2(sj,{variables:{documentId:e},skip:!r||!e,fetchPolicy:"network-only",client:b});S.default.useEffect(()=>{v?.document?.access&&h(v.document.access)},[v]);let[w]=i8(sD,{client:b}),[k]=i8(sA,{client:b}),N=async()=>{if(!o.trim())return;let t=u.find(e=>e.user.email.toLowerCase()===o.trim().toLowerCase());if(t){if(t.permission===l){y(`${o} already has ${l} access.`),m(!0),setTimeout(()=>m(!1),3e3);return}y(`Failed: ${o} already has ${t.permission} access. Use the list below to manage permissions.`),m(!0),setTimeout(()=>m(!1),5e3);return}f(!0);try{let t=await w({variables:{documentId:e,userId:o,permission:l}});t.data&&(h([...u,t.data.shareDocument]),y(`Successfully shared with ${o}`),m(!0),a(""),i&&i(),setTimeout(()=>m(!1),3e3))}catch(e){console.error("Error sharing document:",e),y(`Failed to share with ${o}`),m(!0),setTimeout(()=>m(!1),3e3)}finally{f(!1)}},C=async t=>{console.log(t);try{await k({variables:{documentId:e,userId:t}}),h(u.filter(e=>e.user.id!==t)),y("Access removed successfully"),m(!0),i&&i(),setTimeout(()=>m(!1),3e3)}catch(e){console.error("Error removing access:",e),e.graphQLErrors&&e.graphQLErrors.length>0?(console.error("GraphQL Errors:",e.graphQLErrors),y(e.graphQLErrors[0].message||"Failed to remove access (Permission Denied)")):e.networkError?(console.error("Network Error:",e.networkError),y("Failed to remove access (Network Error)")):y("Failed to remove access"),m(!0),setTimeout(()=>m(!1),3e3)}};return r?(0,E.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,E.jsxs)(sI.Card,{className:"w-full max-w-lg max-h-[85vh] overflow-y-auto shadow-2xl",children:[(0,E.jsxs)(sI.CardHeader,{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border-b",children:[(0,E.jsxs)(sI.CardTitle,{className:"flex items-center gap-2 text-xl",children:[(0,E.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold",children:""}),'Share "',t,'"']}),(0,E.jsx)(sI.CardDescription,{className:"text-slate-600 dark:text-slate-300",children:"Invite collaborators to work on this document"})]}),(0,E.jsxs)(sI.CardContent,{className:"space-y-6 p-6",children:[p&&(0,E.jsx)("div",{className:`p-3 rounded-lg border ${g.includes("Failed")?"bg-red-50 border-red-200 text-red-700":"bg-green-50 border-green-200 text-green-700"}`,children:(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E.jsx)("span",{className:"text-lg",children:g.includes("Failed")?"":""}),(0,E.jsx)("span",{className:"text-sm font-medium",children:g})]})}),(0,E.jsxs)("div",{className:"space-y-4",children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{htmlFor:"email",className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 block",children:"Email Address"}),(0,E.jsx)(sT.Input,{id:"email",type:"email",placeholder:"colleague@example.com",value:o,onChange:e=>a(e.target.value),className:"w-full h-11 text-base border-2 border-slate-200 dark:border-slate-600 focus:border-blue-500 dark:focus:border-blue-400 rounded-lg",onKeyPress:e=>"Enter"===e.key&&N()})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{htmlFor:"permission",className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 block",children:"Permission Level"}),(0,E.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{value:"VIEWER",icon:"",label:"Viewer",desc:"View only"},{value:"EDITOR",icon:"",label:"Editor",desc:"Can edit"},{value:"ADMIN",icon:"",label:"Admin",desc:"Full access"}].map(e=>(0,E.jsxs)("button",{onClick:()=>c(e.value),className:`p-3 rounded-lg border-2 transition-all duration-200 text-center ${l===e.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"border-slate-200 dark:border-slate-600 hover:border-slate-300 dark:hover:border-slate-500 text-slate-600 dark:text-slate-300"}`,children:[(0,E.jsx)("div",{className:"text-2xl mb-1",children:e.icon}),(0,E.jsx)("div",{className:"text-xs font-medium",children:e.label}),(0,E.jsx)("div",{className:"text-xs opacity-75",children:e.desc})]},e.value))}),(0,E.jsx)("div",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:(e=>{switch(e){case"ADMIN":return"Full control - can manage permissions and delete";case"EDITOR":return"Can edit and share the document";case"VIEWER":return"Can only view the document";default:return"Unknown permission"}})(l)})]}),(0,E.jsx)(sO.Button,{onClick:N,disabled:!o.trim()||d,className:"w-full h-11 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200",children:d?(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Sharing..."]}):(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Share"]})})]}),x?(0,E.jsxs)("div",{className:"flex justify-center items-center p-8 text-blue-500",children:[(0,E.jsx)("svg",{className:"w-6 h-6 animate-spin mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Loading collaborators..."]}):u.length>0&&(0,E.jsxs)("div",{className:"space-y-4",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:["Current Collaborators (",u.length,")"]}),(0,E.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Click  to remove access"})]}),(0,E.jsx)("div",{className:"space-y-3",children:u.map((e,t)=>(0,E.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 hover:shadow-md transition-all duration-200",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,E.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg",children:e.user.name?.[0]||e.user.email?.[0]||"U"}),(0,E.jsxs)("div",{children:[(0,E.jsx)("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:e.user.name||e.user.email}),(0,E.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.user.email})]})]}),(0,E.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,E.jsxs)("span",{className:`text-xs px-3 py-1.5 rounded-full font-medium border ${(e=>{switch(e){case"ADMIN":return"bg-red-100 text-red-800 border-red-200";case"EDITOR":return"bg-blue-100 text-blue-800 border-blue-200";case"VIEWER":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e.permission)}`,children:[(0,E.jsx)("span",{className:"mr-1",children:(e=>{switch(e){case"ADMIN":return"";case"EDITOR":return"";case"VIEWER":return"";default:return""}})(e.permission)}),e.permission]}),(0,E.jsx)(sO.Button,{variant:"ghost",size:"sm",onClick:()=>C(e.user.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg p-2 transition-all duration-200",title:"Remove access",children:(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},t))})]}),(0,E.jsx)("div",{className:"flex justify-end pt-4 border-t border-slate-200 dark:border-slate-700",children:(0,E.jsx)(sO.Button,{variant:"outline",onClick:n,className:"px-6 py-2 border-2 border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg font-medium",children:"Done"})})]})]})}):null}let sM=sN`
  query GetMyDocuments {
    myDocuments {
      id
      title
      type
      createdAt
      updatedAt
      owner {
        id
        name
        email
      }
      access {
        id
        user {
          id
          name
          email
        }
        permission
      }
    }
  }
`,sL=sN`
  query GetSharedDocuments {
    sharedDocuments {
      id
      title
      type
      createdAt
      updatedAt
      owner {
        id
        name
        email
      }
      access {
        id
        user {
          id
          name
          email
        }
        permission
      }
    }
  }
`,sF=sN`
  query GetDocumentAccess($documentId: String!) {
    document(id: $documentId) {
      id
      access {
        id
        user {
          id
          name
          email
        }
        permission
      }
    }
  }
`,sP=sN`
  mutation CreateDocument($title: String!, $type: String!) {
    createDocument(title: $title, type: $type) {
      id
      title
      type
      content
      createdAt
      updatedAt
      owner {
        id
        name
        email
      }
    }
  }
`,sU=sN`
  mutation DeleteDocument($id: String!) {
    deleteDocument(id: $id)
  }
`;function sB({onDocumentSelect:e}){let{data:t}=(0,_.useSession)(),[r,n]=(0,S.useState)("my"),[i,s]=(0,S.useState)(!1),[o,a]=(0,S.useState)({isOpen:!1,documentId:"",title:""}),[l,c]=(0,S.useState)({isOpen:!1,documentId:"",documentTitle:""}),[u,h]=(0,S.useState)(""),[d,f]=(0,S.useState)("writing"),p=(0,S.useMemo)(()=>new nf({link:new iT({uri:"/api/graphql",credentials:"include",headers:{...t&&{"x-user-id":t.user?.id||""}}}),cache:new im}),[t?.user?.id]),{data:m,refetch:g}=i2(sM,{skip:!t,client:p}),{data:y,refetch:b}=i2(sL,{skip:!t,client:p}),{data:v,refetch:x}=i2(sF,{variables:{documentId:o.documentId},skip:!o.documentId||!t,client:p}),[w]=i8(sP,{client:p}),[k]=i8(sU,{client:p}),N=async()=>{if(u.trim())try{let e=await w({variables:{title:u,type:d},context:{headers:{"x-user-id":t?.user?.id||""}}});console.log("Document created successfully:",e),h(""),s(!1),setTimeout(async()=>{console.log("Refreshing document list..."),await g(),await b(),console.log("Document list refreshed")},500)}catch(e){console.error("Error creating document:",e),setTimeout(async()=>{await g(),await b()},500)}},C=async(e,t)=>{c({isOpen:!0,documentId:e,documentTitle:t})},O=async()=>{let{documentId:e,documentTitle:r}=l;try{console.log("Attempting to delete document:",e);let n=await k({variables:{id:e},context:{headers:{"x-user-id":t?.user?.id||""}}});console.log("Document deleted successfully:",n);let i=document.createElement("div");i.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        z-index: 9999;
        font-weight: 500;
        animation: slideIn 0.3s ease-out;
      `,i.textContent=` "${r}" deleted successfully`,document.body.appendChild(i),setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},3e3),c({isOpen:!1,documentId:"",documentTitle:""}),setTimeout(async()=>{console.log("Refreshing document list after deletion..."),await g(),await b(),console.log("Document list refreshed after deletion")},500)}catch(t){console.error("Error deleting document:",t);let e=document.createElement("div");e.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #ef4444;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        z-index: 9999;
        font-weight: 500;
        animation: slideIn 0.3s ease-out;
      `,e.textContent=` Failed to delete "${r}"`,document.body.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},3e3),c({isOpen:!1,documentId:"",documentTitle:""})}},T="my"===r?m?.myDocuments:y?.sharedDocuments;return(0,E.jsxs)("div",{className:"flex flex-col h-full bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:[(0,E.jsxs)("div",{className:"p-6 border-b bg-white/80 backdrop-blur-sm dark:bg-slate-800/80 shadow-sm",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-slate-900 to-slate-600 dark:from-white dark:to-slate-300 bg-clip-text text-transparent",children:"Workspace"}),(0,E.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Manage your collaborative documents"})]}),(0,E.jsxs)(sO.Button,{size:"sm",onClick:()=>s(!0),className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:[(0,E.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Document"]})]}),(0,E.jsxs)("div",{className:"flex space-x-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl shadow-inner",children:[(0,E.jsx)(sO.Button,{variant:"my"===r?"default":"ghost",size:"sm",onClick:()=>n("my"),className:`flex-1 rounded-lg transition-all duration-200 text-xs ${"my"===r?"bg-white dark:bg-slate-600 shadow-md text-slate-900 dark:text-white":"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-slate-600/50"}`,children:(0,E.jsxs)("span",{className:"flex items-center justify-center gap-1 text-xs",children:["",(0,E.jsx)("span",{className:"hidden sm:inline",children:"My Documents"}),m?.myDocuments?.length>0&&(0,E.jsx)("span",{className:"bg-blue-500 text-white text-xs px-1.5 py-0.5 rounded-full",children:m.myDocuments.length})]})}),(0,E.jsx)(sO.Button,{variant:"shared"===r?"default":"ghost",size:"sm",onClick:()=>n("shared"),className:`flex-1 rounded-lg transition-all duration-200 text-xs ${"shared"===r?"bg-white dark:bg-slate-600 shadow-md text-slate-900 dark:text-white":"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-slate-600/50"}`,children:(0,E.jsxs)("span",{className:"flex items-center justify-center gap-1 text-xs",children:["",(0,E.jsx)("span",{className:"hidden sm:inline",children:"Shared"}),y?.sharedDocuments?.length>0&&(0,E.jsx)("span",{className:"bg-purple-500 text-white text-xs px-1.5 py-0.5 rounded-full",children:y.sharedDocuments.length})]})})]})]}),(0,E.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:T?.length===0?(0,E.jsxs)("div",{className:"text-center py-16",children:[(0,E.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-slate-200 to-slate-300 dark:from-slate-700 dark:to-slate-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:(0,E.jsx)("svg",{className:"w-12 h-12 text-slate-400 dark:text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,E.jsx)("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"my"===r?"No documents yet":"No shared documents"}),(0,E.jsx)("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mx-auto",children:"my"===r?"Create your first document to start collaborating with your team":"Documents shared with you will appear here for easy access"}),"my"===r&&(0,E.jsxs)(sO.Button,{onClick:()=>s(!0),className:"mt-6 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:[(0,E.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Your First Document"]})]}):(0,E.jsx)("div",{className:"grid gap-4",children:T?.map(t=>(0,E.jsx)(sI.Card,{className:"group cursor-pointer hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] border-0 bg-white dark:bg-slate-800 shadow-lg",onClick:()=>e(t.id,t.type),children:(0,E.jsxs)(sI.CardContent,{className:"p-3",children:[(0,E.jsxs)("div",{className:"flex items-start justify-between",children:[(0,E.jsx)("div",{className:"flex-1 min-w-0",children:(0,E.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,E.jsx)("div",{className:"text-3xl p-3 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-600 shadow-inner",children:(e=>{switch(e){case"planning":return"";case"drawing":return"";case"writing":return"";default:return""}})(t.type)}),(0,E.jsxs)("div",{className:"flex-1",children:[(0,E.jsx)("h3",{className:"font-semibold text-lg text-slate-900 dark:text-white truncate group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:t.title}),(0,E.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,E.jsx)("span",{className:`text-xs px-3 py-1 rounded-full font-medium shadow-sm ${(e=>{switch(e){case"planning":return"bg-blue-100 text-blue-800";case"drawing":return"bg-purple-100 text-purple-800";case"writing":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(t.type)}`,children:t.type}),"shared"===r&&(0,E.jsxs)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["by ",t.owner.name||t.owner.email]})]})]})]})}),(0,E.jsx)("div",{className:"flex items-center space-x-2 ml-4",children:"my"===r&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(sO.Button,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),a({isOpen:!0,documentId:t.id,title:t.title})},className:"opacity-75 hover:opacity-100 transition-all duration-200 text-slate-600 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg p-2",title:"Share document",children:(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.5 9 12c0-.5-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m9.032 4.026a3 3 0 10-4.732 2.684 3 3 0 004.732-2.684zm0 0a3 3 0 00-4.732-2.684 3 3 0 004.732 2.684z"})})}),(0,E.jsx)(sO.Button,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),C(t.id,t.title)},className:"opacity-75 hover:opacity-100 transition-all duration-200 text-slate-600 dark:text-slate-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg p-2",title:"Delete document",children:(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]}),(0,E.jsx)("div",{className:"flex items-center justify-between",children:(0,E.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-slate-500 dark:text-slate-400",children:[(0,E.jsxs)("span",{className:"flex items-center gap-1",children:[(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(t.updatedAt).toLocaleDateString()]}),t.access?.length>0&&(0,E.jsxs)("span",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400",children:[(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),t.access.length," collaborators"]})]})})]})},t.id))})}),i&&(0,E.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,E.jsxs)(sI.Card,{className:"w-full max-w-md",children:[(0,E.jsxs)(sI.CardHeader,{children:[(0,E.jsx)(sI.CardTitle,{children:"Create New Document"}),(0,E.jsx)(sI.CardDescription,{children:"Start a new collaborative document"})]}),(0,E.jsxs)(sI.CardContent,{className:"space-y-4",children:[(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)("label",{htmlFor:"title",className:"text-sm font-medium",children:"Title"}),(0,E.jsx)(sT.Input,{id:"title",placeholder:"Enter document title",value:u,onChange:e=>h(e.target.value),autoFocus:!0})]}),(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)("label",{htmlFor:"type",className:"text-sm font-medium",children:"Document Type"}),(0,E.jsxs)("select",{id:"type",value:d,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[(0,E.jsx)("option",{value:"writing",children:" Writing Document"}),(0,E.jsx)("option",{value:"drawing",children:" Drawing Canvas"}),(0,E.jsx)("option",{value:"planning",children:" Planning Board"})]})]}),(0,E.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,E.jsx)(sO.Button,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,E.jsx)(sO.Button,{onClick:N,disabled:!u.trim(),children:"Create Document"})]})]})]})}),(0,E.jsx)(sR,{documentId:o.documentId,documentTitle:o.title,isOpen:o.isOpen,onClose:()=>a({isOpen:!1,documentId:"",title:""}),onShareComplete:()=>{console.log("Document ID being shared:",v),console.log("=== REFETCHING DOCUMENTS ==="),console.log("Document ID being shared:",o.documentId),console.log("Current myDocuments count:",m?.myDocuments?.length||0),console.log("Current sharedDocuments count:",y?.sharedDocuments?.length||0),setTimeout(async()=>{console.log("Refreshing document list after sharing..."),await g(),await b(),await x(),console.log("=== REFETCH COMPLETE ==="),console.log("New myDocuments count:",m?.myDocuments?.length||0),console.log("New sharedDocuments count:",y?.sharedDocuments?.length||0),console.log("Document list refreshed after sharing")},500)}}),l.isOpen&&(0,E.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,E.jsxs)(sI.Card,{className:"w-full max-w-md",children:[(0,E.jsxs)(sI.CardHeader,{children:[(0,E.jsxs)(sI.CardTitle,{className:"text-destructive flex items-center gap-2",children:[(0,E.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Delete Document"]}),(0,E.jsxs)(sI.CardDescription,{children:['Are you sure you want to delete "',l.documentTitle,'"?']})]}),(0,E.jsxs)(sI.CardContent,{className:"space-y-4",children:[(0,E.jsxs)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3",children:[(0,E.jsx)("p",{className:"text-sm text-destructive font-medium",children:" This action cannot be undone"}),(0,E.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"All shared access will be removed and the document will be permanently deleted."})]}),(0,E.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,E.jsx)(sO.Button,{variant:"outline",onClick:()=>c({isOpen:!1,documentId:"",documentTitle:""}),children:"Cancel"}),(0,E.jsx)(sO.Button,{variant:"destructive",onClick:O,className:"min-w-[100px]",children:"Delete"})]})]})]})})]})}var sV=e.i(67034);let sq=()=>new Map,sz=e=>{let t=sq();return e.forEach((e,r)=>{t.set(r,e)}),t},sW=(e,t,r)=>{let n=e.get(t);return void 0===n&&e.set(t,n=r()),n},s$=()=>new Set,sQ=e=>e[e.length-1],sK=(e,t)=>{for(let r=0;r<t.length;r++)e.push(t[r])},sH=Array.from,sG=(e,t)=>{for(let r=0;r<e.length;r++)if(!t(e[r],r,e))return!1;return!0},sJ=(e,t)=>{for(let r=0;r<e.length;r++)if(t(e[r],r,e))return!0;return!1},sY=Array.isArray;class sX{constructor(){this._observers=sq()}on(e,t){return sW(this._observers,e,s$).add(t),t}once(e,t){let r=(...n)=>{this.off(e,r),t(...n)};this.on(e,r)}off(e,t){let r=this._observers.get(e);void 0!==r&&(r.delete(t),0===r.size&&this._observers.delete(e))}emit(e,t){return sH((this._observers.get(e)||sq()).values()).forEach(e=>e(...t))}destroy(){this._observers=sq()}}class sZ{constructor(){this._observers=sq()}on(e,t){sW(this._observers,e,s$).add(t)}once(e,t){let r=(...n)=>{this.off(e,r),t(...n)};this.on(e,r)}off(e,t){let r=this._observers.get(e);void 0!==r&&(r.delete(t),0===r.size&&this._observers.delete(e))}emit(e,t){return sH((this._observers.get(e)||sq()).values()).forEach(e=>e(...t))}destroy(){this._observers=sq()}}let s0=Math.floor,s1=Math.abs,s2=(e,t)=>e<t?e:t,s4=(e,t)=>e>t?e:t,s3=Math.pow,s5=e=>0!==e?e<0:1/e<0,s8=Number.MAX_SAFE_INTEGER,s6=Number.MIN_SAFE_INTEGER,s9=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&s0(e)===e),s7=String.fromCharCode;s7(65535);let oe=/^\s*/g,ot=/([A-Z])/g,or=(e,t)=>e.replace(ot,e=>`${t}${e.toLowerCase()}`).replace(oe,""),on="undefined"!=typeof TextEncoder?new TextEncoder:null,oi=on?e=>on.encode(e):e=>{let t=unescape(encodeURIComponent(e)),r=t.length,n=new Uint8Array(r);for(let e=0;e<r;e++)n[e]=t.codePointAt(e);return n},os="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});os&&1===os.decode(new Uint8Array).length&&(os=null);let oo=(e,t)=>((e,t)=>{let r=Array(e);for(let n=0;n<e;n++)r[n]=t(n,r);return r})(t,()=>e).join("");class oa{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}let ol=()=>new oa,oc=e=>{let t=e.cpos;for(let r=0;r<e.bufs.length;r++)t+=e.bufs[r].length;return t},ou=e=>{let t=new Uint8Array(oc(e)),r=0;for(let n=0;n<e.bufs.length;n++){let i=e.bufs[n];t.set(i,r),r+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),r),t},oh=(e,t)=>{let r=e.cbuf.length;e.cpos===r&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*r),e.cpos=0),e.cbuf[e.cpos++]=t},od=(e,t)=>{for(;t>127;)oh(e,128|127&t),t=s0(t/128);oh(e,127&t)},of=(e,t)=>{let r=s5(t);for(r&&(t=-t),oh(e,128*(t>63)|64*!!r|63&t),t=s0(t/64);t>0;)oh(e,128*(t>127)|127&t),t=s0(t/128)},op=new Uint8Array(3e4),om=op.length/3,og=on&&on.encodeInto?(e,t)=>{if(t.length<om){let r=on.encodeInto(t,op).written||0;od(e,r);for(let t=0;t<r;t++)oh(e,op[t])}else ob(e,oi(t))}:(e,t)=>{let r=unescape(encodeURIComponent(t)),n=r.length;od(e,n);for(let t=0;t<n;t++)oh(e,r.codePointAt(t))},oy=(e,t)=>{let r=e.cbuf.length,n=e.cpos,i=s2(r-n,t.length),s=t.length-i;e.cbuf.set(t.subarray(0,i),n),e.cpos+=i,s>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(s4(2*r,s)),e.cbuf.set(t.subarray(i)),e.cpos=s)},ob=(e,t)=>{od(e,t.byteLength),oy(e,t)},ov=(e,t)=>{let r;(r=e.cbuf.length)-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*s4(r,t)),e.cpos=0);let n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},ox=new DataView(new ArrayBuffer(4)),ow=(e,t)=>{switch(typeof t){case"string":oh(e,119),og(e,t);break;case"number":if(s9(t)&&0x7fffffff>=s1(t))oh(e,125),of(e,t);else if(ox.setFloat32(0,t),ox.getFloat32(0)===t)oh(e,124),ov(e,4).setFloat32(0,t,!1);else oh(e,123),ov(e,8).setFloat64(0,t,!1);break;case"bigint":oh(e,122),ov(e,8).setBigInt64(0,t,!1);break;case"object":if(null===t)oh(e,126);else if(sY(t)){oh(e,117),od(e,t.length);for(let r=0;r<t.length;r++)ow(e,t[r])}else if(t instanceof Uint8Array)oh(e,116),ob(e,t);else{oh(e,118);let r=Object.keys(t);od(e,r.length);for(let n=0;n<r.length;n++){let i=r[n];og(e,i),ow(e,t[i])}}break;case"boolean":oh(e,t?120:121);break;default:oh(e,127)}};class ok extends oa{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&od(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}let oE=e=>{e.count>0&&(of(e.encoder,1===e.count?e.s:-e.s),e.count>1&&od(e.encoder,e.count-2))};class oS{constructor(){this.encoder=new oa,this.s=0,this.count=0}write(e){this.s===e?this.count++:(oE(this),this.count=1,this.s=e)}toUint8Array(){return oE(this),ou(this.encoder)}}let o_=e=>{if(e.count>0){let t=2*e.diff+ +(1!==e.count);of(e.encoder,t),e.count>1&&od(e.encoder,e.count-2)}};class oN{constructor(){this.encoder=new oa,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(o_(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return o_(this),ou(this.encoder)}}class oC{constructor(){this.sarr=[],this.s="",this.lensE=new oS}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){let e=new oa;return this.sarr.push(this.s),this.s="",og(e,this.sarr.join("")),oy(e,this.lensE.toUint8Array()),ou(e)}}let oO=()=>{throw Error("Method unimplemented")},oT=()=>{throw Error("Unexpected case")},oI=Error("Unexpected end of array"),oD=Error("Integer out of Range");class oj{constructor(e){this.arr=e,this.pos=0}}let oA=e=>new oj(e),oR=e=>{var t;let r;return t=oL(e),r=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t),e.pos+=t,r},oM=e=>e.arr[e.pos++],oL=e=>{let t=0,r=1,n=e.arr.length;for(;e.pos<n;){let n=e.arr[e.pos++];if(t+=(127&n)*r,r*=128,n<128)return t;if(t>s8)throw oD}throw oI},oF=e=>{let t=e.arr[e.pos++],r=63&t,n=64,i=(64&t)>0?-1:1;if((128&t)==0)return i*r;let s=e.arr.length;for(;e.pos<s;){if(r+=(127&(t=e.arr[e.pos++]))*n,n*=128,t<128)return i*r;if(r>s8)throw oD}throw oI},oP=os?e=>os.decode(oR(e)):e=>{let t=oL(e);if(0===t)return"";{let r=String.fromCodePoint(oM(e));if(--t<100)for(;t--;)r+=String.fromCodePoint(oM(e));else for(;t>0;){let n=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+n);e.pos+=n,r+=String.fromCodePoint.apply(null,i),t-=n}return decodeURIComponent(escape(r))}},oU=(e,t)=>{let r=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,r},oB=[e=>void 0,e=>null,oF,e=>oU(e,4).getFloat32(0,!1),e=>oU(e,8).getFloat64(0,!1),e=>oU(e,8).getBigInt64(0,!1),e=>!1,e=>!0,oP,e=>{let t=oL(e),r={};for(let n=0;n<t;n++)r[oP(e)]=oV(e);return r},e=>{let t=oL(e),r=[];for(let n=0;n<t;n++)r.push(oV(e));return r},oR],oV=e=>oB[127-oM(e)](e);class oq extends oj{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){0===this.count&&(this.s=this.reader(this),this.pos!==this.arr.length?this.count=oL(this)+1:this.count=-1);return this.count--,this.s}}class oz extends oj{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=oF(this);let e=s5(this.s);this.count=1,e&&(this.s=-this.s,this.count=oL(this)+2)}return this.count--,this.s}}class oW extends oj{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){let e=oF(this);this.diff=s0(e/2),this.count=1,1&e&&(this.count=oL(this)+2)}return this.s+=this.diff,this.count--,this.s}}class o${constructor(e){this.decoder=new oz(e),this.str=oP(this.decoder),this.spos=0}read(){let e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}crypto.subtle;let oQ=crypto.getRandomValues.bind(crypto),oK=()=>oQ(new Uint32Array(1))[0],oH=Date.now,oG=e=>new Promise(e);Promise.all.bind(Promise);let oJ=e=>void 0===e?null:e,oY=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},oX=!0;try{"undefined"!=typeof localStorage&&localStorage&&(oY=localStorage,oX=!1)}catch(e){}let oZ=oY,o0=Symbol("Equality"),o1=(e,t)=>e===t||!!e?.[o0]?.(t),o2=Object.assign,o4=Object.keys,o3=(e,t)=>{for(let r in e)if(!t(e[r],r))return!1;return!0},o5=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o8=Object.freeze,o6=e=>{for(let t in e){let r=e[t];("object"==typeof r||"function"==typeof r)&&o6(e[t])}return o8(e)},o9=(e,t,r=0)=>{try{for(;r<e.length;r++)e[r](...t)}finally{r<e.length&&o9(e,t,r+1)}},o7=e=>e,ae=(e,t)=>{if(e===t)return!0;if(null==e||null==t||e.constructor!==t.constructor&&(e.constructor||Object)!==(t.constructor||Object))return!1;if(null!=e[o0])return e[o0](t);switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;break;case Set:if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;break;case Map:if(e.size!==t.size)return!1;for(let r of e.keys())if(!t.has(r)||!ae(e.get(r),t.get(r)))return!1;break;case void 0:case Object:if(o4(e).length!==o4(t).length)return!1;for(let r in e)if(!o5(e,r)||!ae(e[r],t[r]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!ae(e[r],t[r]))return!1;break;default:return!1}return!0},at=void 0!==sm.default&&sm.default.release&&/node|io\.js/.test(sm.default.release.name)&&"[object process]"===Object.prototype.toString.call(void 0!==sm.default?sm.default:0),ar="undefined"!=typeof window&&"undefined"!=typeof document&&!at;"undefined"!=typeof navigator&&/Mac/.test(navigator.platform);let an=[],ai=e=>(()=>{if(void 0===i)if(at){i=sq();let e=sm.default.argv,t=null;for(let r=0;r<e.length;r++){let n=e[r];"-"===n[0]?(null!==t&&i.set(t,""),t=n):null!==t?(i.set(t,n),t=null):an.push(n)}null!==t&&i.set(t,"")}else"object"==typeof location?(i=sq(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){let[t,r]=e.split("=");i.set(`--${or(t,"-")}`,r),i.set(`-${or(t,"-")}`,r)}})):i=sq();return i})().has(e),as=e=>at?oJ(sm.default.env[e.toUpperCase().replaceAll("-","_")]):oJ(oZ.getItem(e)),ao=e=>ai("--"+e)||null!==as(e),aa=ao("production"),al=at&&["true","1","2"].includes(sm.default.env.FORCE_COLOR)||!ai("--no-colors")&&!ao("no-color")&&(!at||sm.default.stdout.isTTY)&&(!at||ai("--color")||null!==as("COLORTERM")||(as("TERM")||"").includes("color")),ac=e=>new Uint8Array(e),au=ar?e=>{let t="";for(let r=0;r<e.byteLength;r++)t+=s7(e[r]);return btoa(t)}:e=>sV.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),ah=ar?e=>{let t=atob(e),r=ac(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}:e=>{let t,r=sV.Buffer.from(e,"base64");return t=r.buffer,new Uint8Array(t,r.byteOffset,r.byteLength)};class ad{constructor(e,t){this.left=e,this.right=t}}let af=(e,t)=>new ad(e,t),ap=e=>e.next()>=.5,am=(e,t,r)=>s0(e.next()*(r+1-t)+t),ag=(e,t,r)=>s0(e.next()*(r+1-t)+t),ay=e=>s7(ag(e,97,122)),ab=(e,t)=>t[ag(e,0,t.length-1)],av=Symbol("0schema");class ax{constructor(){this._rerrs=[]}extend(e,t,r,n=null){this._rerrs.push({path:e,expected:t,has:r,message:n})}toString(){let e=[];for(let t=this._rerrs.length-1;t>0;t--){let r=this._rerrs[t];e.push(oo(" ",(this._rerrs.length-t)*2)+`${null!=r.path?`[${r.path}] `:""}${r.has} doesn't match ${r.expected}. ${r.message}`)}return e.join("\n")}}let aw=(e,t)=>e===t||null!=e&&null!=t&&e.constructor===t.constructor&&(e[o0]?o1(e,t):sY(e)?sG(e,e=>sJ(t,t=>aw(e,t))):"object"==typeof e&&o3(e,(e,r)=>aw(e,t[r])));class ak{static _dilutes=!1;extends(e){let[t,r]=[this.shape,e.shape];return this.constructor._dilutes&&([r,t]=[t,r]),aw(t,r)}equals(e){return this.constructor===e.constructor&&ae(this.shape,e.shape)}[av](){return!0}[o0](e){return this.equals(e)}validate(e){return this.check(e)}check(e,t){oO()}get nullable(){return aX(this,ln)}get optional(){return new aA(this)}cast(e){return la(e,this),e}expect(e){return la(e,this),e}}class aE extends ak{constructor(e,t){super(),this.shape=e,this._c=t}check(e,t){let r=e?.constructor===this.shape&&(null==this._c||this._c(e));return r||t?.extend(null,this.shape.name,e?.constructor.name,e?.constructor!==this.shape?"Constructor match failed":"Check failed"),r}}let aS=(e,t=null)=>new aE(e,t);aS(aE);class a_ extends ak{constructor(e){super(),this.shape=e}check(e,t){let r=this.shape(e);return r||t?.extend(null,"custom prop",e?.constructor.name,"failed to check custom prop"),r}}let aN=e=>new a_(e);aS(a_);class aC extends ak{constructor(e){super(),this.shape=e}check(e,t){let r=this.shape.some(t=>t===e);return r||t?.extend(null,this.shape.join(" | "),e.toString()),r}}let aO=(...e)=>new aC(e),aT=aS(aC),aI=RegExp.escape||(e=>e.replace(/[().|&,$^[\]]/g,e=>"\\"+e)),aD=e=>a9.check(e)?[aI(e)]:aT.check(e)?e.shape.map(e=>e+""):a6.check(e)?["[+-]?\\d+.?\\d*"]:a7.check(e)?[".*"]:aZ.check(e)?e.shape.map(aD).flat(1):void oT();aS(class extends ak{constructor(e){super(),this.shape=e,this._r=RegExp("^"+e.map(aD).map(e=>`(${e.join("|")})`).join("")+"$")}check(e,t){let r=null!=this._r.exec(e);return r||t?.extend(null,this._r.toString(),e.toString(),"String doesn't match string template."),r}});let aj=Symbol("optional");class aA extends ak{constructor(e){super(),this.shape=e}check(e,t){let r=void 0===e||this.shape.check(e);return r||t?.extend(null,"undefined (optional)","()"),r}get[aj](){return!0}}let aR=aS(aA);class aM extends ak{check(e,t){return t?.extend(null,"never",typeof e),!1}}new aM,aS(aM);class aL extends ak{constructor(e,t=!1){super(),this.shape=e,this._isPartial=t}static _dilutes=!0;get partial(){return new aL(this.shape,!0)}check(e,t){return null==e?(t?.extend(null,"object","null"),!1):o3(this.shape,(r,n)=>{let i=this._isPartial&&!o5(e,n)||r.check(e[n],t);return i||t?.extend(n.toString(),r.toString(),typeof e[n],"Object property does not match"),i})}}let aF=aS(aL),aP=aN(e=>null!=e&&(e.constructor===Object||null==e.constructor));class aU extends ak{constructor(e,t){super(),this.shape={keys:e,values:t}}check(e,t){return null!=e&&o3(e,(r,n)=>{let i=this.shape.keys.check(n,t);return i||t?.extend(n+"","Record",typeof e,i?"Key doesn't match schema":"Value doesn't match value"),i&&this.shape.values.check(r,t)})}}let aB=(e,t)=>new aU(e,t),aV=aS(aU);class aq extends ak{constructor(e){super(),this.shape=e}check(e,t){return null!=e&&o3(this.shape,(r,n)=>{let i=r.check(e[n],t);return i||t?.extend(n.toString(),"Tuple",typeof r),i})}}aS(aq);class az extends ak{constructor(e){super(),this.shape=1===e.length?e[0]:new aY(e)}check(e,t){let r=sY(e)&&sG(e,e=>this.shape.check(e));return r||t?.extend(null,"Array",""),r}}let aW=(...e)=>new az(e),a$=aS(az),aQ=aN(e=>sY(e));class aK extends ak{constructor(e,t){super(),this.shape=e,this._c=t}check(e,t){let r=e instanceof this.shape&&(null==this._c||this._c(e));return r||t?.extend(null,this.shape.name,e?.constructor.name),r}}aS(aK);let aH=((e,t=null)=>new aK(e,t))(ak),aG=aS(class extends ak{constructor(e){super(),this.len=e.length-1,this.args=((...e)=>new aq(e))(...e.slice(-1)),this.res=e[this.len]}check(e,t){let r=e.constructor===Function&&e.length<=this.len;return r||t?.extend(null,"function",typeof e),r}}),aJ=aN(e=>"function"==typeof e);aS(class extends ak{constructor(e){super(),this.shape=e}check(e,t){let r=sG(this.shape,r=>r.check(e,t));return r||t?.extend(null,"Intersectinon",typeof e),r}},e=>e.shape.length>0);class aY extends ak{static _dilutes=!0;constructor(e){super(),this.shape=e}check(e,t){let r=sJ(this.shape,r=>r.check(e,t));return t?.extend(null,"Union",typeof e),r}}let aX=(...e)=>e.findIndex(e=>aZ.check(e))>=0?aX(...e.map(e=>lo(e)).map(e=>aZ.check(e)?e.shape:[e]).flat(1)):1===e.length?e[0]:new aY(e),aZ=aS(aY),a0=()=>!0,a1=aN(a0),a2=aS(a_,e=>e.shape===a0),a4=aN(e=>"bigint"==typeof e),a3=aN(e=>e===a4),a5=aN(e=>"symbol"==typeof e);aN(e=>e===a5);let a8=aN(e=>"number"==typeof e),a6=aN(e=>e===a8),a9=aN(e=>"string"==typeof e),a7=aN(e=>e===a9),le=aN(e=>"boolean"==typeof e),lt=aN(e=>e===le),lr=aO(void 0);aS(aC,e=>1===e.shape.length&&void 0===e.shape[0]),aO(void 0);let ln=aO(null),li=aS(aC,e=>1===e.shape.length&&null===e.shape[0]);aS(Uint8Array),aS(aE,e=>e.shape===Uint8Array);let ls=aX(a8,a9,ln,lr,a4,le,a5);s=aW(a1),o=aB(a9,a1),a=aX(a8,a9,ln,le,s,o),s.shape=a,o.shape.values=a;let lo=e=>{if(aH.check(e))return e;if(aP.check(e)){let t={};for(let r in e)t[r]=lo(e[r]);return new aL(t)}if(aQ.check(e))return aX(...e.map(lo));if(ls.check(e))return aO(e);if(aJ.check(e))return aS(e);oT()},la=aa?()=>{}:(e,t)=>{let r=new ax;if(!t.check(e,r))throw Error(`Expected value to be of type ${t.constructor.name}.
${r.toString()}`)},ll=new class e{constructor(e){this.patterns=[],this.$state=e}if(e,t){return this.patterns.push({if:lo(e),h:t}),this}else(e){return this.if(a1,e)}done(){return(e,t)=>{for(let r=0;r<this.patterns.length;r++){let n=this.patterns[r];if(n.if.check(e))return n.h(e,t)}throw Error("Unhandled pattern")}}}(a1).if(a6,(e,t)=>am(t,s6,s8)).if(a7,(e,t)=>((e,t=0,r=20)=>{let n=ag(e,t,r),i="";for(let t=0;t<n;t++)i+=ay(e);return i})(t)).if(lt,(e,t)=>ap(t)).if(a3,(e,t)=>BigInt(am(t,s6,s8))).if(aZ,(e,t)=>lc(t,ab(t,e.shape))).if(aF,(e,t)=>{let r={};for(let n in e.shape){let i=e.shape[n];if(aR.check(i)){if(ap(t))continue;i=i.shape}r[n]=ll(i,t)}return r}).if(a$,(e,t)=>{let r=[],n=ag(t,0,42);for(let i=0;i<n;i++)r.push(lc(t,e.shape));return r}).if(aT,(e,t)=>ab(t,e.shape)).if(li,(e,t)=>null).if(aG,(e,t)=>{let r=lc(t,e.res);return()=>r}).if(a2,(e,t)=>lc(t,ab(t,[a8,a9,ln,lr,a4,le,aW(a8),aB(aX("a","b","c"),a8)]))).if(aV,(e,t)=>{let r={},n=am(t,0,3);for(let i=0;i<n;i++){let n=lc(t,e.shape.keys),i=lc(t,e.shape.values);r[n]=i}return r}).done(),lc=(e,t)=>ll(lo(t),e),lu="undefined"!=typeof document?document:{};aN(e=>e.nodeType===lm),"undefined"!=typeof DOMParser&&new DOMParser,aN(e=>e.nodeType===ld),aN(e=>e.nodeType===lf);let lh=e=>((e,t)=>{let r=[];for(let[n,i]of e)r.push(t(i,n));return r})(e,(e,t)=>`${t}:${e};`).join(""),ld=lu.ELEMENT_NODE,lf=lu.TEXT_NODE;lu.CDATA_SECTION_NODE,lu.COMMENT_NODE;let lp=lu.DOCUMENT_NODE;lu.DOCUMENT_TYPE_NODE;let lm=lu.DOCUMENT_FRAGMENT_NODE;aN(e=>e.nodeType===lp);let lg=e=>class{constructor(e){this._=e}destroy(){e(this._)}};lg(clearTimeout),lg(clearInterval),lg(e=>"undefined"!=typeof requestAnimationFrame&&cancelAnimationFrame(e)),lg(e=>"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(e));let ly=Symbol,lb=ly(),lv=ly(),lx=ly(),lw=ly(),lk=ly(),lE=ly(),lS=ly(),l_=ly(),lN=ly();oH();let lC={[lb]:af("font-weight","bold"),[lv]:af("font-weight","normal"),[lx]:af("color","blue"),[lk]:af("color","green"),[lw]:af("color","grey"),[lE]:af("color","red"),[lS]:af("color","purple"),[l_]:af("color","orange"),[lN]:af("color","black")},lO=al?e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());let t=[],r=[],n=sq(),i=[],s=0;for(;s<e.length;s++){let i=e[s],o=lC[i];if(void 0!==o)n.set(o.left,o.right);else{if(void 0===i)break;if(i.constructor===String||i.constructor===Number){let e=lh(n);s>0||e.length>0?(t.push("%c"+i),r.push(e)):t.push(i)}else break}}for(s>0&&(i=r).unshift(t.join(""));s<e.length;s++){let t=e[s];t instanceof Symbol||i.push(t)}return i}:e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());let t=[],r=[],n=0;for(;n<e.length;n++){let r=e[n];if(void 0===r)break;if(r.constructor===String||r.constructor===Number)t.push(r);else if(r.constructor===Object)break}for(n>0&&r.push(t.join(""));n<e.length;n++){let t=e[n];t instanceof Symbol||r.push(t)}return r},lT=s$(),lI=e=>({[Symbol.iterator](){return this},next:e}),lD=(e,t)=>lI(()=>{let{done:r,value:n}=e.next();return{done:r,value:r?void 0:t(n)}});class lj{constructor(e,t){this.clock=e,this.len=t}}class lA{constructor(){this.clients=new Map}}let lR=(e,t,r)=>t.clients.forEach((t,n)=>{let i=e.doc.store.clients.get(n);if(null!=i){let n=i[i.length-1],s=n.id.clock+n.length;for(let n=0,o=t[n];n<t.length&&o.clock<s;o=t[++n])cu(e,i,o.clock,o.len,r)}}),lM=(e,t)=>{let r=e.clients.get(t.client);return void 0!==r&&null!==((e,t)=>{let r=0,n=e.length-1;for(;r<=n;){let i=s0((r+n)/2),s=e[i],o=s.clock;if(o<=t){if(t<o+s.len)return i;r=i+1}else n=i-1}return null})(r,t.clock)},lL=e=>{e.clients.forEach(e=>{let t,r;for(e.sort((e,t)=>e.clock-t.clock),t=1,r=1;t<e.length;t++){let n=e[r-1],i=e[t];n.clock+n.len>=i.clock?n.len=s4(n.len,i.clock+i.len-n.clock):(r<t&&(e[r]=i),r++)}e.length=r})},lF=(e,t,r,n)=>{sW(e.clients,t,()=>[]).push(new lj(r,n))},lP=()=>new lA,lU=(e,t)=>{od(e.restEncoder,t.clients.size),sH(t.clients.entries()).sort((e,t)=>t[0]-e[0]).forEach(([t,r])=>{e.resetDsCurVal(),od(e.restEncoder,t);let n=r.length;od(e.restEncoder,n);for(let t=0;t<n;t++){let n=r[t];e.writeDsClock(n.clock),e.writeDsLen(n.len)}})},lB=e=>{let t=new lA,r=oL(e.restDecoder);for(let n=0;n<r;n++){e.resetDsCurVal();let r=oL(e.restDecoder),n=oL(e.restDecoder);if(n>0){let i=sW(t.clients,r,()=>[]);for(let t=0;t<n;t++)i.push(new lj(e.readDsClock(),e.readDsLen()))}}return t},lV=(e,t,r)=>{let n=new lA,i=oL(e.restDecoder);for(let s=0;s<i;s++){e.resetDsCurVal();let i=oL(e.restDecoder),s=oL(e.restDecoder),o=r.clients.get(i)||[],a=cn(r,i);for(let r=0;r<s;r++){let r=e.readDsClock(),s=r+e.readDsLen();if(r<a){a<s&&lF(n,i,a,s-a);let e=cs(o,r),l=o[e];for(!l.deleted&&l.id.clock<r&&(o.splice(e+1,0,uM(t,l,r-l.id.clock)),e++);e<o.length;)if((l=o[e++]).id.clock<s)l.deleted||(s<l.id.clock+l.length&&o.splice(e,0,uM(t,l,s-l.id.clock)),l.delete(t));else break}else lF(n,i,r,s-r)}}if(n.clients.size>0){let e=new lJ;return od(e.restEncoder,0),lU(e,n),e.toUint8Array()}return null};class lq extends sX{constructor({guid:e="10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^oK()&15>>e/4).toString(16)),collectionid:t=null,gc:r=!0,gcFilter:n=()=>!0,meta:i=null,autoLoad:s=!1,shouldLoad:o=!0}={}){super(),this.gc=r,this.gcFilter=n,this.clientID=oK(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new ct,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=o,this.autoLoad=s,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=oG(e=>{this.on("load",()=>{this.isLoaded=!0,e(this)})});const a=()=>oG(e=>{let t=r=>{(void 0===r||!0===r)&&(this.off("sync",t),e())};this.on("sync",t)});this.on("sync",e=>{!1===e&&this.isSynced&&(this.whenSynced=a()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=a()}load(){let e=this._item;null===e||this.shouldLoad||cg(e.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(sH(this.subdocs).map(e=>e.guid))}transact(e,t=null){return cg(this,e,t)}get(e,t=cF){let r=sW(this.share,e,()=>{let e=new t;return e._integrate(this,null),e}),n=r.constructor;if(t!==cF&&n!==t)if(n===cF){let n=new t;n._map=r._map,r._map.forEach(e=>{for(;null!==e;e=e.left)e.parent=n}),n._start=r._start;for(let e=n._start;null!==e;e=e.right)e.parent=n;return n._length=r._length,this.share.set(e,n),n._integrate(this,null),n}else throw Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,cZ)}getText(e=""){return this.get(e,ua)}getMap(e=""){return this.get(e,c1)}getXmlElement(e=""){return this.get(e,uu)}getXmlFragment(e=""){return this.get(e,uc)}toJSON(){let e={};return this.share.forEach((t,r)=>{e[r]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,sH(this.subdocs).forEach(e=>e.destroy());let e=this._item;if(null!==e){this._item=null;let t=e.content;t.doc=new lq({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,cg(e.parent.doc,r=>{let n=t.doc;e.deleted||r.subdocsAdded.add(n),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class lz{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return oL(this.restDecoder)}readDsLen(){return oL(this.restDecoder)}}class lW extends lz{readLeftID(){return l9(oL(this.restDecoder),oL(this.restDecoder))}readRightID(){return l9(oL(this.restDecoder),oL(this.restDecoder))}readClient(){return oL(this.restDecoder)}readInfo(){return oM(this.restDecoder)}readString(){return oP(this.restDecoder)}readParentInfo(){return 1===oL(this.restDecoder)}readTypeRef(){return oL(this.restDecoder)}readLen(){return oL(this.restDecoder)}readAny(){return oV(this.restDecoder)}readBuf(){var e;let t;return(t=ac((e=oR(this.restDecoder)).byteLength)).set(e),t}readJSON(){return JSON.parse(oP(this.restDecoder))}readKey(){return oP(this.restDecoder)}}class l${constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=oL(this.restDecoder),this.dsCurrVal}readDsLen(){let e=oL(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class lQ extends l${constructor(e){super(e),this.keys=[],oL(e),this.keyClockDecoder=new oW(oR(e)),this.clientDecoder=new oz(oR(e)),this.leftClockDecoder=new oW(oR(e)),this.rightClockDecoder=new oW(oR(e)),this.infoDecoder=new oq(oR(e),oM),this.stringDecoder=new o$(oR(e)),this.parentInfoDecoder=new oq(oR(e),oM),this.typeRefDecoder=new oz(oR(e)),this.lenDecoder=new oz(oR(e))}readLeftID(){return new l8(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new l8(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return oV(this.restDecoder)}readBuf(){return oR(this.restDecoder)}readJSON(){return oV(this.restDecoder)}readKey(){let e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{let e=this.stringDecoder.read();return this.keys.push(e),e}}}class lK{constructor(){this.restEncoder=ol()}toUint8Array(){return ou(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){od(this.restEncoder,e)}writeDsLen(e){od(this.restEncoder,e)}}class lH extends lK{writeLeftID(e){od(this.restEncoder,e.client),od(this.restEncoder,e.clock)}writeRightID(e){od(this.restEncoder,e.client),od(this.restEncoder,e.clock)}writeClient(e){od(this.restEncoder,e)}writeInfo(e){oh(this.restEncoder,e)}writeString(e){og(this.restEncoder,e)}writeParentInfo(e){od(this.restEncoder,+!!e)}writeTypeRef(e){od(this.restEncoder,e)}writeLen(e){od(this.restEncoder,e)}writeAny(e){ow(this.restEncoder,e)}writeBuf(e){ob(this.restEncoder,e)}writeJSON(e){og(this.restEncoder,JSON.stringify(e))}writeKey(e){og(this.restEncoder,e)}}class lG{constructor(){this.restEncoder=ol(),this.dsCurrVal=0}toUint8Array(){return ou(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){let t=e-this.dsCurrVal;this.dsCurrVal=e,od(this.restEncoder,t)}writeDsLen(e){0===e&&oT(),od(this.restEncoder,e-1),this.dsCurrVal+=e}}class lJ extends lG{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new oN,this.clientEncoder=new oS,this.leftClockEncoder=new oN,this.rightClockEncoder=new oN,this.infoEncoder=new ok(oh),this.stringEncoder=new oC,this.parentInfoEncoder=new ok(oh),this.typeRefEncoder=new oS,this.lenEncoder=new oS}toUint8Array(){let e=ol();return od(e,0),ob(e,this.keyClockEncoder.toUint8Array()),ob(e,this.clientEncoder.toUint8Array()),ob(e,this.leftClockEncoder.toUint8Array()),ob(e,this.rightClockEncoder.toUint8Array()),ob(e,ou(this.infoEncoder)),ob(e,this.stringEncoder.toUint8Array()),ob(e,ou(this.parentInfoEncoder)),ob(e,this.typeRefEncoder.toUint8Array()),ob(e,this.lenEncoder.toUint8Array()),oy(e,ou(this.restEncoder)),ou(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(+!!e)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){ow(this.restEncoder,e)}writeBuf(e){ob(this.restEncoder,e)}writeJSON(e){ow(this.restEncoder,e)}writeKey(e){let t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}let lY=(e,t,r)=>{let n=new Map;r.forEach((e,r)=>{cn(t,r)>e&&n.set(r,e)}),cr(t).forEach((e,t)=>{r.has(t)||n.set(t,0)}),od(e.restEncoder,n.size),sH(n.entries()).sort((e,t)=>t[0]-e[0]).forEach(([r,n])=>{((e,t,r,n)=>{n=s4(n,t[0].id.clock);let i=cs(t,n);od(e.restEncoder,t.length-i),e.writeClient(r),od(e.restEncoder,n);let s=t[i];s.write(e,n-s.id.clock);for(let r=i+1;r<t.length;r++)t[r].write(e,0)})(e,t.clients.get(r),r,n)})},lX=(e,t,r,n=lQ)=>{let i=oA(t);((e,t,r,n=new lQ(e))=>cg(t,e=>{e.local=!1;let t=!1,r=e.doc,i=r.store,s=((e,t,r)=>{let n=[],i=sH(r.keys()).sort((e,t)=>e-t);if(0===i.length)return null;let s=()=>{if(0===i.length)return null;let e=r.get(i[i.length-1]);for(;e.refs.length===e.i;){if(i.pop(),!(i.length>0))return null;e=r.get(i[i.length-1])}return e},o=s();if(null===o)return null;let a=new ct,l=new Map,c=(e,t)=>{let r=l.get(e);(null==r||r>t)&&l.set(e,t)},u=o.refs[o.i++],h=new Map,d=()=>{for(let e of n){let t=e.id.client,n=r.get(t);n?(n.i--,a.clients.set(t,n.refs.slice(n.i)),r.delete(t),n.i=0,n.refs=[]):a.clients.set(t,[e]),i=i.filter(e=>e!==t)}n.length=0};for(;;){if(u.constructor!==uU){let i=sW(h,u.id.client,()=>cn(t,u.id.client))-u.id.clock;if(i<0)n.push(u),c(u.id.client,u.id.clock-1),d();else{let s=u.getMissing(e,t);if(null!==s){n.push(u);let e=r.get(s)||{refs:[],i:0};if(e.refs.length===e.i)c(s,cn(t,s)),d();else{u=e.refs[e.i++];continue}}else(0===i||i<u.length)&&(u.integrate(e,i),h.set(u.id.client,u.id.clock+u.length))}}if(n.length>0)u=n.pop();else if(null!==o&&o.i<o.refs.length)u=o.refs[o.i++];else{if(null===(o=s()))break;u=o.refs[o.i++]}}if(a.clients.size>0){let e=new lJ;return lY(e,a,new Map),od(e.restEncoder,0),{missing:l,update:e.toUint8Array()}}return null})(e,i,((e,t)=>{let r=sq(),n=oL(e.restDecoder);for(let i=0;i<n;i++){let n=oL(e.restDecoder),i=Array(n),s=e.readClient(),o=oL(e.restDecoder);r.set(s,{i:0,refs:i});for(let r=0;r<n;r++){let n=e.readInfo();switch(31&n){case 0:{let t=e.readLen();i[r]=new um(l9(s,o),t),o+=t;break}case 10:{let t=oL(e.restDecoder);i[r]=new uU(l9(s,o),t),o+=t;break}default:{let a=(192&n)==0,l=new uL(l9(s,o),null,(128&n)==128?e.readLeftID():null,null,(64&n)==64?e.readRightID():null,a?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,a&&(32&n)==32?e.readString():null,uF(e,n));i[r]=l,o+=l.length}}}}return r})(n,r)),o=i.pendingStructs;if(o){for(let[e,r]of o.missing)if(r<cn(i,e)){t=!0;break}if(s){for(let[e,t]of s.missing){let r=o.missing.get(e);(null==r||r>t)&&o.missing.set(e,t)}o.update=cw([o.update,s.update])}}else i.pendingStructs=s;let a=lV(n,e,i);if(i.pendingDs){let t=new lQ(oA(i.pendingDs));oL(t.restDecoder);let r=lV(t,e,i);a&&r?i.pendingDs=cw([a,r]):i.pendingDs=a||r}else i.pendingDs=a;if(t){let t=i.pendingStructs.update;i.pendingStructs=null,lX(e.doc,t)}},r,!1))(i,e,r,new n(i))},lZ=(e,t)=>((e,t=new Uint8Array([0]),r=new lJ)=>{((e,t,r=new Map)=>{var n;let i;lY(e,t.store,r),lU(e,(n=t.store,i=lP(),n.clients.forEach((e,t)=>{let r=[];for(let t=0;t<e.length;t++){let n=e[t];if(n.deleted){let i=n.id.clock,s=n.length;if(t+1<e.length)for(let r=e[t+1];t+1<e.length&&r.deleted;r=e[++t+1])s+=r.length;r.push(new lj(i,s))}}r.length>0&&i.clients.set(t,r)}),i))})(r,e,l0(t));let n=[r.toUint8Array()];if(e.store.pendingDs&&n.push(e.store.pendingDs),e.store.pendingStructs&&n.push(ck(e.store.pendingStructs.update,t)),n.length>1){if(r.constructor===lH)return cv(n.map((e,t)=>0===t?e:cN(e)));else if(r.constructor===lJ)return cw(n)}return n[0]})(e,t,new lH),l0=e=>(e=>{let t=new Map,r=oL(e.restDecoder);for(let n=0;n<r;n++){let r=oL(e.restDecoder),n=oL(e.restDecoder);t.set(r,n)}return t})(new lz(oA(e))),l1=(e,t)=>(od(e.restEncoder,t.size),sH(t.entries()).sort((e,t)=>t[0]-e[0]).forEach(([t,r])=>{od(e.restEncoder,t),od(e.restEncoder,r)}),e);class l2{constructor(){this.l=[]}}let l4=()=>new l2,l3=(e,t)=>{let r=e.l,n=r.length;e.l=r.filter(e=>t!==e),n===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},l5=(e,t,r)=>o9(e.l,[t,r]);class l8{constructor(e,t){this.client=e,this.clock=t}}let l6=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,l9=(e,t)=>new l8(e,t);l=lP(),new class e{constructor(e,t){this.ds=e,this.sv=t}}(l,new Map);let l7=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!lM(t.ds,e.id),ce=(e,t)=>{let r=sW(e.meta,ce,s$),n=e.doc.store;r.has(t)||(t.sv.forEach((t,r)=>{t<cn(n,r)&&cl(e,l9(r,t))}),lR(e,t.ds,e=>{}),r.add(t))};class ct{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}let cr=e=>{let t=new Map;return e.clients.forEach((e,r)=>{let n=e[e.length-1];t.set(r,n.id.clock+n.length)}),t},cn=(e,t)=>{let r=e.clients.get(t);if(void 0===r)return 0;let n=r[r.length-1];return n.id.clock+n.length},ci=(e,t)=>{let r=e.clients.get(t.id.client);if(void 0===r)r=[],e.clients.set(t.id.client,r);else{let e=r[r.length-1];if(e.id.clock+e.length!==t.id.clock)throw oT()}r.push(t)},cs=(e,t)=>{let r=0,n=e.length-1,i=e[n],s=i.id.clock;if(s===t)return n;let o=s0(t/(s+i.length-1)*n);for(;r<=n;){if((s=(i=e[o]).id.clock)<=t){if(t<s+i.length)return o;r=o+1}else n=o-1;o=s0((r+n)/2)}throw oT()},co=(e,t)=>{let r=e.clients.get(t.client);return r[cs(r,t.clock)]},ca=(e,t,r)=>{let n=cs(t,r),i=t[n];return i.id.clock<r&&i instanceof uL?(t.splice(n+1,0,uM(e,i,r-i.id.clock)),n+1):n},cl=(e,t)=>{let r=e.doc.store.clients.get(t.client);return r[ca(e,r,t.clock)]},cc=(e,t,r)=>{let n=t.clients.get(r.client),i=cs(n,r.clock),s=n[i];return r.clock!==s.id.clock+s.length-1&&s.constructor!==um&&n.splice(i+1,0,uM(e,s,r.clock-s.id.clock+1)),s},cu=(e,t,r,n,i)=>{let s;if(0===n)return;let o=r+n,a=ca(e,t,r);do o<(s=t[a++]).id.clock+s.length&&ca(e,t,o),i(s);while(a<t.length&&t[a].id.clock<o)};class ch{constructor(e,t,r){this.doc=e,this.deleteSet=new lA,this.beforeState=cr(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}let cd=(e,t)=>(0!==t.deleteSet.clients.size||!!((e,t)=>{for(let[r,n]of e)if(t(n,r))return!0;return!1})(t.afterState,(e,r)=>t.beforeState.get(r)!==e))&&(lL(t.deleteSet),lY(e,t.doc.store,t.beforeState),lU(e,t.deleteSet),!0),cf=(e,t,r)=>{let n=t._item;(null===n||n.id.clock<(e.beforeState.get(n.id.client)||0)&&!n.deleted)&&sW(e.changed,t,s$).add(r)},cp=(e,t)=>{let r=e[t],n=e[t-1],i=t;for(;i>0;r=n,n=e[--i-1]){if(n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)){r instanceof uL&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n);continue}break}let s=t-i;return s&&e.splice(t+1-s,s),s},cm=(e,t)=>{if(t<e.length){let r=e[t],n=r.doc,i=n.store,s=r.deleteSet,o=r._mergeStructs;try{lL(s),r.afterState=cr(r.doc.store),n.emit("beforeObserverCalls",[r,n]);let e=[];r.changed.forEach((t,n)=>e.push(()=>{null!==n._item&&n._item.deleted||n._callObserver(r,t)})),e.push(()=>{r.changedParentTypes.forEach((t,n)=>{n._dEH.l.length>0&&(null===n._item||!n._item.deleted)&&((t=t.filter(e=>null===e.target._item||!e.target._item.deleted)).forEach(e=>{e.currentTarget=n,e._path=null}),t.sort((e,t)=>e.path.length-t.path.length),e.push(()=>{l5(n._dEH,t,r)}))}),e.push(()=>n.emit("afterTransaction",[r,n])),e.push(()=>{r._needFormattingCleanup&&ui(r)})}),o9(e,[])}finally{n.gc&&((e,t,r)=>{for(let[n,i]of e.clients.entries()){let e=t.clients.get(n);for(let n=i.length-1;n>=0;n--){let s=i[n],o=s.clock+s.len;for(let n=cs(e,s.clock),i=e[n];n<e.length&&i.id.clock<o;i=e[++n]){let i=e[n];if(s.clock+s.len<=i.id.clock)break;i instanceof uL&&i.deleted&&!i.keep&&r(i)&&i.gc(t,!1)}}}})(s,i,n.gcFilter),s.clients.forEach((e,t)=>{let r=i.clients.get(t);for(let t=e.length-1;t>=0;t--){let n=e[t],i=s2(r.length-1,1+cs(r,n.clock+n.len-1));for(let e=i,t=r[e];e>0&&t.id.clock>=n.clock;t=r[e])e-=1+cp(r,e)}}),r.afterState.forEach((e,t)=>{let n=r.beforeState.get(t)||0;if(n!==e){let e=i.clients.get(t),r=s4(cs(e,n),1);for(let t=e.length-1;t>=r;)t-=1+cp(e,t)}});for(let e=o.length-1;e>=0;e--){let{client:t,clock:r}=o[e].id,n=i.clients.get(t),s=cs(n,r);!(s+1<n.length&&cp(n,s+1)>1)&&s>0&&cp(n,s)}if(r.local||r.afterState.get(n.clientID)===r.beforeState.get(n.clientID)||(((...e)=>{console.log(...lO(e)),lT.forEach(t=>t.print(e))})(l_,lb,"[yjs] ",lv,lE,"Changed the client-id because another client seems to be using it."),n.clientID=oK()),n.emit("afterTransactionCleanup",[r,n]),n._observers.has("update")){let e=new lH;cd(e,r)&&n.emit("update",[e.toUint8Array(),r.origin,n,r])}if(n._observers.has("updateV2")){let e=new lJ;cd(e,r)&&n.emit("updateV2",[e.toUint8Array(),r.origin,n,r])}let{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=r;(a.size>0||c.size>0||l.size>0)&&(a.forEach(e=>{e.clientID=n.clientID,null==e.collectionid&&(e.collectionid=n.collectionid),n.subdocs.add(e)}),c.forEach(e=>n.subdocs.delete(e)),n.emit("subdocs",[{loaded:l,added:a,removed:c},n,r]),c.forEach(e=>e.destroy())),e.length<=t+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,e])):cm(e,t+1)}}},cg=(e,t,r=null,n=!0)=>{let i=e._transactionCleanups,s=!1,o=null;null===e._transaction&&(s=!0,e._transaction=new ch(e,r,n),i.push(e._transaction),1===i.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{o=t(e._transaction)}finally{if(s){let t=e._transaction===i[0];e._transaction=null,t&&cm(i,0)}}return o};class cy{constructor(e,t){this.gen=function*(e){let t=oL(e.restDecoder);for(let r=0;r<t;r++){let t=oL(e.restDecoder),r=e.readClient(),n=oL(e.restDecoder);for(let i=0;i<t;i++){let t=e.readInfo();if(10===t){let t=oL(e.restDecoder);yield new uU(l9(r,n),t),n+=t}else if((31&t)!=0){let i=(192&t)==0,s=new uL(l9(r,n),null,(128&t)==128?e.readLeftID():null,null,(64&t)==64?e.readRightID():null,i?e.readParentInfo()?e.readString():e.readLeftID():null,i&&(32&t)==32?e.readString():null,uF(e,t));yield s,n+=s.length}else{let t=e.readLen();yield new um(l9(r,n),t),n+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&null!==this.curr&&this.curr.constructor===uU)return this.curr}}class cb{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}let cv=e=>cw(e,lW,lH),cx=(e,t)=>{if(e.constructor===um){let{client:r,clock:n}=e.id;return new um(l9(r,n+t),e.length-t)}if(e.constructor===uU){let{client:r,clock:n}=e.id;return new uU(l9(r,n+t),e.length-t)}{let{client:r,clock:n}=e.id;return new uL(l9(r,n+t),null,l9(r,n+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))}},cw=(e,t=lQ,r=lJ)=>{if(1===e.length)return e[0];let n=e.map(e=>new t(oA(e))),i=n.map(e=>new cy(e,!0)),s=null,o=new r,a=new cb(o);for(;(i=i.filter(e=>null!==e.curr)).sort((e,t)=>{if(e.curr.id.client!==t.curr.id.client)return t.curr.id.client-e.curr.id.client;{let r=e.curr.id.clock-t.curr.id.clock;return 0===r?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===uU?1:-1:r}}),0!==i.length;){let e=i[0],t=e.curr.id.client;if(null!==s){let r=e.curr,n=!1;for(;null!==r&&r.id.clock+r.length<=s.struct.id.clock+s.struct.length&&r.id.client>=s.struct.id.client;)r=e.next(),n=!0;if(null===r||r.id.client!==t||n&&r.id.clock>s.struct.id.clock+s.struct.length)continue;if(t!==s.struct.id.client)cS(a,s.struct,s.offset),s={struct:r,offset:0},e.next();else if(s.struct.id.clock+s.struct.length<r.id.clock)if(s.struct.constructor===uU)s.struct.length=r.id.clock+r.length-s.struct.id.clock;else{cS(a,s.struct,s.offset);let e=r.id.clock-s.struct.id.clock-s.struct.length;s={struct:new uU(l9(t,s.struct.id.clock+s.struct.length),e),offset:0}}else{let t=s.struct.id.clock+s.struct.length-r.id.clock;t>0&&(s.struct.constructor===uU?s.struct.length-=t:r=cx(r,t)),s.struct.mergeWith(r)||(cS(a,s.struct,s.offset),s={struct:r,offset:0},e.next())}}else s={struct:e.curr,offset:0},e.next();for(let r=e.curr;null!==r&&r.id.client===t&&r.id.clock===s.struct.id.clock+s.struct.length&&r.constructor!==uU;r=e.next())cS(a,s.struct,s.offset),s={struct:r,offset:0}}return null!==s&&(cS(a,s.struct,s.offset),s=null),c_(a),lU(o,(e=>{let t=new lA;for(let r=0;r<e.length;r++)e[r].clients.forEach((n,i)=>{if(!t.clients.has(i)){let s=n.slice();for(let t=r+1;t<e.length;t++)sK(s,e[t].clients.get(i)||[]);t.clients.set(i,s)}});return lL(t),t})(n.map(e=>lB(e)))),o.toUint8Array()},ck=(e,t,r=lQ,n=lJ)=>{let i=l0(t),s=new n,o=new cb(s),a=new r(oA(e)),l=new cy(a,!1);for(;l.curr;){let e=l.curr,t=e.id.client,r=i.get(t)||0;if(l.curr.constructor===uU){l.next();continue}if(e.id.clock+e.length>r)for(cS(o,e,s4(r-e.id.clock,0)),l.next();l.curr&&l.curr.id.client===t;)cS(o,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===t&&l.curr.id.clock+l.curr.length<=r;)l.next()}return c_(o),lU(s,lB(a)),s.toUint8Array()},cE=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:ou(e.encoder.restEncoder)}),e.encoder.restEncoder=ol(),e.written=0)},cS=(e,t,r)=>{e.written>0&&e.currClient!==t.id.client&&cE(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),od(e.encoder.restEncoder,t.id.clock+r)),t.write(e.encoder,r),e.written++},c_=e=>{cE(e);let t=e.encoder.restEncoder;od(t,e.clientStructs.length);for(let r=0;r<e.clientStructs.length;r++){let n=e.clientStructs[r];od(t,n.written),oy(t,n.restEncoder)}},cN=e=>((e,t,r,n)=>{let i=new r(oA(e)),s=new cy(i,!1),o=new n,a=new cb(o);for(let e=s.curr;null!==e;e=s.next())cS(a,t(e),0);return c_(a),lU(o,lB(i)),o.toUint8Array()})(e,o7,lQ,lH),cC="You must not compute changes after the event-handler fired.";class cO{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=cT(this.currentTarget,this.target))}deletes(e){return lM(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw Error(cC);let e=new Map,t=this.target;this.transaction.changed.get(t).forEach(r=>{if(null!==r){let n,i,s=t._map.get(r);if(this.adds(s)){let e=s.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(s))if(!(null!==e&&this.deletes(e)))return;else n="delete",i=sQ(e.content.getContent());else null!==e&&this.deletes(e)?(n="update",i=sQ(e.content.getContent())):(n="add",i=void 0)}else{if(!this.deletes(s))return;n="delete",i=sQ(s.content.getContent())}e.set(r,{action:n,oldValue:i})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw Error(cC);let t=this.target,r=s$(),n=s$(),i=[];if(e={added:r,deleted:n,delta:i,keys:this.keys},this.transaction.changed.get(t).has(null)){let e=null,s=()=>{e&&i.push(e)};for(let i=t._start;null!==i;i=i.right)i.deleted?this.deletes(i)&&!this.adds(i)&&((null===e||void 0===e.delete)&&(s(),e={delete:0}),e.delete+=i.length,n.add(i)):this.adds(i)?((null===e||void 0===e.insert)&&(s(),e={insert:[]}),e.insert=e.insert.concat(i.content.getContent()),r.add(i)):((null===e||void 0===e.retain)&&(s(),e={retain:0}),e.retain+=i.length);null!==e&&void 0===e.retain&&s()}this._changes=e}return e}}let cT=(e,t)=>{let r=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)r.unshift(t._item.parentSub);else{let e=0,n=t._item.parent._start;for(;n!==t._item&&null!==n;)!n.deleted&&n.countable&&(e+=n.length),n=n.right;r.unshift(e)}t=t._item.parent}return r},cI=()=>{((...e)=>{console.warn(...lO(e)),e.unshift(l_),lT.forEach(t=>t.print(e))})("Invalid access: Add Yjs type to a document before reading data.")},cD=0;class cj{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=cD++}}let cA=(e,t,r)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=r,e.timestamp=cD++},cR=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;let r=0===e._searchMarker.length?null:e._searchMarker.reduce((e,r)=>s1(t-e.index)<s1(t-r.index)?e:r),n=e._start,i=0;for(null!==r&&(n=r.p,i=r.index,r.timestamp=cD++);null!==n.right&&i<t;){if(!n.deleted&&n.countable){if(t<i+n.length)break;i+=n.length}n=n.right}for(;null!==n.left&&i>t;)!(n=n.left).deleted&&n.countable&&(i-=n.length);for(;null!==n.left&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)!(n=n.left).deleted&&n.countable&&(i-=n.length);if(null!==r&&s1(r.index-i)<n.parent.length/80)return cA(r,n,i),r;var s=e._searchMarker,o=n,a=i;if(s.length>=80){let e=s.reduce((e,t)=>e.timestamp<t.timestamp?e:t);return cA(e,o,a),e}{let e=new cj(o,a);return s.push(e),e}},cM=(e,t,r)=>{for(let n=e.length-1;n>=0;n--){let i=e[n];if(r>0){let t=i.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)(t=t.left)&&!t.deleted&&t.countable&&(i.index-=t.length);if(null===t||!0===t.marker){e.splice(n,1);continue}i.p=t,t.marker=!0}(t<i.index||r>0&&t===i.index)&&(i.index=s4(t,i.index+r))}},cL=(e,t,r)=>{let n=e,i=t.changedParentTypes;for(;sW(i,e,()=>[]).push(r),null!==e._item;)e=e._item.parent;l5(n._eH,r,t)};class cF{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=l4(),this._dEH=l4(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw oO()}clone(){throw oO()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){let t;t=this._eH,t.l.push(e)}observeDeep(e){let t;t=this._dEH,t.l.push(e)}unobserve(e){l3(this._eH,e)}unobserveDeep(e){l3(this._dEH,e)}toJSON(){}}let cP=(e,t,r)=>{e.doc??cI(),t<0&&(t=e._length+t),r<0&&(r=e._length+r);let n=r-t,i=[],s=e._start;for(;null!==s&&n>0;){if(s.countable&&!s.deleted){let e=s.content.getContent();if(e.length<=t)t-=e.length;else{for(let r=t;r<e.length&&n>0;r++)i.push(e[r]),n--;t=0}}s=s.right}return i},cU=e=>{e.doc??cI();let t=[],r=e._start;for(;null!==r;){if(r.countable&&!r.deleted){let e=r.content.getContent();for(let r=0;r<e.length;r++)t.push(e[r])}r=r.right}return t},cB=(e,t)=>{let r=0,n=e._start;for(e.doc??cI();null!==n;){if(n.countable&&!n.deleted){let i=n.content.getContent();for(let n=0;n<i.length;n++)t(i[n],r++,e)}n=n.right}},cV=(e,t)=>{let r=[];return cB(e,(n,i)=>{r.push(t(n,i,e))}),r},cq=(e,t)=>{e.doc??cI();let r=cR(e,t),n=e._start;for(null!==r&&(n=r.p,t-=r.index);null!==n;n=n.right)if(!n.deleted&&n.countable){if(t<n.length)return n.content.getContent()[t];t-=n.length}},cz=(e,t,r,n)=>{let i=r,s=e.doc,o=s.clientID,a=s.store,l=null===r?t._start:r.right,c=[],u=()=>{c.length>0&&((i=new uL(l9(o,cn(a,o)),i,i&&i.lastId,l,l&&l.id,t,null,new uS(c))).integrate(e,0),c=[])};n.forEach(r=>{if(null===r)c.push(r);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(r);break;default:switch(u(),r.constructor){case Uint8Array:case ArrayBuffer:(i=new uL(l9(o,cn(a,o)),i,i&&i.lastId,l,l&&l.id,t,null,new ug(new Uint8Array(r)))).integrate(e,0);break;case lq:(i=new uL(l9(o,cn(a,o)),i,i&&i.lastId,l,l&&l.id,t,null,new uv(r))).integrate(e,0);break;default:if(r instanceof cF)(i=new uL(l9(o,cn(a,o)),i,i&&i.lastId,l,l&&l.id,t,null,new uR(r))).integrate(e,0);else throw Error("Unexpected content type in insert operation")}}}),u()},cW=(e,t,r,n)=>{if(r>t._length)throw Error("Length exceeded!");if(0===r)return t._searchMarker&&cM(t._searchMarker,r,n.length),cz(e,t,null,n);let i=r,s=cR(t,r),o=t._start;for(null!==s&&(o=s.p,0==(r-=s.index)&&(r+=(o=o.prev)&&o.countable&&!o.deleted?o.length:0));null!==o;o=o.right)if(!o.deleted&&o.countable){if(r<=o.length){r<o.length&&cl(e,l9(o.id.client,o.id.clock+r));break}r-=o.length}return t._searchMarker&&cM(t._searchMarker,i,n.length),cz(e,t,o,n)},c$=(e,t,r,n)=>{if(0===n)return;let i=r,s=n,o=cR(t,r),a=t._start;for(null!==o&&(a=o.p,r-=o.index);null!==a&&r>0;a=a.right)!a.deleted&&a.countable&&(r<a.length&&cl(e,l9(a.id.client,a.id.clock+r)),r-=a.length);for(;n>0&&null!==a;)a.deleted||(n<a.length&&cl(e,l9(a.id.client,a.id.clock+n)),a.delete(e),n-=a.length),a=a.right;if(n>0)throw Error("Length exceeded!");t._searchMarker&&cM(t._searchMarker,i,-s+n)},cQ=(e,t,r)=>{let n=t._map.get(r);void 0!==n&&n.delete(e)},cK=(e,t,r,n)=>{let i,s=t._map.get(r)||null,o=e.doc,a=o.clientID;if(null==n)i=new uS([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:i=new uS([n]);break;case Uint8Array:i=new ug(n);break;case lq:i=new uv(n);break;default:if(n instanceof cF)i=new uR(n);else throw Error("Unexpected content type")}new uL(l9(a,cn(o.store,a)),s,s&&s.lastId,null,null,t,r,i).integrate(e,0)},cH=(e,t)=>{e.doc??cI();let r=e._map.get(t);return void 0===r||r.deleted?void 0:r.content.getContent()[r.length-1]},cG=e=>{let t={};return e.doc??cI(),e._map.forEach((e,r)=>{e.deleted||(t[r]=e.content.getContent()[e.length-1])}),t},cJ=(e,t)=>{e.doc??cI();let r=e._map.get(t);return void 0!==r&&!r.deleted},cY=e=>{let t,r;return e.doc??cI(),t=e._map.entries(),r=e=>!e[1].deleted,lI(()=>{let e;do e=t.next();while(!e.done&&!r(e.value))return e})};class cX extends cO{}class cZ extends cF{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){let t=new cZ;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new cZ}clone(){let e=new cZ;return e.insert(0,this.toArray().map(e=>e instanceof cF?e.clone():e)),e}get length(){return this.doc??cI(),this._length}_callObserver(e,t){super._callObserver(e,t),cL(this,e,new cX(this,e))}insert(e,t){null!==this.doc?cg(this.doc,r=>{cW(r,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?cg(this.doc,t=>{((e,t,r)=>{let n=(t._searchMarker||[]).reduce((e,t)=>t.index>e.index?t:e,{index:0,p:t._start}).p;if(n)for(;n.right;)n=n.right;return cz(e,t,n,r)})(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?cg(this.doc,r=>{c$(r,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return cq(this,e)}toArray(){return cU(this)}slice(e=0,t=this.length){return cP(this,e,t)}toJSON(){return this.map(e=>e instanceof cF?e.toJSON():e)}map(e){return cV(this,e)}forEach(e){cB(this,e)}[Symbol.iterator](){let e,t,r;return e=this._start,t=null,r=0,{[Symbol.iterator](){return this},next:()=>{if(null===t){for(;null!==e&&e.deleted;)e=e.right;if(null===e)return{done:!0,value:void 0};t=e.content.getContent(),r=0,e=e.right}let n=t[r++];return t.length<=r&&(t=null),{done:!1,value:n}}}}_write(e){e.writeTypeRef(uC)}}class c0 extends cO{constructor(e,t,r){super(e,t),this.keysChanged=r}}class c1 extends cF{constructor(e){super(),this._prelimContent=null,void 0===e?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((e,t)=>{this.set(t,e)}),this._prelimContent=null}_copy(){return new c1}clone(){let e=new c1;return this.forEach((t,r)=>{e.set(r,t instanceof cF?t.clone():t)}),e}_callObserver(e,t){cL(this,e,new c0(this,e,t))}toJSON(){this.doc??cI();let e={};return this._map.forEach((t,r)=>{if(!t.deleted){let n=t.content.getContent()[t.length-1];e[r]=n instanceof cF?n.toJSON():n}}),e}get size(){return[...cY(this)].length}keys(){return lD(cY(this),e=>e[0])}values(){return lD(cY(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return lD(cY(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??cI(),this._map.forEach((t,r)=>{t.deleted||e(t.content.getContent()[t.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?cg(this.doc,t=>{cQ(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?cg(this.doc,r=>{cK(r,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return cH(this,e)}has(e){return cJ(this,e)}clear(){null!==this.doc?cg(this.doc,e=>{this.forEach(function(t,r,n){cQ(e,n,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(uO)}}let c2=(e,t)=>{let r,n;return e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&((r=e)===(n=t)||o4(r).length===o4(n).length&&o3(r,(e,t)=>(void 0!==e||o5(n,t))&&o1(n[t],e)))};class c4{constructor(e,t,r,n){this.left=e,this.right=t,this.index=r,this.currentAttributes=n}forward(){null===this.right&&oT(),this.right.content.constructor===uw?this.right.deleted||c6(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}}let c3=(e,t,r)=>{for(;null!==t.right&&r>0;)t.right.content.constructor===uw?t.right.deleted||c6(t.currentAttributes,t.right.content):t.right.deleted||(r<t.right.length&&cl(e,l9(t.right.id.client,t.right.id.clock+r)),t.index+=t.right.length,r-=t.right.length),t.left=t.right,t.right=t.right.right;return t},c5=(e,t,r,n)=>{let i=new Map,s=n?cR(t,r):null;return s?c3(e,new c4(s.p.left,s.p,s.index,i),r-s.index):c3(e,new c4(null,t._start,0,i),r)},c8=(e,t,r,n)=>{for(;null!==r.right&&(!0===r.right.deleted||r.right.content.constructor===uw&&c2(n.get(r.right.content.key),r.right.content.value));)r.right.deleted||n.delete(r.right.content.key),r.forward();let i=e.doc,s=i.clientID;n.forEach((n,o)=>{let a=r.left,l=r.right,c=new uL(l9(s,cn(i.store,s)),a,a&&a.lastId,l,l&&l.id,t,null,new uw(o,n));c.integrate(e,0),r.right=c,r.forward()})},c6=(e,t)=>{let{key:r,value:n}=t;null===n?e.delete(r):e.set(r,n)},c9=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===uw&&c2(t[e.right.content.key]??null,e.right.content.value));){;e.forward()}},c7=(e,t,r,n)=>{let i=e.doc,s=i.clientID,o=new Map;for(let a in n){let l=n[a],c=r.currentAttributes.get(a)??null;if(!c2(c,l)){o.set(a,c);let{left:n,right:u}=r;r.right=new uL(l9(s,cn(i.store,s)),n,n&&n.lastId,u,u&&u.id,t,null,new uw(a,l)),r.right.integrate(e,0),r.forward()}}return o},ue=(e,t,r,n,i)=>{r.currentAttributes.forEach((e,t)=>{void 0===i[t]&&(i[t]=null)});let s=e.doc,o=s.clientID;c9(r,i);let a=c7(e,t,r,i),l=n.constructor===String?new u_(n):n instanceof cF?new uR(n):new ux(n),{left:c,right:u,index:h}=r;t._searchMarker&&cM(t._searchMarker,r.index,l.getLength()),(u=new uL(l9(o,cn(s.store,o)),c,c&&c.lastId,u,u&&u.id,t,null,l)).integrate(e,0),r.right=u,r.index=h,r.forward(),c8(e,t,r,a)},ut=(e,t,r,n,i)=>{let s=e.doc,o=s.clientID;c9(r,i);let a=c7(e,t,r,i);for(;null!==r.right&&(n>0||a.size>0&&(r.right.deleted||r.right.content.constructor===uw));){if(!r.right.deleted)if(r.right.content.constructor===uw){let{key:t,value:s}=r.right.content,o=i[t];if(void 0!==o){if(c2(o,s))a.delete(t);else{if(0===n)break;a.set(t,s)}r.right.delete(e)}else r.currentAttributes.set(t,s)}else n<r.right.length&&cl(e,l9(r.right.id.client,r.right.id.clock+n)),n-=r.right.length;r.forward()}if(n>0){let i="";for(;n>0;n--)i+="\n";r.right=new uL(l9(o,cn(s.store,o)),r.left,r.left&&r.left.lastId,r.right,r.right&&r.right.id,t,null,new u_(i)),r.right.integrate(e,0),r.forward()}c8(e,t,r,a)},ur=(e,t,r,n,i)=>{let s=t,o=sq();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===uw){let e=s.content;o.set(e.key,e)}s=s.right}let a=0,l=!1;for(;t!==s;){if(r===t&&(l=!0),!t.deleted){let r=t.content;if(r.constructor===uw){let{key:s,value:c}=r,u=n.get(s)??null;(o.get(s)!==r||u===c)&&(t.delete(e),a++,l||(i.get(s)??null)!==c||u===c||(null===u?i.delete(s):i.set(s,u))),l||t.deleted||c6(i,r)}}t=t.right}return a},un=e=>{let t=0;return cg(e.doc,r=>{let n=e._start,i=e._start,s=sq(),o=sz(s);for(;i;)!1===i.deleted&&(i.content.constructor===uw?c6(o,i.content):(t+=ur(r,n,i,s,o),s=sz(o),n=i)),i=i.right}),t},ui=e=>{let t=new Set,r=e.doc;for(let[n,i]of e.afterState.entries()){let s=e.beforeState.get(n)||0;i!==s&&cu(e,r.store.clients.get(n),s,i,e=>{e.deleted||e.content.constructor!==uw||e.constructor===um||t.add(e.parent)})}cg(r,r=>{for(let n of(lR(e,e.deleteSet,e=>{if(e instanceof um||!e.parent._hasFormatting||t.has(e.parent))return;let n=e.parent;if(e.content.constructor===uw)t.add(n);else{for(var i=e;i&&i.right&&(i.right.deleted||!i.right.countable);)i=i.right;let t=new Set;for(;i&&(i.deleted||!i.countable);){if(!i.deleted&&i.content.constructor===uw){let e=i.content.key;t.has(e)?i.delete(r):t.add(e)}i=i.left}}}),t))un(n)})},us=(e,t,r)=>{let n=r,i=sz(t.currentAttributes),s=t.right;for(;r>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case uR:case ux:case u_:r<t.right.length&&cl(e,l9(t.right.id.client,t.right.id.clock+r)),r-=t.right.length,t.right.delete(e)}t.forward()}s&&ur(e,s,t.right,i,t.currentAttributes);let o=(t.left||t.right).parent;return o._searchMarker&&cM(o._searchMarker,t.index,-n+r),t};class uo extends cO{constructor(e,t,r){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)})}get changes(){if(null===this._changes){let e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){let e=this.target.doc,t=[];cg(e,e=>{let r=new Map,n=new Map,i=this.target._start,s=null,o={},a="",l=0,c=0,u=()=>{if(null!==s){let e=null;switch(s){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"==typeof a||a.length>0)&&(e={insert:a},r.size>0&&(e.attributes={},r.forEach((t,r)=>{null!==t&&(e.attributes[r]=t)}))),a="";break;case"retain":l>0&&(e={retain:l},(e=>{for(let t in e)return!1;return!0})(o)||(e.attributes=o2({},o))),l=0}e&&t.push(e),s=null}};for(;null!==i;){switch(i.content.constructor){case uR:case ux:this.adds(i)?this.deletes(i)||(u(),s="insert",a=i.content.getContent()[0],u()):this.deletes(i)?("delete"!==s&&(u(),s="delete"),c+=1):i.deleted||("retain"!==s&&(u(),s="retain"),l+=1);break;case u_:this.adds(i)?this.deletes(i)||("insert"!==s&&(u(),s="insert"),a+=i.content.str):this.deletes(i)?("delete"!==s&&(u(),s="delete"),c+=i.length):i.deleted||("retain"!==s&&(u(),s="retain"),l+=i.length);break;case uw:{let{key:t,value:a}=i.content;if(this.adds(i))this.deletes(i)||(c2(r.get(t)??null,a)?null!==a&&i.delete(e):("retain"===s&&u(),c2(a,n.get(t)??null)?delete o[t]:o[t]=a));else if(this.deletes(i)){n.set(t,a);let e=r.get(t)??null;c2(e,a)||("retain"===s&&u(),o[t]=e)}else if(!i.deleted){n.set(t,a);let r=o[t];void 0!==r&&(c2(r,a)?null!==r&&i.delete(e):("retain"===s&&u(),null===a?delete o[t]:o[t]=a))}i.deleted||("insert"===s&&u(),c6(r,i.content))}}i=i.right}for(u();t.length>0;){let e=t[t.length-1];if(void 0!==e.retain&&void 0===e.attributes)t.pop();else break}}),this._delta=t}return this._delta}}class ua extends cF{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??cI(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(e=>e())}catch(e){console.error(e)}this._pending=null}_copy(){return new ua}clone(){let e=new ua;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);let r=new uo(this,e,t);cL(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??cI();let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===u_&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?cg(this.doc,r=>{let n=new c4(null,this._start,0,new Map);for(let i=0;i<e.length;i++){let s=e[i];if(void 0!==s.insert){let o=t||"string"!=typeof s.insert||i!==e.length-1||null!==n.right||"\n"!==s.insert.slice(-1)?s.insert:s.insert.slice(0,-1);("string"!=typeof o||o.length>0)&&ue(r,this,n,o,s.attributes||{})}else void 0!==s.retain?ut(r,this,n,s.retain,s.attributes||{}):void 0!==s.delete&&us(r,n,s.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,r){this.doc??cI();let n=[],i=new Map,s=this.doc,o="",a=this._start;function l(){if(o.length>0){let e={},t=!1;i.forEach((r,n)=>{t=!0,e[n]=r});let r={insert:o};t&&(r.attributes=e),n.push(r),o=""}}let c=()=>{for(;null!==a;){if(l7(a,e)||void 0!==t&&l7(a,t))switch(a.content.constructor){case u_:{let n=i.get("ychange");void 0===e||l7(a,e)?void 0===t||l7(a,t)?void 0!==n&&(l(),i.delete("ychange")):(void 0===n||n.user!==a.id.client||"added"!==n.type)&&(l(),i.set("ychange",r?r("added",a.id):{type:"added"})):(void 0===n||n.user!==a.id.client||"removed"!==n.type)&&(l(),i.set("ychange",r?r("removed",a.id):{type:"removed"})),o+=a.content.str;break}case uR:case ux:{l();let e={insert:a.content.getContent()[0]};if(i.size>0){let t={};e.attributes=t,i.forEach((e,r)=>{t[r]=e})}n.push(e);break}case uw:l7(a,e)&&(l(),c6(i,a.content))}a=a.right}l()};return e||t?cg(s,r=>{e&&ce(r,e),t&&ce(r,t),c()},"cleanup"):c(),n}insert(e,t,r){if(t.length<=0)return;let n=this.doc;null!==n?cg(n,n=>{let i=c5(n,this,e,!r);r||(r={},i.currentAttributes.forEach((e,t)=>{r[t]=e})),ue(n,this,i,t,r)}):this._pending.push(()=>this.insert(e,t,r))}insertEmbed(e,t,r){let n=this.doc;null!==n?cg(n,n=>{let i=c5(n,this,e,!r);ue(n,this,i,t,r||{})}):this._pending.push(()=>this.insertEmbed(e,t,r||{}))}delete(e,t){if(0===t)return;let r=this.doc;null!==r?cg(r,r=>{us(r,c5(r,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,r){if(0===t)return;let n=this.doc;null!==n?cg(n,n=>{let i=c5(n,this,e,!1);null!==i.right&&ut(n,this,i,t,r)}):this._pending.push(()=>this.format(e,t,r))}removeAttribute(e){null!==this.doc?cg(this.doc,t=>{cQ(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){null!==this.doc?cg(this.doc,r=>{cK(r,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return cH(this,e)}getAttributes(){return cG(this)}_write(e){e.writeTypeRef(uT)}}class ul{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??cI()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,e.deleted||t.constructor!==uu&&t.constructor!==uc||null===t._start)for(;null!==e;){let t=e.next;if(null!==t){e=t;break}e=e.parent===this._root?null:e.parent._item}else e=t._start;while(null!==e&&(e.deleted||!this._filter(e.content.type)))return(this._firstCall=!1,null===e)?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class uc extends cF{constructor(){super(),this._prelimContent=[]}get firstChild(){let e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new uc}clone(){let e=new uc;return e.insert(0,this.toArray().map(e=>e instanceof cF?e.clone():e)),e}get length(){return this.doc??cI(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new ul(this,e)}querySelector(e){e=e.toUpperCase();let t=new ul(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),sH(new ul(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){cL(this,e,new uh(this,t,e))}toString(){return cV(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},r){let n=e.createDocumentFragment();return void 0!==r&&r._createAssociation(n,this),cB(this,i=>{n.insertBefore(i.toDOM(e,t,r),null)}),n}insert(e,t){null!==this.doc?cg(this.doc,r=>{cW(r,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)cg(this.doc,r=>{cz(r,this,e&&e instanceof cF?e._item:e,t)});else{let r=this._prelimContent,n=null===e?0:r.findIndex(t=>t===e)+1;if(0===n&&null!==e)throw Error("Reference item not found");r.splice(n,0,...t)}}delete(e,t=1){null!==this.doc?cg(this.doc,r=>{c$(r,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return cU(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return cq(this,e)}slice(e=0,t=this.length){return cP(this,e,t)}forEach(e){cB(this,e)}_write(e){e.writeTypeRef(uD)}}class uu extends uc{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((e,t)=>{this.setAttribute(t,e)}),this._prelimAttrs=null}_copy(){return new uu(this.nodeName)}clone(){let e=new uu(this.nodeName);var t=this.getAttributes(),r=(t,r)=>{e.setAttribute(r,t)};for(let e in t)r(t[e],e);return e.insert(0,this.toArray().map(e=>e instanceof cF?e.clone():e)),e}toString(){let e=this.getAttributes(),t=[],r=[];for(let t in e)r.push(t);r.sort();let n=r.length;for(let i=0;i<n;i++){let n=r[i];t.push(n+'="'+e[n]+'"')}let i=this.nodeName.toLocaleLowerCase(),s=t.length>0?" "+t.join(" "):"";return`<${i}${s}>${super.toString()}</${i}>`}removeAttribute(e){null!==this.doc?cg(this.doc,t=>{cQ(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?cg(this.doc,r=>{cK(r,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return cH(this,e)}hasAttribute(e){return cJ(this,e)}getAttributes(e){let t;return e?(t={},this._map.forEach((r,n)=>{let i=r;for(;null!==i&&(!e.sv.has(i.id.client)||i.id.clock>=(e.sv.get(i.id.client)||0));)i=i.left;null!==i&&l7(i,e)&&(t[n]=i.content.getContent()[i.length-1])}),t):cG(this)}toDOM(e=document,t={},r){let n=e.createElement(this.nodeName),i=this.getAttributes();for(let e in i){let t=i[e];"string"==typeof t&&n.setAttribute(e,t)}return cB(this,i=>{n.appendChild(i.toDOM(e,t,r))}),void 0!==r&&r._createAssociation(n,this),n}_write(e){e.writeTypeRef(uI),e.writeKey(this.nodeName)}}class uh extends cO{constructor(e,t,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)})}}class ud extends c1{constructor(e){super(),this.hookName=e}_copy(){return new ud(this.hookName)}clone(){let e=new ud(this.hookName);return this.forEach((t,r)=>{e.set(r,t)}),e}toDOM(e=document,t={},r){let n,i=t[this.hookName];return(n=void 0!==i?i.createDom(this):document.createElement(this.hookName)).setAttribute("data-yjs-hook",this.hookName),void 0!==r&&r._createAssociation(n,this),n}_write(e){e.writeTypeRef(uj),e.writeKey(this.hookName)}}class uf extends ua{get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new uf}clone(){let e=new uf;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,r){let n=e.createTextNode(this.toString());return void 0!==r&&r._createAssociation(n,this),n}toString(){return this.toDelta().map(e=>{let t=[];for(let r in e.attributes){let n=[];for(let t in e.attributes[r])n.push({key:t,value:e.attributes[r][t]});n.sort((e,t)=>e.key<t.key?-1:1),t.push({nodeName:r,attrs:n})}t.sort((e,t)=>e.nodeName<t.nodeName?-1:1);let r="";for(let e=0;e<t.length;e++){let n=t[e];r+=`<${n.nodeName}`;for(let e=0;e<n.attrs.length;e++){let t=n.attrs[e];r+=` ${t.key}="${t.value}"`}r+=">"}r+=e.insert;for(let e=t.length-1;e>=0;e--)r+=`</${t[e].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(uA)}}class up{constructor(e,t){this.id=e,this.length=t}get deleted(){throw oO()}mergeWith(e){return!1}write(e,t,r){throw oO()}integrate(e,t){throw oO()}}class um extends up{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),ci(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class ug{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new ug(this.content)}splice(e){throw oO()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class uy{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new uy(this.len)}splice(e){let t=new uy(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){lF(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}let ub=(e,t)=>new lq({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class uv{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new uv(ub(this.doc.guid,this.opts))}splice(e){throw oO()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class ux{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ux(this.embed)}splice(e){throw oO()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class uw{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new uw(this.key,this.value)}splice(e){throw oO()}mergeWith(e){return!1}integrate(e,t){let r=t.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class uk{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new uk(this.arr)}splice(e){let t=new uk(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){let r=this.arr.length;e.writeLen(r-t);for(let n=t;n<r;n++){let t=this.arr[n];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}}let uE="development"===as("node_env");class uS{constructor(e){this.arr=e,uE&&o6(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new uS(this.arr)}splice(e){let t=new uS(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){let r=this.arr.length;e.writeLen(r-t);for(let n=t;n<r;n++){let t=this.arr[n];e.writeAny(t)}}getRef(){return 8}}class u_{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new u_(this.str)}splice(e){let t=new u_(this.str.slice(e));this.str=this.str.slice(0,e);let r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",t.str=""+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}let uN=[e=>new cZ,e=>new c1,e=>new ua,e=>new uu(e.readKey()),e=>new uc,e=>new ud(e.readKey()),e=>new uf],uC=0,uO=1,uT=2,uI=3,uD=4,uj=5,uA=6;class uR{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new uR(this.type._copy())}splice(e){throw oO()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(t=>{for(;null!==t;)t.gc(e,!0),t=t.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}let uM=(e,t,r)=>{let{client:n,clock:i}=t.id,s=new uL(l9(n,i+r),t,l9(n,i+r-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(r));return t.deleted&&s.markDeleted(),t.keep&&(s.keep=!0),null!==t.redone&&(s.redone=l9(t.redone.client,t.redone.clock+r)),t.right=s,null!==s.right&&(s.right.left=s),e._mergeStructs.push(s),null!==s.parentSub&&null===s.right&&s.parent._map.set(s.parentSub,s),t.length=r,s};class uL extends up{constructor(e,t,r,n,i,s,o,a){super(e,a.getLength()),this.origin=r,this.left=t,this.right=n,this.rightOrigin=i,this.parent=s,this.parentSub=o,this.redone=null,this.content=a,this.info=2*!!this.content.isCountable()}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=cn(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=cn(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===l8&&this.id.client!==this.parent.client&&this.parent.clock>=cn(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=cc(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=cl(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===um||this.right&&this.right.constructor===um)this.parent=null;else if(this.parent){if(this.parent.constructor===l8){let e=co(t,this.parent);e.constructor===um?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===uL?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===uL&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=cc(e,e.doc.store,l9(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,r=this.left;if(null!==r)t=r.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;let n=new Set,i=new Set;for(;null!==t&&t!==this.right;){if(i.add(t),n.add(t),l6(this.origin,t.origin)){if(t.id.client<this.id.client)r=t,n.clear();else if(l6(this.rightOrigin,t.rightOrigin))break}else if(null!==t.origin&&i.has(co(e.doc.store,t.origin)))n.has(co(e.doc.store,t.origin))||(r=t,n.clear());else break;t=t.right}this.left=r}if(null!==this.left){let e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),ci(e.doc.store,this),this.content.integrate(e,this),cf(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new um(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:l9(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&l6(e.origin,this.lastId)&&this.right===e&&l6(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){let t=this.parent._searchMarker;return t&&t.forEach(t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){let t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),lF(e.deleteSet,this.id.client,this.id.clock,this.length),cf(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw oT();if(this.content.gc(e),t){var r;let t;r=new um(this.id,this.length),(t=e.clients.get(this.id.client))[cs(t,this.id.clock)]=r}else this.content=new uy(this.length)}write(e,t){let r=t>0?l9(this.id.client,this.id.clock+t-1):this.origin,n=this.rightOrigin,i=this.parentSub,s=31&this.content.getRef()|128*(null!==r)|64*(null!==n)|32*(null!==i);if(e.writeInfo(s),null!==r&&e.writeLeftID(r),null!==n&&e.writeRightID(n),null===r&&null===n){let t=this.parent;if(void 0!==t._item){let r=t._item;if(null===r){let r=(e=>{for(let[t,r]of e.doc.share.entries())if(r===e)return t;throw oT()})(t);e.writeParentInfo(!0),e.writeString(r)}else e.writeParentInfo(!1),e.writeLeftID(r.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===l8?(e.writeParentInfo(!1),e.writeLeftID(t)):oT();null!==i&&e.writeString(i)}this.content.write(e,t)}}let uF=(e,t)=>uP[31&t](e),uP=[()=>{oT()},e=>new uy(e.readLen()),e=>{let t=e.readLen(),r=[];for(let n=0;n<t;n++){let t=e.readString();"undefined"===t?r.push(void 0):r.push(JSON.parse(t))}return new uk(r)},e=>new ug(e.readBuf()),e=>new u_(e.readString()),e=>new ux(e.readJSON()),e=>new uw(e.readKey(),e.readJSON()),e=>new uR(uN[e.readTypeRef()](e)),e=>{let t=e.readLen(),r=[];for(let n=0;n<t;n++)r.push(e.readAny());return new uS(r)},e=>new uv(ub(e.readString(),e.readAny())),()=>{oT()}];class uU extends up{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){oT()}write(e,t){e.writeInfo(10),od(e.restEncoder,this.length-t)}getMissing(e,t){return null}}let uB="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:e.g,uV="__ $YJS$ __";!0===uB[uV]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),uB[uV]=!0;let uq=new Map,uz="undefined"==typeof BroadcastChannel?class{constructor(e){let t;this.room=e,this.onmessage=null,this._onChange=t=>t.key===e&&null!==this.onmessage&&this.onmessage({data:ah(t.newValue||"")}),t=this._onChange,oX||addEventListener("storage",t)}postMessage(e){oZ.setItem(this.room,au(new Uint8Array(e)))}close(){let e;e=this._onChange,oX||removeEventListener("storage",e)}}:BroadcastChannel,uW=e=>sW(uq,e,()=>{let t=s$(),r=new uz(e);return r.onmessage=e=>t.forEach(t=>t(e.data,"broadcastchannel")),{bc:r,subs:t}}),u$=(e,t,r=null)=>{let n=uW(e);n.bc.postMessage(t),n.subs.forEach(e=>e(t,r))},uQ=(e,t)=>{od(e,0),ob(e,((e,t=new lG)=>(e instanceof Map?l1(t,e):l1(t,cr(e.store)),t.toUint8Array()))(t,new lK))},uK=(e,t,r)=>{od(e,1),ob(e,lZ(t,r))};class uH extends sZ{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{let e=oH();null!==this.getLocalState()&&15e3<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());let t=[];this.meta.forEach((r,n)=>{n!==this.clientID&&3e4<=e-r.lastUpdated&&this.states.has(n)&&t.push(n)}),t.length>0&&uG(this,t,"timeout")},s0(3e3)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){let t=this.clientID,r=this.meta.get(t),n=void 0===r?0:r.clock+1,i=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:n,lastUpdated:oH()});let s=[],o=[],a=[],l=[];null===e?l.push(t):null==i?null!=e&&s.push(t):(o.push(t),ae(i,e)||a.push(t)),(s.length>0||a.length>0||l.length>0)&&this.emit("change",[{added:s,updated:a,removed:l},"local"]),this.emit("update",[{added:s,updated:o,removed:l},"local"])}setLocalStateField(e,t){let r=this.getLocalState();null!==r&&this.setLocalState({...r,[e]:t})}getStates(){return this.states}}let uG=(e,t,r)=>{let n=[];for(let r=0;r<t.length;r++){let i=t[r];if(e.states.has(i)){if(e.states.delete(i),i===e.clientID){let t=e.meta.get(i);e.meta.set(i,{clock:t.clock+1,lastUpdated:oH()})}n.push(i)}}n.length>0&&(e.emit("change",[{added:[],updated:[],removed:n},r]),e.emit("update",[{added:[],updated:[],removed:n},r]))},uJ=(e,t,r=e.states)=>{let n=t.length,i=ol();od(i,n);for(let s=0;s<n;s++){let n=t[s],o=r.get(n)||null,a=e.meta.get(n).clock;od(i,n),od(i,a),og(i,JSON.stringify(o))}return ou(i)},uY=[];uY[0]=(e,t,r,n,i)=>{od(e,0);let s=((e,t,r,n,i)=>{let s=oL(e);switch(s){case 0:uK(t,r,oR(e));break;case 1:case 2:var o=e,a=r,l=n,c=i;try{let e;e=oR(o),lX(a,e,l,lW)}catch(e){null!=c&&c(e),console.error("Caught error while handling a Yjs update",e)}break;default:throw Error("Unknown message type")}return s})(t,e,r.doc,r);n&&1===s&&!r.synced&&(r.synced=!0)},uY[3]=(e,t,r,n,i)=>{od(e,1),ob(e,uJ(r.awareness,Array.from(r.awareness.getStates().keys())))},uY[1]=(e,t,r,n,i)=>{((e,t,r)=>{let n=oA(t),i=oH(),s=[],o=[],a=[],l=[],c=oL(n);for(let t=0;t<c;t++){let t=oL(n),r=oL(n),c=JSON.parse(oP(n)),u=e.meta.get(t),h=e.states.get(t),d=void 0===u?0:u.clock;(d<r||d===r&&null===c&&e.states.has(t))&&(null===c?t===e.clientID&&null!=e.getLocalState()?r++:e.states.delete(t):e.states.set(t,c),e.meta.set(t,{clock:r,lastUpdated:i}),void 0===u&&null!==c?s.push(t):void 0!==u&&null===c?l.push(t):null!==c&&(ae(c,h)||a.push(t),o.push(t)))}(s.length>0||a.length>0||l.length>0)&&e.emit("change",[{added:s,updated:a,removed:l},r]),(s.length>0||o.length>0||l.length>0)&&e.emit("update",[{added:s,updated:o,removed:l},r])})(r.awareness,oR(t),r)},uY[2]=(e,t,r,n,i)=>{var s;s=r.doc,0===oL(t)&&((e,t)=>uX(r,t))(s,oP(t))};let uX=(e,t)=>console.warn(`Permission denied to access ${e.url}.
${t}`),uZ=(e,t,r)=>{let n=oA(t),i=ol(),s=oL(n),o=e.messageHandlers[s];return o?o(i,n,e,r,s):console.error("Unable to compute message"),i},u0=(e,t,r)=>{t===e.ws&&(e.emit("connection-close",[r,e]),e.ws=null,t.close(),e.wsconnecting=!1,e.wsconnected?(e.wsconnected=!1,e.synced=!1,uG(e.awareness,Array.from(e.awareness.getStates().keys()).filter(t=>t!==e.doc.clientID),e),e.emit("status",[{status:"disconnected"}])):e.wsUnsuccessfulReconnects++,setTimeout(u1,s2(100*s3(2,e.wsUnsuccessfulReconnects),e.maxBackoffTime),e))},u1=e=>{if(e.shouldConnect&&null===e.ws){let t=new e._WS(e.url,e.protocols);t.binaryType="arraybuffer",e.ws=t,e.wsconnecting=!0,e.wsconnected=!1,e.synced=!1,t.onmessage=r=>{e.wsLastMessageReceived=oH();let n=uZ(e,new Uint8Array(r.data),!0);oc(n)>1&&t.send(ou(n))},t.onerror=t=>{e.emit("connection-error",[t,e])},t.onclose=r=>{u0(e,t,r)},t.onopen=()=>{e.wsLastMessageReceived=oH(),e.wsconnecting=!1,e.wsconnected=!0,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"connected"}]);let r=ol();if(od(r,0),uQ(r,e.doc),t.send(ou(r)),null!==e.awareness.getLocalState()){let r=ol();od(r,1),ob(r,uJ(e.awareness,[e.doc.clientID])),t.send(ou(r))}},e.emit("status",[{status:"connecting"}])}},u2=(e,t)=>{let r=e.ws;e.wsconnected&&r&&r.readyState===r.OPEN&&r.send(t),e.bcconnected&&u$(e.bcChannel,t,e)};class u4 extends sX{constructor(e,t,r,{connect:n=!0,awareness:i=new uH(r),params:s={},protocols:o=[],WebSocketPolyfill:a=WebSocket,resyncInterval:l=-1,maxBackoffTime:c=2500,disableBc:u=!1}={}){for(super();"/"===e[e.length-1];)e=e.slice(0,e.length-1);this.serverUrl=e,this.bcChannel=e+"/"+t,this.maxBackoffTime=c,this.params=s,this.protocols=o,this.roomname=t,this.doc=r,this._WS=a,this.awareness=i,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=u,this.wsUnsuccessfulReconnects=0,this.messageHandlers=uY.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=n,this._resyncInterval=0,l>0&&(this._resyncInterval=setInterval(()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){let e=ol();od(e,0),uQ(e,r),this.ws.send(ou(e))}},l)),this._bcSubscriber=(e,t)=>{if(t!==this){let t=uZ(this,new Uint8Array(e),!1);oc(t)>1&&u$(this.bcChannel,ou(t),this)}},this._updateHandler=(e,t)=>{if(t!==this){let t=ol();od(t,0),od(t,2),ob(t,e),u2(this,ou(t))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:e,updated:t,removed:r},n)=>{let s=e.concat(t).concat(r),o=ol();od(o,1),ob(o,uJ(i,s)),u2(this,ou(o))},this._exitHandler=()=>{uG(this.awareness,[r.clientID],"app closed")},at&&void 0!==sm.default&&sm.default.on("exit",this._exitHandler),i.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&3e4<oH()-this.wsLastMessageReceived&&u0(this,this.ws,null)},3e3),n&&this.connect()}get url(){let e=((e,t)=>{let r=[];for(let n in e)r.push(t(e[n],n));return r})(this.params,(e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).join("&");return this.serverUrl+"/"+this.roomname+(0===e.length?"":"?"+e)}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){0!==this._resyncInterval&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),at&&void 0!==sm.default&&sm.default.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;if(!this.bcconnected){var e,t;e=this.bcChannel,t=this._bcSubscriber,uW(e).subs.add(t),this.bcconnected=!0}let r=ol();od(r,0),uQ(r,this.doc),u$(this.bcChannel,ou(r),this);let n=ol();od(n,0),uK(n,this.doc),u$(this.bcChannel,ou(n),this);let i=ol();od(i,3),u$(this.bcChannel,ou(i),this);let s=ol();od(s,1),ob(s,uJ(this.awareness,[this.doc.clientID])),u$(this.bcChannel,ou(s),this)}disconnectBc(){let e=ol();if(od(e,1),ob(e,uJ(this.awareness,[this.doc.clientID],new Map)),u2(this,ou(e)),this.bcconnected){var t,r;let e;t=this.bcChannel,r=this._bcSubscriber,(e=uW(t)).subs.delete(r)&&0===e.subs.size&&(e.bc.close(),uq.delete(t)),this.bcconnected=!1}}disconnect(){this.shouldConnect=!1,this.disconnectBc(),null!==this.ws&&u0(this,this.ws,null)}connect(){this.shouldConnect=!0,this.wsconnected||null!==this.ws||(u1(this),this.connectBc())}}class u3{doc;provider;documentId;userId;syncCallbacks=[];awarenessCallbacks=[];constructor(e,t){this.documentId=e,this.userId=t,this.doc=new lq,this.provider=new u4(sm.default.env.WEBSOCKET_URL||"ws://localhost:3001",e,this.doc,{connect:!0,params:{userId:t,room:e}}),this.setupUserAwareness(),this.setupEventListeners()}setupUserAwareness(){this.provider.awareness.setLocalStateField("user",{id:this.userId,name:this.getUserName(),email:this.getUserEmail(),color:this.getUserColor(this.userId),cursor:{x:0,y:0},isActive:!0})}setupEventListeners(){this.provider.on("status",e=>{let t="connected"===e.status;this.syncCallbacks.forEach(e=>e(t))}),this.provider.on("sync",e=>{this.syncCallbacks.forEach(t=>t(e))}),this.provider.awareness.on("update",e=>{this.awarenessCallbacks.forEach(t=>t(e))}),this.provider.on("connect",()=>{console.log(`Connected to room: ${this.documentId}`),this.syncCallbacks.forEach(e=>e(!0))}),this.provider.on("disconnect",()=>{console.log(`Disconnected from room: ${this.documentId}`),this.syncCallbacks.forEach(e=>e(!1))})}getText(e="content"){return this.doc.getText(e)}getArray(e="tasks"){return this.doc.getArray(e)}getMap(e="drawing"){return this.doc.getMap(e)}getConnectedUsers(){return this.provider?.awareness?Array.from(this.provider.awareness.getStates().values()).filter(e=>e.user&&e.user.id!==this.userId).map(e=>({id:e.user.id,name:e.user.name||`User ${e.user.id}`,email:e.user.email||"",cursor:e.user.cursor||{x:0,y:0},color:e.user.color||this.getUserColor(e.user.id),isActive:!1!==e.user.isActive,lastSeen:new Date().toISOString()})):[]}updateCursor(e,t){if(!this.provider?.awareness)return;let r={...(this.provider.awareness.getLocalState()||{}).user,cursor:{x:e,y:t}};this.provider.awareness.setLocalStateField("user",r)}getDocument(){return this.doc}async syncWithDatabase(e){if(e)try{let t,r,n=new Uint8Array(e);t=this.doc,lX(t,n,r,lW)}catch(e){console.error("Error applying database update:",e)}try{let e=lZ(this.doc);return sV.Buffer.from(e)}catch(e){return console.error("Error encoding state:",e),sV.Buffer.alloc(0)}}onSync(e){this.syncCallbacks.push(e)}onAwarenessUpdate(e){this.awarenessCallbacks.push(e)}getUserColor(e){let t=["#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899"],r=e.charCodeAt(0)%t.length;return t[r]}getUserName(){try{let e=document.querySelector("[data-session]");if(e){let t=e.getAttribute("data-session");if(t){let e=JSON.parse(t);return e.user?.name||`User ${this.userId}`}}}catch{return localStorage.getItem("next-auth.session-token")?`User ${this.userId}`:"Anonymous User"}return`User ${this.userId}`}getUserEmail(){try{let e=document.querySelector("[data-session]");if(e){let t=e.getAttribute("data-session");if(t){let e=JSON.parse(t);return e.user?.email||""}}}catch{}return""}destroy(){this.provider&&this.provider.destroy(),this.doc.destroy(),this.syncCallbacks=[],this.awarenessCallbacks=[]}}function u5(e,...[t={}]){let r=iK(t.client),{skip:n,fetchPolicy:i,errorPolicy:s,shouldResubscribe:o,context:a,extensions:l,ignoreResults:c}=t,u=iz(()=>t.variables,[t.variables]),h=()=>{var t,n,o,c,h;let d,f;return t=r,n=e,o=u,c=i,h=s,f={...d={query:n,variables:o,fetchPolicy:c,errorPolicy:h,context:a,extensions:l},client:t,completed:!1,result:{loading:!0,data:void 0,error:void 0},setResult(e){f.result=e}},Object.assign(t.subscribe(d),{__:f})},[d,f]=S.useState(t.skip?null:h),p=S.useRef(h);i5(()=>{p.current=h}),n?d&&f(d=null):d&&(r===d.__.client&&e===d.__.query&&i===d.__.fetchPolicy&&s===d.__.errorPolicy&&rv(u,d.__.variables)||("function"==typeof o?!!o(t):o)===!1)||f(d=h());let m=S.useRef(t);S.useEffect(()=>{m.current=t});let g=!n&&!c,y=S.useMemo(()=>({loading:g,error:void 0,data:void 0}),[g]),b=S.useRef(c);i5(()=>{b.current=c});let v=iZ(S.useCallback(e=>{if(!d)return()=>{};let t=!1,r=d.__.client,n=d.subscribe({next(n){if(t)return;let i={loading:!1,data:n.data,error:n.error};d.__.setResult(i),b.current||e(),i.error?m.current.onError?.(i.error):m.current.onData&&m.current.onData({client:r,data:i})},complete(){d.__.completed=!0,!t&&m.current.onComplete&&m.current.onComplete()}});return()=>{t=!0,setTimeout(()=>n.unsubscribe())}},[d]),()=>!d||n||c?y:d.__.result,()=>y),x=S.useCallback(()=>{eO(!m.current.skip,33),d?.__.completed?f(p.current()):d?.restart()},[m,p,d]);return S.useMemo(()=>({...v,restart:x}),[v,x])}let u8=sN`
  query GetDocument($id: String!) {
    document(id: $id) {
      id
      title
      type
      content
      createdAt
      updatedAt
      owner {
        id
        name
        email
      }
    }
  }
`,u6=sN`
  subscription DocumentUpdated($documentId: String!) {
    documentUpdated(documentId: $documentId) {
      id
      title
      content
      updatedAt
    }
  }
`,u9=sN`
  mutation UpdateDocument($id: String!, $title: String) {
    updateDocument(id: $id, title: $title) {
      id
      title
      updatedAt
    }
  }
`,u7=sN`
  subscription ActiveUsers($documentId: String!) {
    activeUsers(documentId: $documentId) {
      id
      name
      email
      cursor {
        x
        y
      }
      color
      isActive
      lastSeen
    }
  }
`;function he({documentId:e,documentType:t}){let{data:r}=(0,_.useSession)(),[n,i]=(0,S.useState)(null),[s,o]=(0,S.useState)(""),[a,l]=(0,S.useState)([]),[c,u]=(0,S.useState)({id:e,type:t}),[h,d]=(0,S.useState)(!1),[f,p]=(0,S.useState)(!1),[m,g]=(0,S.useState)(!1),[y,b]=(0,S.useState)(null);(0,S.useRef)(null);let v=(0,S.useRef)(null),x=(0,S.useMemo)(()=>new nf({link:new iT({uri:"/api/graphql",credentials:"include",headers:r?.user?.id?{"x-user-id":r.user.id}:{}}),cache:new im}),[r?.user?.id]),{data:w}=i2(u8,{variables:{id:e},skip:!e,client:x}),{data:k}=u5(u6,{variables:{documentId:e},skip:!e}),{data:N}=u5(u7,{variables:{documentId:e},skip:!e}),[C]=i8(u9,{client:x,context:{headers:{...r&&{"x-user-id":r.user?.id||""}}}});(0,S.useEffect)(()=>{w?.document?.title&&o(e=>e||w.document.title)},[w?.document?.title]),(0,S.useEffect)(()=>{if(!r?.user?.id||!e)return;let t=new u3(e,r.user.id);return i(t),t.onSync(d),t.onAwarenessUpdate(()=>{l(t.getConnectedUsers())}),()=>t.destroy()},[e,r?.user?.id]),(0,S.useEffect)(()=>{k?.documentUpdated&&n&&console.log("Document updated:",k.documentUpdated)},[k,n]),(0,S.useEffect)(()=>{N?.activeUsers&&l(N.activeUsers)},[N]);let O=e=>{let t=["#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899"],r=e.charCodeAt(0)%t.length;return t[r]},T=(0,S.useCallback)(async()=>{if(n&&!m)try{g(!0),console.log("Starting save process for document type:",t);let r=await n.syncWithDatabase();console.log("Content synced, size:",r.length),console.log("Document title being saved:",s);let i=await C({variables:{id:e,title:s}});console.log("GraphQL update result:",i),b(new Date),console.log("Document saved successfully"),i?.data?.updateDocument&&(console.log("Document updated in database"),alert("Document saved successfully!"))}catch(e){console.error("Save failed:",e),alert(`Save failed: ${e instanceof Error?e.message:"Unknown error"}`)}finally{g(!1)}},[n,e,s,C,m]),I=(0,S.useMemo)(()=>{if(!n)return null;switch(t){case"writing":return(0,E.jsx)(ht,{crdtProvider:n,onSave:T});case"drawing":return(0,E.jsx)(hr,{crdtProvider:n,canvasRef:v,onSave:T});case"planning":return(0,E.jsx)(hn,{crdtProvider:n,onSave:T});default:return null}},[t,n,T]);return(0,S.useEffect)(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),T())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[T]),(0,E.jsxs)("div",{className:"flex flex-col h-full",children:[(0,E.jsx)("div",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,E.jsxs)("div",{className:"container flex h-16 items-center justify-between px-4",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsx)("div",{className:`w-2 h-2 rounded-full ${h?"bg-green-500":"bg-red-500"}`}),(0,E.jsx)("span",{className:"text-sm text-muted-foreground",children:h?"Connected":"Disconnected"})]}),(0,E.jsxs)("div",{className:"flex items-center space-x-2 bg-muted/50 px-3 py-2 rounded-md border",children:[(0,E.jsx)("span",{className:"text-xs text-muted-foreground",children:"Room:"}),(0,E.jsx)("span",{className:"font-mono font-bold text-primary text-sm",children:c.id}),(0,E.jsx)(sO.Button,{variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(c.id),p(!0),setTimeout(()=>p(!1),2e3)},className:"ml-2",title:"Copy Room ID",children:" Copy"})]}),(0,E.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Type:"," ",(0,E.jsx)("span",{className:"font-medium text-foreground capitalize",children:c.type})]})]}),(0,E.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsx)("div",{className:"flex -space-x-2",children:a.map(e=>(0,E.jsx)("div",{className:"w-6 h-6 rounded-full border-2 border-background flex items-center justify-center",style:{backgroundColor:O(e.id)},title:e.name||e.email,children:(0,E.jsx)("span",{className:"text-xs text-white font-medium",children:e.name?.[0]||e.email?.[0]||"U"})},e.id))}),(0,E.jsxs)("span",{className:"text-sm text-muted-foreground",children:[a.length," active"]})]}),(0,E.jsx)(sO.Button,{onClick:T,disabled:m,className:"flex items-center space-x-2",children:m?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Saving..."]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V2"})}),"Save"]})})]})]})}),(0,E.jsx)("div",{className:"border-b bg-muted/30 px-4 py-3",children:(0,E.jsx)("input",{type:"text",value:s,onChange:e=>{o(e.target.value)},className:"text-xl font-semibold bg-transparent border-none outline-none w-full",placeholder:"Document title"})}),(0,E.jsxs)("div",{className:"flex-1 relative overflow-hidden",children:[I,"drawing"===t&&a.map(e=>e.cursor&&(0,E.jsx)("div",{className:"absolute w-4 h-4 rounded-full border-2 border-white pointer-events-none",style:{left:e.cursor.x,top:e.cursor.y,backgroundColor:O(e.id),transform:"translate(-50%, -50%)"},title:e.name||e.email},e.id))]}),(0,E.jsx)("div",{className:"border-t bg-muted/30 px-4 py-2",children:(0,E.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,E.jsxs)("div",{children:["Last updated: ",y?y.toLocaleTimeString():new Date().toLocaleTimeString()]}),(0,E.jsx)("div",{children:a.map(e=>(0,E.jsxs)("span",{className:"inline-flex items-center mr-3",children:[(0,E.jsx)("div",{className:"w-2 h-2 rounded-full mr-1",style:{backgroundColor:O(e.id)}}),e.name||e.email]},e.id))})]})}),f&&(0,E.jsx)("div",{className:"fixed bottom-4 right-4 bg-primary text-primary-foreground px-4 py-2 rounded-md shadow-lg z-50",children:(0,E.jsx)("div",{className:"flex items-center space-x-2",children:(0,E.jsx)("span",{children:" Room ID copied to clipboard!"})})})]})}function ht({crdtProvider:e,onSave:t}){let[r,n]=(0,S.useState)(""),[i,s]=(0,S.useState)(!1),[o,a]=(0,S.useState)(null),[l,c]=(0,S.useState)(0),[u,h]=(0,S.useState)(0),[d,f]=(0,S.useState)(0),[p,m]=(0,S.useState)(!1),[g,y]=(0,S.useState)("16"),[b,v]=(0,S.useState)(!0);(0,S.useEffect)(()=>{if(!e)return;let t=e.getText("content");n(t.toString());let r=()=>{let e=t.toString();n(e),x(e);let r=setTimeout(()=>{w()},1e3);return()=>clearTimeout(r)};return t.observe(r),()=>t.unobserve(r)},[e]);let x=e=>{let t=e.trim().split(/\s+/).filter(e=>e.length>0).length,r=e.length,n=Math.ceil(t/200);c(t),h(r),f(n)},w=async()=>{if(e&&!i){s(!0);try{await e.syncWithDatabase(),console.log("Writing content auto-saved"),a(new Date)}catch(e){console.error("Auto-save failed:",e)}finally{s(!1)}}},k=t=>{if(!e)return;let r=e.getText("content"),i=r.toString(),s=i;switch(t){case"uppercase":s=i.toUpperCase();break;case"lowercase":s=i.toLowerCase();break;case"clear":s=""}r.delete(0,r.length),r.insert(0,s),n(s),x(s)};return(0,E.jsxs)("div",{className:`flex flex-col h-full ${p?"fixed inset-0 z-50 bg-background":""}`,children:[b&&(0,E.jsx)("div",{className:"border-b bg-muted/30 px-4 py-2",children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"px-2 py-1 text-xs border border-input rounded focus:outline-none focus:ring-1 focus:ring-ring",children:[(0,E.jsx)("option",{value:"12",children:"12px"}),(0,E.jsx)("option",{value:"14",children:"14px"}),(0,E.jsx)("option",{value:"16",children:"16px"}),(0,E.jsx)("option",{value:"18",children:"18px"}),(0,E.jsx)("option",{value:"20",children:"20px"}),(0,E.jsx)("option",{value:"24",children:"24px"})]}),(0,E.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,E.jsx)(sO.Button,{variant:"ghost",size:"sm",onClick:()=>k("uppercase"),title:"Uppercase",children:"Aa"}),(0,E.jsx)(sO.Button,{variant:"ghost",size:"sm",onClick:()=>k("lowercase"),title:"Lowercase",children:"aa"}),(0,E.jsx)(sO.Button,{variant:"ghost",size:"sm",onClick:()=>k("clear"),title:"Clear",children:"Clear"})]}),(0,E.jsx)(sO.Button,{variant:"ghost",size:"sm",onClick:()=>{let e=new Blob([r],{type:"text/plain"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="document.txt",n.click(),URL.revokeObjectURL(t)},title:"Export",children:(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]}),(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsx)(sO.Button,{variant:"ghost",size:"sm",onClick:()=>v(!b),title:"Toggle Toolbar",children:(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,E.jsxs)(sO.Button,{variant:"default",size:"sm",onClick:t,disabled:!t,title:"Save Document (Ctrl+S)",children:[(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V2"})}),"Save"]}),(0,E.jsx)(sO.Button,{variant:"ghost",size:"sm",onClick:()=>m(!p),title:"Toggle Fullscreen",children:(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]})]})}),(0,E.jsx)("div",{className:"border-b bg-muted/20 px-4 py-1",children:(0,E.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,E.jsxs)("span",{children:["Words: ",l]}),(0,E.jsxs)("span",{children:["Characters: ",u]}),(0,E.jsxs)("span",{children:["Reading time: ",d," min"]})]}),o&&(0,E.jsxs)("span",{children:["Last saved: ",o.toLocaleTimeString()]})]})}),(0,E.jsx)("div",{className:"flex-1 p-4",children:(0,E.jsx)("textarea",{value:r,onChange:t=>{let r=t.target.value;if(n(r),x(r),e){let t=e.getText("content");t.delete(0,t.length),t.insert(0,r)}},className:"w-full h-full p-4 border border-input rounded-md bg-background text-foreground resize-none focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",style:{fontSize:`${g}px`},placeholder:"Start writing your document..."})}),(0,E.jsxs)("div",{className:"border-t bg-muted/30 px-4 py-2 flex items-center justify-between text-xs text-muted-foreground",children:[(0,E.jsx)("div",{className:"flex items-center space-x-2",children:i?(0,E.jsxs)("span",{className:"flex items-center text-blue-600",children:[(0,E.jsx)("svg",{className:"w-3 h-3 mr-1 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Saving..."]}):o?(0,E.jsxs)("span",{className:"flex items-center text-green-600",children:[(0,E.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Saved ",o.toLocaleTimeString()]}):(0,E.jsx)("span",{children:"Ready to save"})}),(0,E.jsx)("div",{className:"text-xs",children:"Auto-save enabled"})]})]})}function hr({crdtProvider:e,canvasRef:t,onSave:r}){let[n,i]=(0,S.useState)(!1),[s,o]=(0,S.useState)(null),[a,l]=(0,S.useState)(!1),[c,u]=(0,S.useState)("pen"),[h,d]=(0,S.useState)("#3b82f6"),[f,p]=(0,S.useState)(2),[m,g]=(0,S.useState)(!0);return(0,S.useEffect)(()=>{if(!e||!t.current)return;let r=t.current,s=r.getContext("2d");if(!s)return;r.width=r.offsetWidth,r.height=r.offsetHeight;let u=e.getMap("drawing"),d=0,p=0,m=0,g=0,y=async()=>{if(e&&!n){i(!0);try{await e.syncWithDatabase(),console.log("Drawing auto-saved"),o(new Date)}catch(e){console.error("Drawing auto-save failed:",e)}finally{i(!1)}}},b=()=>{s.clearRect(0,0,r.width,r.height),(u.get("paths")||[]).forEach(e=>{s.strokeStyle=e.color,s.lineWidth=e.lineWidth,s.lineCap="round","line"===e.type?(s.beginPath(),s.moveTo(e.from.x,e.from.y),s.lineTo(e.to.x,e.to.y),s.stroke()):"rectangle"===e.type?(s.beginPath(),s.rect(e.x,e.y,e.width,e.height),s.stroke()):"circle"===e.type&&(s.beginPath(),s.arc(e.x,e.y,e.radius,0,2*Math.PI),s.stroke())})},v=e=>{let t=r.getBoundingClientRect();d=e.clientX-t.left,p=e.clientY-t.top,m=d,g=p,l(!0),"eraser"===c?(s.globalCompositeOperation="destination-out",s.lineWidth=3*f):(s.globalCompositeOperation="source-over",s.strokeStyle=h,s.lineWidth=f)},x=e=>{if(!a)return;let t=r.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;if("pen"===c||"eraser"===c){s.beginPath(),s.moveTo(d,p),s.lineTo(n,i),s.stroke();let e=u.get("paths")||[];e.push({type:"line",from:{x:d,y:p},to:{x:n,y:i},color:h,lineWidth:f,tool:c}),u.set("paths",e),d=n,p=i}else if("rectangle"===c||"circle"===c)if(b(),s.strokeStyle=h,s.lineWidth=f,"rectangle"===c)s.beginPath(),s.rect(m,g,n-m,i-g),s.stroke();else{let e=Math.sqrt(Math.pow(n-m,2)+Math.pow(i-g,2));s.beginPath(),s.arc(m,g,e,0,2*Math.PI),s.stroke()}setTimeout(y,1e3)},w=()=>{if(a){if("rectangle"===c||"circle"===c){let e=r.getBoundingClientRect(),t=event instanceof MouseEvent?event.clientX-e.left:m,n=event instanceof MouseEvent?event.clientY-e.top:g,i=u.get("paths")||[];if("rectangle"===c)i.push({type:"rectangle",x:Math.min(m,t),y:Math.min(g,n),width:Math.abs(t-m),height:Math.abs(n-g),color:h,lineWidth:f});else{let e=Math.sqrt(Math.pow(t-m,2)+Math.pow(n-g,2));i.push({type:"circle",x:m,y:g,radius:e,color:h,lineWidth:f})}u.set("paths",i)}l(!1),y()}};return b(),r.addEventListener("mousedown",v),r.addEventListener("mousemove",x),r.addEventListener("mouseup",w),r.addEventListener("mouseout",w),()=>{r.removeEventListener("mousedown",v),r.removeEventListener("mousemove",x),r.removeEventListener("mouseup",w),r.removeEventListener("mouseout",w)}},[e,c,h,f,n]),(0,E.jsxs)("div",{className:"flex flex-col h-full",children:[m&&(0,E.jsx)("div",{className:"border-b bg-muted/30 px-4 py-2",children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,E.jsx)(sO.Button,{variant:"pen"===c?"default":"ghost",size:"sm",onClick:()=>u("pen"),title:"Pen",children:(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),(0,E.jsx)(sO.Button,{variant:"eraser"===c?"default":"ghost",size:"sm",onClick:()=>u("eraser"),title:"Eraser",children:(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),(0,E.jsx)(sO.Button,{variant:"rectangle"===c?"default":"ghost",size:"sm",onClick:()=>u("rectangle"),title:"Rectangle",children:(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("rect",{x:"4",y:"6",width:"16",height:"12",strokeWidth:2})})}),(0,E.jsx)(sO.Button,{variant:"circle"===c?"default":"ghost",size:"sm",onClick:()=>u("circle"),title:"Circle",children:(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("circle",{cx:"12",cy:"12",r:"8",strokeWidth:2})})})]}),(0,E.jsx)("div",{className:"flex items-center space-x-1",children:["#000000","#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899","#6b7280"].map(e=>(0,E.jsx)("button",{onClick:()=>d(e),className:`w-6 h-6 rounded border-2 ${h===e?"border-ring":"border-border"}`,style:{backgroundColor:e},title:e},e))}),(0,E.jsxs)("select",{value:f,onChange:e=>p(Number(e.target.value)),className:"px-2 py-1 text-xs border border-input rounded focus:outline-none focus:ring-1 focus:ring-ring",children:[(0,E.jsx)("option",{value:"1",children:"Thin"}),(0,E.jsx)("option",{value:"2",children:"Normal"}),(0,E.jsx)("option",{value:"4",children:"Medium"}),(0,E.jsx)("option",{value:"8",children:"Thick"})]}),(0,E.jsx)(sO.Button,{variant:"ghost",size:"sm",onClick:()=>{if(!e||!t.current)return;e.getMap("drawing").set("paths",[]);let r=t.current,n=r.getContext("2d");n&&n.clearRect(0,0,r.width,r.height)},title:"Clear Canvas",children:(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,E.jsx)(sO.Button,{variant:"ghost",size:"sm",onClick:()=>{if(!t.current)return;let e=t.current.toDataURL("image/png"),r=document.createElement("a");r.href=e,r.download="drawing.png",r.click()},title:"Export",children:(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]}),(0,E.jsx)(sO.Button,{variant:"ghost",size:"sm",onClick:()=>g(!m),title:"Toggle Toolbar",children:(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,E.jsxs)(sO.Button,{variant:"default",size:"sm",onClick:r,disabled:!r,title:"Save Document (Ctrl+S)",children:[(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V2"})}),"Save"]})]})}),(0,E.jsx)("div",{className:"flex-1 p-4",children:(0,E.jsx)("canvas",{ref:t,className:"w-full h-full border border-input rounded-md bg-white cursor-crosshair",style:{touchAction:"none"}})}),(0,E.jsxs)("div",{className:"border-t bg-muted/30 px-4 py-2 flex items-center justify-between text-xs text-muted-foreground",children:[(0,E.jsx)("div",{className:"flex items-center space-x-2",children:n?(0,E.jsxs)("span",{className:"flex items-center text-blue-600",children:[(0,E.jsx)("svg",{className:"w-3 h-3 mr-1 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Saving drawing..."]}):s?(0,E.jsxs)("span",{className:"flex items-center text-green-600",children:[(0,E.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Saved ",s.toLocaleTimeString()]}):(0,E.jsx)("span",{children:"Ready to draw"})}),(0,E.jsx)("div",{className:"text-xs",children:"Auto-save enabled"})]})]})}function hn({crdtProvider:e,onSave:t}){let[r,n]=(0,S.useState)([]),[i,s]=(0,S.useState)(!1),[o,a]=(0,S.useState)(null),[l,c]=(0,S.useState)(""),[u,h]=(0,S.useState)("all"),[d,f]=(0,S.useState)("date");(0,S.useEffect)(()=>{if(!e)return;let t=e.getArray("tasks");n(t.toJSON());let r=()=>{n(t.toJSON()),setTimeout(p,1e3)};return t.observe(r),()=>t.unobserve(r)},[e]);let p=async()=>{if(e&&!i){s(!0);try{await e.syncWithDatabase(),console.log("Planning tasks auto-saved"),a(new Date)}catch(e){console.error("Planning auto-save failed:",e)}finally{s(!1)}}},m=()=>{e&&l.trim()&&(e.getArray("tasks").push([{id:Date.now(),text:l.trim(),completed:!1,priority:"medium",createdAt:new Date().toISOString(),dueDate:null,tags:[]}]),c(""))},g=(t,r)=>{if(!e)return;let n=e.getArray("tasks"),i=n.get(t);n.delete(t),n.insert(t,[{...i,...r}])},y=[...r.filter(e=>"active"===u?!e.completed:"completed"!==u||e.completed)].sort((e,t)=>{if("date"===d)return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime();if("priority"===d){let r={high:3,medium:2,low:1};return r[t.priority]-r[e.priority]}return"name"===d?e.text.localeCompare(t.text):0}),b={total:r.length,completed:r.filter(e=>e.completed).length,active:r.filter(e=>!e.completed).length};return(0,E.jsxs)("div",{className:"flex flex-col h-full",children:[(0,E.jsxs)("div",{className:"flex-1 p-4",children:[(0,E.jsx)("div",{className:"mb-4 p-3 bg-muted/50 rounded-lg",children:(0,E.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,E.jsxs)("div",{className:"flex space-x-4",children:[(0,E.jsxs)("span",{className:"font-medium",children:["Total: ",b.total]}),(0,E.jsxs)("span",{className:"text-blue-600",children:["Active: ",b.active]}),(0,E.jsxs)("span",{className:"text-green-600",children:["Completed: ",b.completed]})]}),(0,E.jsxs)("div",{className:"text-xs text-muted-foreground",children:[b.total>0?Math.round(b.completed/b.total*100):0,"% complete"]})]})}),(0,E.jsxs)("div",{className:"mb-4 flex flex-wrap gap-2",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),onKeyPress:e=>"Enter"===e.key&&m(),placeholder:"Add a new task...",className:"px-3 py-2 border border-input rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring"}),(0,E.jsx)(sO.Button,{onClick:m,size:"sm",disabled:!l.trim(),children:"Add Task"}),(0,E.jsxs)(sO.Button,{variant:"default",size:"sm",onClick:t,disabled:!t,title:"Save Document (Ctrl+S)",children:[(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V2"})}),"Save"]})]}),(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"px-3 py-2 border border-input rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring",children:[(0,E.jsx)("option",{value:"all",children:"All Tasks"}),(0,E.jsx)("option",{value:"active",children:"Active"}),(0,E.jsx)("option",{value:"completed",children:"Completed"})]}),(0,E.jsxs)("select",{value:d,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-input rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring",children:[(0,E.jsx)("option",{value:"date",children:"Sort by Date"}),(0,E.jsx)("option",{value:"priority",children:"Sort by Priority"}),(0,E.jsx)("option",{value:"name",children:"Sort by Name"})]})]})]}),(0,E.jsx)("div",{className:"space-y-2",children:0===y.length?(0,E.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"completed"===u?"No completed tasks yet":"active"===u?"No active tasks":"No tasks yet. Add one above!"}):y.map((t,n)=>{let i=r.findIndex(e=>e.id===t.id);return(0,E.jsxs)("div",{className:`flex items-center space-x-3 p-3 border border-input rounded-md transition-colors ${t.completed?"bg-muted/30":"bg-background"}`,children:[(0,E.jsx)("input",{type:"checkbox",checked:t.completed,onChange:()=>{let e;return e=r[i],void g(i,{completed:!e.completed})},className:"w-4 h-4"}),(0,E.jsxs)("div",{className:"flex-1",children:[(0,E.jsxs)("div",{className:`flex items-center space-x-2 ${t.completed?"line-through text-muted-foreground":""}`,children:[(0,E.jsx)("span",{className:"font-medium",children:t.text}),(0,E.jsx)("span",{className:`px-2 py-1 text-xs rounded-full ${"high"===t.priority?"bg-red-100 text-red-700":"medium"===t.priority?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:t.priority})]}),(0,E.jsxs)("div",{className:"flex items-center space-x-2 mt-1 text-xs text-muted-foreground",children:[(0,E.jsxs)("span",{children:["Created ",new Date(t.createdAt).toLocaleDateString()]}),t.dueDate&&(0,E.jsxs)("span",{children:[" Due ",new Date(t.dueDate).toLocaleDateString()]})]})]}),(0,E.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,E.jsxs)("select",{value:t.priority,onChange:e=>g(i,{priority:e.target.value}),className:"px-2 py-1 text-xs border border-input rounded focus:outline-none focus:ring-1 focus:ring-ring",children:[(0,E.jsx)("option",{value:"low",children:"Low"}),(0,E.jsx)("option",{value:"medium",children:"Medium"}),(0,E.jsx)("option",{value:"high",children:"High"})]}),(0,E.jsx)(sO.Button,{variant:"ghost",size:"sm",onClick:()=>{!e||e.getArray("tasks").delete(i)},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},t.id)})})]}),(0,E.jsxs)("div",{className:"border-t bg-muted/30 px-4 py-2 flex items-center justify-between text-xs text-muted-foreground",children:[(0,E.jsx)("div",{className:"flex items-center space-x-2",children:i?(0,E.jsxs)("span",{className:"flex items-center text-blue-600",children:[(0,E.jsx)("svg",{className:"w-3 h-3 mr-1 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Saving tasks..."]}):o?(0,E.jsxs)("span",{className:"flex items-center text-green-600",children:[(0,E.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Saved ",o.toLocaleTimeString()]}):(0,E.jsx)("span",{children:"Ready to plan"})}),(0,E.jsx)("div",{className:"text-xs",children:"Auto-save enabled"})]})]})}let hi=({client:e,children:t})=>{let r=iQ(),n=S.useContext(r),i=S.useMemo(()=>({...n,client:e||n.client}),[n,e]);return eO(i.client,38),S.createElement(r.Provider,{value:i},t)},hs=new nf({link:new iT({uri:"/api/graphql"}),cache:new im});function ho(){let{data:e,status:t}=(0,_.useSession)(),r=(0,N.useRouter)(),[n,i]=(0,S.useState)(null);return((0,S.useEffect)(()=>{"loading"!==t&&(e||r.push("/auth/signin"))},[e,t,r]),"loading"===t)?(0,E.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,E.jsxs)("div",{className:"text-center",children:[(0,E.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),(0,E.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):e?(0,E.jsx)(hi,{client:hs,children:(0,E.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,E.jsx)("header",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,E.jsxs)("div",{className:"container flex h-16 items-center",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-4",children:[n&&(0,E.jsx)(sO.Button,{variant:"ghost",size:"sm",onClick:()=>{i(null)},children:" Back"}),(0,E.jsx)("h1",{className:"text-xl font-semibold",children:"Collaborative Workspace"})]}),(0,E.jsxs)("div",{className:"ml-auto flex items-center space-x-4",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:(0,E.jsx)("span",{className:"text-sm font-medium text-primary",children:e.user?.name?.[0]||e.user?.email?.[0]||"U"})}),(0,E.jsx)("span",{className:"text-sm text-muted-foreground hidden sm:block",children:e.user?.name||e.user?.email})]}),(0,E.jsx)(sO.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,E.jsx)("a",{href:"/api/auth/signout",children:"Sign out"})})]})]})}),(0,E.jsx)("div",{className:"flex h-[calc(100vh-4rem)]",children:n?(0,E.jsx)("div",{className:"flex-1",children:(0,E.jsx)(he,{documentId:n.id,documentType:n.type})}):(0,E.jsxs)("div",{className:"flex flex-1",children:[(0,E.jsx)("div",{className:"w-80 border-r bg-muted/0",children:(0,E.jsx)(sB,{onDocumentSelect:(e,t)=>{i({id:e,type:t})}})}),(0,E.jsx)("div",{className:"flex-1 flex items-center justify-center p-8",children:(0,E.jsxs)(sI.Card,{className:"w-full max-w-md text-center",children:[(0,E.jsxs)(sI.CardHeader,{children:[(0,E.jsx)("div",{className:"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:(0,E.jsx)("svg",{className:"w-8 h-8 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,E.jsx)(sI.CardTitle,{children:"Welcome to your workspace"}),(0,E.jsx)(sI.CardDescription,{children:"Select a document from the sidebar to start collaborating"})]}),(0,E.jsx)(sI.CardContent,{children:(0,E.jsxs)("div",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,E.jsx)("p",{children:" Create and edit documents together"}),(0,E.jsx)("p",{children:" Draw and sketch in real-time"}),(0,E.jsx)("p",{children:" Plan and organize collaboratively"})]})})]})})]})})]})}):null}e.s(["default",()=>ho],30257)}]);